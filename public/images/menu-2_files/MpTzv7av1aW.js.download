;/*FB_PKG_DELIM*/

__d("ReactStrictDomWeb",["react","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s=["for","style"],u,c,d=(c||(c=o("react"))).jsx,m={};function p(e){process.env.NODE_ENV!=="test"&&m[e]||(m[e]=!0,""+e)}var _=new Set(["alt","aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","autoCapitalize","autoComplete","autoFocus","checked","children","crossOrigin","decoding","defaultChecked","defaultValue","dir","disabled","download","draggable","elementTiming","enterKeyHint","fetchPriority","for","height","hidden","href","id","inert","inputMode","label","lang","loading","max","maxLength","min","minLength","multiple","name","onAuxClick","onBeforeInput","onBlur","onChange","onClick","onContextMenu","onCopy","onCut","onError","onFocus","onFocusIn","onFocusOut","onFullscreenChange","onFullscreenError","onGotPointerCapture","onInput","onInvalid","onKeyDown","onKeyUp","onLoad","onLostPointerCapture","onPaste","onPointerCancel","onPointerDown","onPointerEnter","onPointerLeave","onPointerMove","onPointerOut","onPointerOver","onPointerUp","onScroll","onSelect","onSelectionChange","onWheel","placeholder","readOnly","referrerPolicy","rel","required","role","rows","selected","spellCheck","src","srcSet","step","style","tabIndex","target","type","value","width","suppressHydrationWarning","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"]);function f(e){return _.has(e)||e.indexOf("data-")>-1}var g={};Object.defineProperty(g,"__esModule",{value:!0});var h=g.styleq=void 0,y=new WeakMap,C="$$css";function b(e){var t,n,r;return e!=null&&(t=e.disableCache===!0,n=e.disableMix===!0,r=e.transform),function(){for(var e=[],o="",a=null,i="",l=t?null:y,s=new Array(arguments.length),u=0;u<arguments.length;u++)s[u]=arguments[u];for(;s.length>0;){var c=s.pop();if(!(c==null||c===!1)){if(Array.isArray(c)){for(var d=0;d<c.length;d++)s.push(c[d]);continue}var m=r!=null?r(c):c;if(m.$$css!=null){var p="";if(l!=null&&l.has(m)){var _=l.get(m);_!=null&&(p=_[0],i=_[2],e.push.apply(e,_[1]),l=_[3])}else{var f=[];for(var g in m){var h=m[g];if(g===C){var b=m[g];b!==!0&&(i=i?b+"; "+i:b);continue}typeof h=="string"||h===null?e.includes(g)||(e.push(g),l!=null&&f.push(g),typeof h=="string"&&(p+=p?" "+h:h)):"styleq: ".concat(g," typeof ").concat(String(h),' is not "string" or "null".')}if(l!=null){var v=new WeakMap;l.set(m,[p,f,i,v]),l=v}}p&&(o=o?p+" "+o:p)}else if(n)a==null&&(a={}),a=Object.assign({},m,a);else{var S=null;for(var R in m){var L=m[R];L!==void 0&&(e.includes(R)||(L!=null&&(a==null&&(a={}),S==null&&(S={}),S[R]=L),e.push(R),l=null))}S!=null&&(a=Object.assign(S,a))}}}var E=[o,a,i];return E}}var v=h=g.styleq=b();v.factory=b;var S=h.factory({disableMix:!0});function R(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=S(t),o=r[0],a=r[1],i=r[2],l={};if(o!=null&&o!==""&&(l.className=o),a!=null&&(l.style=a),i!=null&&i!==""){var s=i.split(";"),u={};for(var c of s){var d=c.trim(),m=d.split(":"),p=m[0],_=m[1];_!=null&&(u[p]=u[p]!=null?u[p]+","+_:_)}l["data-style-src"]=Object.keys(u).map(function(e){return e+":"+u[e]}).join("; ")}return l}function L(e){Object.keys(e).forEach(function(t){var n=f(t);n||(p('invalid prop "'+t+'"'),delete e[t])})}function E(t,n){var r={$$css:!0,"debug::name":"html-"+t};function o(o){var a=o.ref,i=babelHelpers.objectWithoutPropertiesLoose(o,e),l=i.for,u=i.style,c=babelHelpers.objectWithoutPropertiesLoose(i,s),m=c;L(m),l!=null&&(m.htmlFor=l),i.role!=null&&(m.role=i.role==="none"?"presentation":i.role),t==="button"?m.type=m.type?m.type:"button":(t==="input"||t==="textarea")&&(m.dir=m.dir?m.dir:"auto");var p=R([r,n,u]),_=d(t,babelHelpers.extends({},m,p,{ref:a}));return _}return o.displayName="html."+t,o}var k={block:{marginTop:"xdj266r",marginInlineEnd:"x14z9mp",marginBottom:"xat24cr",marginInlineStart:"x1lziwak",paddingTop:"xexx8yu",paddingInlineEnd:"xyri2b",paddingBottom:"x18d9i69",paddingInlineStart:"x1c1uobl",$$css:!0},inline:{marginTop:"xdj266r",marginInlineEnd:"x14z9mp",marginBottom:"xat24cr",marginInlineStart:"x1lziwak",paddingTop:"xexx8yu",paddingInlineEnd:"xyri2b",paddingBottom:"x18d9i69",paddingInlineStart:"x1c1uobl",textDecoration:"x1hl2dhg",textAlign:"x16tdsg8",wordWrap:"x1vvkbs",$$css:!0},inlineblock:{borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",marginTop:"xdj266r",marginInlineEnd:"x14z9mp",marginBottom:"xat24cr",marginInlineStart:"x1lziwak",paddingTop:"xexx8yu",paddingInlineEnd:"xyri2b",paddingBottom:"x18d9i69",paddingInlineStart:"x1c1uobl",$$css:!0},button:{borderTopWidth:"x178xt8z",borderInlineEndWidth:"x1lun4ml",borderBottomWidth:"xso031l",borderInlineStartWidth:"xpilrb4",$$css:!0},codePre:{fontFamily:"x1lxnp44",fontSize:"xrv4cvt",overflowX:"xw2csxc",overflowY:"x1odjw0f",$$css:!0},heading:{fontSize:"xngnso2",wordWrap:"x1vvkbs",$$css:!0},hr:{backgroundColor:"x42x0ya",borderTopStyle:"x1ejq31n",borderInlineEndStyle:"x18oe1m7",borderBottomStyle:"x1sy0etr",borderInlineStartStyle:"xstzfhl",borderTopWidth:"x972fbf",borderInlineEndWidth:"x10w94by",borderBottomWidth:"x1qhh985",borderInlineStartWidth:"x14e42zd",boxSizing:"x9f619",height:"xjm9jq1",$$css:!0},img:{aspectRatio:"xuw900x",height:"xt7dq6l",maxWidth:"x193iq5w",$$css:!0},input:{borderTopWidth:"x178xt8z",borderInlineEndWidth:"x1lun4ml",borderBottomWidth:"xso031l",borderInlineStartWidth:"xpilrb4",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",$$css:!0},list:{listStyleType:"x3ct3a4",listStylePosition:null,listStyleImage:null,$$css:!0},strong:{fontWeight:"x117nqv4",$$css:!0},textarea:{borderTopWidth:"x178xt8z",borderInlineEndWidth:"x1lun4ml",borderBottomWidth:"xso031l",borderInlineStartWidth:"xpilrb4",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",resize:"x288g5",$$css:!0}},I=k.inline,T=k.block,D=k.block,x=k.inline,$=k.inline,P=k.inline,N=k.block,M=null,w=[k.inlineblock,k.button],A=[k.inline,k.codePre],F=null,O=k.block,B=k.inline,W=k.block,q=k.block,U=k.block,V=[k.block,k.heading],H=k.block,G=[k.block,k.hr],z=k.inline,j=k.img,K=[k.inlineblock,k.input],Q=null,X=null,Y=k.inline,J=k.block,Z=k.block,ee=k.inline,te=k.block,ne=[k.list,k.block],re=null,oe=null,ae=k.block,ie=[k.block,k.codePre],le=null,se=k.block,ue=k.inlineblock,ce=k.inline,de=[k.inline,k.strong],me=k.inline,pe=k.inline,_e=[k.inlineblock,k.textarea],fe=null,ge=[k.list,k.block],he={a:I,article:T,aside:D,b:x,bdi:$,bdo:P,blockquote:N,br:M,button:w,code:A,del:F,div:O,em:B,fieldset:W,footer:q,form:U,h1:V,h2:V,h3:V,h4:V,h5:V,h6:V,header:H,hr:G,i:z,img:j,input:K,ins:Q,kbd:X,label:Y,li:J,main:Z,mark:ee,nav:te,ol:ne,optgroup:re,option:oe,p:ae,pre:ie,s:le,section:se,select:ue,span:ce,strong:de,sub:me,sup:pe,textarea:_e,u:fe,ul:ge},ye=E("a",he.a),Ce=E("article",he.article),be=E("aside",he.aside),ve=E("b",he.b),Se=E("bdi",he.bdi),Re=E("bdo",he.bdo),Le=E("blockquote",he.blockquote),Ee=E("br",he.br),ke=E("button",he.button),Ie=E("code",he.code),Te=E("del",he.del),De=E("div",he.div),xe=E("em",he.em),$e=E("fieldset",he.fieldset),Pe=E("footer",he.footer),Ne=E("form",he.form),Me=E("h1",he.h1),we=E("h2",he.h2),Ae=E("h3",he.h3),Fe=E("h4",he.h4),Oe=E("h5",he.h5),Be=E("h6",he.h6),We=E("header",he.header),qe=E("hr",he.hr),Ue=E("i",he.i),Ve=E("img",he.img),He=E("input",he.input),Ge=E("ins",he.ins),ze=E("kbd",he.kbd),je=E("label",he.label),Ke=E("li",he.li),Qe=E("main",he.main),Xe=E("mark",he.mark),Ye=E("nav",he.nav),Je=E("ol",he.ol),Ze=E("optgroup",he.optgroup),et=E("option",he.option),tt=E("p",he.p),nt=E("pre",he.pre),rt=E("s",he.s),ot=E("section",he.section),at=E("select",he.select),it=E("span",he.span),lt=E("strong",he.strong),st=E("sub",he.sub),ut=E("sup",he.sup),ct=E("textarea",he.textarea),dt=E("u",he.u),mt=E("ul",he.ul),pt=Object.freeze({__proto__:null,a:ye,article:Ce,aside:be,b:ve,bdi:Se,bdo:Re,blockquote:Le,br:Ee,button:ke,code:Ie,del:Te,div:De,em:xe,fieldset:$e,footer:Pe,form:Ne,h1:Me,h2:we,h3:Ae,h4:Fe,h5:Oe,h6:Be,header:We,hr:qe,i:Ue,img:Ve,input:He,ins:Ge,kbd:ze,label:je,li:Ke,main:Qe,mark:Xe,nav:Ye,ol:Je,optgroup:Ze,option:et,p:tt,pre:nt,s:rt,section:ot,select:at,span:it,strong:lt,sub:st,sup:ut,textarea:ct,u:dt,ul:mt});l.css=u||(u=r("stylex")),l.html=pt}),98);
__d("react-strict-dom",["ReactStrictDomWeb"],(function(t,n,r,o,a,i){"use strict";Object.keys(importNamespace("ReactStrictDomWeb")).forEach(function(e){e==="default"||e==="__esModule"||(i[e]=importNamespace("ReactStrictDomWeb")[e])})}),null);
__d("BaseButtonInternal.react",["react","react-compiler-runtime","react-strict-dom"],(function(t,n,r,o,a,i,l){"use strict";var e=["children","disabled","id","onBlur","onClick","onFocus","onFocusIn","onFocusOut","onMouseEnter","onMouseLeave","onPointerDown","onPointerEnter","onPointerLeave","onPointerUp","ref","role","style","tabIndex","testid"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(42),r,a,i,l,s,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L;n[0]!==t?(a=t.children,i=t.disabled,l=t.id,s=t.onBlur,c=t.onClick,d=t.onFocus,m=t.onFocusIn,p=t.onFocusOut,_=t.onMouseEnter,f=t.onMouseLeave,g=t.onPointerDown,h=t.onPointerEnter,y=t.onPointerLeave,C=t.onPointerUp,b=t.ref,v=t.role,S=t.style,R=t.tabIndex,L=t.testid,r=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=r,n[2]=a,n[3]=i,n[4]=l,n[5]=s,n[6]=c,n[7]=d,n[8]=m,n[9]=p,n[10]=_,n[11]=f,n[12]=g,n[13]=h,n[14]=y,n[15]=C,n[16]=b,n[17]=v,n[18]=S,n[19]=R,n[20]=L):(r=n[1],a=n[2],i=n[3],l=n[4],s=n[5],c=n[6],d=n[7],m=n[8],p=n[9],_=n[10],f=n[11],g=n[12],h=n[13],y=n[14],C=n[15],b=n[16],v=n[17],S=n[18],R=n[19],L=n[20]);var E;return n[21]!==r||n[22]!==a||n[23]!==i||n[24]!==l||n[25]!==s||n[26]!==c||n[27]!==d||n[28]!==m||n[29]!==p||n[30]!==_||n[31]!==f||n[32]!==g||n[33]!==h||n[34]!==y||n[35]!==C||n[36]!==b||n[37]!==v||n[38]!==S||n[39]!==R||n[40]!==L?(E=u.jsx(o("react-strict-dom").html.button,babelHelpers.extends({},r,{"data-testid":void 0,disabled:i,id:l,onBlur:s,onClick:c,onFocus:d,onFocusIn:m,onFocusOut:p,onMouseEnter:_,onMouseLeave:f,onPointerDown:g,onPointerEnter:h,onPointerLeave:y,onPointerUp:C,ref:b,role:v,style:S,tabIndex:R,children:a})),n[21]=r,n[22]=a,n[23]=i,n[24]=l,n[25]=s,n[26]=c,n[27]=d,n[28]=m,n[29]=p,n[30]=_,n[31]=f,n[32]=g,n[33]=h,n[34]=y,n[35]=C,n[36]=b,n[37]=v,n[38]=S,n[39]=R,n[40]=L,n[41]=E):E=n[41],E}l.default=c}),98);
__d("BaseCellLayout.react",["react","react-compiler-runtime","react-strict-dom"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={children:{flexGrow:"x1iyjqo2",$$css:!0},middleContainer:{alignItems:"x6s0dn4",display:"x78zum5",flexDirection:"x1q0g3np",width:"xh8yej3",$$css:!0}};function c(e){var t,n,r,a,i,l,c,d=o("react-compiler-runtime").c(29),m=e.addOnBottom,p=e.addOnEnd,_=e.addOnStart,f=e.addOnTop,g=e.children,h=e.variant,y=(t=h.xstyleConfig)==null?void 0:t.root,C;if(d[0]!==f||d[1]!==((n=h.xstyleConfig)==null?void 0:n.addOnTop)){var b,v;C=!!f&&s.jsx(o("react-strict-dom").html.div,{style:(b=h.xstyleConfig)==null?void 0:b.addOnTop,children:f}),d[0]=f,d[1]=(v=h.xstyleConfig)==null?void 0:v.addOnTop,d[2]=C}else C=d[2];var S=(r=h.xstyleConfig)==null?void 0:r.horizontalContainer,R;d[3]!==S?(R=[u.middleContainer,S],d[3]=S,d[4]=R):R=d[4];var L;if(d[5]!==_||d[6]!==((a=h.xstyleConfig)==null?void 0:a.addOnStart)){var E,k;L=!!_&&s.jsx(o("react-strict-dom").html.div,{style:(E=h.xstyleConfig)==null?void 0:E.addOnStart,children:_}),d[5]=_,d[6]=(k=h.xstyleConfig)==null?void 0:k.addOnStart,d[7]=L}else L=d[7];var I=(i=h.xstyleConfig)==null?void 0:i.children,T;d[8]!==I?(T=[u.children,I],d[8]=I,d[9]=T):T=d[9];var D;d[10]!==g||d[11]!==T?(D=s.jsx(o("react-strict-dom").html.div,{style:T,children:g}),d[10]=g,d[11]=T,d[12]=D):D=d[12];var x;if(d[13]!==p||d[14]!==((l=h.xstyleConfig)==null?void 0:l.addOnEnd)){var $,P;x=!!p&&s.jsx(o("react-strict-dom").html.div,{style:($=h.xstyleConfig)==null?void 0:$.addOnEnd,children:p}),d[13]=p,d[14]=(P=h.xstyleConfig)==null?void 0:P.addOnEnd,d[15]=x}else x=d[15];var N;d[16]!==R||d[17]!==L||d[18]!==D||d[19]!==x?(N=s.jsxs(o("react-strict-dom").html.div,{style:R,children:[L,D,x]}),d[16]=R,d[17]=L,d[18]=D,d[19]=x,d[20]=N):N=d[20];var M;if(d[21]!==m||d[22]!==((c=h.xstyleConfig)==null?void 0:c.addOnBottom)){var w,A;M=!!m&&s.jsx(o("react-strict-dom").html.div,{style:(w=h.xstyleConfig)==null?void 0:w.addOnBottom,children:m}),d[21]=m,d[22]=(A=h.xstyleConfig)==null?void 0:A.addOnBottom,d[23]=M}else M=d[23];var F;return d[24]!==y||d[25]!==N||d[26]!==M||d[27]!==C?(F=s.jsxs(o("react-strict-dom").html.div,{style:y,children:[C,N,M]}),d[24]=y,d[25]=N,d[26]=M,d[27]=C,d[28]=F):F=d[28],F}l.default=c}),98);
__d("BaseLinkInternal.react",["react","react-compiler-runtime","react-strict-dom"],(function(t,n,r,o,a,i,l){"use strict";var e=["children","dataTab","download","href","id","onBlur","onClick","onFocus","onFocusIn","onFocusOut","onMouseEnter","onMouseLeave","onPointerDown","onPointerEnter","onPointerLeave","onPointerUp","ref","referrerPolicy","rel","style","tabIndex","target","testid"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(50),r,a,i,l,s,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I,T;n[0]!==t?(a=t.children,i=t.dataTab,l=t.download,s=t.href,c=t.id,d=t.onBlur,m=t.onClick,p=t.onFocus,_=t.onFocusIn,f=t.onFocusOut,g=t.onMouseEnter,h=t.onMouseLeave,y=t.onPointerDown,C=t.onPointerEnter,b=t.onPointerLeave,v=t.onPointerUp,S=t.ref,R=t.referrerPolicy,L=t.rel,E=t.style,k=t.tabIndex,I=t.target,T=t.testid,r=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=r,n[2]=a,n[3]=i,n[4]=l,n[5]=s,n[6]=c,n[7]=d,n[8]=m,n[9]=p,n[10]=_,n[11]=f,n[12]=g,n[13]=h,n[14]=y,n[15]=C,n[16]=b,n[17]=v,n[18]=S,n[19]=R,n[20]=L,n[21]=E,n[22]=k,n[23]=I,n[24]=T):(r=n[1],a=n[2],i=n[3],l=n[4],s=n[5],c=n[6],d=n[7],m=n[8],p=n[9],_=n[10],f=n[11],g=n[12],h=n[13],y=n[14],C=n[15],b=n[16],v=n[17],S=n[18],R=n[19],L=n[20],E=n[21],k=n[22],I=n[23],T=n[24]);var D;return n[25]!==r||n[26]!==a||n[27]!==i||n[28]!==l||n[29]!==s||n[30]!==c||n[31]!==d||n[32]!==m||n[33]!==p||n[34]!==_||n[35]!==f||n[36]!==g||n[37]!==h||n[38]!==y||n[39]!==C||n[40]!==b||n[41]!==v||n[42]!==S||n[43]!==R||n[44]!==L||n[45]!==E||n[46]!==k||n[47]!==I||n[48]!==T?(D=u.jsx(o("react-strict-dom").html.a,babelHelpers.extends({},r,{"data-tab":i,"data-testid":void 0,download:l,href:s,id:c,onBlur:d,onClick:m,onFocus:p,onFocusIn:_,onFocusOut:f,onMouseEnter:g,onMouseLeave:h,onPointerDown:y,onPointerEnter:C,onPointerLeave:b,onPointerUp:v,ref:S,referrerPolicy:R,rel:L,style:E,tabIndex:k,target:I,children:a})),n[25]=r,n[26]=a,n[27]=i,n[28]=l,n[29]=s,n[30]=c,n[31]=d,n[32]=m,n[33]=p,n[34]=_,n[35]=f,n[36]=g,n[37]=h,n[38]=y,n[39]=C,n[40]=b,n[41]=v,n[42]=S,n[43]=R,n[44]=L,n[45]=E,n[46]=k,n[47]=I,n[48]=T,n[49]=D):D=n[49],D}l.default=c}),98);
__d("BaseButtonV3.react",["BaseButtonInternal.react","BaseCellLayout.react","BaseLinkInternal.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["addOnEnd","addOnStart","children","focusable","ref","sizeVariant","testid","variant"],s=["aria-disabled","aria-expanded","aria-haspopup","aria-pressed","dataTab","disabled","download","focused","hovered","href","pressed","referrerPolicy","rel","role","selected","target"],u,c=u||(u=o("react")),d={button:{position:"x1n2onr6",$$css:!0},link:{color:"x1heor9g",display:"x1rg5ohu",outline:"x1a2a7pz",position:"x1n2onr6",textDecoration:"x1hl2dhg x1lku1pv",$$css:!0}};function m(t){var n,a,i,l,u,m,p,_,f,g,h,y,C,b,v=o("react-compiler-runtime").c(88),S,R,L,E,k,I,T,D,x;v[0]!==t?(S=t.addOnEnd,R=t.addOnStart,L=t.children,T=t.focusable,k=t.ref,I=t.sizeVariant,D=t.testid,x=t.variant,E=babelHelpers.objectWithoutPropertiesLoose(t,e),v[0]=t,v[1]=S,v[2]=R,v[3]=L,v[4]=E,v[5]=k,v[6]=I,v[7]=T,v[8]=D,v[9]=x):(S=v[1],R=v[2],L=v[3],E=v[4],k=v[5],I=v[6],T=v[7],D=v[8],x=v[9]);var $=T===void 0?!0:T,P,N,M,w,A,F,O,B,W,q,U,V,H,G,z,j,K;if(v[10]!==E){var Q=E;P=Q["aria-disabled"],N=Q["aria-expanded"],M=Q["aria-haspopup"],w=Q["aria-pressed"],A=Q.dataTab,F=Q.disabled,O=Q.download,B=Q.focused,W=Q.hovered,q=Q.href,U=Q.pressed,V=Q.referrerPolicy,H=Q.rel,z=Q.role,j=Q.selected,K=Q.target,G=babelHelpers.objectWithoutPropertiesLoose(Q,s),v[10]=E,v[11]=P,v[12]=N,v[13]=M,v[14]=w,v[15]=A,v[16]=F,v[17]=O,v[18]=B,v[19]=W,v[20]=q,v[21]=U,v[22]=V,v[23]=H,v[24]=G,v[25]=z,v[26]=j,v[27]=K}else P=v[11],N=v[12],M=v[13],w=v[14],A=v[15],F=v[16],O=v[17],B=v[18],W=v[19],q=v[20],U=v[21],V=v[22],H=v[23],G=v[24],z=v[25],j=v[26],K=v[27];var X=$!==!0||F===!0?-1:0,Y=(n=I)==null?void 0:n.xstyleConfig.item,J=(a=I)==null?void 0:a.xstyleConfig.addOnEnd,Z;v[28]!==Y||v[29]!==J||v[30]!==x.xstyleConfig.addOnEnd?(Z=[x.xstyleConfig.addOnEnd,Y,J],v[28]=Y,v[29]=J,v[30]=x.xstyleConfig.addOnEnd,v[31]=Z):Z=v[31];var ee=(i=I)==null?void 0:i.xstyleConfig.item,te=(l=I)==null?void 0:l.xstyleConfig.addOnStart,ne;v[32]!==ee||v[33]!==te||v[34]!==x.xstyleConfig.addOnStart?(ne=[x.xstyleConfig.addOnStart,ee,te],v[32]=ee,v[33]=te,v[34]=x.xstyleConfig.addOnStart,v[35]=ne):ne=v[35];var re=(u=I)==null?void 0:u.xstyleConfig.item,oe=(m=I)==null?void 0:m.xstyleConfig.children,ae;v[36]!==re||v[37]!==oe?(ae=[re,oe],v[36]=re,v[37]=oe,v[38]=ae):ae=v[38];var ie=(p=I)==null?void 0:p.xstyleConfig.horizontalContainer,le;v[39]!==ae||v[40]!==ie||v[41]!==Z||v[42]!==ne?(le={xstyleConfig:{addOnEnd:Z,addOnStart:ne,children:ae,horizontalContainer:ie}},v[39]=ae,v[40]=ie,v[41]=Z,v[42]=ne,v[43]=le):le=v[43];var se=le,ue=(_=x.xstyleConfig)==null?void 0:_.pressable,ce=(f=I)==null?void 0:f.xstyleConfig.width,de=(g=I)==null?void 0:g.xstyleConfig.content,me=!!F&&((h=x.xstyleConfig)==null?void 0:h.pressableDisabled),pe;if(v[44]!==B||v[45]!==x.xstyleConfig.pressableFocused){var _e;pe=!!B&&[(_e=x.xstyleConfig)==null?void 0:_e.pressableFocused],v[44]=B,v[45]=x.xstyleConfig.pressableFocused,v[46]=pe}else pe=v[46];var fe;if(v[47]!==W||v[48]!==((y=I)==null?void 0:y.xstyleConfig)||v[49]!==x.xstyleConfig.pressableHovered){var ge,he,ye;fe=!!W&&[(ge=I)==null?void 0:ge.xstyleConfig.hovered,(he=x.xstyleConfig)==null?void 0:he.pressableHovered],v[47]=W,v[48]=(ye=I)==null?void 0:ye.xstyleConfig,v[49]=x.xstyleConfig.pressableHovered,v[50]=fe}else fe=v[50];var Ce;if(v[51]!==U||v[52]!==((C=I)==null?void 0:C.xstyleConfig)||v[53]!==x.xstyleConfig.pressablePressed){var be,ve,Se;Ce=!!U&&[(be=x.xstyleConfig)==null?void 0:be.pressablePressed,(ve=I)==null?void 0:ve.xstyleConfig.pressed],v[51]=U,v[52]=(Se=I)==null?void 0:Se.xstyleConfig,v[53]=x.xstyleConfig.pressablePressed,v[54]=Ce}else Ce=v[54];var Re=!!j&&((b=x.xstyleConfig)==null?void 0:b.pressableSelected),Le;v[55]!==ue||v[56]!==ce||v[57]!==de||v[58]!==me||v[59]!==pe||v[60]!==fe||v[61]!==Ce||v[62]!==Re?(Le=[ue,ce,de,me,pe,fe,Ce,Re],v[55]=ue,v[56]=ce,v[57]=de,v[58]=me,v[59]=pe,v[60]=fe,v[61]=Ce,v[62]=Re,v[63]=Le):Le=v[63];var Ee=Le,ke;v[64]!==S||v[65]!==R||v[66]!==se||v[67]!==L?(ke=c.jsx(r("BaseCellLayout.react"),{addOnEnd:S,addOnStart:R,variant:se,children:L}),v[64]=S,v[65]=R,v[66]=se,v[67]=L,v[68]=ke):ke=v[68];var Ie=ke,Te;return v[69]!==P||v[70]!==N||v[71]!==M||v[72]!==w||v[73]!==X||v[74]!==Ie||v[75]!==A||v[76]!==F||v[77]!==O||v[78]!==q||v[79]!==k||v[80]!==V||v[81]!==H||v[82]!==G||v[83]!==z||v[84]!==Ee||v[85]!==K||v[86]!==D?(Te=q==null||q!=null&&F===!0?c.jsx(r("BaseButtonInternal.react"),babelHelpers.extends({},G,{"aria-disabled":P!=null?P:F,"aria-expanded":N,"aria-haspopup":M,"aria-pressed":w,disabled:F,ref:k,role:z,style:[d.button,Ee],tabIndex:X,testid:void 0,children:Ie})):c.jsx(r("BaseLinkInternal.react"),babelHelpers.extends({},G,{dataTab:A,download:O,href:q,ref:k,referrerPolicy:V,rel:H,style:[d.link,Ee],tabIndex:X,target:K,testid:void 0,children:Ie})),v[69]=P,v[70]=N,v[71]=M,v[72]=w,v[73]=X,v[74]=Ie,v[75]=A,v[76]=F,v[77]=O,v[78]=q,v[79]=k,v[80]=V,v[81]=H,v[82]=G,v[83]=z,v[84]=Ee,v[85]=K,v[86]=D,v[87]=Te):Te=v[87],Te}l.default=m}),98);
__d("ReactEventHelpers",[],(function(t,n,r,o,a,i){var e=typeof window!="undefined"&&window.navigator!=null?/^Mac/.test(window.navigator.platform):!1,l=typeof window!="undefined"&&window.PointerEvent!=null;function s(e,t){return t==null?!1:typeof e.containsNode=="function"?e.containsNode(t):e.contains(t)}i.isMac=e,i.hasPointerEvents=l,i.isRelatedTargetWithin=s}),66);
__d("ReactEventHookPropagation",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){var n=e._stopEventHookPropagation;return n!==void 0&&n[t]}function l(e,t){var n=e._stopEventHookPropagation;n||(n=e._stopEventHookPropagation={}),n[t]=!0}i.hasEventHookPropagationStopped=e,i.stopEventHookPropagation=l}),66);
__d("useUnsafeRef_DEPRECATED",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useMemo;function u(e){return s(function(){return{current:e}},[])}l.default=u}),98);
__d("ReactUseEvent.react",["ReactDOM","react","useUnsafeRef_DEPRECATED"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useLayoutEffect;function c(t,n){var a=(e||(e=r("useUnsafeRef_DEPRECATED")))(null),i=a.current;if(n&&(n.passive=void 0),i===null){var l=o("ReactDOM").unstable_createEventHandle(t,n),s=new Map;i={setListener:function(t,n){var e=s.get(t);if(e!==void 0&&e(),n===null){s.delete(t);return}e=l(t,n),s.set(t,e)},clear:function(){for(var e=Array.from(s.values()),t=0;t<e.length;t++)e[t]();s.clear()}},a.current=i}return u(function(){return function(){i!==null&&i.clear(),a.current=null}},[i]),i}l.default=c}),98);
__d("ReactFocusEvent.react",["ReactDOM","ReactEventHelpers","ReactEventHookPropagation","ReactUseEvent.react","react","react-compiler-runtime","useUnsafeRef_DEPRECATED"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=u.useCallback,d=u.useEffect,m=u.useLayoutEffect,p=u.useMemo,_=u.useRef,f=o("ReactEventHelpers").hasPointerEvents?["keydown","pointermove","pointerdown","pointerup"]:["keydown","mousedown","mousemove","mouseup","touchmove","touchstart","touchend"],g={passive:!0},h=!0,y=!1;function C(){return h}function b(){f.forEach(function(e){window.addEventListener(e,R,!0)})}function v(e){var t=e.metaKey,n=e.altKey,r=e.ctrlKey;return!(t||!o("ReactEventHelpers").isMac&&n||r)}function S(e){var t=e.key,n=e.target;if(t==="Tab"||t==="Escape")return!1;var r=n.isContentEditable,o=n.tagName;return o==="INPUT"||o==="TEXTAREA"||r}function R(e){if(e.type==="keydown")v(e)&&(h=!0);else{var t=e.target.nodeName;if(t==="HTML")return;h=!1}}function L(e,t,n){if(e.type==="keydown"){var r=e.nativeEvent;v(r)&&!S(r)&&n(!0)}else t.isFocused?n(t.isFocusVisible):(h=!1,n(!1))}function E(e,t,n,r){e.forEach(function(e){e.setListener(t,function(e){return L(e,n,r)})})}function k(){var e=o("react-compiler-runtime").c(4),t=r("ReactUseEvent.react")("mousedown",g),n=r("ReactUseEvent.react")(o("ReactEventHelpers").hasPointerEvents?"pointerdown":"touchstart",g),a=r("ReactUseEvent.react")("keydown",g),i;return e[0]!==a||e[1]!==t||e[2]!==n?(i=[t,n,a],e[0]=a,e[1]=t,e[2]=n,e[3]=i):i=e[3],i}function I(){var e=o("react-compiler-runtime").c(1),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],e[0]=t):t=e[0],d(T,t)}function T(){y||(y=!0,b())}function D(e,t){var n=o("react-compiler-runtime").c(17),a=t.disabled,i=t.onBlur,l=t.onFocus,s=t.onFocusChange,u=t.onFocusVisibleChange,c;n[0]===Symbol.for("react.memo_cache_sentinel")?(c={isFocused:!1,isFocusVisible:!1},n[0]=c):c=n[0];var p=_(c),f=r("ReactUseEvent.react")("focusin",g),y=r("ReactUseEvent.react")("focusout",g),C=k(),b,v;n[1]!==y||n[2]!==a||n[3]!==f||n[4]!==e||n[5]!==C||n[6]!==i||n[7]!==l||n[8]!==s||n[9]!==u?(b=function(){var t=e.current,n=p.current;if(t!==null&&t.nodeType===1){E(C,t,n,function(e){n.isFocused&&n.isFocusVisible!==e&&(n.isFocusVisible=e,u&&u(e))});var r=function(t){n.isFocused&&(n.isFocused=!1,i&&i(t),s&&s(!1),n.isFocusVisible&&u&&u(!1),n.isFocusVisible=h)};f.setListener(t,function(e){a!==!0&&(o("ReactEventHookPropagation").hasEventHookPropagationStopped(e,"useFocus")||(o("ReactEventHookPropagation").stopEventHookPropagation(e,"useFocus"),!n.isFocused&&t===e.target&&(n.isFocused=!0,n.isFocusVisible=h,l&&l(e),s&&s(!0),n.isFocusVisible&&u&&u(!0))))}),y.setListener(t,function(e){a!==!0&&(o("ReactEventHookPropagation").hasEventHookPropagationStopped(e,"useFocus")||(o("ReactEventHookPropagation").stopEventHookPropagation(e,"useFocus"),r(e)))})}},v=[y,a,f,e,C,i,l,s,u],n[1]=y,n[2]=a,n[3]=f,n[4]=e,n[5]=C,n[6]=i,n[7]=l,n[8]=s,n[9]=u,n[10]=b,n[11]=v):(b=n[10],v=n[11]),m(b,v);var S;n[12]!==e||n[13]!==i||n[14]!==s||n[15]!==u?(S=function(){var t=e.current,n=p.current;return(function(){if(e.current===null&&n.isFocused){n.isFocused=!1;var r=new window.FocusEvent("blur");Object.defineProperty(r,"target",{value:t}),i&&i(r),s&&s(!1),n.isFocusVisible&&u&&u(!1),n.isFocusVisible=h}})},n[12]=e,n[13]=i,n[14]=s,n[15]=u,n[16]=S):S=n[16],d(S,void 0),I()}function x(e,t){var n,a=t.disabled,i=t.onAfterBlurWithin,l=t.onBeforeBlurWithin,s=t.onBlurWithin,u=t.onFocusWithin,d=t.onFocusWithinChange,m=t.onFocusWithinVisibleChange,p=_({isFocused:!1,isFocusVisible:!1}),f=(n=r("ReactUseEvent.react"))("focusin",g),y=n("focusout",g),C=n("afterblur",g),b=n("beforeblur",g),v=k(),S=c(function(t){typeof e=="function"?e(t):e.current=t;var n=p.current;t!==null&&n!==null&&(E(v,t,n,function(e){n.isFocused&&n.isFocusVisible!==e&&(n.isFocusVisible=e,m&&m(e))}),f.setListener(t,function(e){a!==!0&&(o("ReactEventHookPropagation").hasEventHookPropagationStopped(e,"useFocusWithin")||(n.isFocused||(n.isFocused=!0,n.isFocusVisible=h,d&&d(!0),n.isFocusVisible&&m&&m(!0)),!n.isFocusVisible&&h&&(n.isFocusVisible=h,m&&m(!0)),u&&u(e)))}),y.setListener(t,function(e){if(a!==!0){var r=e.nativeEvent.relatedTarget;o("ReactEventHookPropagation").hasEventHookPropagationStopped(e,"useFocusWithin")||(n.isFocused&&!o("ReactEventHelpers").isRelatedTargetWithin(t,r)?(n.isFocused=!1,d&&d(!1),n.isFocusVisible&&m&&m(!1),s&&s(e)):o("ReactEventHookPropagation").stopEventHookPropagation(e,"useFocusWithin"))}}),b.setListener(t,function(e){a!==!0&&l&&(l(e),C.setListener(document,function(e){i&&i(e),C.setListener(document,null)}))}))},[C,b,y,a,f,v,e,i,l,s,u,d,m]);return I(),S}function $(){var e=o("react-compiler-runtime").c(4),t=N("mousedown",g),n=N(o("ReactEventHelpers").hasPointerEvents?"pointerdown":"touchstart",g),r=N("keydown",g),a;return e[0]!==r||e[1]!==t||e[2]!==n?(a=[t,n,r],e[0]=r,e[1]=t,e[2]=n,e[3]=a):a=e[3],a}function P(e){var t=o("react-compiler-runtime").c(15),n=e.disabled,r=e.onAfterBlurWithin,a=e.onBeforeBlurWithin,i=e.onBlurWithin,l=e.onFocusWithin,s=e.onFocusWithinChange,u=e.onFocusWithinVisibleChange,c=e.initializer,d;t[0]===Symbol.for("react.memo_cache_sentinel")?(d={isFocused:!1,isFocusVisible:!1},t[0]=d):d=t[0];var m=_(d),p=N("focusin",g),f=N("focusout",g),y=N("afterblur",g),C=N("beforeblur",g),b=$(),v;t[1]!==y||t[2]!==C||t[3]!==f||t[4]!==n||t[5]!==p||t[6]!==b||t[7]!==c||t[8]!==r||t[9]!==a||t[10]!==i||t[11]!==l||t[12]!==s||t[13]!==u?(v=function(t){var e=m.current;t!==null&&e!==null?(c&&c(t),E(b,t,e,function(t){e.isFocused&&e.isFocusVisible!==t&&(e.isFocusVisible=t,u&&u(t))}),p.setListener(t,function(t){n!==!0&&(o("ReactEventHookPropagation").hasEventHookPropagationStopped(t,"useFocusWithin")||(e.isFocused||(e.isFocused=!0,e.isFocusVisible=h,s&&s(!0),e.isFocusVisible&&u&&u(!0)),!e.isFocusVisible&&h&&(e.isFocusVisible=h,u&&u(!0)),l&&l(t)))}),f.setListener(t,function(r){if(n!==!0){var a=r.nativeEvent.relatedTarget;o("ReactEventHookPropagation").hasEventHookPropagationStopped(r,"useFocusWithin")||(e.isFocused&&!o("ReactEventHelpers").isRelatedTargetWithin(t,a)?(e.isFocused=!1,s&&s(!1),e.isFocusVisible&&u&&u(!1),i&&i(r)):o("ReactEventHookPropagation").stopEventHookPropagation(r,"useFocusWithin"))}}),C.setListener(t,function(e){n!==!0&&a&&(a(e),y.setListener(document,function(e){r&&r(e),y.setListener(document,null)}))})):t===null&&(p.clear(),f.clear(),C.clear())},t[1]=y,t[2]=C,t[3]=f,t[4]=n,t[5]=p,t[6]=b,t[7]=c,t[8]=r,t[9]=a,t[10]=i,t[11]=l,t[12]=s,t[13]=u,t[14]=v):v=t[14];var S=v;return I(),S}function N(t,n){var a=(e||(e=r("useUnsafeRef_DEPRECATED")))(null),i=a.current;if(n&&(n.passive=void 0),i===null){var l=o("ReactDOM").unstable_createEventHandle(t,n),s=new Map;i={setListener:function(t,n){var e=s.get(t);if(e!==void 0&&e(),n===null){s.delete(t);return}e=l(t,function(){n.apply(void 0,arguments)}),s.set(t,e)},clear:function(){for(var e=Array.from(s.values()),t=0;t<e.length;t++)e[t]();s.clear()}},a.current=i}return i}l.getGlobalFocusVisible=C,l.useFocus=D,l.useFocusWithin_DEPRECATED=x,l.useFocusWithin=P}),98);
__d("testID",["gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=r("gkx")("21117");function s(t){if(e&&t!=null)return{"data-testid":t}}l.default=s}),98);
__d("BaseInput.react",["CometContainerPressableContext","Locale","react","react-compiler-runtime","stylex","testID"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref","xstyle","onChange","onClick","onValueChange","testid","type"],s,u,c=u||(u=o("react")),d=u,m=d.useContext,p=d.useMemo,_={root:{WebkitTapHighlightColor:"x1i10hfl",boxSizing:"x9f619",touchAction:"xggy1nq",":-webkit-autofill_-webkit-background-clip":"xtpw4lu",":-webkit-autofill_-webkit-text-fill-color":"x1tutvks",":-webkit-autofill_transition":"x1s3xk63",":disabled_cursor":"x1s07b3s",$$css:!0},zIndex:{zIndex:"x1vjfegm",$$css:!0}},f=o("Locale").isRTL();function g(t){var n=o("react-compiler-runtime").c(31),a,i,l,u,d,p,g,h;n[0]!==t?(d=t.ref,h=t.xstyle,a=t.onChange,i=t.onClick,l=t.onValueChange,g=t.testid,p=t.type,u=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=u,n[5]=d,n[6]=p,n[7]=g,n[8]=h):(a=n[1],i=n[2],l=n[3],u=n[4],d=n[5],p=n[6],g=n[7],h=n[8]);var y=p===void 0?"text":p,C;e:switch(y){case"switch":{C="checkbox";break e}default:C=y}var b=C,v=b==="checkbox"||b==="radio",S=b==="textarea",R=m(r("CometContainerPressableContext"))!=null,L=S?"textarea":"input",E;n[9]!==R||n[10]!==h?(E=(s||(s=r("stylex"))).props(_.root,h,R&&_.zIndex),n[9]=R,n[10]=h,n[11]=E):E=n[11];var k;n[12]!==g?(k=r("testID")(g),n[12]=g,n[13]=k):k=n[13];var I;n[14]!==v||n[15]!==a||n[16]!==l?(I=function(t){v||l==null||l(t.currentTarget.value,t),a==null||a(t)},n[14]=v,n[15]=a,n[16]=l,n[17]=I):I=n[17];var T;n[18]!==v||n[19]!==i||n[20]!==l?(T=function(t){v&&(l==null||l(t.currentTarget.checked,t)),i==null||i(t)},n[18]=v,n[19]=i,n[20]=l,n[21]=T):T=n[21];var D=S?void 0:b,x;return n[22]!==L||n[23]!==u||n[24]!==d||n[25]!==E||n[26]!==k||n[27]!==I||n[28]!==T||n[29]!==D?(x=c.jsx(L,babelHelpers.extends({},E,{dir:f?"rtl":"ltr"},u,k,{onChange:I,onClick:T,ref:d,type:D})),n[22]=L,n[23]=u,n[24]=d,n[25]=E,n[26]=k,n[27]=I,n[28]=T,n[29]=D,n[30]=x):x=n[30],x}var h=c.memo(g);l.default=h}),98);
__d("WebView.react",["react","stylex","testID"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s=["children","suppressHydrationWarning","testid","xstyle"],u,c,d=c||(c=o("react")),m={root:{boxSizing:"x9f619",position:"x1n2onr6",zIndex:"x1ja2u2z",$$css:!0}};function p(t){var n=t.ref,o=babelHelpers.objectWithoutPropertiesLoose(t,e),a=o.children,i=o.suppressHydrationWarning,l=o.testid,c=o.xstyle,p=babelHelpers.objectWithoutPropertiesLoose(o,s);return d.jsx("div",babelHelpers.extends({},p,r("testID")(l),(u||(u=r("stylex"))).props(m.root,c),{ref:n,suppressHydrationWarning:i,children:a}))}p.displayName=p.name+" [from "+i.id+"]",l.default=p}),98);
__d("BaseView.react",["WebView.react"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("WebView.react")}),98);
__d("BaseCheckbox.react",["BaseFocusRing.react","BaseInput.react","BaseView.react","Locale","react","react-compiler-runtime","stylex","useMergeRefs"],(function(t,n,r,o,a,i,l){"use strict";var e=["children","ref","variant","xstyle","indeterminate","suppressFocusRing","testid"],s,u,c=u||(u=o("react")),d=u,m=d.useLayoutEffect,p=d.useRef,_=d.useState,f=o("Locale").isRTL(),g={checkbox:{cursor:"x1ypdohk",height:"x5yr21d",insetInlineStart:"x1o0tod",left:null,right:null,marginTop:"xdj266r",marginInlineEnd:"x14z9mp",marginBottom:"xat24cr",marginInlineStart:"x1lziwak",opacity:"x1w3u9th",outline:"x1a2a7pz",paddingTop:"xexx8yu",paddingInlineEnd:"xyri2b",paddingBottom:"x18d9i69",paddingInlineStart:"x1c1uobl",position:"x10l6tqk",top:"x13vifvy",width:"xh8yej3",$$css:!0},icon:{paddingTop:"x1nn3v0j",paddingInlineEnd:"x14vy60q",paddingBottom:"x1120s5i",paddingInlineStart:"xyiysdx",$$css:!0},inlineFlex:{display:"x3nfvp2",$$css:!0},labelRTL:{transformOrigin:"x1h1bmdg",$$css:!0},wrapper:{position:"x1n2onr6",$$css:!0}};function h(t){var n,a,i=o("react-compiler-runtime").c(35),l,u,d,h,y,C,b;if(i[0]!==t){var v=t.children,S=t.ref,R=t.variant,L=t.xstyle,E=t.indeterminate,k=t.suppressFocusRing,I=t.testid,T=babelHelpers.objectWithoutPropertiesLoose(t,e);l=v,d=S,C=R,b=L,h=E,y=I,u=T,i[0]=t,i[1]=l,i[2]=u,i[3]=d,i[4]=h,i[5]=y,i[6]=C,i[7]=b}else l=i[1],u=i[2],d=i[3],h=i[4],y=i[5],C=i[6],b=i[7];var D=h===void 0?!1:h,x=p(null),$=_(!1),P=$[0],N=$[1],M=(n=u.checked)!=null?n:!1,w=(a=u.disabled)!=null?a:!1,A,F;i[8]!==D?(A=function(){x.current!=null&&(x.current.indeterminate=D)},F=[D],i[8]=D,i[9]=A,i[10]=F):(A=i[9],F=i[10]),m(A,F);var O=r("useMergeRefs")(d,x),B;i[11]!==M||i[12]!==w||i[13]!==P||i[14]!==C?(B=function(t){var e,n,o,a,i;if(C==null)return null;var l=M?C.iconChecked:C.iconUnchecked;return c.jsx("div",babelHelpers.extends({},(s||(s=r("stylex"))).props([g.inlineFlex,(e=C)==null?void 0:e.xstyleConfig.iconWrapper,M&&((n=C)==null?void 0:n.xstyleConfig.iconCheckedWrapper),P&&((o=C)==null?void 0:o.xstyleConfig.iconFocusedWrapper),w&&((a=C)==null?void 0:a.xstyleConfig.iconDisabledWrapper),w&&M&&((i=C)==null?void 0:i.xstyleConfig.iconDisabledCheckedWrapper)]),{suppressHydrationWarning:!0,children:c.jsx("div",babelHelpers.extends({},s.props([t,g.icon,C.xstyleConfig.icon]),{suppressHydrationWarning:!0,children:l!=null&&c.jsx(l,{height:"100%",width:"100%"})}))}))},i[11]=M,i[12]=w,i[13]=P,i[14]=C,i[15]=B):B=i[15];var W=B,q;i[16]!==M||i[17]!==l||i[18]!==w||i[19]!==W||i[20]!==D||i[21]!==O||i[22]!==u||i[23]!==y||i[24]!==C||i[25]!==b?(q=function(t){var e,n,o,a;return c.jsxs(r("BaseView.react"),{role:"none",testid:void 0,xstyle:[g.wrapper,C!=null?(e=C)==null?void 0:e.xstyleConfig.checkboxWrapper:t,b],children:[W(t),C!=null?c.jsx("div",babelHelpers.extends({},(s||(s=r("stylex"))).props([g.inlineFlex,(n=C)==null?void 0:n.xstyleConfig.labelWrapper]),{children:l})):l,c.jsx(r("BaseInput.react"),babelHelpers.extends({},u,{"aria-checked":D?"mixed":M!=null?M:!1,ref:O,type:"checkbox",xstyle:[g.checkbox,(o=C)==null?void 0:o.xstyleConfig.checkbox,w&&((a=C)==null?void 0:a.xstyleConfig.checkboxDisabled)]}))]})},i[16]=M,i[17]=l,i[18]=w,i[19]=W,i[20]=D,i[21]=O,i[22]=u,i[23]=y,i[24]=C,i[25]=b,i[26]=q):q=i[26];var U=q,V=C!=null?"inset":void 0,H;i[27]!==U||i[28]!==w||i[29]!==u.id||i[30]!==C?(H=function(t){var e,n;return c.jsx(c.Fragment,{children:C!=null?c.jsx("label",babelHelpers.extends({},(s||(s=r("stylex"))).props([f&&g.labelRTL,(e=C)==null?void 0:e.xstyleConfig.label,w===!0&&((n=C)==null?void 0:n.xstyleConfig.labelDisabled)]),{htmlFor:u.id,suppressHydrationWarning:!0,children:U(t)})):U(t)})},i[27]=U,i[28]=w,i[29]=u.id,i[30]=C,i[31]=H):H=i[31];var G;return i[32]!==V||i[33]!==H?(G=c.jsx(r("BaseFocusRing.react"),{focusRingPosition:V,onFocusVisibleChange:N,children:H}),i[32]=V,i[33]=H,i[34]=G):G=i[34],G}l.default=h}),98);
__d("BaseHeadingContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext(1);l.default=u}),98);
__d("BaseTextContext",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useContext,d=u.useMemo,m=s.createContext(null);function p(e){var t=o("react-compiler-runtime").c(5),n=e.children,r=e.nested,a;t[0]!==r?(a={nested:r},t[0]=r,t[1]=a):a=t[1];var i=a,l;return t[2]!==n||t[3]!==i?(l=s.jsx(m.Provider,{value:i,children:n}),t[2]=n,t[3]=i,t[4]=l):l=t[4],l}function _(){return c(m)}l.BaseTextContextProvider=p,l.useBaseTextContext=_}),98);
__d("XPlatReactUserAgent",["UserAgent"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("UserAgent")}),98);
__d("BaseHeading.react",["BaseHeadingContext","BaseTextContext","FBLogger","XPlatReactUserAgent","gkx","react","react-compiler-runtime","react-strict-dom"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useContext,d=u.useMemo,m=r("XPlatReactUserAgent").isBrowser("Chrome < 83")||r("XPlatReactUserAgent").isBrowser("Safari < 14.1")||r("XPlatReactUserAgent").isBrowser("Firefox < 69"),p={oldBrowsers:{boxShadow:"x1gnnqk1 x59fq91",$$css:!0},root:{color:"x1heor9g",fontSize:"x1qlqyl8",fontWeight:"x1pd3egz",outline:"x1a2a7pz",$$css:!0},rootGated:{boxShadow:"x1gnnqk1 xpx8ijz xq7l91r",$$css:!0}},_={1:o("react-strict-dom").html.h1,2:o("react-strict-dom").html.h2,3:o("react-strict-dom").html.h3,4:o("react-strict-dom").html.h4,5:o("react-strict-dom").html.h5,6:o("react-strict-dom").html.h6};function f(e){var t=o("react-compiler-runtime").c(12),n=e.children,a=e.id,i=e.isPrimaryHeading,l=e.ref,u=e.suppressHydrationWarning,d=e.testid,f=e.xstyle,g=i===void 0?!1:i,h=c(r("BaseHeadingContext")),y;e:{if(g){y=o("react-strict-dom").html.h1;break e}var C=Math.max(Math.min(h,6),2);y=_[""+C]}var b=y;if(b==null)throw r("FBLogger")("comet_ui").mustfixThrow("Failed to retrieve a heading tag, this should not be possible");var v=o("BaseTextContext").useBaseTextContext(),S=(v==null?void 0:v.nested)===!0,R;t[0]===Symbol.for("react.memo_cache_sentinel")?(R=r("gkx")("8029")?[p.rootGated,m&&p.oldBrowsers]:[],t[0]=R):R=t[0];var L=R,E=S?void 0:"auto",k;t[1]!==f?(k=[p.root].concat(L,[[f]]),t[1]=f,t[2]=k):k=t[2];var I;return t[3]!==b||t[4]!==n||t[5]!==a||t[6]!==l||t[7]!==u||t[8]!==E||t[9]!==k||t[10]!==d?(I=s.jsx(b,{"data-testid":void 0,dir:E,id:a,ref:l,style:k,suppressHydrationWarning:u,children:n}),t[3]=b,t[4]=n,t[5]=a,t[6]=l,t[7]=u,t[8]=E,t[9]=k,t[10]=d,t[11]=I):I=t[11],I}l.default=f}),98);
__d("BaseTextV2SpanWrapper.react",["react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c={"::after_content":"x100rkj9","::after_display":"x1azrkns","::before_content":"x10tli2e","::before_display":"xpo3ry2",$$css:!0},d={block:{"::after_content":"x1s928wv","::after_display":"xhkezso","::after_height":"x1gmr53x","::before_content":"x1cpjm7i","::before_display":"x1fgarty","::before_height":"x1943h6x",$$css:!0},computedPseudoStyles:function(t){return[c,{"::after_marginTop":t.baselineTrim!=null?"x140p0ai":t.baselineTrim,"::before_marginBottom":t.capHeightTrim!=null?"x1gufx9m":t.capHeightTrim,$$css:!0},{"--x-8dd7yt":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(t.baselineTrim),"--x-hxtmnb":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(t.capHeightTrim)}]},computedStyles:function(t){return[{fontSize:t.fontSize!=null?"xdmh292":t.fontSize,lineHeight:t.lineHeight!=null?"x15dsfln":t.lineHeight,$$css:!0},{"--x-fontSize":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(t.fontSize),"--x-lineHeight":t.lineHeight!=null?t.lineHeight:void 0}]}};function m(t){var n=o("react-compiler-runtime").c(12),a=t.ref,i=t.children,l=t.computedValues,s=t.dir,c=t.id,m=t.nested,p=t.suppressHydrationWarning,_=t.testid,f=t.xstyle,g;n[0]!==l||n[1]!==m||n[2]!==f?(g=(e||(e=r("stylex"))).props(d.computedStyles(l),!m&&d.computedPseudoStyles(l),!m&&d.block,f),n[0]=l,n[1]=m,n[2]=f,n[3]=g):g=n[3];var h;return n[4]!==i||n[5]!==s||n[6]!==c||n[7]!==a||n[8]!==p||n[9]!==g||n[10]!==_?(h=u.jsx("span",babelHelpers.extends({"data-testid":void 0,dir:s,id:c,ref:a,suppressHydrationWarning:p},g,{children:i})),n[4]=i,n[5]=s,n[6]=c,n[7]=a,n[8]=p,n[9]=g,n[10]=_,n[11]=h):h=n[11],h}l.default=m}),98);
__d("BootloaderResource",["ExecutionEnvironment","suspendOrThrowIfUsedInSSR"],(function(t,n,r,o,a,i,l){var e,s,u={};function c(e){e.load()}function d(t){var n=t.getModuleIfRequireable();if(n==null){!(e||(e=r("ExecutionEnvironment"))).isInBrowser&&!t.isAvailableInSSR_DO_NOT_USE()&&(s||(s=r("suspendOrThrowIfUsedInSSR")))("Loading of bootloaded and T3 components is disabled during SSR");var o=t.getModuleId();if(!u[o]){var a=u[o]=t.load();a.finally(function(){delete u[o]})}throw u[o]}return n}l.preload=c,l.read=d}),98);
__d("lazyLoadComponent",["BootloaderResource","cr:2448","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e=["ref"],s,u=s||(s=o("react")),c=new Map;function d(e,t){c.set(e,t)}function m(e){return c.get(e)}function p(t){var r=m(t);if(r)return r;function a(r){var a=o("react-compiler-runtime").c(7),i,l;a[0]!==r?(l=r.ref,i=babelHelpers.objectWithoutPropertiesLoose(r,e),a[0]=r,a[1]=i,a[2]=l):(i=a[1],l=a[2]);var s=l===void 0?void 0:l,c;a[3]===Symbol.for("react.memo_cache_sentinel")?(c=o("BootloaderResource").read(t),a[3]=c):c=a[3];var d=c;n("cr:2448")(t);var m;return a[4]!==i||a[5]!==s?(m=u.jsx(d,babelHelpers.extends({},i,{ref:s})),a[4]=i,a[5]=s,a[6]=m):m=a[6],m}return a.displayName="lazyLoadComponent("+t.getModuleId()+")",d(t,a),a}l.default=p}),98);
__d("BaseTextV2TooltipWrapper.react",["JSResourceForInteraction","lazyLoadComponent","promiseDone","react","react-compiler-runtime","react-strict-dom"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useRef,d=u.useState,m=r("JSResourceForInteraction")("BaseTooltip.react").__setRef("BaseTextV2TooltipWrapper.react"),p=r("lazyLoadComponent")(m);function _(e){var t=o("react-compiler-runtime").c(12),n=e.children,a=e.truncationTooltip,i=c(null),l=d(!1),u=l[0],_=l[1],f=d(),g=f[0],h=f[1],y;t[0]!==u||t[1]!==a?(y=function(){var e=i.current;if(!(e==null||a.tooltipImpl==null)){var t=e.offsetWidth<e.scrollWidth||e.offsetHeight<e.scrollHeight;t!==u&&_(t),t&&(m.preload(),r("promiseDone")(a.tooltipImpl.load(),function(e){h(function(t){return e})}))}},t[0]=u,t[1]=a,t[2]=y):y=t[2];var C=y,b;t[3]===Symbol.for("react.memo_cache_sentinel")?(b=function(t){var e,n=t==null||(e=t.children[0])==null?void 0:e.children[0];if(n==null)return null;i.current={offsetHeight:n.offsetHeight,offsetWidth:n.offsetWidth,scrollHeight:n.scrollHeight,scrollWidth:n.scrollWidth}},t[3]=b):b=t[3];var v=b,S;t[4]!==n||t[5]!==u||t[6]!==g||t[7]!==a?(S=u&&g!=null?s.jsx(p,babelHelpers.extends({tooltipImpl:g},a.tooltipProps,{children:n})):n,t[4]=n,t[5]=u,t[6]=g,t[7]=a,t[8]=S):S=t[8];var R;return t[9]!==C||t[10]!==S?(R=s.jsx(o("react-strict-dom").html.span,{onMouseEnter:C,ref:v,children:S}),t[9]=C,t[10]=S,t[11]=R):R=t[11],R}l.default=_}),98);
__d("BaseTextV2Utils",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=e.fontMetrics,n=t.capHeight/t.unitsPerEm,r=e.fontSize,o=r*n,a=o+e.lineGap;return{fontMetrics:t,fontSize:r,lineHeight:a}}var l=function(t){return parseFloat(t.toFixed(4))};function s(t){var n=e(t),r=n.fontMetrics,o=n.fontSize,a=n.lineHeight,i=Math.abs(r.descent),s=r.capHeight/r.unitsPerEm,u=i/r.unitsPerEm,c=r.ascent/r.unitsPerEm,d=r.lineGap/r.unitsPerEm,m=r.ascent+r.lineGap+i,p=m/r.unitsPerEm,_=p*o,f=function(t){if(a){var e=(_-a)/2;return t-e/o}return t},g=f(c-s+d/2)*-1,h=f(u+d/2)*-1;return{baselineTrim:l(h)+"em",capHeightTrim:l(g)+"em",fontSize:l(o)+"px",lineHeight:a?l(a)+"px":"normal"}}i.precomputeValues=s}),66);
__d("BaseTextV2.react",["BaseHeading.react","BaseTextContext","BaseTextV2SpanWrapper.react","BaseTextV2TooltipWrapper.react","BaseTextV2Utils","react","react-compiler-runtime","react-strict-dom"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={auto:{hyphens:"xkjl1po",$$css:!0},manual:{hyphens:"xxydokm",$$css:!0}},c={base:{maxWidth:"x193iq5w",minWidth:"xeuugli",wordBreak:"x13faqbe",wordWrap:"x1vvkbs",$$css:!0},block:{display:"x1lliihq",$$css:!0},center:{textAlign:"x2b8uid",$$css:!0},end:{textAlign:"xp4054r",$$css:!0},heading:{maxWidth:"x193iq5w",minWidth:"xeuugli",$$css:!0},inline:{display:"xt0psk2",$$css:!0},linClampOneLine:{display:"x1lliihq",maxWidth:"x193iq5w",overflowX:"x6ikm8r",overflowY:"x10wlt62",textOverflow:"xlyipyv",whiteSpace:"xuxw1ft",$$css:!0},lineClamp:{WebkitBoxOrient:"x1ua5tub",display:"x104kibb",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0},lineClampMultiLine:{display:"x1lliihq",maxWidth:"x193iq5w",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0},lineClampRoot:{display:"x1lliihq",overflowX:"x1plvlek",overflowY:"xryxfnj",position:"x1n2onr6",$$css:!0},numberOfLines:function(t){return[{WebkitLineClamp:t!=null?"x1yhjpo9":t,$$css:!0},{"--x-WebkitLineClamp":t!=null?t:void 0}]},preserveNewLines:{whiteSpace:"x1fj9vlw",$$css:!0},start:{textAlign:"x1yc453h",$$css:!0}};function d(e){var t=o("react-compiler-runtime").c(33),n=e.children,a=e.colorVariant,i=e.dir,l=e.fontMetrics,d=e.hyphens,m=e.id,p=e.isPrimaryHeading,_=e.isSemanticHeading,f=e.maxLines,g=e.preserveNewLines,h=e.ref,y=e.suppressHydrationWarning,C=e.testid,b=e.textAlign,v=e.truncationTooltip,S=e.typeVariant,R=d===void 0?"none":d,L=p===void 0?!1:p,E=_===void 0?!1:_,k=f===void 0?0:f,I=g===void 0?!1:g,T=b===void 0?"auto":b,D=S.xstyleConfig.textType,x=a.xstyleConfig.textColor,$=o("BaseTextContext").useBaseTextContext(),P=($==null?void 0:$.nested)===!0,N;t[0]!==l||t[1]!==S.fontSize||t[2]!==S.lineGap?(N=o("BaseTextV2Utils").precomputeValues({fontMetrics:l,fontSize:S.fontSize,lineGap:S.lineGap}),t[0]=l,t[1]=S.fontSize,t[2]=S.lineGap,t[3]=N):N=t[3];var M=N,w;t[4]!==n||t[5]!==k?(w=k===0?n:s.jsx(o("react-strict-dom").html.span,{style:c.lineClampRoot,children:s.jsx(o("react-strict-dom").html.span,{style:k===1?c.linClampOneLine:[c.numberOfLines(k),c.lineClampMultiLine,c.lineClamp],children:n})}),t[4]=n,t[5]=k,t[6]=w):w=t[6];var A=w,F;t[7]!==k||t[8]!==A||t[9]!==v?(F=v!=null&&k>0?s.jsx(r("BaseTextV2TooltipWrapper.react"),{truncationTooltip:v,children:A}):A,t[7]=k,t[8]=A,t[9]=v,t[10]=F):F=t[10];var O=F,B=P?void 0:i,W=T!=="auto"&&c[T],q=!P&&c.block,U=P&&c.inline,V=R!=="none"&&u[R],H=I&&c.preserveNewLines,G;t[11]!==W||t[12]!==q||t[13]!==U||t[14]!==V||t[15]!==H||t[16]!==x||t[17]!==D?(G=[c.base,W,q,U,V,H,x,D],t[11]=W,t[12]=q,t[13]=U,t[14]=V,t[15]=H,t[16]=x,t[17]=D,t[18]=G):G=t[18];var z;t[19]!==M||t[20]!==m||t[21]!==P||t[22]!==h||t[23]!==y||t[24]!==B||t[25]!==G||t[26]!==C||t[27]!==O?(z=s.jsx(r("BaseTextV2SpanWrapper.react"),{computedValues:M,dir:B,id:m,nested:P,ref:h,suppressHydrationWarning:y,testid:void 0,xstyle:G,children:O}),t[19]=M,t[20]=m,t[21]=P,t[22]=h,t[23]=y,t[24]=B,t[25]=G,t[26]=C,t[27]=O,t[28]=z):z=t[28];var j=z,K;if(t[29]!==L||t[30]!==E||t[31]!==j){var Q=E||L?s.jsx(r("BaseHeading.react"),{isPrimaryHeading:L,xstyle:c.heading,children:j}):j;K=s.jsx(o("BaseTextContext").BaseTextContextProvider,{nested:!0,children:Q}),t[29]=L,t[30]=E,t[31]=j,t[32]=K}else K=t[32];return K}l.default=d}),98);
__d("BaseTextV2FontMetrics",[],(function(t,n,r,o,a,i){"use strict";var e={ascent:2044,capHeight:1400,descent:-663,lineGap:0,unitsPerEm:2e3},l={ascent:2044,capHeight:1400,descent:-533,lineGap:0,unitsPerEm:2e3},s={ascent:1980,capHeight:1453,descent:-562,lineGap:0,unitsPerEm:2048},u={ascent:2210,capHeight:1444,descent:-514,lineGap:0,unitsPerEm:2048},c={ascent:1900,capHeight:1456,descent:-500,lineGap:0,unitsPerEm:2048},d={ascent:1900,capHeight:1456,descent:-500,lineGap:0,unitsPerEm:2048};i.OptimisticDisplayFontMetrics=e,i.OptimisticFontMetrics=l,i.AppleSystemFontMetrics=s,i.WindowsSystemFontMetrics=u,i.RobotoFontMetrics=c,i.RobotoFlexFontMetrics=d}),66);
__d("Lexical",["cr:370"],(function(t,n,r,o,a,i){a.exports=n("cr:370")}),null);
__d("LexicalComposerContext",["cr:509"],(function(t,n,r,o,a,i){a.exports=n("cr:509")}),null);
__d("LexicalSelection",["cr:2180"],(function(t,n,r,o,a,i){a.exports=n("cr:2180")}),null);
__d("LexicalUtils",["cr:2774"],(function(t,n,r,o,a,i){a.exports=n("cr:2774")}),null);
__d("MetaConfig",["invariant","BanzaiLazyQueue","ExecutionEnvironment","MetaConfigMap"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u={},c={_:function(n){var t=r("MetaConfigMap").get(n);t!=null||s(0,57910,n);var a=t.value,i=t.log_id;return i!=null&&u[n]!==!0&&((e||(e=r("ExecutionEnvironment"))).isInBrowser&&o("BanzaiLazyQueue").queuePost("metaconfig_exposure",{identifier:n,log_id:i}),u[n]=!0),a}},d=c;l.default=d}),98);
__d("WAEncodeString",["WATextEncoding"],(function(t,n,r,o,a,i,l){"use strict";var e=o("WATextEncoding").newTextEncoder();function s(t){return e.encode(t)}l.toUtf8=s}),98);
__d("P2XFunnelIdGenerator",["WABase64","WACryptoHmac","WAEncodeString","WAWebUserPrefsMultiDevice","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t){this.$1=e,this.$2=t}var t=e.prototype;return t.genFunnelInfo=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield o("WAWebUserPrefsMultiDevice").getChatThreadLoggingSecretB64();return e==null||e.trim().length===0?{funnel_id:"",is_logging_secret_available:!1}:{funnel_id:o("WABase64").encodeB64(yield o("WACryptoHmac").hmacSha256(o("WAEncodeString").toUtf8(e+this.$1),o("WAEncodeString").toUtf8(this.$2))),is_logging_secret_available:!0}});function t(){return e.apply(this,arguments)}return t})(),e})();l.P2XFunnelIdGenerator=e}),98);
__d("WAWebMerchantCommerceEventWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumBizPlatform"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({MerchantCommerceEvent:[4688,{acceptedPaymentMethods:[1,e.TYPES.STRING],adId:[2,e.TYPES.STRING],appSessionId:[3,e.TYPES.STRING],bizPlatform:[4,o("WAWebWamEnumBizPlatform").BIZ_PLATFORM],commerceExperience:[6,e.TYPES.STRING],commerceFlowId:[20,e.TYPES.STRING],commerceInteractionAction:[7,e.TYPES.STRING],commerceInteractionActionType:[21,e.TYPES.STRING],commerceOrderStatus:[22,e.TYPES.STRING],commercePaymentStatus:[8,e.TYPES.STRING],commerceSessionId:[9,e.TYPES.STRING],commerceSurface:[10,e.TYPES.STRING],extraAttributes:[11,e.TYPES.STRING],isCtwaOriginated:[12,e.TYPES.BOOLEAN],isEligibleForAdSignal:[13,e.TYPES.BOOLEAN],merchantHasCatalog:[14,e.TYPES.BOOLEAN],merchantIsDiscoverable:[15,e.TYPES.BOOLEAN],p2mFlow:[17,e.TYPES.STRING],referral:[18,e.TYPES.STRING],sequenceId:[19,e.TYPES.INTEGER]},[1,1,1],"regular"]},{MerchantCommerceEvent:[]});l.MerchantCommerceEventWamEvent=s}),98);
__d("WAWebPsStructuredMessageInteractionWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumBizPlatform","WAWebWamEnumInteractionType","WAWebWamEnumMediaType","WAWebWamEnumStructuredMessageClass"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({PsStructuredMessageInteraction:[3052,{bizPlatform:[1,o("WAWebWamEnumBizPlatform").BIZ_PLATFORM],businessOwnerJid:[7,e.TYPES.STRING],messageClass:[3,o("WAWebWamEnumStructuredMessageClass").STRUCTURED_MESSAGE_CLASS],messageClassAttributes:[5,e.TYPES.STRING],messageInteraction:[4,o("WAWebWamEnumInteractionType").INTERACTION_TYPE],messageMediaType:[2,o("WAWebWamEnumMediaType").MEDIA_TYPE],templateId:[8,e.TYPES.STRING],threadIdHmac:[9,e.TYPES.STRING]},[1,1,1],"private",0]},{PsStructuredMessageInteraction:[]});l.PsStructuredMessageInteractionWamEvent=s}),98);
__d("PaymentLinkWamLogger",["$InternalEnum","P2XFunnelIdGenerator","PaymentLink","WAWebABProps","WAWebChatGetters","WAWebLinkify","WAWebMerchantCommerceEventWamEvent","WAWebMobilePlatforms","WAWebMsgGetters","WAWebProtobufsE2E.pb","WAWebPsStructuredMessageInteractionWamEvent","WAWebStructuredMessageReceiveWamEvent","WAWebUserPrefsGeneral","WAWebUserPrefsMeUser","WAWebWamEnumBizPlatform","WAWebWamEnumInteractionType","WAWebWamEnumStructuredMessageClass","WAWebWamMsgUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e="receiver_log_key",s={CTA:"payment_link",P2M_FLOW:"PAYMENT_LINK"},u={INTERACTION_ACTION:"send_payment_link",INTERACTION_SURFACE:"chat",REFERRAL:"composer",COMMERCE_EXPERIENCE:"non_native",P2M_FLOW:"payment_link",ACCEPTED_PAYMENT_METHOD:"payment_link"},c=n("$InternalEnum")({NOT_STARTED:"not_started",STARTED:"started",COMPLETED:"completed"}),d=n("$InternalEnum")({INDIVIDUAL:"individual",GROUP:"group",BROADCAST:"broadcast",NEWSLETTER:"newsletter"}),m=n("$InternalEnum")({LINK:"link",LINK_PREVIEW:"link_preview",LINK_CTA:"link_cta",UNKNOWN:"unknown"});function p(e){var t,n,r,a=o("WAWebMsgGetters").getPaymentLinkMetadata(e),i=(a==null||(t=a.provider)==null?void 0:t.paramsJson)!=null?(n=JSON.parse(a==null||(r=a.provider)==null?void 0:r.paramsJson))==null?void 0:n.name:null;return i}function _(e){if(o("WAWebMsgGetters").getIsSentByMe(e))return!1;if(o("WAWebMsgGetters").getRichPreviewType(e)===o("WAWebProtobufsE2E.pb").Message$ExtendedTextMessage$PreviewType.PAYMENT_LINKS)return o("WAWebABProps").getABPropConfigValue("smb_payment_links_logging_enabled");var t=p(e);return t==null?!1:o("WAWebABProps").getABPropConfigValue("smb_payment_links_logging_enabled")}function f(e){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=new(o("P2XFunnelIdGenerator")).P2XFunnelIdGenerator(e,t.id.id+t.to.toJid());return n.genFunnelInfo()}),g.apply(this,arguments)}function h(e,t){return y.apply(this,arguments)}function y(){return y=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=p(e.msg),r=n!=null?n:t!=null?o("PaymentLink").getPSP(t):null,a=yield f(e.msg),i=C(e.msg,E(e.msg),a.funnel_id,a.is_logging_secret_available,r,n!=null),l=new(o("WAWebStructuredMessageReceiveWamEvent")).StructuredMessageReceiveWamEvent(babelHelpers.extends({},i,{messageClassAttributes:JSON.stringify(babelHelpers.extends({},i.messageClassAttributes))},x(e.msg)&&{businessOwnerJid:D(e)}));l.commit()}),y.apply(this,arguments)}function C(e,t,n,r,a,i){var l=b(e,t,n,r,a,i);return{bizPlatform:o("WAWebWamEnumBizPlatform").BIZ_PLATFORM.SMB,messageClass:o("WAWebWamEnumStructuredMessageClass").STRUCTURED_MESSAGE_CLASS.HSM,messageClassAttributes:l,messageMediaType:o("WAWebWamMsgUtils").getWamMediaType(e)}}function b(e,t,n,r,a,i){var l={funnel_id:n,is_logging_secret_available:r,cta:s.CTA,p2m_flow:s.P2M_FLOW,chat_type:t,has_link_preview:o("WAWebMsgGetters").getRichPreviewType(e)===o("WAWebProtobufsE2E.pb").Message$ExtendedTextMessage$PreviewType.PAYMENT_LINKS,is_payment_provider_in_metadata:i,is_forwarded:o("WAWebMsgGetters").getIsForwarded(e),is_edited:o("WAWebMsgGetters").getIsEdited(e)};return l=v(e,l),l=S(l,a),l=R(e,l),o("WAWebABProps").getABPropConfigValue("payment_link_trace_id_logging_enabled")&&(l=L(e,l)),l}function v(e,t){var n=$(e.paymentLinkMetadata);return babelHelpers.extends({},t,n!=null&&{cta_variant:n})}function S(e,t){return babelHelpers.extends({},e,t!=null&&{payment_provider:t})}function R(e,t){var n,r=o("WAWebMsgGetters").getPaymentLinkMetadata(e),a=z(r==null||(n=r.provider)==null?void 0:n.paramsJson);return babelHelpers.extends({},t,a!=null&&{metatags:a})}function L(e,t){var n,r=o("WAWebMsgGetters").getPaymentLinkMetadata(e),a=j(r==null||(n=r.provider)==null?void 0:n.paramsJson);return a==null||a===""?t:babelHelpers.extends({},t,{payment_link_trace_id:a})}function E(e){return k(e)?d.GROUP:I(e)?d.BROADCAST:T(e)?d.NEWSLETTER:d.INDIVIDUAL}function k(e){var t,n=e.from;return(t=n==null?void 0:n.isGroup())!=null?t:!1}function I(e){var t,n;return(t=(n=e.broadcastId)==null?void 0:n.isBroadcast())!=null?t:!1}function T(e){var t,n=e.from;return(t=n==null?void 0:n.isNewsletter())!=null?t:!1}function D(e){var t;if(e.interaction_component==null){var n;return(n=o("WAWebMsgGetters").getSender(e.msg))==null?void 0:n.toJid()}return(t=e.msg.senderObj)==null?void 0:t.id.toJid()}function x(e){var t;if(!o("WAWebABProps").getABPropConfigValue("payment_link_trace_id_logging_enabled"))return!0;var n=o("WAWebMsgGetters").getPaymentLinkMetadata(e),r=j(n==null||(t=n.provider)==null?void 0:t.paramsJson);return!(r!=null&&r!==""&&o("WAWebMsgGetters").getIsForwarded(e))}function $(e){var t,n;return(e==null||(t=e.header)==null?void 0:t.headerType)!=null?o("WAWebProtobufsE2E.pb").Message$PaymentLinkMetadata$PaymentLinkHeader$PaymentLinkHeaderType.getName(e==null||(n=e.header)==null?void 0:n.headerType).toLowerCase():null}function P(e,t){return N.apply(this,arguments)}function N(){return N=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield M(e,t,E(e.msg)),r=new(o("WAWebPsStructuredMessageInteractionWamEvent")).PsStructuredMessageInteractionWamEvent(babelHelpers.extends({},n,{messageClassAttributes:JSON.stringify(babelHelpers.extends({},n.messageClassAttributes))},x(e.msg)&&{businessOwnerJid:D(e)},{messageInteraction:o("WAWebWamEnumInteractionType").INTERACTION_TYPE.USER_PAY_NOW}));r.commit()}),N.apply(this,arguments)}function M(e,t,n){return w.apply(this,arguments)}function w(){return w=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r,o=p(e.msg),a=o!=null?o:t,i=yield f(e.msg),l=C(e.msg,n,i.funnel_id,i.is_logging_secret_available,a,o!=null);return babelHelpers.extends({},l,{messageClassAttributes:babelHelpers.extends({},l.messageClassAttributes,{interaction_component:(r=e.interaction_component)!=null?r:m.UNKNOWN})})}),w.apply(this,arguments)}function A(){return o("WAWebMobilePlatforms").isSMB()&&o("WAWebABProps").getABPropConfigValue("smb_payment_links_seller_logging_enabled")}function F(e,t,n,r,o,a,i){return O.apply(this,arguments)}function O(){return O=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r,a,i,l){var s=o("WAWebLinkify").findLinks(e,!1,o("WAWebUserPrefsMeUser").getMeDevicePnOrThrow()),u=U(s,t,n,r,i,l);u&&B(a,u)}),O.apply(this,arguments)}function B(e,t){var n=new(o("WAWebMerchantCommerceEventWamEvent")).MerchantCommerceEventWamEvent({bizPlatform:o("WAWebWamEnumBizPlatform").BIZ_PLATFORM.SMB,commerceInteractionAction:u.INTERACTION_ACTION,commerceSurface:u.INTERACTION_SURFACE,referral:u.REFERRAL,commerceExperience:u.COMMERCE_EXPERIENCE,p2mFlow:u.P2M_FLOW,acceptedPaymentMethods:u.ACCEPTED_PAYMENT_METHOD,isEligibleForAdSignal:!1,merchantHasCatalog:e,extraAttributes:JSON.stringify(t)});n.commit()}function W(e){return o("WAWebChatGetters").getIsGroup(e)?d.GROUP:o("WAWebChatGetters").getIsBroadcast(e)?d.BROADCAST:o("WAWebChatGetters").getIsNewsletter(e)?d.NEWSLETTER:d.INDIVIDUAL}function q(e){if(o("WAWebChatGetters").getIsGroup(e))return e.getParticipantCount();if(o("WAWebChatGetters").getIsNewsletter(e)){var t,n;return(t=(n=e.newsletterMetadata)==null?void 0:n.size)!=null?t:1}return 1}function U(e,t,n,r,a,i){var l,s,u,c,d=e.map(function(e){return o("PaymentLink").getPSP(e.url)}).filter(function(e){return e!=null});if(d.length<=0)return null;var m=Array.from(new Set(d)),p=o("WAWebUserPrefsGeneral").getUserPrivacySettings(),_=p.disableLinkPreviews,f={url_preview_cancelled:t,url_preview_enabled:!_,url_preview_loaded:n!=null||t,payment_provider:m.toString(),rich_preview_type:(l=n==null||(s=n.data)==null?void 0:s.richPreviewType)!=null?l:o("WAWebProtobufsE2E.pb").Message$ExtendedTextMessage$PreviewType.NONE,does_preview_have_thumbnail:!K(n==null||(u=n.data)==null?void 0:u.thumbnail)||!K(n==null||(c=n.data)==null?void 0:c.thumbnailHQ),number_of_payment_links:d.length,number_of_links:e.length,link_preview_status:r,is_first_http_url_a_payment_link:Q(e),chat_participant_count:q(a),chat_type:W(a)};return f=V(f,i),f=H(f,i),o("WAWebABProps").getABPropConfigValue("payment_link_trace_id_logging_enabled")&&(f=G(f,i)),f}function V(e,t){var n=$(t);return babelHelpers.extends({},e,n!=null&&{cta_variant:n})}function H(e,t){var n,r=z(t==null||(n=t.provider)==null?void 0:n.paramsJson);return babelHelpers.extends({},e,r!=null&&{metatags:r})}function G(e,t){var n,r=j(t==null||(n=t.provider)==null?void 0:n.paramsJson);return r==null||r===""?e:babelHelpers.extends({},e,{payment_link_trace_id:r})}function z(e){try{var t,n=e==null?null:JSON.parse(e);if(n==null)return null;var r=n==null?void 0:n.meta_tags;if(r==null)return null;var o=null;r.is_business_verified!=null&&(o=babelHelpers.extends({},o,{is_business_verified:r.is_business_verified===!0}));var a=(t=r.provider_name)==null?void 0:t.trim();return a!=null&&(o=babelHelpers.extends({},o,{is_psp_name_available:a.length>0})),o}catch(e){return null}}function j(e){if(e==null||e==="")return null;try{var t=JSON.parse(e);return t.payment_link_trace_id}catch(e){return null}}function K(e){return e==null||e.trim().length===0}function Q(e){for(var t of e)if(t&&t.isHttp)return o("PaymentLink").getPSP(t.url)!=null;return!1}l.LinkPreviewStatus=c,l.ClickInteractionComponent=m,l.shouldLogReceiverEvent=_,l.genReceiverEventFunnelInfo=f,l.genLogReceiveEvent=h,l.genLogClickEvent=P,l.shouldLogSendEvent=A,l.genLogSendEventIfPaymentLink=F}),98);
__d("ReactFbPropTypes",["FbtResultBase","warning"],(function(t,n,r,o,a,i){function e(e){var t=function(r,o,a,i,l,s,u){var t=o[a];return t instanceof n("FbtResultBase")?null:r?e.isRequired(o,a,i,l,s,u):e(o,a,i,l,s,u)},r=t.bind(null,!1);return r.isRequired=t.bind(null,!0),r}i.wrapStringTypeChecker=e}),null);
__d("VultureJSGating",["justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e=!1;function s(){e=!0}function u(){return e?!1:r("justknobx")._("2635")}l.__DO_NOT_USE_DISABLE_VULTURE_JS_LOGGING=s,l.isLoggingEnabled=u}),98);
__d("WAWamPrivateStatsToken",["WACryptoEd25519","WACryptoPrimitives"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return o("WACryptoEd25519").runInAllocationScope(function(){var n,r=(n=o("WACryptoEd25519")).p3Element(),a=n.allocate(Uint8Array,32);a.set(t),u(a),o("WACryptoPrimitives").lowlevel.scalarbase(r,a);var i=n.hashToPoint(e),l=o("WACryptoPrimitives").lowlevel.add;l(i,r);var s=new Uint8Array(32);return n.pack(s,i),s})}function s(e,t,n){return o("WACryptoEd25519").runInAllocationScope(function(){var r=o("WACryptoEd25519").p3Element();if(o("WACryptoEd25519").unpack(r,e))return null;var a=o("WACryptoEd25519").p3Element();if(o("WACryptoEd25519").unpackneg(a,n)!==0)return null;var i=o("WACryptoEd25519").allocate(Uint8Array,32);i.set(t),u(i);var l=o("WACryptoEd25519").p3Element();o("WACryptoPrimitives").lowlevel.scalarmult(l,a,i);var s=o("WACryptoPrimitives").lowlevel.add;s(r,l);var c=new Uint8Array(32);return o("WACryptoEd25519").pack(c,r),c})}function u(e){e[0]&=248,e[31]&=127,e[31]|=64}l.blindToken=e,l.unblindToken=s}),98);
__d("WAACSTokenUtils",["WABinary","WACryptoDependencies","WACryptoPrimitives","WAWamPrivateStatsToken"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=new Uint8Array(32);o("WACryptoDependencies").getCrypto().getRandomValues(e);var t=new Uint8Array(32);o("WACryptoDependencies").getCrypto().getRandomValues(t);var n=o("WAWamPrivateStatsToken").blindToken(e,t);return{blindedToken:n,blindingFactor:t,token:e}}function s(e){var t=e.token,n=e.unblindedSignedToken,r=o("WABinary").Binary.build(t,n);return o("WACryptoPrimitives").hash(r.readByteArrayView())}l.getBlindedToken=e,l.getSharedSecret=s}),98);
__d("WABase64UrlSafe",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e.replace(/\//g,"_").replace(/\+/g,"-")}function l(e){return e.replace(/-/g,"+").replace(/_/g,"/")}function s(e){for(var t=atob(e),n=t.length,r=new Uint8Array(new ArrayBuffer(n)),o=0;o<n;o++)r[o]=t.charCodeAt(o);return r}i.urlSafeBase64=e,i.urlSafeBase64ToStandard=l,i.getBytesFromBase64=s}),66);
__d("WACert.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={},c={},d={},m={};s.name="NoiseCertificate",s.internalSpec={details:[1,(e=o("WAProtoConst")).TYPES.BYTES],signature:[2,e.TYPES.BYTES]},u.name="NoiseCertificate$Details",u.internalSpec={serial:[1,e.TYPES.UINT32],issuer:[2,e.TYPES.STRING],expires:[3,e.TYPES.UINT64],subject:[4,e.TYPES.STRING],key:[5,e.TYPES.BYTES]},c.name="CertChain",c.internalSpec={leaf:[1,e.TYPES.MESSAGE,d],intermediate:[2,e.TYPES.MESSAGE,d]},d.name="CertChain$NoiseCertificate",d.internalSpec={details:[1,e.TYPES.BYTES],signature:[2,e.TYPES.BYTES]},m.name="CertChain$NoiseCertificate$Details",m.internalSpec={serial:[1,e.TYPES.UINT32],issuerSerial:[2,e.TYPES.UINT32],key:[3,e.TYPES.BYTES],notBefore:[4,e.TYPES.UINT64],notAfter:[5,e.TYPES.UINT64]},l.NoiseCertificateSpec=s,l.NoiseCertificate$DetailsSpec=u,l.CertChainSpec=c,l.CertChain$NoiseCertificateSpec=d,l.CertChain$NoiseCertificate$DetailsSpec=m}),98);
__d("WACountries",[],(function(t,n,r,o,a,i){var e={1:'[334,"[2-9]","($1) $2-$3"],[10,9]',20:'["Ah","[23]"],["Bg","1[35]|[4-6]|8[2468]|9[235-7]"],[334,"[89]"],[28,1],[10,5,8,9]',211:'[333,"[19]"],9',212:'[54,["5(29|38)","5(29|38)[89]"],1],[3222,"5[45]"],[45,"5(2[2-489]|3[5-9]|9)|892",1],[27,8,1],[36,"[5-7]",1],9',213:'[2222,"[1-4]"],[2322,9],[3222,"[5-8]"],[9,8]',216:"233,8",218:'[27,"[25-79]",1],9',220:'[34,"[2-9]"],7',221:'[2322,"[379]"],[3222,8],[3222,8],[2322,"[379]"],9',222:'[2222,"[2-48]"],8',223:'[2222,"[24-9]"],8',224:'[2222,3],[3222,"[67]"],[9,8]',225:'[2222,"[02-9]"],[8,10]',226:'[2222,"[025-7]"],8',227:'[233,"08"],[2222,"[0289]"],8',228:'[2222,"[279]"],8',229:'[2222,"[2689]"],[22222,0],[8,10,4]',230:'[34,"[2-46]|8[013]"],[44,5],[7,8]',231:'[133,"[45]"],[233,2],[234,"[23578]"],[7,9,8]',232:'[26,"[237-9]"],8',233:'[35,8],[234,"[235]"],[9,8]',234:'["ACd","[12]|9(0[3-9]|[1-9])"],["BCc","[3-7]|8[2-9]"],["CCd","[7-9]"],["CDe","[78]"],["CEf","[78]"],[10,8,11,12,13,14]',235:'[2222,"[2679]"],8',236:'[2222,"[278]"],8',237:'[2222,88],[12222,"[26]"],[8,9]',238:'[322,"[2-59]"],7',239:'[34,"[29]"],7',240:'[333,"[235]"],[36,"[89]"],9',241:"[2222,0],8",242:'[3222,801],[144,8],[234,"[02]"],9',243:'[223,88],[25,"[1-6]"],[234,1],[333,"[89]"],[9,7]',244:'[333,"[29]"],9',245:'[34,40],[333,"[49]"],[7,9]',246:"[34,3],7",247:"5",248:'[133,"[246]"],7',249:'[234,"[19]"],9',250:'[2222,0],[333,2],[333,"[7-9]"],[9,8]',251:'[234,"[1-59]"],9',252:'[24,"8[125]"],[6,"[134]"],[16,"1|2[0-79]|3[0-46-8]|4[0-7]|59"],[17,"24|[67]"],[333,"[348]|64|79[0-8]|90"],["BA{5,7}","1|28|6[1-35-9]|799|9[2-9]"],[7,8,9,6]',253:'[2222,"[27]"],8',254:'["BA{5,7}","[24-6]"],[36,"[17]"],["CCd","[89]"],[9,7,8,10]',255:'[324,"[89]"],[234,"[24]"],[333,"[67]"],[9,7]',256:'[45,[202,2024]],[36,"[27-9]|4(6[45]|[7-9])"],[27,"[34]"],9',257:'[2222,"[2367]"],8',258:'["BCd","2|8[2-7]"],[333,8],[9,8]',260:'[333,"[28]"],9',261:'[2232,"[23]"],9',262:'[3222,"[268]"],9',263:'["CA{3,5}","2(0[45]|2[278]|[49]8)|3([09]8|17)|6([29]8|37|75)|[23][78]|(33|5[15]|6[68])[78]"],["ACA{2,4}","[49]"],[34,80],[27,["24|8[13-59]|(2[05-79]|39|5[45]|6[15-8])2","2(02[014]|4|[56]20|[79]2)|392|5(42|525)|6([16-8]21|52[013])|8[13-59]"]],[234,7],["CCd",["2(1[39]|2[0157]|[378]|[56][14])|3(12|29)","2(1[39]|2[0157]|[378]|[56][14])|3(123|29)"]],[46,8],["BA{3,5}","1|2(0[0-36-9]|12|29|[56])|3(1[0-689]|[24-6])|5([0236-9]|1[2-4])|6([013-59]|7[0-46-9])|(33|55|6[68])[0-69]|(29|3[09]|62)[0-79]"],["BCd","29[013-9]|39|54"],["DA{3,5}",["(25|54)8","258[23]|5483"]],[9,10,5,6,7,8]',264:'[233,88],["BCd",6],[333,87],[234,8],[9,8]',265:'[133,"1[2-9]"],[333,2],[234,3],[3222,"[17-9]"],[9,7]',266:"44,8",267:'[25,90],[34,"[2-6]"],[233,7],[8,7]',268:'[44,"[0237]"],[54,9],8',269:'[322,"[3478]"],7',27:'["Bd","8[1-4]"],["BCc","8[1-4]"],[333,860],[234,"[1-9]"],[5,6,7,8,9]',290:"[5,4]",291:'[133,"[178]"],7',297:'[34,"[25-9]"],7',298:'[6,"[2-9]"],6',299:"222,6",30:'[244,"21|7"],[46,"2(2|3[2-57-9]|4[2-469]|5[2-59]|6[2-9]|7[2-69]|8[2-49])"],[334,"[2689]"],10',31:'["CA{4,7}","[89]0"],[27,66],[18,6],[333,"1[16-8]|2[259]|3[124]|4[17-9]|5[124679]"],[234,"[1-57-9]"],[9,10,11,7,8]',32:'[323,"(80|9)0"],[1322,"[239]|4[23]"],[2222,"[15-8]"],[3222,4],[8,9]',33:'[3222,8],[12222,"[1-79]"],9',34:'[333,"[89]00"],[3222,"[5-9]"],9',350:"[35,2],8",351:'[234,"2[12]"],[333,"[236-9]"],9',352:'[23,"2(0[2-689]|[2-9])|[3-57]|8(0[2-9]|[13-9])|9(0[89]|[2-579])"],[222,"2(0[2-689]|[2-9])|[3-57]|8(0[2-9]|[13-9])|9(0[89]|[2-579])"],[223,"20[2-689]"],["BBBb","2([0367]|4[3-8])"],[323,"80[01]|90[015]"],[2223,20],[333,6],["BBBBb","2([0367]|4[3-8])"],["BBBA{1,5}","[3-57]|8[13-9]|9(0[89]|[2-579])|(2|80)[2-9]"],[9,4,5,6,7,8,10,11]',353:'[25,"2[24-9]|47|58|6[237-9]|9[35-9]"],[35,"[45]0"],["AdD",1],["BCd","[2569]|4[1-69]|7[14]"],[333,70],[333,81],[234,"[78]"],[433,1],[2134,8],[244,4],[9,7,8,10]',354:'[34,"[4-9]"],[333,3],[7,9]',355:'["Cd","80|9"],[134,"4[2-6]"],[233,"[2358][2-5]|4"],[35,"[23578]"],[234,6],[9,7,8]',356:'[44,"[2357-9]"],8',357:'[26,"[257-9]"],8',358:'[5,"75[12]"],["AA{4,9}","[2568][1-8]|3(0[1-9]|[1-9])|9"],[6,11],["CA{3,7}","([12]0|7)0|[368]"],["BA{4,8}","[12457]"],[6,7,8,9,10,11,12,5]',359:'[6,1],[1122,2],[34,"43[1-6]|70[1-9]"],["ACd",2],["BCc","[356]|4[124-7]|7[1-9]|8[1-6]|9[1-7]"],[323,"(70|8)0"],[332,"43[1-7]|7"],["BCd","[48]|9[08]"],[333,9],[9,6,7,8]',36:'[134,1],["BCd","[2-9]"],[9,8]',370:'[134,"52[0-79]"],[323,"[7-9]"],[26,"37|4([15]|6[1-8])"],[35,"[3-6]"],8',371:'[233,"[269]|8[01]"],8',372:'[34,["[369]|4[3-8]|5([0-2]|5[0-478]|6[45])|7[1-9]","[369]|4[3-8]|5([02]|1([0-8]|95)|5[0-478]|6(4[0-4]|5[1-589]))|7[1-9]"]],["Dd",["[45]|8(00|[1-4])","[45]|8(00[1-9]|[1-4])"]],[224,7],[433,80],[7,8,10]',373:'[35,"[89]"],[233,"22|3"],[323,"[25-7]"],8',374:'[323,"[89]0"],[35,"2|3[12]"],[26,"1|47"],[26,"[3-9]"],8',375:'[2322,["17[0-3589]|2[4-9]|[34]","17([02358]|1[0-2]|9[0189])|2[4-9]|[34]"],"$1 $2-$3-$4"],[3222,["1(5[24]|6[235]|7[467])|2(1[246]|2[25]|3[26])","1(5[24]|6(2|3[04-9]|5[0346-9])|7([46]|7[37-9]))|2(1[246]|2[25]|3[26])"],"$1 $2-$3-$4"],[423,["1(5[169]|6[3-5]|7[179])|2(1[35]|2[34]|3[3-5])","1(5[169]|6(3[1-3]|4|5[125])|7(1[3-9]|7[0-24-6]|9[2-7]))|2(1[35]|2[34]|3[3-5])"],"$1 $2-$3"],["[89]BCD","8[01]|9"],["82ADD",82],["800;C",800],["800;BA{2,4}",800],[9,6,7,8,10,11]',376:'[33,"[135-9]"],[44,1],[333,6],[6,9,8]',377:'[332,8],[233,4],[2222,"[39]"],[12222,6],[8,9]',378:'[2222,"[5-7]"],[46,0,"($1) $2"],[2222,"[5-7]"],[46,0],[8,10]',379:"[9,10,11,6,7,8]",380:'[333,["6[12][29]|(3[1-8]|4[136-8]|5[12457]|6[49])2|(56|65)[24]","6[12][29]|(35|4[1378]|5[12457]|6[49])2|(56|65)[24]|(3[1-46-8]|46)2[013-9]"]],[234,["4[45][0-5]|5(0|6[37])|6([12][018]|[36-8])|7|89|9[1-9]|(48|57)[0137-9]","4[45][0-5]|5(0|6(3[14-7]|7))|6([12][018]|[36-8])|7|89|9[1-9]|(48|57)[0137-9]"]],[45,"[3-6]"],["CCd","[89]"],[9,10]',381:'["CA{3,9}","(2[389]|39)0|[7-9]"],["BA{5,10}","[1-36]"],[8,9,10,6,7,11,12]',382:'["BCd","[2-9]"],8',383:'[35,"[89]"],[233,"[2-4]"],[333,"[23]"],[8,9]',385:'["BBc","6[01]"],["CBc",8],[143,1],["BCd","[67]"],["BCd",9],["BCd","[2-5]"],[333,8],[8,9,7]',386:'["BA{3,6}","8[09]|9"],[35,"59|8"],[233,"[37][01]|4[0139]|51|6"],[1322,"[1-57]"],[8,6,7]',387:'[233,"6[1-356]|[7-9]"],[233,"[3-5]","$1 $2-$3"],[2223,6],[8,9]',389:'[134,2],[233,"[347]"],[3122,"[58]"],8',39:'[6,"1(1|92)"],["BA{4,6}","0[26]"],["CA{3,6}",["0[13-57-9][0159]|8(03|4[17]|9[245])","0[13-57-9][0159]|8(03|4[17]|9(2|[45][0-4]))"]],["DA{2,6}","0([13-579][2-46-8]|8[236-8])"],[44,894],["BdD","0[26]|5"],["CCd","1[4679]|[38]"],["CdD","0[13-57-9][0159]"],[245,"0[26]"],[434,0],["CDe",3],[9,10,11,6,7,8]',40:'[33,["2[3-6]","2[3-6].9"]],[24,"219|31"],[234,"[23]1"],[333,"[237-9]"],[9,6]',41:'[333,"8[047]|90"],[2322,"[2-79]|81"],[32322,8],9',420:'[333,"[2-8]|9[015-7]"],[2333,9],[3333,9],9',421:'["ABd",21],["BBc",["[3-5][1-8]1","[3-5][1-8]1[67]"]],[1332,2,"$1/$2 $3 $4"],[2322,"[3-5]","$1/$2 $3 $4"],[333,"[689]"],[43,[909,9090]],[9,6,7]',423:'[322,"[237-9]"],[234,69],[333,6],[7,9]',43:'["AA{3,12}","1(11|[2-9])"],[32,517],["BA{3,5}","5[079]"],[6,1],["CA{3,10}","(31|4)6|51|6(5[0-3579]|[6-9])|7(20|32|8)|[89]"],["DA{3,9}","[2-467]|5[2-6]"],["BCd",5],["BDA{4,7}",5],[10,11,12,13,4,5,6,7,8,9]',44:'[34,[800,8001,80011,800111,8001111]],[322,[845,8454,84546,845464]],[36,800],["Ee",["1(38|5[23]|69|76|94)","1((38|69)7|5(24|39)|768|946)","1(3873|5(242|39[4-6])|(697|768)[347]|9467)"]],["Df","1([2-69][02-9]|[78])"],[244,["[25]|7(0|6[024-9])","[25]|7(0|6([04-9]|2[356]))"]],[46,7],[334,"[1389]"],[10,7,9]',45:'[2222,"[2-9]"],8',46:'["BcB",20],[34,"9(00|39|44)"],[232,"[12][136]|3[356]|4[0246]|6[03]|90[1-9]"],["AcBB",8],["CcB","1[2457]|2([247-9]|5[0138])|3[0247-9]|4[1357-9]|5[0-35-9]|6([125689]|4[02-57]|7[0-2])|9([125-8]|3[02-5]|4[0-3])"],["CcC","9(00|39|44)"],["BcBB","1[013689]|2[0136]|3[1356]|4[0246]|54|6[03]|90[1-9]"],[2322,7],[1332,8],[3222,"[13-5]|2([247-9]|5[0138])|6([124-689]|7[0-2])|9([125-8]|3[02-5]|4[0-3])"],[3223,9],[32322,"[26]"],[9,13,6,7,8]',47:'[323,"[489]"],[2222,"[235-7]"],8',48:'[223,["(1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])1","(1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])19"]],["CBc",64],[333,"39|45|5[0137]|6[0469]|7[02389]|8[08]"],[2322,"1[2-8]|[2-8]|9[145]"],[9,7]',49:'["BA{3,13}","3[02]|40|[68]9"],["CA{3,12}",["2(0[1-389]|1[124]|2[18]|3[14])|3([35-9][15]|4[015])|906|(2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1","2(0[1-389]|12[0-8])|3([35-9][15]|4[015])|906|2([13][14]|2[18])|(2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1"]],["DA{2,11}",["[24-6]|3([3569][02-46-9]|4[2-4679]|7[2-467]|8[2-46-8])|70[2-8]|8(0[2-9]|[1-8])|90[7-9]|[79][1-9]","[24-6]|3(3(0[1-467]|2[127-9]|3[124578]|7[1257-9]|8[1256]|9[145])|4(2[135]|4[13578]|9[1346])|5(0[14]|2[1-3589]|6[1-4]|7[13468]|8[13568])|6(2[1-489]|3[124-6]|6[13]|7[12579]|8[1-356]|9[135])|7(2[1-7]|4[145]|6[1-5]|7[1-4])|8(21|3[1468]|6|7[1467]|8[136])|9(0[12479]|2[1358]|4[134679]|6[1-9]|7[136]|8[147]|9[1468]))|70[2-8]|8(0[2-9]|[1-8])|90[7-9]|[79][1-9]|3[68]4[1347]|3(47|60)[1356]|3(3[46]|46|5[49])[1246]|3[4579]3[1357]"]],[34,138],["EA{2,10}",3],["CA{5,11}",181],["CAA{4,10}","1(3|80)|9"],["Ch","1[67]"],["CA{7,12}",8],[56,[185,1850,18500]],[344,7],[47,"18[68]"],[56,"15[0568]"],[47,"15[1279]"],[38,18],["CBh","1(6[023]|7)"],[427,"15[279]"],[328,15],[10,11,5,6,7,8,9,12,13,14,15]',500:"5",501:'[34,"[2-8]",1],[1343,0,1],[7,11]',502:'[44,"[2-7]"],[434,1],[8,11]',503:'[44,"[267]"],[34,"[89]"],[344,"[89]"],[8,7,11]',504:'[44,"[237-9]",1],8',505:'[44,"[125-8]"],8',506:'[44,"[24-7]|8[3-9]"],[334,"[89]",1],[8,10]',507:'[34,"[1-57-9]",1],[44,6,1],[7,8]',508:'[222,"[45]"],6',509:'[224,"[2-489]"],8',51:'[35,80],[17,1],[26,"[4-8]"],[333,9],[9,8]',52:'[244,"33|5[56]|81"],[334,"[2-9]"],[1244,"1(33|5[56]|81)"],[1334,1],[10,11]',53:'["BA{4,6}","2[1-4]|[34]"],["Ag",7],[17,5],[8,6,7]',54:'[424,["2(2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9])","2([23]02|6([25]|4[6-8])|9([02356]|4[02568]|72|8[23]))|3(3[28]|4([04679]|3[5-8]|5[4-68]|8[2379])|5([2467]|3[237]|8[2-5])|7[1-578]|8([2469]|3[2578]|5[4-8]|7[36-8]|8[5-8]))|2(2[24-9]|3[1-59]|47)","2([23]02|6([25]|4(64|[78]))|9([02356]|4([0268]|5[2-6])|72|8[23]))|3(3[28]|4([04679]|3[78]|5(4[46]|8)|8[2379])|5([2467]|3[237]|8[23])|7[1-578]|8([2469]|3[278]|5[56][46]|86[3-6]))|2(2[24-9]|3[1-59]|47)|38([58][78]|7[378])|3(4[35][56]|58[45]|8([38]5|54|76))[4-6]","2([23]02|6([25]|4(64|[78]))|9([02356]|4([0268]|5([24-6]|3[2-5]))|72|8[23]))|3(3[28]|4([04679]|3(5(4[0-25689]|[56])|[78])|58|8[2379])|5([2467]|3[237]|8([23]|4([45]|60)|5(4[0-39]|5|64)))|7[1-578]|8([2469]|3[278]|54(4|5[13-7]|6[89])|86[3-6]))|2(2[24-9]|3[1-59]|47)|38([58][78]|7[378])|3(454|85[56])[46]|3(4(36|5[56])|8([38]5|76))[4-6]"],"$1 $2-$3"],[244,1,"$1 $2-$3"],[334,"[23]","$1 $2-$3"],[334,"[68]",1],[1424,["9(2[2-469]|3[3-578])","9(2(2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9]))","9(2([23]02|6([25]|4[6-8])|9([02356]|4[02568]|72|8[23]))|3(3[28]|4([04679]|3[5-8]|5[4-68]|8[2379])|5([2467]|3[237]|8[2-5])|7[1-578]|8([2469]|3[2578]|5[4-8]|7[36-8]|8[5-8])))|92(2[24-9]|3[1-59]|47)","9(2([23]02|6([25]|4(64|[78]))|9([02356]|4([0268]|5[2-6])|72|8[23]))|3(3[28]|4([04679]|3[78]|5(4[46]|8)|8[2379])|5([2467]|3[237]|8[23])|7[1-578]|8([2469]|3[278]|5([56][46]|[78])|7[378]|8(6[3-6]|[78]))))|92(2[24-9]|3[1-59]|47)|93(4[35][56]|58[45]|8([38]5|54|76))[4-6]","9(2([23]02|6([25]|4(64|[78]))|9([02356]|4([0268]|5([24-6]|3[2-5]))|72|8[23]))|3(3[28]|4([04679]|3(5(4[0-25689]|[56])|[78])|5(4[46]|8)|8[2379])|5([2467]|3[237]|8([23]|4([45]|60)|5(4[0-39]|5|64)))|7[1-578]|8([2469]|3[278]|5(4(4|5[13-7]|6[89])|[56][46]|[78])|7[378]|8(6[3-6]|[78]))))|92(2[24-9]|3[1-59]|47)|93(4(36|5[56])|8([38]5|76))[4-6]"],"$1 $2 $3-$4"],[1244,91,"$1 $2 $3-$4"],[1334,9,"$1 $2 $3-$4"],[10,11]',55:'[54,"9([1-9]|0[1-9])",1],[244,"[1-9][1-9]","$1 $2-$3"],[254,"([14689][1-9]|2[12478]|3[1-578]|5[1-5]|7[13-579])9","$1 $2-$3"],["[3589]00;cD","[3589]00"],[10,11,9]',56:'[234,"1([03-589]|21)|[29]0|78"],[54,21],[234,44],[144,"2[23]"],[144,"9[2-9]"],[234,"3[2-5]|[47]|5[1-3578]|6[13-57]|8(0[1-9]|[1-9])"],["CCd","60|8"],["600;CBC",60],["1230;CD",1],[54,219],[9,11]',57:'[17,"1[2-79]|[25-8]|(18|4)[2-9]"],[37,3],[137,["1(80|9)","1(800|9)"]],[10,8,11]',58:'[37,"[24589]",1],10',590:'["[56]90;BD",-1,"$1 $2-$3"],9',591:'[17,"[23]|4[46]"],[8,"[67]"],[324,8],[8,9]',592:'[34,"[2-46-9]"],7',593:'[134,"[2-7]",1],[234,9],["DCd",1],[9,8,10,11]',594:'[3222,"[56]"],9',595:'["CA{3,6}","[2-9]0"],[25,"[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36]"],["Ce","2[279]|3[13-5]|4[359]|5|6[347]|7[46-8]|85"],["BCd","[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36]"],[234,87],[36,9],[333,"[2-8]"],[9,7,8]',596:'[3222,"[56]"],9',597:'[222,56,1],[33,"[2-5]",1],[34,"[6-8]",1],[7,6]',598:'[34,"8|90"],[233,9],[44,"[24]"],[8,7]',599:'[34,"[3467]"],[134,"9[4-8]"],[7,8]',60:'[134,"[4-79]","$1-$2 $3"],["BCd","1([0249]|[367][2-9]|8[1-9])|8","$1-$2 $3"],[144,3,"$1-$2 $3"],[1324,"1[36-8]",1],[334,15,"$1-$2 $3"],[244,1,"$1-$2 $3"],[9,10,8]',61:'[34,[180,1802]],["Dd",19],["BCA{2,4}",16],[333,"14|[45]"],[144,"[2378]"],[433,"1(30|[89])"],[9,7,10]',62:'[133,15],["BA{5,9}","2[124]|[36]1"],["CA{5,7}",800],["CA{5,8}","[2-79]"],["CdC","8[1-35-9]",1],["CA{6,8}",1],[334,804],[3133,80],["CDe",8,1],[2434,0],[9,10,11,12,7,8]',63:'[15,2],[134,2],["DA{4,6}",["3(23|39|46)|4(2[3-6]|[35]9|4[26]|76)|544|88[245]|(52|64|86)2","3(230|397|461)|4(2(35|[46]4|51)|396|4(22|63)|59[347]|76[15])|5(221|446)|642[23]|8(622|8([24]2|5[13]))"]],[54,["346|4(27|9[35])|883","3469|4(279|9(30|56))|8834"]],[234,"[3-7]|8[2-8]"],[334,"[89]"],[434,1],["DbCD",1],[10,6,8,9,11,12,13]',64:'[323,"[89]0"],[134,"24|[346]|7[2-57-9]|9[2-9]","$1-$2 $3"],["CCd","2(10|74)|[59]|80"],["BdD","2[028]"],["BCA{3,5}","2([169]|7[0-35-9])|7|86"],[8,9,10]',65:'[44,"[369]|8[1-9]"],[334,8],[443,7],[434,1],[8,10,11]',66:'[134,2],["BCd","14|[3-9]"],[433,1],[9,8,10]',670:'[34,"[2-489]"],[44,7],[8,7]',672:"[24,1],[15,3],6",673:'[34,"[2-578]"],7',674:'[34,"[458]"],7',675:'[34,"18|[2-69]|85"],[44,"[78]"],[8,7]',676:'[23,"[2-4]|50|6[09]|7[0-24-69]|8[05]",1],[43,0],[34,"[5-8]"],[7,5]',677:'[25,"7|8[4-9]|9([1-8]|9[0-8])"],[7,5]',678:'[34,"[579]"],[7,5]',679:'[34,"[235-9]|45"],[434,0],[7,11]',680:'[34,"[2-9]"],7',681:'[222,"[4-8]"],6',682:'[23,"[2-8]"],5',683:"[34,8],[7,4]",685:'[5,"[2-6]"],["CA{3,7}",8],[25,7],[6,7,5]',686:"8",687:'[222,"[2-57-9]","$1.$2.$3"],6',688:"[6,7,5]",689:'[222,44],[2222,"[48]"],[8,6]',690:"[4,5,6,7]",691:'[34,"[39]"],7',692:'[34,"[2-6]",1],7',7:'[4222,["7(1[0-8]|2[1-9])","7(1([0-6]2|7|8[27])|2(1[23]|[2-9]2))","7(1([0-6]2|7|8[27])|2(13[03-69]|62[013-9]))|72[1-57-9]2"]],[5122,["7(1[0-68]|2[1-9])","7(1([06][3-6]|[18]|2[35]|[3-5][3-5])|2([13][3-5]|[24-689]|7[457]))","7(1(0([356]|4[023])|[18]|2(3[013-9]|5)|3[45]|43[013-79]|5(3[1-8]|4[1-7]|5)|6(3[0-35-9]|[4-6]))|2(1(3[178]|[45])|[24-689]|3[35]|7[457]))|7(14|23)4[0-8]|71(33|45)[1-79]"]],[334,7],[3322,"[3489]","$1 $2-$3-$4"],10',81:'[44,["007","0077","00777","00777[01]"],1],[333,"(12|57|99)0",1],[414,["1(26|3[79]|4[56]|5[4-68]|6[3-5])|499|5(76|97)|746|8(3[89]|47|51|63)|9(49|80|9[16])","1(267|3(7[247]|9[278])|466|5(47|58|64)|6(3[245]|48|5[4-68]))|499[2468]|5(76|97)9|7468|8(3(8[78]|96)|477|51[24]|636)|9(496|802|9(1[23]|69))|1(45|58)[67]","1(267|3(7[247]|9[278])|466|5(47|58|64)|6(3[245]|48|5[4-68]))|499[2468]|5(769|979[2-69])|7468|8(3(8[78]|96[2457-9])|477|51[24]|636[2-57-9])|9(496|802|9(1[23]|69))|1(45|58)[67]"],1],[234,60,1],[144,["[36]|4(2[09]|7[01])","[36]|4(2(0|9[02-69])|7(0[019]|1))"],1],[234,["1(1|5[45]|77|88|9[69])|2(2[1-37]|3[0-269]|4[59]|5|6[24]|7[1-358]|8[1369]|9[0-38])|4([28][1-9]|3[0-57]|[45]|6[248]|7[2-579]|9[29])|5(2|3[045]|4[0-369]|5[29]|8[02389]|9[0-389])|7(2[02-46-9]|34|[58]|6[0249]|7[57]|9[2-6])|8(2[124589]|3[279]|49|6[0-24-689]|7[0-468]|8[68]|9[019])|9([23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9[1-489])","1(1|5(4[018]|5[017])|77|88|9[69])|2(2([127]|3[014-9])|3[0-269]|4[59]|5([0468][01]|[1-3]|5[0-69]|9[19])|62|7([1-35]|8[0189])|8([16]|3[0134]|9[0-5])|9([028]|17))|4(2([13-79]|2[01]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|8[1-9])|5(2|3[045]|4[0-369]|8[02389]|9[0-3])|7(2[02-46-9]|34|[58]|6[0249]|7[57]|9([23]|4[0-59]|5[01569]|6[0167]))|8(2([1258]|4[0-39]|9[0-2469])|49|6([0-24]|5[0-3589]|9[01459])|7[0-468]|8[68])|9([23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9([1289]|3[34]|4[0178]))|(49|55|83)[29]|(264|837)[016-9]|2(57|93)[015-9]|(47[59]|59[89]|8(6[68]|9))[019]","1(1|5(4[018]|5[017])|77|88|9[69])|2(2[127]|3[0-269]|4[59]|5([0468][01]|[1-3]|5[0-69]|9(17|99))|6(2|4[016-9])|7([1-35]|8[0189])|8([16]|3[0134]|9[0-5])|9([028]|17))|4(2([13-79]|2[01]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(2|3[045]|4[0-369]|5[29]|8[02389]|9[0-3])|7(2[02-46-9]|34|[58]|6[0249]|7[57]|9([23]|4[0-59]|5[01569]|6[0167]))|8(2([1258]|4[0-39]|9[0169])|3([29]|7([017-9]|6[6-8]))|49|6([0-24]|5([0-389]|5[23])|6([01]|9[178])|9[0145])|7[0-468]|8[68])|9(4[15]|5[138]|7[156]|8[189]|9([1289]|3(31|4[357])|4[0178]))|(8294|96)[1-3]|2(57|93)[015-9]|(223|8699)[014-9]|(48|8292|9[23])[1-9]|(47[59]|59[89]|8(68|9))[019]","1(1|5(4[018]|5[017])|77|88|9[69])|2(2[127]|3[0-269]|4[59]|5([0468][01]|[1-3]|5[0-69]|7[015-9]|9(17|99))|6(2|4[016-9])|7([1-35]|8[0189])|8([16]|3[0134]|9[0-5])|9([028]|17|3[015-9]))|4(2([13-79]|2[01]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(2|3[045]|4[0-369]|5[29]|8[02389]|9[0-3])|7(2[02-46-9]|34|[58]|6[0249]|7[57]|9([23]|4[0-59]|5[01569]|6[0167]))|8(2([1258]|4[0-39]|9([019]|4[1-3]|6([0-47-9]|5[01346-9])))|3([29]|7([017-9]|6[6-8]))|49|6([0-24]|5([0-389]|5[23])|6([01]|9[178])|9[0145])|7[0-468]|8[68])|9(4[15]|5[138]|6[1-3]|7[156]|8[189]|9([1289]|3(31|4[357])|4[0178]))|(223|8699)[014-9]|(48|829(2|66)|9[23])[1-9]|(47[59]|59[89]|8(68|9))[019]"],1],[324,["[14]|[29][2-9]|5[3-9]|7[2-4679]|8([246-9]|3[3-8]|5[2-9])","[14]|[29][2-9]|5[3-9]|7[2-4679]|8([246-9]|3([3-6][2-9]|7|8[2-5])|5[2-9])"],1],["DBd","007",1],[424,"008",1],[334,800,1],[244,"[2579]|80",1],["DCd",0,1],["DDe",0,1],["DEf",0,1],["DFg",0,1],[10,8,9,11,12,13,14,15,16,17]',82:'[5,["1[016-9]1","1[016-9]11","1[016-9]114"]],["Bd","(3[1-3]|[46][1-4]|5[1-5])1",1],[44,1,1],["AdD",2,1],[234,"60|8",1],["BdD","[1346]|5[1-5]",1],[244,"[57]",1],[533,["003","0030"]],[254,5,1],["EdD",0],[5234,0],[9,10,5,6,8,12,13,14]',84:'[244,"2[48]"],["69Ae",69],[343,"2[0-35-79]"],["[89]ACBB","8(8|9[89])|9"],["1[2689]ACD","1([26]|8[68]|99)"],["[3578]ACD","[357]|8[1-5]"],["86[89];CC","86[89]"],["1[89]00;A{4,6}",["1[89]0","1[89]00"]],[9,10,8]',850:"[233,8],[134,2],[334,1],[10,8]",852:'["CA{2,5}",[900,9003]],[44,"[2-7]|8[1-4]|9(0[1-9]|[1-8])"],[333,8],[3233,9],[8,9]',853:'[44,"[268]"],8',855:'["BCd","[1-9]"],[433,1],[8,9,10]',856:'[233,"2[13]|3[14]|[4-8]"],[2223,3],[2233,2],[10,8,9]',86:'["Bf",["(10|2[0-57-9])[19]","(10|2[0-57-9])(10|9[56])","(10|2[0-57-9])(100|9[56])"]],[34,["[1-9]","1[1-9]|26|[3-9]|(10|2[0-57-9])([0-8]|9[0-47-9])","1[1-9]|26|[3-9]|(10|2[0-57-9])([02-8]|1(0[1-9]|[1-9])|9[0-47-9])"]],[44,"16[08]"],["Cf",["3([157]|35|49|9[1-68])|4([17]|2[179]|6[47-9]|8[23])|5([1357]|2[37]|4[36]|6[1-46]|80)|6(3[1-5]|6[0238]|9[12])|7(01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(0[1-3689]|1[1-79]|[379]|4[13]|5[1-5])|(4[35]|59|85)[1-9]","(3([157].|35|49|9[1-68])|4([17].|2[179]|[35][1-9]|6[47-9]|8[23])|5([1357].|2[37]|4[36]|6[1-46]|80|9[1-9])|6(3[1-5]|6[0238]|9[12])|7(01|[1579].|2[248]|3[014-9]|4[3-6]|6[023689])|8(1[236-8]|2[5-7]|[37].|5[1-9]|8[36-8]|9[1-8])|9(0[1-3689]|1[1-79]|[379].|4[13]|5[1-5]))[19]","85[23](10|95)|(3([157].|35|49|9[1-68])|4([17].|2[179]|[35][1-9]|6[47-9]|8[23])|5([1357].|2[37]|4[36]|6[1-46]|80|9[1-9])|6(3[1-5]|6[0238]|9[12])|7(01|[1579].|2[248]|3[014-9]|4[3-6]|6[023689])|8(1[236-8]|2[5-7]|[37].|5[14-9]|8[36-8]|9[1-8])|9(0[1-3689]|1[1-79]|[379].|4[13]|5[1-5]))(10|9[56])","85[23](100|95)|(3([157].|35|49|9[1-68])|4([17].|2[179]|[35][1-9]|6[47-9]|8[23])|5([1357].|2[37]|4[36]|6[1-46]|80|9[1-9])|6(3[1-5]|6[0238]|9[12])|7(01|[1579].|2[248]|3[014-9]|4[3-6]|6[023689])|8(1[236-8]|2[5-7]|[37].|5[14-9]|8[36-8]|9[1-8])|9(0[1-3689]|1[1-79]|[379].|4[13]|5[1-5]))(100|9[56])"]],[44,["[1-9]","1[1-9]|26|[3-9]|(10|2[0-57-9])([0-8]|9[0-47-9])","26|3([0268]|9[079])|4([049]|2[02-68]|[35]0|6[0-356]|8[014-9])|5(0|2[0-24-689]|4[0-2457-9]|6[057-9]|90)|6([0-24578]|6[14-79]|9[03-9])|7(0[02-9]|2[0135-79]|3[23]|4[0-27-9]|6[1457]|8)|8([046]|1[01459]|2[0-489]|50|8[0-2459]|9[09])|9(0[0457]|1[08]|[268]|4[024-9])|(34|85[23])[0-8]|(1|58)[1-9]|(63|95)[06-9]|(33|85[23]9)[0-46-9]|(10|2[0-57-9]|3([157].|35|49|9[1-68])|4([17].|2[179]|[35][1-9]|6[47-9]|8[23])|5([1357].|2[37]|4[36]|6[1-46]|80|9[1-9])|6(3[1-5]|6[0238]|9[12])|7(01|[1579].|2[248]|3[014-9]|4[3-6]|6[023689])|8(1[236-8]|2[5-7]|[37].|5[14-9]|8[36-8]|9[1-8])|9(0[1-3689]|1[1-79]|[379].|4[13]|5[1-5]))([0-8]|9[0-47-9])","26|3([0268]|3[0-46-9]|4[0-8]|9[079])|4([049]|2[02-68]|[35]0|6[0-356]|8[014-9])|5(0|2[0-24-689]|4[0-2457-9]|6[057-9]|90)|6([0-24578]|3[06-9]|6[14-79]|9[03-9])|7(0[02-9]|2[0135-79]|3[23]|4[0-27-9]|6[1457]|8)|8([046]|1[01459]|2[0-489]|5(0|[23]([02-8]|1[1-9]|9[0-46-9]))|8[0-2459]|9[09])|9(0[0457]|1[08]|[268]|4[024-9]|5[06-9])|(1|58|85[23]10)[1-9]|(10|2[0-57-9])([0-8]|9[0-47-9])|(3([157].|35|49|9[1-68])|4([17].|2[179]|[35][1-9]|6[47-9]|8[23])|5([1357].|2[37]|4[36]|6[1-46]|80|9[1-9])|6(3[1-5]|6[0238]|9[12])|7(01|[1579].|2[248]|3[014-9]|4[3-6]|6[023689])|8(1[236-8]|2[5-7]|[37].|5[14-9]|8[36-8]|9[1-8])|9(0[1-3689]|1[1-79]|[379].|4[13]|5[1-5]))([02-8]|1(0[1-9]|[1-9])|9[0-47-9])"]],[334,"(4|80)0"],[244,["10|2([02-57-9]|1[1-9])","10|2([02-57-9]|1[1-9])","10[0-79]|2([02-57-9]|1[1-79])|(10|21)8(0[1-9]|[1-9])"]],[334,"3([3-59]|7[02-68])|4([26-8]|3[3-9]|5[2-9])|5(3[03-9]|[468]|7[028]|9[2-46-9])|6|7([0-247]|3[04-9]|5[0-4689]|6[2368])|8([1-358]|9[1-7])|9([013479]|5[1-5])|([34]1|55|79|87)[02-9]"],["Ch",9],[434,80],[344,"[3-578]"],[344,"1[3-9]"],[2334,"[12]"],[11,7,8,9,10,12]',880:'["BA{4,6}","31[5-7]|[459]1",1],["CA{3,7}","3([67]|8[013-9])|4(6[168]|7|[89][18])|5(6[128]|9)|6(28|4[14]|5)|7[2-589]|8(0[014-9]|[12])|9[358]|(3[2-5]|4[235]|5[2-578]|6[0389]|76|8[3-7]|9[24])1|(44|66)[01346-9]",1],["DA{3,6}","[13-9]",1],["Ah",2,1],[10,6,7,8,9]',886:'["AdD","[25][2-8]|[346]|7[1-9]|8[237-9]"],[234,"[258]"],[333,9],[244,7],[9,8]',90:'[313,444],[334,"512|8[0589]|90"],[3322,["5([0-59]|61)","5([0-59]|616)","5([0-59]|6161)"]],[3322,"[24][1-8]|3[1-9]"],[10,7]',91:'[8,["5(0|2[23]|3[03]|[67]1|88)","5(0|2(21|3)|3(0|3[23])|616|717|888)","5(0|2(21|3)|3(0|3[23])|616|717|8888)"]],["De",[180,1800]],[334,140],[244,["11|2[02]|33|4[04]|79[1-7]|80[2-46]","11|2[02]|33|4[04]|79([1-6]|7[19])|80([2-4]|6[0-589])","11|2[02]|33|4[04]|79([124-6]|3([02-9]|1[0-24-9])|7(1|9[1-6]))|80([2-4]|6[0-589])"]],[334,["1(2[0-249]|3[0-25]|4[145]|[68]|7[1257])|2(1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568])|3(26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(1[36]|2[1-47]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(1[025]|22|[36][25]|4[28]|5[12]|[78]1)|6(12|[2-4]1|5[17]|6[13]|80)|7(12|3[134]|4[47]|61|88)|8(16|2[014]|3[126]|6[136]|7[078]|8[34]|91)|(43|59|75)[15]|(1[59]|29|67|72)[14]","1(2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(1[025]|22|[36][25]|4[28]|[578]1|9[15])|6([2-4]1|5[17]|6[13]|7[14]|80)|7(12|(2[14]|3[34]|5[15])[2-6]|61[346]|88[0-8])|8(70[2-6]|84[235-7]|91[3-7])|(1(29|60|8[06])|261|(55|61)2|7(31|4[47])|8(16|2[014]|3[126]|6[136]|7[78]|83))[2-7]","1(2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(12([2-6]|7[0-8])|[2-4]1|5[17]|6[13]|7[14]|80)|7(12|(2[14]|5[15])[2-6]|3171|61[346]|88([2-7]|82))|8(70[2-6]|84([2356]|7[19])|91([3-6]|7[19]))|73[134][2-6]|(1(29|60|8[06])|261|552|788[01])[2-7]|(74[47]|8(16|2[014]|3[126]|6[136]|7[78]|83))([2-6]|7[19])"]],[433,["1([2-479]|5[0235-9])|[2-5]|6(1[1358]|2[2457-9]|3[2-5]|[4-8])|7(1[013-9]|28|3[129]|4[1-35689]|5[29]|6[02-5]|70)|807","1([2-479]|5[0235-9])|[2-5]|6(1[1358]|2([2457]|84|95)|3([2-4]|55)|[4-8])|7(1([013-8]|9[6-9])|28[6-8]|3(17|2[0-49]|9[2-57])|4(1[2-4]|[29][0-7]|3[0-8]|[56]|8[0-24-7])|5(2[1-3]|9[0-6])|6(0[5689]|2[5-9]|3[02-8]|4|5[0-367])|70[13-7])|807[19]","1([2-479]|5([0236-9]|5[013-9]))|[2-5]|6(1[1358]|2([2457]|84|95)|3([2-4]|55)|[4-8])|7(1([013-8]|9[6-9])|3179)|807(1|9[1-3])|(1552|7(28[6-8]|3(2[0-49]|9[2-57])|4(1[2-4]|[29][0-7]|3[0-8]|[56].|8[0-24-7])|5(2[1-3]|9[0-6])|6(0[5689]|2[5-9]|3[02-8]|4.|5[0-367])|70[13-7]))[2-7]"]],[55,"[6-9]"],["DA{2,4};D",["1(6|8[06])","1(6|8[06]0)"]],[2343,0],[4333,18],[10,8,9,11,12,13]',92:'[332,"[89]0"],[45,1],["Bh","(2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]"],["Cg",["2(3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(2[2-689]|3[23578]|4[3478]|5[2356])|9(2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8])","9(2[3-8]|98)|(2(3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(2[2-689]|3[23578]|4[3478]|5[2356])|9(22|3[27-9]|4[2-6]|6[3569]|9[25-7]))[2-9]"]],[55,58],[37,3],[2333,"2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91"],[3333,"[24-9]"],[10,8,9]',93:'[234,"[2-7]"],9',94:'[234,7],[333,"[1-689]"],9',95:'[123,"16|2"],[223,"[45]|6(0[23]|[1-689]|7[235-7])|7([0-4]|5[2-7])|8[1-6]"],["ACd","[12]"],["BCd","[4-7]|8[1-35]"],["ACA{4,6}","9(2[0-4]|[35-9]|4[137-9])"],[144,2],[334,8],[1333,92],[154,9],[8,9,10,6,7]',960:'[34,"[3467]|9[14-9]",1],[334,"[89]"],[7,10]',961:'[133,"[13-69]|7([2-57]|62|8[0-7]|9[04-9])|8[02-9]"],[233,"[7-9]"],[7,8]',962:'[134,"[2356]|87"],["Cf","[89]"],[27,70],[144,7],[9,8]',963:'["BCd","[1-5]"],[333,9],[9,8]',964:'[134,1],["BCd","[2-6]"],[334,7],[8,10,9]',965:'["Dd","[169]|2([235]|4[1-35-9])|52"],[35,"[25]"],[8,7]',966:'[45,9],[234,1],[234,5],["CCd",81],[334,8],[9,8,10]',967:'["ACd","[1-6]|7[24-68]"],[333,7],[9,7,8]',968:'["CA{4,6}","[58]"],[26,2],[44,"[79]"],[8,7,9]',970:'[134,"[2489]"],[333,5],[433,1],[9,8,10]',971:'["CA{2,9}",800],["CA{2,9}","60|8"],[134,"[236]|[479][2-8]"],[315,"[479]"],[234,5],[9,5,6,7,8,10,11,12]',972:'[43,125,1],[422,121,1],[134,"[2-489]",1],[234,"[57]",1],[433,12,1],[46,159,1],[1333,"1[7-9]",1],["CbCD",15,"$1-$2 $3-$4"],[9,7,8,10,11,12]',973:'[44,"[13679]|8[047]"],8',974:'[34,"2[126]|8"],[44,"[3-7]"],[8,7]',975:'[133,"[2-68]|7[246]"],[8,7]',976:'[224,"[12]1"],[44,"[57-9]"],["Cf","[12]2[1-3]"],["Df",["[12](27|3[2-8]|4[2-68]|5[1-4689])","[12](27|3[2-8]|4[2-68]|5[1-4689])[0-3]"]],["Ee","[12]"],[8,9,10]',977:'[17,"1[2-6]",1],[26,"[1-8]|9([1-69]|7[15-9])",1],[37,9,1],[10,8]',98:'["Be","(1[137]|2[13-68]|3[1458]|4[145]|5[1468]|6[16]|7[1467]|8[13467])[12689]"],["CCd",9],[244,"[1-8]"],[10,6,7]',992:'[612,[331,3317]],[324,"[34]7|91[78]"],[414,3],[234,"[457-9]"],9',993:'[2222,12,"$1 $2-$3-$4"],[3122,"[1-5]","$1 $2-$3-$4"],[26,6],8',994:'[3222,9],[2322,["[12]|365","[12]|365","[12]|365([0-46-9]|5[0-35-9])"]],[2322,"[3-8]"],9',995:'[333,70],[2322,32],[3222,"[57]"],[3222,"[348]"],9',996:'[45,"3(1[346]|[24-79])"],[333,"[235-79]"],["CCAc",8],[9,10]',998:'[2322,"[679]"],9'};i.default=e}),66);
__d("WACryptoPkcs7",["WACryptoDependencies","err"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=new Uint8Array(1);do o("WACryptoDependencies").getCrypto().getRandomValues(t);while(t[0]===0);u(e,t[0])}function s(e){var t=new Uint8Array(1);o("WACryptoDependencies").getCrypto().getRandomValues(t),u(e,(t[0]&15)+1)}function u(e,t){for(var n=0;n<t;n++)e.writeUint8(t)}function c(e){if(e.length===0)throw r("err")("unpadPkcs7 given empty bytes");var t=e[e.length-1];if(t>e.length)throw r("err")("unpadPkcs7 given "+e.length+" bytes, but pad is "+t);return new Uint8Array(e.buffer,e.byteOffset,e.length-t)}l.writeRandomPad=e,l.writeRandomPadMax16=s,l.writePad=u,l.unpadPkcs7=c}),98);
__d("WADynamicRouterAsync",["Promise","WALogger","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u={sentinel:"RESPONSE_NAMESPACE"},c={sentinel:"NOT_HANDLED"},d=(function(){function t(){var e=this;this.$2=(s||(s=n("Promise"))).resolve(),this.$3=new Map,this.$5=0,this.$6=null,this.$7=null,this.$8=null,this.fireAndForget=function(t,n,r,o){o===void 0&&(o=!1),e.$4==null||e.$4(t,n,r),e.$10(t,n,r,null,o)},this.sendAndReceive=function(t,r,o,a){return a===void 0&&(a=!1),e.$4==null||e.$4(t,r,o),new(s||(s=n("Promise")))(function(n,i){var l=null;e.$10(t,r,o,function(t){try{var r=_(t);r?l=r.call(t,function(t){e.$10(u,"",t,n,a)},function(t){e.$10(u,"",t,i,!1)}):e.$10(u,"",t,n,a)}catch(t){e.$10(u,"",t,i,!1)}},a)})},this.$9=function(){var t=e.$7;if(t){for(var n=e.$3,r;t&&!(r=m(n,t));)e.$7=t=t.nextRoute;if(!(!t||!r)){var o=e.$11(r,t),a=!0;if(o!==c){var i=t.prevRoute,l=t.nextRoute;e.$7===t&&(e.$7=l),i?i.nextRoute=l:e.$6=l,l?l.prevRoute=i:(a=!1,e.$8=i)}return a&&e.$2.then(e.$9).finally(function(){}),o}}}}var a=t.prototype;return a.setAckPayload=function(t){this.$1=t},a.getAckPayoad=function(){return this.$1},a.hasHandlerForNamespace=function(t){return this.$3.has(t)},a.getHandledNamespaces=function(){return Array.from(this.$3.keys())},a.setOnRouteCalled=function(t){this.$4=t},a.setNamespaceHandler=function(t,n){var e=this.$3,r=e.get(t);if(r!==n&&(++this.$5,e.set(t,n),!r)){var o=this.$6;o&&(this.$7||this.$2.then(this.$9).finally(function(){}),this.$7=o)}},a.setHandlers=function(n,a){function t(t,i,l){if(a[t]==null)throw o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose([""," is not defined for ",""])),t,n),r("err")(t+" is not defined for "+n);var s=a[t](i);l&&l(s)}this.setNamespaceHandler(n,t)},a.$10=function(t,n,r,o,a){var e=this.$8,i={namespace:t,route:n,arg:r,resolver:o,prevRoute:e,nextRoute:null,silentLog:a};this.$8=i;var l=!0;e?(e.nextRoute=i,l=!this.$7):this.$6=i,l&&m(this.$3,i)&&(this.$7=i,this.$2.then(this.$9).finally(function(){}))},a.$11=function(t,o){var e=o.route,a=o.arg,i=o.resolver,l=o.silentLog,u=this.$5,d=null,m=null;try{d=t(e,a,i,l)}catch(e){m=(s||(s=n("Promise"))).reject(e)}if(d===c)if(u===this.$5)m=(s||(s=n("Promise"))).reject(r("err")("DynamicRouter: NOT_HANDLED can only be used when updating handlers"));else return c;if(i){m&&i(m);return}else return m},t})();function m(e,t){var n=t.namespace;return n===u?p:e.get(n)}function p(e,t,n){n(t)}function _(e){if(e!=null&&(typeof e=="object"||typeof e=="function")){var t=e.then;return typeof t=="function"?t:null}return null}l.NOT_HANDLED=c,l.DynamicRouter=d}),98);
__d("WAFrameSocket",["WABinary","WAErrors","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=(function(e){function t(t){var n,r="SocketClosed";return n=e.call(this,t!=null?t:r)||this,n.name=r,n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.toString=function(){return this.name},t})(babelHelpers.wrapNativeSuper(Error)),p=(function(){function t(t,n){var r=this;this.$3=new(o("WABinary")).Binary,this.closed=!1,this.$4=!1,this.onFrame=null,this.onClose=null,this.$5=function(e){r.$3.writeByteArray(e),r.convertBufferedToFrames()},this.$6=function(){if(r.$3.peek(_)){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["FrameSocket closed, waiting for pending processing"]))),r.$4=!0;return}r.$9()},this.$7=function(e){o("WALogger").DEV(s||(s=babelHelpers.taggedTemplateLiteralLoose(["FrameSocket error"]))).devConsole(e)},this.$2=n,this.$1=t,t.onData=this.$5,t.onClose=this.$6,t.onError=this.$7}var n=t.prototype;return n.sendFrame=function(t){if(!this.$4){this.throwIfClosed();var e=this.$2,n=t.byteLength;this.$8(n);var r=this.$1.dataToSend;e?(this.$2=null,r.ensureAdditionalCapacity(e.length+3+n),r.writeByteArray(e)):r.ensureAdditionalCapacity(3+n),r.writeUint8(n>>16),r.writeUint16(n&65535),r.write(t),this.$1.requestSend()}},n.$9=function(){if(!this.closed){o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["FrameSocket closed"]))),this.$4=!1,this.closed=!0;var e=this.onClose;e&&e()}},n.$8=function(t){if(t>=1<<24)throw o("WALogger").WARN(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Buffer to send: ",""])),t),new(o("WAErrors")).BufferTooLargeError("Buffer too large: "+t)},n.convertBufferedToFrames=function(){for(var e=this.$3,t=this.onFrame;t&&e.peek(_);){var n=f(e),r=e.readByteArrayView(n);t(r),t=this.onFrame}this.$4&&!e.peek(_)&&this.$9(),t&&e.size()&&o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["FrameSocket: queueing partial frame of "," bytes"])),e.size())},n.throwIfClosed=function(){if(this.closed)throw new m},n.close=function(){this.$1.close()},t})();function _(e){if(e.size()<3)return!1;var t=f(e);return t<=e.size()}function f(e){return e.readUint8()<<16|e.readUint16()}l.SocketClosed=m,l.FrameSocket=p}),98);
__d("WASmaxInAbPropsIQErrorResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseReference").attrStringFromReference(t,["id"]);if(!r.success)return r;var a=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"id",r.value);if(!a.success)return a;var i=o("WASmaxParseReference").attrStringFromReference(t,["to"]);if(!i.success)return i;var l=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"from",i.value);if(!l.success)return l;var s=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"type","error");return s.success?o("WAResultOrError").makeResult({type:s.value}):s}l.parseIQErrorResponseMixin=e}),98);
__d("WASmaxInAbPropsIQErrorBadRequestMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","bad-request");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,e,"code",400);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorBadRequestMixin=e}),98);
__d("WASmaxInAbPropsIQErrorFeatureNotImplementedMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","feature-not-implemented");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,e,"code",501);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorFeatureNotImplementedMixin=e}),98);
__d("WASmaxInAbPropsNoRetryErrors",["WAResultOrError","WASmaxInAbPropsIQErrorBadRequestMixin","WASmaxInAbPropsIQErrorFeatureNotImplementedMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxInAbPropsIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(e);if(t.success)return o("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:t.value});var n=o("WASmaxInAbPropsIQErrorFeatureNotImplementedMixin").parseIQErrorFeatureNotImplementedMixin(e);return n.success?o("WAResultOrError").makeResult({name:"IQErrorFeatureNotImplemented",value:n.value}):o("WASmaxParseUtils").errorMixinDisjunction(e,["IQErrorBadRequest","IQErrorFeatureNotImplemented"],[t,n])}l.parseNoRetryErrors=e}),98);
__d("WASmaxInAbPropsGetExperimentConfigResponseErrorNoRetry",["WAResultOrError","WASmaxInAbPropsIQErrorResponseMixin","WASmaxInAbPropsNoRetryErrors","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"error");if(!r.success)return r;var a=o("WASmaxInAbPropsIQErrorResponseMixin").parseIQErrorResponseMixin(e,t);if(!a.success)return a;var i=o("WASmaxInAbPropsNoRetryErrors").parseNoRetryErrors(r.value);return i.success?o("WAResultOrError").makeResult(babelHelpers.extends({},a.value,{errorNoRetryErrors:i.value})):i}l.parseGetExperimentConfigResponseErrorNoRetry=e}),98);
__d("WASmaxInAbPropsIQErrorInternalServerErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","internal-server-error");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,e,"code",500);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorInternalServerErrorMixin=e}),98);
__d("WASmaxInAbPropsGetExperimentConfigResponseErrorRetry",["WAResultOrError","WASmaxInAbPropsIQErrorInternalServerErrorMixin","WASmaxInAbPropsIQErrorResponseMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"error");if(!r.success)return r;var a=o("WASmaxInAbPropsIQErrorInternalServerErrorMixin").parseIQErrorInternalServerErrorMixin(r.value);if(!a.success)return a;var i=o("WASmaxInAbPropsIQErrorResponseMixin").parseIQErrorResponseMixin(e,t);return i.success?o("WAResultOrError").makeResult(babelHelpers.extends({errorIQErrorInternalServerErrorMixin:a.value},i.value)):i}l.parseGetExperimentConfigResponseErrorRetry=e}),98);
__d("WASmaxInAbPropsExperimentConfigMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"prop");if(!t.success)return t;var n=o("WASmaxParseUtils").attrIntRange(e,"config_code",1,void 0);if(!n.success)return n;var r=o("WASmaxParseUtils").attrString(e,"config_value");if(!r.success)return r;var a=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrIntRange,e,"config_expo_key",0,void 0);return a.success?o("WAResultOrError").makeResult({configCode:n.value,configValue:r.value,configExpoKey:a.value}):a}l.parseExperimentConfigMixin=e}),98);
__d("WASmaxInAbPropsSamplingConfigMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"prop");if(!t.success)return t;var n=o("WASmaxParseUtils").attrIntRange(e,"event_code",1,void 0);if(!n.success)return n;var r=o("WASmaxParseUtils").attrIntRange(e,"sampling_weight",-1e4,1e4);return r.success?o("WAResultOrError").makeResult({eventCode:n.value,samplingWeight:r.value}):r}l.parseSamplingConfigMixin=e}),98);
__d("WASmaxInAbPropsConfigs",["WAResultOrError","WASmaxInAbPropsExperimentConfigMixin","WASmaxInAbPropsSamplingConfigMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxInAbPropsExperimentConfigMixin").parseExperimentConfigMixin(e);if(t.success)return o("WAResultOrError").makeResult({name:"ExperimentConfig",value:t.value});var n=o("WASmaxInAbPropsSamplingConfigMixin").parseSamplingConfigMixin(e);return n.success?o("WAResultOrError").makeResult({name:"SamplingConfig",value:n.value}):o("WASmaxParseUtils").errorMixinDisjunction(e,["ExperimentConfig","SamplingConfig"],[t,n])}l.parseConfigs=e}),98);
__d("WASmaxInAbPropsEnums",[],(function(t,n,r,o,a,i){var e={false:"false",true:"true"};i.ENUM_FALSE_TRUE=e}),66);
__d("WASmaxInAbPropsIQResultResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseReference").attrStringFromReference(t,["id"]);if(!r.success)return r;var a=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"id",r.value);if(!a.success)return a;var i=o("WASmaxParseReference").attrStringFromReference(t,["to"]);if(!i.success)return i;var l=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"from",i.value);if(!l.success)return l;var s=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"type","result");return s.success?o("WAResultOrError").makeResult({type:s.value}):s}l.parseIQResultResponseMixin=e}),98);
__d("WASmaxInAbPropsGetExperimentConfigResponseSuccess",["WAResultOrError","WASmaxInAbPropsConfigs","WASmaxInAbPropsEnums","WASmaxInAbPropsIQResultResponseMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"prop");if(!t.success)return t;var n=o("WASmaxInAbPropsConfigs").parseConfigs(e);return n.success?o("WAResultOrError").makeResult({configs:n.value}):n}function s(e){var t=o("WASmaxParseUtils").assertTag(e,"erid");if(!t.success)return t;var n=o("WASmaxParseUtils").contentBytesRange(e,1,100);return n.success?o("WAResultOrError").makeResult({elementValue:n.value}):n}function u(t,n){var r=o("WASmaxParseUtils").assertTag(t,"iq");if(!r.success)return r;var a=o("WASmaxParseUtils").flattenedChildWithTag(t,"props");if(!a.success)return a;var i=o("WASmaxParseUtils").optionalChildWithTag(t,"erid",s);if(!i.success)return i;var l=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,a.value,"protocol","1");if(!l.success)return l;var u=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrString,a.value,"ab_key");if(!u.success)return u;var c=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrString,a.value,"hash");if(!c.success)return c;var d=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrIntRange,a.value,"refresh",0,void 0);if(!d.success)return d;var m=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrIntRange,a.value,"refresh_id",0,void 0);if(!m.success)return m;var p=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrStringEnum,a.value,"delta_update",o("WASmaxInAbPropsEnums").ENUM_FALSE_TRUE);if(!p.success)return p;var _=o("WASmaxInAbPropsIQResultResponseMixin").parseIQResultResponseMixin(t,n);if(!_.success)return _;var f=o("WASmaxParseUtils").mapChildrenWithTag(a.value,"prop",0,1/0,e);return f.success?o("WAResultOrError").makeResult(babelHelpers.extends({propsProtocol:l.value,propsAbKey:u.value,propsHash:c.value,propsRefresh:d.value,propsRefreshId:m.value,propsDeltaUpdate:p.value},_.value,{erid:i.value,propsProp:f.value})):f}l.parseGetExperimentConfigResponseSuccessPropsProp=e,l.parseGetExperimentConfigResponseSuccessErid=s,l.parseGetExperimentConfigResponseSuccess=u}),98);
__d("WASmaxOutAbPropsBaseIQGetRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("iq",{id:o("WAWap").generateId(),type:"get"});return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeBaseIQGetRequestMixin=s}),98);
__d("WASmaxOutAbPropsGetExperimentConfigRequest",["WASmaxAttrs","WASmaxJsx","WASmaxOutAbPropsBaseIQGetRequestMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.propsHash,n=e.propsRefreshId,r=o("WASmaxOutAbPropsBaseIQGetRequestMixin").mergeBaseIQGetRequestMixin(o("WASmaxJsx").smax("iq",{xmlns:"abt",to:o("WAWap").S_WHATSAPP_NET},o("WASmaxJsx").smax("props",{protocol:"1",hash:o("WASmaxAttrs").OPTIONAL(o("WAWap").CUSTOM_STRING,t),refresh_id:o("WASmaxAttrs").OPTIONAL(o("WAWap").INT,n)})));return r}l.makeGetExperimentConfigRequest=e}),98);
__d("WASmaxAbPropsGetExperimentConfigRPC",["WAComms","WASmaxInAbPropsGetExperimentConfigResponseErrorNoRetry","WASmaxInAbPropsGetExperimentConfigResponseErrorRetry","WASmaxInAbPropsGetExperimentConfigResponseSuccess","WASmaxOutAbPropsGetExperimentConfigRequest","WASmaxParsingFailure","WASmaxRpcUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(e,t){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=o("WASmaxOutAbPropsGetExperimentConfigRequest").makeGetExperimentConfigRequest(e),r=yield o("WAComms").sendSmaxStanza(n,t),a=o("WASmaxInAbPropsGetExperimentConfigResponseSuccess").parseGetExperimentConfigResponseSuccess(r,n);if(a.success)return{name:"GetExperimentConfigResponseSuccess",value:a.value};var i=o("WASmaxInAbPropsGetExperimentConfigResponseErrorNoRetry").parseGetExperimentConfigResponseErrorNoRetry(r,n);if(i.success)return{name:"GetExperimentConfigResponseErrorNoRetry",value:i.value};var l=o("WASmaxInAbPropsGetExperimentConfigResponseErrorRetry").parseGetExperimentConfigResponseErrorRetry(r,n);if(l.success)return{name:"GetExperimentConfigResponseErrorRetry",value:l.value};throw new(o("WASmaxParsingFailure")).SmaxParsingFailure(o("WASmaxRpcUtils").errorMessageRpcParsing("GetExperimentConfig",{Success:a,ErrorNoRetry:i,ErrorRetry:l}))}),s.apply(this,arguments)}l.sendGetExperimentConfigRPC=e}),98);
__d("WAGetAbPropsProtocol",["WALogger","WAResultOrError","WASmaxAbPropsGetExperimentConfigRPC","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=yield o("WASmaxAbPropsGetExperimentConfigRPC").sendGetExperimentConfigRPC(t);if(n.name==="GetExperimentConfigResponseSuccess"){var r=n.value,a=r.propsAbKey,i=r.propsHash,l=r.propsRefresh,s=r.propsRefreshId,u=r.propsProp,d=r.erid,m=r.propsDeltaUpdate,p=c(u),_=p.newProps,f=p.samplingConfigs;return o("WAResultOrError").makeResult({abKey:a,hash:i,refresh:l,refreshId:s,props:_,samplingConfigs:f,erid:d==null?void 0:d.elementValue,isDeltaUpdate:m==="true"})}return o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["getAbPropsProtocol failed ",""])),n.value),o("WAResultOrError").makeError()}),u.apply(this,arguments)}function c(e){var t=[],n=[];return e.forEach(function(e){var r=e.configs;if(r.name==="ExperimentConfig"){var o;t.push({configCode:r.value.configCode,configValue:r.value.configValue,configExpoKey:(o=r.value.configExpoKey)==null?void 0:o.toString()})}else r.name==="SamplingConfig"&&n.push({eventCode:r.value.eventCode,samplingWeight:r.value.samplingWeight})}),{newProps:t,samplingConfigs:n}}l.getAbPropsProtocol=s}),98);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("fflate-0.6.10",[],(function(t,n,r,o,a,i){"use strict";var e={},l={exports:e};function s(){var t,n="";try{t={}.Worker}catch(e){}e.default=t?function(e,r,o,a,i){var l=!1,s=new t(e+n,{eval:!0}).on("error",function(e){return i(e,null)}).on("message",function(e){return i(null,e)}).on("exit",function(e){e&&!l&&i(new Error("exited with code "+e),null)});return s.postMessage(o,a),s.terminate=function(){return l=!0,t.prototype.terminate.call(s)},s}:function(e,t,n,r,o){setImmediate(function(){return o(new Error("async operations unsupported - update to Node 12+ (or Node 10-11 with the --experimental-worker CLI flag)"),null)});var a=function(){};return{terminate:a,postMessage:a}}}var u=!1;function c(){return u||(u=!0,s()),l.exports}var d={},m={exports:d};function p(){var e=c(),t=Uint8Array,n=Uint16Array,r=Uint32Array,o=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),a=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),i=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),l=function(e,t){for(var o=new n(31),a=0;a<31;++a)o[a]=t+=1<<e[a-1];for(var i=new r(o[30]),a=1;a<30;++a)for(var l=o[a];l<o[a+1];++l)i[l]=l-o[a]<<5|a;return[o,i]},s=l(o,2),u=s[0],m=s[1];u[28]=258,m[258]=28;for(var p=l(a,0),_=p[0],f=p[1],g=new n(32768),h=0;h<32768;++h){var y=(h&43690)>>>1|(h&21845)<<1;y=(y&52428)>>>2|(y&13107)<<2,y=(y&61680)>>>4|(y&3855)<<4,g[h]=((y&65280)>>>8|(y&255)<<8)>>>1}for(var C=(function(e,t,r){for(var o=e.length,a=0,i=new n(t);a<o;++a)++i[e[a]-1];var l=new n(t);for(a=0;a<t;++a)l[a]=l[a-1]+i[a-1]<<1;var s;if(r){s=new n(1<<t);var u=15-t;for(a=0;a<o;++a)if(e[a])for(var c=a<<4|e[a],d=t-e[a],m=l[e[a]-1]++<<d,p=m|(1<<d)-1;m<=p;++m)s[g[m]>>>u]=c}else for(s=new n(o),a=0;a<o;++a)e[a]&&(s[a]=g[l[e[a]-1]++]>>>15-e[a]);return s}),b=new t(288),h=0;h<144;++h)b[h]=8;for(var h=144;h<256;++h)b[h]=9;for(var h=256;h<280;++h)b[h]=7;for(var h=280;h<288;++h)b[h]=8;for(var v=new t(32),h=0;h<32;++h)v[h]=5;var S=C(b,9,0),R=C(b,9,1),L=C(v,5,0),E=C(v,5,1),k=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},I=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&n},T=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},D=function(e){return(e/8|0)+(e&7&&1)},x=function(e,o,a){(o==null||o<0)&&(o=0),(a==null||a>e.length)&&(a=e.length);var i=new(e instanceof n?n:e instanceof r?r:t)(a-o);return i.set(e.subarray(o,a)),i},$=function(e,n,r){var l=e.length;if(!l||r&&!r.l&&l<5)return n||new t(0);var s=!n||r,c=!r||r.i;r||(r={}),n||(n=new t(l*3));var d=function(e){var r=n.length;if(e>r){var o=new t(Math.max(r*2,e));o.set(n),n=o}},m=r.f||0,p=r.p||0,f=r.b||0,g=r.l,h=r.d,y=r.m,b=r.n,v=l*8;do{if(!g){r.f=m=I(e,p,1);var S=I(e,p+1,3);if(p+=3,S)if(S==1)g=R,h=E,y=9,b=5;else if(S==2){var N=I(e,p,31)+257,M=I(e,p+10,15)+4,w=N+I(e,p+5,31)+1;p+=14;for(var A=new t(w),F=new t(19),O=0;O<M;++O)F[i[O]]=I(e,p+O*3,7);p+=M*3;for(var B=k(F),W=(1<<B)-1,q=C(F,B,1),O=0;O<w;){var U=q[I(e,p,W)];p+=U&15;var L=U>>>4;if(L<16)A[O++]=L;else{var V=0,H=0;for(L==16?(H=3+I(e,p,3),p+=2,V=A[O-1]):L==17?(H=3+I(e,p,7),p+=3):L==18&&(H=11+I(e,p,127),p+=7);H--;)A[O++]=V}}var G=A.subarray(0,N),z=A.subarray(N);y=k(G),b=k(z),g=C(G,y,1),h=C(z,b,1)}else throw"invalid block type";else{var L=D(p)+4,$=e[L-4]|e[L-3]<<8,P=L+$;if(P>l){if(c)throw"unexpected EOF";break}s&&d(f+$),n.set(e.subarray(L,P),f),r.b=f+=$,r.p=p=P*8;continue}if(p>v){if(c)throw"unexpected EOF";break}}s&&d(f+131072);for(var j=(1<<y)-1,K=(1<<b)-1,Q=p;;Q=p){var V=g[T(e,p)&j],X=V>>>4;if(p+=V&15,p>v){if(c)throw"unexpected EOF";break}if(!V)throw"invalid length/literal";if(X<256)n[f++]=X;else if(X==256){Q=p,g=null;break}else{var Y=X-254;if(X>264){var O=X-257,J=o[O];Y=I(e,p,(1<<J)-1)+u[O],p+=J}var Z=h[T(e,p)&K],ee=Z>>>4;if(!Z)throw"invalid distance";p+=Z&15;var z=_[ee];if(ee>3){var J=a[ee];z+=T(e,p)&(1<<J)-1,p+=J}if(p>v){if(c)throw"unexpected EOF";break}s&&d(f+131072);for(var te=f+Y;f<te;f+=4)n[f]=n[f-z],n[f+1]=n[f+1-z],n[f+2]=n[f+2-z],n[f+3]=n[f+3-z];f=te}}r.l=g,r.p=Q,r.b=f,g&&(m=1,r.m=y,r.d=h,r.n=b)}while(!m);return f==n.length?n:x(n,0,f)},P=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8},N=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},M=function(e,r){for(var o=[],a=0;a<e.length;++a)e[a]&&o.push({s:a,f:e[a]});var i=o.length,l=o.slice();if(!i)return[q,0];if(i==1){var s=new t(o[0].s+1);return s[o[0].s]=1,[s,1]}o.sort(function(e,t){return e.f-t.f}),o.push({s:-1,f:25001});var u=o[0],c=o[1],d=0,m=1,p=2;for(o[0]={s:-1,f:u.f+c.f,l:u,r:c};m!=i-1;)u=o[o[d].f<o[p].f?d++:p++],c=o[d!=m&&o[d].f<o[p].f?d++:p++],o[m++]={s:-1,f:u.f+c.f,l:u,r:c};for(var _=l[0].s,a=1;a<i;++a)l[a].s>_&&(_=l[a].s);var f=new n(_+1),g=w(o[m-1],f,0);if(g>r){var a=0,h=0,y=g-r,C=1<<y;for(l.sort(function(e,t){return f[t.s]-f[e.s]||e.f-t.f});a<i;++a){var b=l[a].s;if(f[b]>r)h+=C-(1<<g-f[b]),f[b]=r;else break}for(h>>>=y;h>0;){var v=l[a].s;f[v]<r?h-=1<<r-f[v]++-1:++a}for(;a>=0&&h;--a){var S=l[a].s;f[S]==r&&(--f[S],++h)}g=r}return[new t(f),g]},w=function(e,t,n){return e.s==-1?Math.max(w(e.l,t,n+1),w(e.r,t,n+1)):t[e.s]=n},A=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new n(++t),o=0,a=e[0],i=1,l=function(e){r[o++]=e},s=1;s<=t;++s)if(e[s]==a&&s!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)l(32754);i>2&&(l(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(l(a),--i;i>6;i-=6)l(8304);i>2&&(l(i-3<<5|8208),i=0)}for(;i--;)l(a);i=1,a=e[s]}return[r.subarray(0,o),t]},F=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},O=function(e,t,n){var r=n.length,o=D(t+2);e[o]=r&255,e[o+1]=r>>>8,e[o+2]=e[o]^255,e[o+3]=e[o+1]^255;for(var a=0;a<r;++a)e[o+a+4]=n[a];return(o+4+r)*8},B=function(e,t,r,l,s,u,c,d,m,p,_){P(t,_++,r),++s[256];for(var f=M(s,15),g=f[0],h=f[1],y=M(u,15),R=y[0],E=y[1],k=A(g),I=k[0],T=k[1],D=A(R),x=D[0],$=D[1],w=new n(19),B=0;B<I.length;++B)w[I[B]&31]++;for(var B=0;B<x.length;++B)w[x[B]&31]++;for(var W=M(w,7),q=W[0],U=W[1],V=19;V>4&&!q[i[V-1]];--V);var H=p+5<<3,G=F(s,b)+F(u,v)+c,z=F(s,g)+F(u,R)+c+14+3*V+F(w,q)+(2*w[16]+3*w[17]+7*w[18]);if(H<=G&&H<=z)return O(t,_,e.subarray(m,m+p));var j,K,Q,X;if(P(t,_,1+(z<G)),_+=2,z<G){j=C(g,h,0),K=g,Q=C(R,E,0),X=R;var Y=C(q,U,0);P(t,_,T-257),P(t,_+5,$-1),P(t,_+10,V-4),_+=14;for(var B=0;B<V;++B)P(t,_+3*B,q[i[B]]);_+=3*V;for(var J=[I,x],Z=0;Z<2;++Z)for(var ee=J[Z],B=0;B<ee.length;++B){var te=ee[B]&31;P(t,_,Y[te]),_+=q[te],te>15&&(P(t,_,ee[B]>>>5&127),_+=ee[B]>>>12)}}else j=S,K=b,Q=L,X=v;for(var B=0;B<d;++B)if(l[B]>255){var te=l[B]>>>18&31;N(t,_,j[te+257]),_+=K[te+257],te>7&&(P(t,_,l[B]>>>23&31),_+=o[te]);var ne=l[B]&31;N(t,_,Q[ne]),_+=X[ne],ne>3&&(N(t,_,l[B]>>>5&8191),_+=a[ne])}else N(t,_,j[l[B]]),_+=K[l[B]];return N(t,_,j[256]),_+K[256]},W=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),q=new t(0),U=function(e,i,l,s,u,c){var d=e.length,p=new t(s+d+5*(1+Math.ceil(d/7e3))+u),_=p.subarray(s,p.length-u),g=0;if(!i||d<8)for(var h=0;h<=d;h+=65535){var y=h+65535;y<d?g=O(_,g,e.subarray(h,y)):(_[h]=c,g=O(_,g,e.subarray(h,d)))}else{for(var C=W[i-1],b=C>>>13,v=C&8191,S=(1<<l)-1,R=new n(32768),L=new n(S+1),E=Math.ceil(l/3),k=2*E,I=function(t){return(e[t]^e[t+1]<<E^e[t+2]<<k)&S},T=new r(25e3),$=new n(288),P=new n(32),N=0,M=0,h=0,w=0,A=0,F=0;h<d;++h){var U=I(h),V=h&32767,H=L[U];if(R[V]=H,L[U]=V,A<=h){var G=d-h;if((N>7e3||w>24576)&&G>423){g=B(e,_,0,T,$,P,M,w,F,h-F,g),w=N=M=0,F=h;for(var z=0;z<286;++z)$[z]=0;for(var z=0;z<30;++z)P[z]=0}var j=2,K=0,Q=v,X=V-H&32767;if(G>2&&U==I(h-X))for(var Y=Math.min(b,G)-1,J=Math.min(32767,h),Z=Math.min(258,G);X<=J&&--Q&&V!=H;){if(e[h+j]==e[h+j-X]){for(var ee=0;ee<Z&&e[h+ee]==e[h+ee-X];++ee);if(ee>j){if(j=ee,K=X,ee>Y)break;for(var te=Math.min(X,ee-2),ne=0,z=0;z<te;++z){var re=h-X+z+32768&32767,oe=R[re],ae=re-oe+32768&32767;ae>ne&&(ne=ae,H=re)}}}V=H,H=R[V],X+=V-H+32768&32767}if(K){T[w++]=268435456|m[j]<<18|f[K];var ie=m[j]&31,le=f[K]&31;M+=o[ie]+a[le],++$[257+ie],++P[le],A=h+j,++N}else T[w++]=e[h],++$[e[h]]}}g=B(e,_,c,T,$,P,M,w,F,h-F,g),!c&&g&7&&(g=O(_,g+1,q))}return x(p,0,s+D(g)+u)},V=(function(){for(var e=new Int32Array(256),t=0;t<256;++t){for(var n=t,r=9;--r;)n=(n&1&&-306674912)^n>>>1;e[t]=n}return e})(),H=function(){var e=-1;return{p:function(t){for(var n=e,r=0;r<t.length;++r)n=V[n&255^t[r]]^n>>>8;e=n},d:function(){return~e}}},G=function(){var e=1,t=0;return{p:function(n){for(var r=e,o=t,a=n.length,i=0;i!=a;){for(var l=Math.min(i+2655,a);i<l;++i)o+=r+=n[i];r=(r&65535)+15*(r>>16),o=(o&65535)+15*(o>>16)}e=r,t=o},d:function(){return e%=65521,t%=65521,(e&255)<<24|e>>>8<<16|(t&255)<<8|t>>>8}}},z=function(e,t,n,r,o){return U(e,t.level==null?6:t.level,t.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):12+t.mem,n,r,!o)},j=function(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n},K=function(e,t,n){for(var r=e(),o=e.toString(),a=o.slice(o.indexOf("[")+1,o.lastIndexOf("]")).replace(/ /g,"").split(","),i=0;i<r.length;++i){var l=r[i],s=a[i];if(typeof l=="function"){t+=";"+s+"=";var u=l.toString();if(l.prototype)if(u.indexOf("[native code]")!=-1){var c=u.indexOf(" ",8)+1;t+=u.slice(c,u.indexOf("(",c))}else{t+=u;for(var d in l.prototype)t+=";"+s+".prototype."+d+"="+l.prototype[d].toString()}else t+=u}else n[s]=l}return[t,n]},Q=[],X=function(e){var o=[];for(var a in e)(e[a]instanceof t||e[a]instanceof n||e[a]instanceof r)&&o.push((e[a]=new e[a].constructor(e[a])).buffer);return o},Y=function(t,n,r,o){var a;if(!Q[r]){for(var i="",l={},s=t.length-1,u=0;u<s;++u)a=K(t[u],i,l),i=a[0],l=a[1];Q[r]=K(t[s],i,l)}var c=j({},Q[r][1]);return e.default(Q[r][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+n.toString()+"}",r,c,X(c),o)},J=function(){return[t,n,r,o,a,i,u,_,R,E,g,C,k,I,T,D,x,$,Ie,oe,ae]},Z=function(){return[t,n,r,o,a,i,m,f,S,b,L,v,g,W,q,C,P,N,M,w,A,F,O,B,D,x,U,z,Re,oe]},ee=function(){return[pe,ge,me,H,V]},te=function(){return[_e,fe]},ne=function(){return[he,me,G]},re=function(){return[ye]},oe=function(e){return postMessage(e,[e.buffer])},ae=function(e){return e&&e.size&&new t(e.size)},ie=function(e,t,n,r,o,a){var i=Y(n,r,o,function(e,t){i.terminate(),a(e,t)});return i.postMessage([e,t],t.consume?[e.buffer]:[]),function(){i.terminate()}},le=function(e){return e.ondata=function(e,t){return postMessage([e,t],[e.buffer])},function(t){return e.push(t.data[0],t.data[1])}},se=function(e,t,n,r,o){var a,i=Y(e,r,o,function(e,n){e?(i.terminate(),t.ondata.call(t,e)):(n[1]&&i.terminate(),t.ondata.call(t,e,n[0],n[1]))});i.postMessage(n),t.push=function(e,n){if(a)throw"stream finished";if(!t.ondata)throw"no stream handler";i.postMessage([e,a=n],[e.buffer])},t.terminate=function(){i.terminate()}},ue=function(e,t){return e[t]|e[t+1]<<8},ce=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},de=function(e,t){return ce(e,t)+ce(e,t+4)*4294967296},me=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},pe=function(e,t){var n=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:t.level==9?2:0,e[9]=3,t.mtime!=0&&me(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),n){e[3]=8;for(var r=0;r<=n.length;++r)e[r+10]=n.charCodeAt(r)}},_e=function(e){if(e[0]!=31||e[1]!=139||e[2]!=8)throw"invalid gzip data";var t=e[3],n=10;t&4&&(n+=e[10]|(e[11]<<8)+2);for(var r=(t>>3&1)+(t>>4&1);r>0;r-=!e[n++]);return n+(t&2)},fe=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},ge=function(e){return 10+(e.filename&&e.filename.length+1||0)},he=function(e,t){var n=t.level,r=n==0?0:n<6?1:n==9?3:2;e[0]=120,e[1]=r<<6|(r?32-2*r:1)},ye=function(e){if((e[0]&15)!=8||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(e[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Ce(e,t){return!t&&typeof e=="function"&&(t=e,e={}),this.ondata=t,e}var be=(function(){function e(e,t){!t&&typeof e=="function"&&(t=e,e={}),this.ondata=t,this.o=e||{}}return e.prototype.p=function(e,t){this.ondata(z(e,this.o,0,0,!t),t)},e.prototype.push=function(e,t){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";this.d=t,this.p(e,t||!1)},e})();d.Deflate=be;var ve=(function(){function e(e,t){se([Z,function(){return[le,be]}],this,Ce.call(this,e,t),function(e){var t=new be(e.data);onmessage=le(t)},6)}return e})();d.AsyncDeflate=ve;function Se(e,t,n){if(n||(n=t,t={}),typeof n!="function")throw"no callback";return ie(e,t,[Z],function(e){return oe(Re(e.data[0],e.data[1]))},0,n)}d.deflate=Se;function Re(e,t){return z(e,t||{},0,0)}d.deflateSync=Re;var Le=(function(){function e(e){this.s={},this.p=new t(0),this.ondata=e}return e.prototype.e=function(e){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";var n=this.p.length,r=new t(n+e.length);r.set(this.p),r.set(e,n),this.p=r},e.prototype.c=function(e){this.d=this.s.i=e||!1;var t=this.s.b,n=$(this.p,this.o,this.s);this.ondata(x(n,t,this.s.b),this.d),this.o=x(n,this.s.b-32768),this.s.b=this.o.length,this.p=x(this.p,this.s.p/8|0),this.s.p&=7},e.prototype.push=function(e,t){this.e(e),this.c(t)},e})();d.Inflate=Le;var Ee=(function(){function e(e){this.ondata=e,se([J,function(){return[le,Le]}],this,0,function(){var e=new Le;onmessage=le(e)},7)}return e})();d.AsyncInflate=Ee;function ke(e,t,n){if(n||(n=t,t={}),typeof n!="function")throw"no callback";return ie(e,t,[J],function(e){return oe(Ie(e.data[0],ae(e.data[1])))},1,n)}d.inflate=ke;function Ie(e,t){return $(e,t)}d.inflateSync=Ie;var Te=(function(){function e(e,t){this.c=H(),this.l=0,this.v=1,be.call(this,e,t)}return e.prototype.push=function(e,t){be.prototype.push.call(this,e,t)},e.prototype.p=function(e,t){this.c.p(e),this.l+=e.length;var n=z(e,this.o,this.v&&ge(this.o),t&&8,!t);this.v&&(pe(n,this.o),this.v=0),t&&(me(n,n.length-8,this.c.d()),me(n,n.length-4,this.l)),this.ondata(n,t)},e})();d.Gzip=Te,d.Compress=Te;var De=(function(){function e(e,t){se([Z,ee,function(){return[le,be,Te]}],this,Ce.call(this,e,t),function(e){var t=new Te(e.data);onmessage=le(t)},8)}return e})();d.AsyncGzip=De,d.AsyncCompress=De;function xe(e,t,n){if(n||(n=t,t={}),typeof n!="function")throw"no callback";return ie(e,t,[Z,ee,function(){return[$e]}],function(e){return oe($e(e.data[0],e.data[1]))},2,n)}d.gzip=xe,d.compress=xe;function $e(e,t){t||(t={});var n=H(),r=e.length;n.p(e);var o=z(e,t,ge(t),8),a=o.length;return pe(o,t),me(o,a-8,n.d()),me(o,a-4,r),o}d.gzipSync=$e,d.compressSync=$e;var Pe=(function(){function e(e){this.v=1,Le.call(this,e)}return e.prototype.push=function(e,t){if(Le.prototype.e.call(this,e),this.v){var n=this.p.length>3?_e(this.p):4;if(n>=this.p.length&&!t)return;this.p=this.p.subarray(n),this.v=0}if(t){if(this.p.length<8)throw"invalid gzip stream";this.p=this.p.subarray(0,-8)}Le.prototype.c.call(this,t)},e})();d.Gunzip=Pe;var Ne=(function(){function e(e){this.ondata=e,se([J,te,function(){return[le,Le,Pe]}],this,0,function(){var e=new Pe;onmessage=le(e)},9)}return e})();d.AsyncGunzip=Ne;function Me(e,t,n){if(n||(n=t,t={}),typeof n!="function")throw"no callback";return ie(e,t,[J,te,function(){return[we]}],function(e){return oe(we(e.data[0]))},3,n)}d.gunzip=Me;function we(e,n){return $(e.subarray(_e(e),-8),n||new t(fe(e)))}d.gunzipSync=we;var Ae=(function(){function e(e,t){this.c=G(),this.v=1,be.call(this,e,t)}return e.prototype.push=function(e,t){be.prototype.push.call(this,e,t)},e.prototype.p=function(e,t){this.c.p(e);var n=z(e,this.o,this.v&&2,t&&4,!t);this.v&&(he(n,this.o),this.v=0),t&&me(n,n.length-4,this.c.d()),this.ondata(n,t)},e})();d.Zlib=Ae;var Fe=(function(){function e(e,t){se([Z,ne,function(){return[le,be,Ae]}],this,Ce.call(this,e,t),function(e){var t=new Ae(e.data);onmessage=le(t)},10)}return e})();d.AsyncZlib=Fe;function Oe(e,t,n){if(n||(n=t,t={}),typeof n!="function")throw"no callback";return ie(e,t,[Z,ne,function(){return[Be]}],function(e){return oe(Be(e.data[0],e.data[1]))},4,n)}d.zlib=Oe;function Be(e,t){t||(t={});var n=G();n.p(e);var r=z(e,t,2,4);return he(r,t),me(r,r.length-4,n.d()),r}d.zlibSync=Be;var We=(function(){function e(e){this.v=1,Le.call(this,e)}return e.prototype.push=function(e,t){if(Le.prototype.e.call(this,e),this.v){if(this.p.length<2&&!t)return;this.p=this.p.subarray(2),this.v=0}if(t){if(this.p.length<4)throw"invalid zlib stream";this.p=this.p.subarray(0,-4)}Le.prototype.c.call(this,t)},e})();d.Unzlib=We;var qe=(function(){function e(e){this.ondata=e,se([J,re,function(){return[le,Le,We]}],this,0,function(){var e=new We;onmessage=le(e)},11)}return e})();d.AsyncUnzlib=qe;function Ue(e,t,n){if(n||(n=t,t={}),typeof n!="function")throw"no callback";return ie(e,t,[J,re,function(){return[Ve]}],function(e){return oe(Ve(e.data[0],ae(e.data[1])))},5,n)}d.unzlib=Ue;function Ve(e,t){return $((ye(e),e.subarray(2,-4)),t)}d.unzlibSync=Ve;var He=(function(){function e(e){this.G=Pe,this.I=Le,this.Z=We,this.ondata=e}return e.prototype.push=function(e,n){if(!this.ondata)throw"no stream handler";if(this.s)this.s.push(e,n);else{if(this.p&&this.p.length){var r=new t(this.p.length+e.length);r.set(this.p),r.set(e,this.p.length)}else this.p=e;if(this.p.length>2){var o=this,a=function(){o.ondata.apply(o,arguments)};this.s=this.p[0]==31&&this.p[1]==139&&this.p[2]==8?new this.G(a):(this.p[0]&15)!=8||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(a):new this.Z(a),this.s.push(this.p,n),this.p=null}}},e})();d.Decompress=He;var Ge=(function(){function e(e){this.G=Ne,this.I=Ee,this.Z=qe,this.ondata=e}return e.prototype.push=function(e,t){He.prototype.push.call(this,e,t)},e})();d.AsyncDecompress=Ge;function ze(e,t,n){if(n||(n=t,t={}),typeof n!="function")throw"no callback";return e[0]==31&&e[1]==139&&e[2]==8?Me(e,t,n):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?ke(e,t,n):Ue(e,t,n)}d.decompress=ze;function je(e,t){return e[0]==31&&e[1]==139&&e[2]==8?we(e,t):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?Ie(e,t):Ve(e,t)}d.decompressSync=je;var Ke=function(e,n,r,o){for(var a in e){var i=e[a],l=n+a;i instanceof t?r[l]=[i,o]:Array.isArray(i)?r[l]=[i[0],j(o,i[1])]:Ke(i,l+"/",r,o)}},Qe=typeof TextEncoder!="undefined"&&new TextEncoder,Xe=typeof TextDecoder!="undefined"&&new TextDecoder,Ye=0;try{Xe.decode(q,{stream:!0}),Ye=1}catch(e){}var Je=function(e){for(var t="",n=0;;){var r=e[n++],o=(r>127)+(r>223)+(r>239);if(n+o>e.length)return[t,x(e,n-1)];o?o==3?(r=((r&15)<<18|(e[n++]&63)<<12|(e[n++]&63)<<6|e[n++]&63)-65536,t+=String.fromCharCode(55296|r>>10,56320|r&1023)):o&1?t+=String.fromCharCode((r&31)<<6|e[n++]&63):t+=String.fromCharCode((r&15)<<12|(e[n++]&63)<<6|e[n++]&63):t+=String.fromCharCode(r)}},Ze=(function(){function e(e){this.ondata=e,Ye?this.t=new TextDecoder:this.p=q}return e.prototype.push=function(e,n){if(!this.ondata)throw"no callback";if(n=!!n,this.t){if(this.ondata(this.t.decode(e,{stream:!0}),n),n){if(this.t.decode().length)throw"invalid utf-8 data";this.t=null}return}if(!this.p)throw"stream finished";var r=new t(this.p.length+e.length);r.set(this.p),r.set(e,this.p.length);var o=Je(r),a=o[0],i=o[1];if(n){if(i.length)throw"invalid utf-8 data";this.p=null}else this.p=i;this.ondata(a,n)},e})();d.DecodeUTF8=Ze;var et=(function(){function e(e){this.ondata=e}return e.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(this.d)throw"stream finished";this.ondata(tt(e),this.d=t||!1)},e})();d.EncodeUTF8=et;function tt(e,n){if(n){for(var r=new t(e.length),o=0;o<e.length;++o)r[o]=e.charCodeAt(o);return r}if(Qe)return Qe.encode(e);for(var a=e.length,i=new t(e.length+(e.length>>1)),l=0,s=function(e){i[l++]=e},o=0;o<a;++o){if(l+5>i.length){var u=new t(l+8+(a-o<<1));u.set(i),i=u}var c=e.charCodeAt(o);c<128||n?s(c):c<2048?(s(192|c>>6),s(128|c&63)):c>55295&&c<57344?(c=65536+(c&1047552)|e.charCodeAt(++o)&1023,s(240|c>>18),s(128|c>>12&63),s(128|c>>6&63),s(128|c&63)):(s(224|c>>12),s(128|c>>6&63),s(128|c&63))}return x(i,0,l)}d.strToU8=tt;function nt(e,t){if(t){for(var n="",r=0;r<e.length;r+=16384)n+=String.fromCharCode.apply(null,e.subarray(r,r+16384));return n}else{if(Xe)return Xe.decode(e);var o=Je(e),a=o[0],i=o[1];if(i.length)throw"invalid utf-8 data";return a}}d.strFromU8=nt;var rt=function(e){return e==1?3:e<6?2:e==9?1:0},ot=function(e,t){return t+30+ue(e,t+26)+ue(e,t+28)},at=function(e,t,n){var r=ue(e,t+28),o=nt(e.subarray(t+46,t+46+r),!(ue(e,t+8)&2048)),a=t+46+r,i=ce(e,t+20),l=n&&i==4294967295?it(e,a):[i,ce(e,t+24),ce(e,t+42)],s=l[0],u=l[1],c=l[2];return[ue(e,t+10),s,u,o,a+ue(e,t+30)+ue(e,t+32),c]},it=function(e,t){for(;ue(e,t)!=1;t+=4+ue(e,t+2));return[de(e,t+12),de(e,t+4),de(e,t+20)]},lt=function(e){var t=0;if(e)for(var n in e){var r=e[n].length;if(r>65535)throw"extra field too long";t+=r+4}return t},st=function(e,t,n,r,o,a,i,l){var s=r.length,u=n.extra,c=l&&l.length,d=lt(u);me(e,t,i!=null?33639248:67324752),t+=4,i!=null&&(e[t++]=20,e[t++]=n.os),e[t]=20,t+=2,e[t++]=n.flag<<1|(a==null&&8),e[t++]=o&&8,e[t++]=n.compression&255,e[t++]=n.compression>>8;var m=new Date(n.mtime==null?Date.now():n.mtime),p=m.getFullYear()-1980;if(p<0||p>119)throw"date not in range 1980-2099";if(me(e,t,p<<25|m.getMonth()+1<<21|m.getDate()<<16|m.getHours()<<11|m.getMinutes()<<5|m.getSeconds()>>>1),t+=4,a!=null&&(me(e,t,n.crc),me(e,t+4,a),me(e,t+8,n.size)),me(e,t+12,s),me(e,t+14,d),t+=16,i!=null&&(me(e,t,c),me(e,t+6,n.attrs),me(e,t+10,i),t+=14),e.set(r,t),t+=s,d)for(var _ in u){var f=u[_],g=f.length;me(e,t,+_),me(e,t+2,g),e.set(f,t+4),t+=4+g}return c&&(e.set(l,t),t+=c),t},ut=function(e,t,n,r,o){me(e,t,101010256),me(e,t+8,n),me(e,t+10,n),me(e,t+12,r),me(e,t+16,o)},ct=(function(){function e(e){this.filename=e,this.c=H(),this.size=0,this.compression=0}return e.prototype.process=function(e,t){this.ondata(null,e,t)},e.prototype.push=function(e,t){if(!this.ondata)throw"no callback - add to ZIP archive before pushing";this.c.p(e),this.size+=e.length,t&&(this.crc=this.c.d()),this.process(e,t||!1)},e})();d.ZipPassThrough=ct;var dt=(function(){function e(e,t){var n=this;t||(t={}),ct.call(this,e),this.d=new be(t,function(e,t){n.ondata(null,e,t)}),this.compression=8,this.flag=rt(t.level)}return e.prototype.process=function(e,t){try{this.d.push(e,t)}catch(e){this.ondata(e,null,t)}},e.prototype.push=function(e,t){ct.prototype.push.call(this,e,t)},e})();d.ZipDeflate=dt;var mt=(function(){function e(e,t){var n=this;t||(t={}),ct.call(this,e),this.d=new ve(t,function(e,t,r){n.ondata(e,t,r)}),this.compression=8,this.flag=rt(t.level),this.terminate=this.d.terminate}return e.prototype.process=function(e,t){this.d.push(e,t)},e.prototype.push=function(e,t){ct.prototype.push.call(this,e,t)},e})();d.AsyncZipDeflate=mt;var pt=(function(){function e(e){this.ondata=e,this.u=[],this.d=1}return e.prototype.add=function(e){var n=this;if(this.d&2)throw"stream finished";var r=tt(e.filename),o=r.length,a=e.comment,i=a&&tt(a),l=o!=e.filename.length||i&&a.length!=i.length,s=o+lt(e.extra)+30;if(o>65535)throw"filename too long";var u=new t(s);st(u,0,e,r,l);var c=[u],d=function(){for(var e=0,t=c;e<t.length;e++){var r=t[e];n.ondata(null,r,!1)}c=[]},m=this.d;this.d=0;var p=this.u.length,_=j(e,{f:r,u:l,o:i,t:function(){e.terminate&&e.terminate()},r:function(){if(d(),m){var e=n.u[p+1];e?e.r():n.d=1}m=1}}),f=0;e.ondata=function(r,o,a){if(r)n.ondata(r,o,a),n.terminate();else if(f+=o.length,c.push(o),a){var i=new t(16);me(i,0,134695760),me(i,4,e.crc),me(i,8,f),me(i,12,e.size),c.push(i),_.c=f,_.b=s+f+16,_.crc=e.crc,_.size=e.size,m&&_.r(),m=1}else m&&d()},this.u.push(_)},e.prototype.end=function(){var e=this;if(this.d&2)throw this.d&1?"stream finishing":"stream finished";this.d?this.e():this.u.push({r:function(){e.d&1&&(e.u.splice(-1,1),e.e())},t:function(){}}),this.d=3},e.prototype.e=function(){for(var e=0,n=0,r=0,o=0,a=this.u;o<a.length;o++){var i=a[o];r+=46+i.f.length+lt(i.extra)+(i.o?i.o.length:0)}for(var l=new t(r+22),s=0,u=this.u;s<u.length;s++){var i=u[s];st(l,e,i,i.f,i.u,i.c,n,i.o),e+=46+i.f.length+lt(i.extra)+(i.o?i.o.length:0),n+=i.b}ut(l,e,this.u.length,r,n),this.ondata(null,l,!0),this.d=2},e.prototype.terminate=function(){for(var e=0,t=this.u;e<t.length;e++){var n=t[e];n.t()}this.d=2},e})();d.Zip=pt;function _t(e,n,r){if(r||(r=n,n={}),typeof r!="function")throw"no callback";var o={};Ke(e,"",o,n);var a=Object.keys(o),i=a.length,l=0,s=0,u=i,c=new Array(i),d=[],m=function(){for(var e=0;e<d.length;++e)d[e]()},p=function(){var e=new t(s+22),n=l,o=s-l;s=0;for(var a=0;a<u;++a){var i=c[a];try{var d=i.c.length;st(e,s,i,i.f,i.u,d);var m=30+i.f.length+lt(i.extra),p=s+m;e.set(i.c,p),st(e,l,i,i.f,i.u,d,s,i.m),l+=16+m+(i.m?i.m.length:0),s=p+d}catch(e){return r(e,null)}}ut(e,l,c.length,o,n),r(null,e)};i||p();for(var _=function(e){var t=a[e],n=o[t],u=n[0],_=n[1],f=H(),g=u.length;f.p(u);var h=tt(t),y=h.length,C=_.comment,b=C&&tt(C),v=b&&b.length,S=lt(_.extra),R=_.level==0?0:8,L=function(n,o){if(n)m(),r(n,null);else{var a=o.length;c[e]=j(_,{size:g,crc:f.d(),c:o,f:h,m:b,u:y!=t.length||b&&C.length!=v,compression:R}),l+=30+y+S+a,s+=76+2*(y+S)+(v||0)+a,--i||p()}};if(y>65535&&L("filename too long",null),!R)L(null,u);else if(g<16e4)try{L(null,Re(u,_))}catch(e){L(e,null)}else d.push(Se(u,_,L))},f=0;f<u;++f)_(f);return m}d.zip=_t;function ft(e,n){n||(n={});var r={},o=[];Ke(e,"",r,n);var a=0,i=0;for(var l in r){var s=r[l],u=s[0],c=s[1],d=c.level==0?0:8,m=tt(l),p=m.length,_=c.comment,f=_&&tt(_),g=f&&f.length,h=lt(c.extra);if(p>65535)throw"filename too long";var y=d?Re(u,c):u,C=y.length,b=H();b.p(u),o.push(j(c,{size:u.length,crc:b.d(),c:y,f:m,m:f,u:p!=l.length||f&&_.length!=g,o:a,compression:d})),a+=30+p+h+C,i+=76+2*(p+h)+(g||0)+C}for(var v=new t(i+22),S=a,R=i-a,L=0;L<o.length;++L){var m=o[L];st(v,m.o,m,m.f,m.u,m.c.length);var E=30+m.f.length+lt(m.extra);v.set(m.c,m.o+E),st(v,a,m,m.f,m.u,m.c.length,m.o,m.m),a+=16+E+(m.m?m.m.length:0)}return ut(v,a,o.length,R,S),v}d.zipSync=ft;var gt=(function(){function e(){}return e.prototype.push=function(e,t){this.ondata(null,e,t)},e.compression=0,e})();d.UnzipPassThrough=gt;var ht=(function(){function e(){var e=this;this.i=new Le(function(t,n){e.ondata(null,t,n)})}return e.prototype.push=function(e,t){try{this.i.push(e,t)}catch(n){this.ondata(n,e,t)}},e.compression=8,e})();d.UnzipInflate=ht;var yt=(function(){function e(e,t){var n=this;t<32e4?this.i=new Le(function(e,t){n.ondata(null,e,t)}):(this.i=new Ee(function(e,t,r){n.ondata(e,t,r)}),this.terminate=this.i.terminate)}return e.prototype.push=function(e,t){this.i.terminate&&(e=x(e,0)),this.i.push(e,t)},e.compression=8,e})();d.AsyncUnzipInflate=yt;var Ct=(function(){function e(e){this.onfile=e,this.k=[],this.o={0:gt},this.p=q}return e.prototype.push=function(e,n){var r=this;if(!this.onfile)throw"no callback";if(!this.p)throw"stream finished";if(this.c>0){var o=Math.min(this.c,e.length),a=e.subarray(0,o);if(this.c-=o,this.d?this.d.push(a,!this.c):this.k[0].push(a),e=e.subarray(o),e.length)return this.push(e,n)}else{var i=0,l=0,s=void 0,u=void 0;this.p.length?e.length?(u=new t(this.p.length+e.length),u.set(this.p),u.set(e,this.p.length)):u=this.p:u=e;for(var c=u.length,d=this.c,m=d&&this.d,p=function(){var e,t=ce(u,l);if(t==67324752){i=1,s=l,_.d=null,_.c=0;var n=ue(u,l+6),o=ue(u,l+8),a=n&2048,m=n&8,p=ue(u,l+26),f=ue(u,l+28);if(c>l+30+p+f){var g=[];_.k.unshift(g),i=2;var h=ce(u,l+18),y=ce(u,l+22),C=nt(u.subarray(l+30,l+=30+p),!a);h==4294967295?(e=m?[-2]:it(u,l),h=e[0],y=e[1]):m&&(h=-1),l+=f,_.c=h;var b,v={name:C,compression:o,start:function(){if(!v.ondata)throw"no callback";if(!h)v.ondata(null,q,!0);else{var e=r.o[o];if(!e)throw"unknown compression type "+o;b=h<0?new e(C):new e(C,h,y),b.ondata=function(e,t,n){v.ondata(e,t,n)};for(var t=0,n=g;t<n.length;t++){var a=n[t];b.push(a,!1)}r.k[0]==g&&r.c?r.d=b:b.push(q,!0)}},terminate:function(){b&&b.terminate&&b.terminate()}};h>=0&&(v.size=h,v.originalSize=y),_.onfile(v)}return"break"}else if(d){if(t==134695760)return s=l+=12+(d==-2&&8),i=3,_.c=0,"break";if(t==33639248)return s=l-=4,i=3,_.c=0,"break"}},_=this;l<c-4;++l){var f=p();if(f==="break")break}if(this.p=q,d<0){var g=i?u.subarray(0,s-12-(d==-2&&8)-(ce(u,s-16)==134695760&&4)):u.subarray(0,l);m?m.push(g,!!i):this.k[+(i==2)].push(g)}if(i&2)return this.push(u.subarray(l),n);this.p=u.subarray(l)}if(n){if(this.c)throw"invalid zip file";this.p=null}},e.prototype.register=function(e){this.o[e.compression]=e},e})();d.Unzip=Ct;function bt(e,n){if(typeof n!="function")throw"no callback";for(var r=[],o=function(){for(var e=0;e<r.length;++e)r[e]()},a={},i=e.length-22;ce(e,i)!=101010256;--i)if(!i||e.length-i>65558){n("invalid zip file",null);return}var l=ue(e,i+8);l||n(null,{});var s=l,u=ce(e,i+16),c=u==4294967295;if(c){if(i=ce(e,i-12),ce(e,i)!=101075792){n("invalid zip file",null);return}s=l=ce(e,i+32),u=ce(e,i+48)}for(var d=function(i){var s=at(e,u,c),d=s[0],m=s[1],p=s[2],_=s[3],f=s[4],g=s[5],h=ot(e,g);u=f;var y=function(e,t){e?(o(),n(e,null)):(a[_]=t,--l||n(null,a))};if(!d)y(null,x(e,h,h+m));else if(d==8){var C=e.subarray(h,h+m);if(m<32e4)try{y(null,Ie(C,new t(p)))}catch(e){y(e,null)}else r.push(ke(C,{size:p},y))}else y("unknown compression type "+d,null)},m=0;m<s;++m)d(m);return o}d.unzip=bt;function vt(e){for(var n={},r=e.length-22;ce(e,r)!=101010256;--r)if(!r||e.length-r>65558)throw"invalid zip file";var o=ue(e,r+8);if(!o)return{};var a=ce(e,r+16),i=a==4294967295;if(i){if(r=ce(e,r-12),ce(e,r)!=101075792)throw"invalid zip file";o=ce(e,r+32),a=ce(e,r+48)}for(var l=0;l<o;++l){var s=at(e,a,i),u=s[0],c=s[1],d=s[2],m=s[3],p=s[4],_=s[5],f=ot(e,_);if(a=p,!u)n[m]=x(e,f,f+c);else if(u==8)n[m]=Ie(e.subarray(f,f+c),new t(d));else throw"unknown compression type "+u}return n}d.unzipSync=vt}var _=!1;function f(){return _||(_=!0,p()),m.exports}function g(e){switch(e){case void 0:return f()}}a.exports=g}),null);
__d("fflate",["fflate-0.6.10"],(function(t,n,r,o,a,i){a.exports=n("fflate-0.6.10")()}),null);
__d("WAGzip",["Promise","err","fflate"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.$GzipWrapper$p_2=[],n.ondata=function(e,t){if(n.$GzipWrapper$p_2.push(e),!!t){var r=0;n.$GzipWrapper$p_2.forEach(function(e){r+=e.length});var o=new Uint8Array(r),a=0;n.$GzipWrapper$p_2.forEach(function(e){o.set(e,a),a+=e.length}),n.$GzipWrapper$p_1=o}},n}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.push=function(n,a){if(this.$GzipWrapper$p_1!=null)throw r("err")("Tried to push chunk to compressor after final block");n instanceof Uint8Array?e.prototype.push.call(this,n,a):n instanceof ArrayBuffer?e.prototype.push.call(this,new Uint8Array(n),a):e.prototype.push.call(this,o("fflate").strToU8(n),a)},n.result=function(){if(this.$GzipWrapper$p_1==null)throw r("err")("Tried to access result before adding final block");return this.$GzipWrapper$p_1},t})(o("fflate").Gzip);function u(e){return e===void 0&&(e={}),new s(e)}function c(e){return o("fflate").decompressSync(e)}function d(t){return(e||(e=n("Promise"))).resolve(c(t))}l.GzipWrapper=s,l.createDeflate=u,l.inflate=c,l.gzipInflate=d}),98);
__d("WAHash",["err"],(function(t,n,r,o,a,i,l){"use strict";var e=new WeakMap,s=0;function u(t){if(t===null)return"null";switch(typeof t){case"undefined":return"undefined";case"number":return"n:"+t;case"string":return"s:"+t;case"boolean":return"b:"+t.toString();case"object":{var n=e.get(t);return n==null&&(n=s++,e.set(t,n)),"o:"+n}default:throw r("err")("Unsupported type")}}l.default=u}),98);
__d("WAInflatePhoneRegex",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t;return typeof e=="number"?t=String(e).split("").map(function(e){return".".repeat(Number(e))}).join(")("):t=e.replace(/;|[a-zA-Z]+/g,function(e){return e===";"?")(":e.split("").map(function(e){var t=e.charCodeAt(0);return t>=97?".".repeat(t-96)+"?":".".repeat(t-64)}).join(")(")}),"("+t+")"}i.inflatePhoneRegex=e}),66);
__d("WANoiseSocket",["Promise","WACryptoDependencies","WALogger","WAPromiseQueue","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=(c||(c=n("Promise"))).reject("UNINITIALIZED HANDSHAKE"),m=new Uint8Array(0);d.catch(function(){});var p=(function(){function t(t,n,r){var a=this;this.$4=[],this.$5=new(o("WAPromiseQueue")).PromiseQueue,this.$6=new(o("WAPromiseQueue")).PromiseQueue,this.$7=0,this.$8=0,this.$9=!1,this.$14=function(t){a.$1.closed?o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["NoiseSocket socket closed while encrypting frame"]))):(o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Sending encrypted frame to web socket"]))).tags("WANoiseSocket"),a.$1.sendFrame(t))},this.$12=function(e){var t=a.$7++;a.$5.enqueueHandlers(g(a.$2,t,void 0,e),a.$15)},this.$13=function(){a.$9=!0,a.$5.wait().then(function(){a.$9=!1;var e=a.$11;e&&e()})},this.$15=function(e){a.$10?a.$10(e):a.$4.push(e)},this.$1=t,this.$3=n,this.$2=r,t.onFrame=this.$12,this.$1.onClose=this.$13,t.convertBufferedToFrames()}var r=t.prototype;return r.sendFrameAsync=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield this.sendFrame(e);return t});function t(t){return e.apply(this,arguments)}return t})(),r.sendFrame=function(t){if(this.$9)return(c||(c=n("Promise"))).resolve();this.$1.throwIfClosed();var e=this.$8++;return o("WALogger").DEV(u||(u=babelHelpers.taggedTemplateLiteralLoose(["sendFrame adding to queue with frame size: "," bytes"])),t.length).tags("WANoiseSocket"),this.$6.enqueueHandlers(f(this.$3,e,void 0,t),this.$14)},r.setOnFrame=function(t){this.$10=t},r.setOnClose=function(t){this.$11=t},r.close=function(){this.$1.close()},t})();function _(e){var t=new ArrayBuffer(12),n=new DataView(t);return n.setUint32(8,e),new Uint8Array(t)}function f(e,t,n,r){return o("WACryptoDependencies").getCrypto().subtle.encrypt({name:"AES-GCM",iv:_(t),additionalData:n?new Uint8Array(n):m},e,r)}function g(e,t,n,r){return o("WACryptoDependencies").getCrypto().subtle.decrypt({name:"AES-GCM",iv:_(t),additionalData:n?new Uint8Array(n):m},e,r)}l.NoiseSocket=p}),98);
__d("WANoiseHandshake",["Promise","WABinary","WACryptoDependencies","WACryptoHkdf","WACryptoSha256","WAErrors","WANoiseSocket","WAResolvable","WATagsLogger","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=o("WATagsLogger").TAGS(["NoiseHandshake"]),m=(c||(c=n("Promise"))).reject("UNINITIALIZED HANDSHAKE"),p=new Uint8Array(0);m.catch(function(){});var _=(function(){function t(e){var t=this;this.$2=m,this.$3=m,this.$4=m,this.$5=0,this.$1=e,this.$6=new(o("WAResolvable")).Resolvable,e.onClose=function(){t.$6.reject(new(o("WAErrors")).Disconnected("NoiseHandshake: SocketClosed"))},b(this.$6.promise)}var r=t.prototype;return r.start=function(t,r){var e=o("WABinary").Binary.build(t).readBuffer(),a=e.byteLength===32?(c||(c=n("Promise"))).resolve(e):o("WACryptoSha256").sha256(e);this.$2=a,this.$3=a,this.$4=a.then(g),this.authenticate(r)},r.sendAndReceive=function(t){var e=this.$1,r=new(c||(c=n("Promise")))(function(n){e.onFrame=function(t){e.onFrame=null,n(t)},e.sendFrame(t)});return this.$7(r)},r.send=function(t){this.$1.sendFrame(t)},r.authenticate=function(t){this.$2=(c||(c=n("Promise"))).all([this.$2,t]).then(function(e){var t=e[0],n=e[1],r=o("WABinary").Binary.build(t,n).readByteArrayView();return o("WACryptoSha256").sha256(r)})},r.encrypt=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){try{var r=this.$5++,o=(c||(c=n("Promise"))).all([this.$4,this.$2,t]).then(function(e){var t=e[0],n=e[1],o=e[2];return h(t,r,n,o)});this.authenticate(o);var a=yield this.$7(o);return a}catch(t){throw d.ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Error on encrypt: ",""])),t),t}});function r(e){return t.apply(this,arguments)}return r})(),r.decrypt=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){try{var r=this.$5++,o=(c||(c=n("Promise"))).all([this.$4,this.$2]).then(function(t){var n=t[0],o=t[1];return y(n,r,o,e)});this.authenticate(e);var a=yield this.$7(o);return a}catch(e){throw d.ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Error on decrypt: "," reason: ",""])),e,t),e}});function t(t,n){return e.apply(this,arguments)}return t})(),r.finish=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=this;try{var t=this.$3.then(function(e){return C(e,new Uint8Array(0))}).then(function(e){var t=e[0],r=e[1];return(c||(c=n("Promise"))).all([g(t,["encrypt"]),g(r,["decrypt"])])}).then(function(t){var n=t[0],r=t[1];return new(o("WANoiseSocket")).NoiseSocket(e.$1,n,r)}),r=yield this.$7(t);return r}catch(e){throw d.ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Error on finish: ",""])),e),e}});function t(){return e.apply(this,arguments)}return t})(),r.mixIntoKey=function(t){this.$5=0;var e=(c||(c=n("Promise"))).all([this.$3,t]).then(function(e){var t=e[0],n=e[1];return C(t,new Uint8Array(n))});this.$3=e.then(function(e){return e[0]}),this.$4=e.then(function(e){return g(e[1])}),b(this.$3),b(this.$4)},r.$7=function(t){var e=this;return(c||(c=n("Promise"))).race([t,this.$6.promise]).then(function(t){return e.$6.resolveWasCalled()?e.$6.promise:t})},t})();function f(e){var t=new ArrayBuffer(12),n=new DataView(t);return n.setUint32(8,e),new Uint8Array(t)}function g(e,t){return t===void 0&&(t=["encrypt","decrypt"]),o("WACryptoDependencies").getCrypto().subtle.importKey("raw",new Uint8Array(e),"AES-GCM",!1,t)}function h(e,t,n,r){return o("WACryptoDependencies").getCrypto().subtle.encrypt({name:"AES-GCM",iv:f(t),additionalData:n?new Uint8Array(n):p},e,r)}function y(e,t,n,r){return o("WACryptoDependencies").getCrypto().subtle.decrypt({name:"AES-GCM",iv:f(t),additionalData:n?new Uint8Array(n):p},e,r)}function C(e,t){return o("WACryptoHkdf").extractWithSaltAndExpand(t,new Uint8Array(e),"",64).then(function(e){return[e.slice(0,32),e.slice(32)]})}function b(e){e.catch(function(){})}l.NoiseHandshake=_}),98);
__d("WAPhoneUtils",["WACountries","WAInflatePhoneRegex","WAJids","WAPhoneFindCC"],(function(t,n,r,o,a,i,l){"use strict";var e=new Map,s=(function(){function e(e){var t;if(Array.isArray(e)){t=e[0];var n=e[1];n!=null&&n!==-1&&(Array.isArray(n)||(n=[n]),this.$3=n.map(function(e){return new RegExp("^("+e+")")})),this.$2=e[2]}else t=e;this.$1=new RegExp("^"+o("WAInflatePhoneRegex").inflatePhoneRegex(t)+"$")}var t=e.prototype;return t.testAndFormat=function(t){if(!(!this.$1.test(t)||!this.$4(t))){if(typeof this.$2=="string")return t.replace(this.$1,this.$2);var e=this.$1.exec(t);if(e!=null)return e.slice(1).join(this.$2!=null?"-":" ")}},t.$4=function(t){return!this.$3||this.$3.some(function(e){return e.test(t)})},e})(),u={};function c(e){if(u[e]!=null)return u[e];var t=r("WACountries")[e]!=null?JSON.parse("["+r("WACountries")[e]+"]"):null;if(t==null)return null;var n=t.pop();return u[e]={lengths:n,formats:t.map(function(e){return new s(e)})}}function d(e){var t=e.length>0&&e[0]==="+",n=t?e.substring(1):e,r=o("WAPhoneFindCC").findCC(n);if(!r)return n;var a=n.substring(r.length),i=c(r);if(!i)return"+"+r+" "+a;for(var l=i.formats,s=0;s<l.length;s++){var u=l[s].testAndFormat(a);if(u!=null&&u!=="")return"+"+r+" "+u}return"+"+r+" "+a}function m(t){var n=e.get(t);return n==null&&(n=d(t),e.set(t,n)),n}var p=/^\+*[\d ()]+$/;function _(e){return p.test(e)}function f(e,t){if(!/^\d+$/.test(t))return!1;var n=c(e);return n?typeof n.lengths=="number"?n.lengths===t.length:n.lengths.includes(t.length):!1}function g(e){return m(o("WAJids").phoneNumberFromJid(e))}l.compileCountryRegexes=c,l.formatPhone=m,l.isPotentiallyPhoneNumber=_,l.isPotentiallyValid=f,l.formattedPhoneNumber=g}),98);
__d("WAQplUploader",["WALogger","WAPromiseDelays","WAPromiseRetryLoop","WAQplTypes","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g,h,y,C={minTimeout:1e3,maxTimeout:1e4,retries:5,type:"exponential"},b=100,v={MAX_COUNT:4,MIN_DELAY:1*1e3*60,MAX_DELAY:15*1e3*60},S=300,R=1440*60,L,E,k;function I(e,t){return T.apply(this,arguments)}function T(){return T=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n,r,a,i,l;L=t.healthLogger,E=t.storageApi,!k&&(o("WALogger").DEV(s||(s=babelHelpers.taggedTemplateLiteralLoose(["QPL Uploader, start"]))),k={sendEvents:e.sendEvents,isQplEnabled:e.isQplEnabled,startDelayInMs:1e3*((n=e.startDelayInSeconds)!=null?n:S),intervalInMs:1e3*((r=e.intervalInSeconds)!=null?r:R),minRetryDelayInMs:1e3*((a=e.minRetryDelayInSeconds)!=null?a:v.MIN_DELAY),maxRetryDelayInMs:1e3*((i=e.maxRetryDelayInSeconds)!=null?i:v.MAX_DELAY),maxRetryAttemptsCount:(l=e.maxRetryAttemptsCount)!=null?l:v.MAX_COUNT},o("WALogger").DEV(u||(u=babelHelpers.taggedTemplateLiteralLoose(["QPL Uploader, sleeping prior to start for "," ms"])),k.startDelayInMs),yield o("WAPromiseDelays").delayMs(k.startDelayInMs),yield N(),x())}),T.apply(this,arguments)}function D(){return N()}function x(){o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["QPL Uploader, sleeping between uploads for "," ms"])),k.intervalInMs),setTimeout(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield N(),x()}),k.intervalInMs)}function $(){return P.apply(this,arguments)}function P(){return P=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=k.minRetryDelayInMs+Math.floor(Math.random()*(k.maxRetryDelayInMs-k.minRetryDelayInMs));yield o("WAPromiseDelays").delayMs(e)}),P.apply(this,arguments)}function N(e){return M.apply(this,arguments)}function M(){return M=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t;if(e===void 0&&(e=0),!!((t=k)!=null&&t.isQplEnabled())){o("WALogger").DEV(c||(c=babelHelpers.taggedTemplateLiteralLoose(["QPL Uploader, upload triggered, attempt ",""])),e);try{var n=yield E.getRowCount();o("WALogger").DEV(d||(d=babelHelpers.taggedTemplateLiteralLoose(["QPL Uploader, uploading "," rows"])),n);for(var r=0;r<n;){var a=yield E.getFromBottom(b);yield w(a);var i=a[0].id||0,l=a[a.length-1].id||0;yield E.deleteRange(i,l),r+=a.length}o("WALogger").DEV(m||(m=babelHelpers.taggedTemplateLiteralLoose(["QPL Uploader, done upload."])))}catch(t){if(o("WALogger").DEV(p||(p=babelHelpers.taggedTemplateLiteralLoose(["QPL Uploader upload session failed, error: ",""])),t),e<k.maxRetryAttemptsCount)yield $(),N(e+1);else{var s;o("WALogger").ERROR(_||(_=babelHelpers.taggedTemplateLiteralLoose(["QPL Uploader, error during upload session, error: ",""])),t).verbose().devConsole(t).sendLogs("QPL Uploader upload session failed"),(s=L)==null||s.errorUploadingChunk(t)}}}}),M.apply(this,arguments)}function w(e){return A.apply(this,arguments)}function A(){return A=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=new(o("WAPromiseRetryLoop")).PromiseRetryLoop({name:"QplUploadChunk",timer:{algo:{type:C.type,first:C.minTimeout},max:C.maxTimeout},code:function(n){var t=e[0].id,r=e[e.length-1].id;return o("WALogger").LOG(f||(f=babelHelpers.taggedTemplateLiteralLoose(["QPL Uploader, sending rows ","-",", count ",""])),t,r,e.length),k.sendEvents(e).then(function(){o("WALogger").LOG(g||(g=babelHelpers.taggedTemplateLiteralLoose(["QPL Uploader, sending rows ","-",": done"])),t,r),n()}).catch(function(e){if(o("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["QPL Uploader, sending rows ","-",": error: ",""])),t,r,e),e instanceof o("WAQplTypes").QplServerStatusCodeError)switch(e.statusCode){case 500:o("WALogger").WARN(y||(y=babelHelpers.taggedTemplateLiteralLoose(["QPL Uploader uploadChunk, retriable error: ",""])),e.message);break;default:n();break}throw e})}});t.start(),yield t.promise()}),A.apply(this,arguments)}l.start=I,l.forceQplUpload=D}),98);
__d("WASmaxOutChatstateInternalTestMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.testConfig,n=o("WASmaxJsx").smax("smax$any",null,o("WASmaxJsx").smax("test",{config:o("WASmaxAttrs").OPTIONAL(o("WAWap").CUSTOM_STRING,t)}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeInternalTestMixin=s}),98);
__d("WASmaxMixinGroupExhaustiveError",[],(function(t,n,r,o,a,i){"use strict";var e=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.name="SmaxMixinGroupExhaustiveError",babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.SmaxMixinGroupExhaustiveError=e}),66);
__d("WASmaxOutChatstateComposingMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(e){var t=e.hasComposingMediaAudio,n=o("WASmaxJsx").smax("chatstate",null,o("WASmaxJsx").smax("composing",{media:o("WASmaxAttrs").OPTIONAL_LITERAL("audio",t)}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeComposingMixin=s}),98);
__d("WASmaxOutChatstatePausedMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("chatstate",null,o("WASmaxJsx").smax("paused",null));return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergePausedMixin=s}),98);
__d("WASmaxOutChatstateStateTypes",["WASmaxMixinGroupExhaustiveError","WASmaxOutChatstateComposingMixin","WASmaxOutChatstatePausedMixin"],(function(t,n,r,o,a,i,l){function e(e,t){if(t.composing)return o("WASmaxOutChatstateComposingMixin").mergeComposingMixin(e,t.composing);if(t.isPaused)return o("WASmaxOutChatstatePausedMixin").mergePausedMixin(e);throw new(o("WASmaxMixinGroupExhaustiveError")).SmaxMixinGroupExhaustiveError}l.mergeStateTypes=e}),98);
__d("WASmaxOutChatstateClientNotificationRequest",["WASmaxJsx","WASmaxMixins","WASmaxOutChatstateInternalTestMixin","WASmaxOutChatstateStateTypes","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.chatstateTo,n=e.internalTestMixinArgs,r=e.stateTypesArgs,a=o("WASmaxOutChatstateStateTypes").mergeStateTypes(o("WASmaxMixins").optionalMerge(o("WASmaxOutChatstateInternalTestMixin").mergeInternalTestMixin,o("WASmaxJsx").smax("chatstate",{to:o("WAWap").JID(t)}),n),r);return a}l.makeClientNotificationRequest=e}),98);
__d("WASmaxChatstateClientNotificationRPC",["WAComms","WASmaxOutChatstateClientNotificationRequest","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(e){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=o("WASmaxOutChatstateClientNotificationRequest").makeClientNotificationRequest(e);yield o("WAComms").castSmaxStanza(t)}),s.apply(this,arguments)}l.sendClientNotificationRPC=e}),98);
__d("WASendChatStateProtocol",["WALogger","WASmaxChatstateClientNotificationRPC"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["sendChatStateProtocol Sending "," to ",""])),n,t);var r;return n==="idle"?r={isPaused:!0}:r={composing:{hasComposingMediaAudio:n==="recording_audio"}},o("WASmaxChatstateClientNotificationRPC").sendClientNotificationRPC({chatstateTo:t,stateTypesArgs:r})}l.sendChatStateProtocol=s}),98);
__d("WASmaxInPassiveModeActiveIQResponseSuccess",["WAResultOrError","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"active");if(!r.success)return r;var a=o("WASmaxParseReference").attrStringFromReference(t,["id"]);if(!a.success)return a;var i=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"id",a.value);if(!i.success)return i;var l=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"type","result");if(!l.success)return l;var s=o("WASmaxParseJid").literalJid(o("WASmaxParseJid").attrDomainJid,e,"from","s.whatsapp.net");return s.success?o("WAResultOrError").makeResult({type:l.value,from:s.value}):s}l.parseActiveIQResponseSuccess=e}),98);
__d("WASmaxOutPassiveModeActiveIQRequest",["WASmaxJsx","WAWap"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("iq",{id:o("WAWap").generateId(),type:"set",xmlns:"passive",to:o("WAWap").S_WHATSAPP_NET},o("WASmaxJsx").smax("active",null));return e}l.makeActiveIQRequest=e}),98);
__d("WASmaxPassiveModeActiveIQRPC",["WAComms","WASmaxInPassiveModeActiveIQResponseSuccess","WASmaxOutPassiveModeActiveIQRequest","WASmaxParsingFailure","WASmaxRpcUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(e){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=o("WASmaxOutPassiveModeActiveIQRequest").makeActiveIQRequest(),n=yield o("WAComms").sendSmaxStanza(t,e),r=o("WASmaxInPassiveModeActiveIQResponseSuccess").parseActiveIQResponseSuccess(n,t);if(r.success)return{name:"ActiveIQResponseSuccess",value:r.value};throw new(o("WASmaxParsingFailure")).SmaxParsingFailure(o("WASmaxRpcUtils").errorMessageRpcParsing("ActiveIQ",{Success:r}))}),s.apply(this,arguments)}l.sendActiveIQRPC=e}),98);
__d("WASmaxInPassiveModePassiveIQResponseSuccess",["WAResultOrError","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"passive");if(!r.success)return r;var a=o("WASmaxParseReference").attrStringFromReference(t,["id"]);if(!a.success)return a;var i=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"id",a.value);if(!i.success)return i;var l=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"type","result");if(!l.success)return l;var s=o("WASmaxParseJid").literalJid(o("WASmaxParseJid").attrDomainJid,e,"from","s.whatsapp.net");return s.success?o("WAResultOrError").makeResult({type:l.value,from:s.value}):s}l.parsePassiveIQResponseSuccess=e}),98);
__d("WASmaxOutPassiveModePassiveIQRequest",["WASmaxJsx","WAWap"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("iq",{id:o("WAWap").generateId(),type:"set",xmlns:"passive",to:o("WAWap").S_WHATSAPP_NET},o("WASmaxJsx").smax("passive",null));return e}l.makePassiveIQRequest=e}),98);
__d("WASmaxPassiveModePassiveIQRPC",["WAComms","WASmaxInPassiveModePassiveIQResponseSuccess","WASmaxOutPassiveModePassiveIQRequest","WASmaxParsingFailure","WASmaxRpcUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(e){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=o("WASmaxOutPassiveModePassiveIQRequest").makePassiveIQRequest(),n=yield o("WAComms").sendSmaxStanza(t,e),r=o("WASmaxInPassiveModePassiveIQResponseSuccess").parsePassiveIQResponseSuccess(n,t);if(r.success)return{name:"PassiveIQResponseSuccess",value:r.value};throw new(o("WASmaxParsingFailure")).SmaxParsingFailure(o("WASmaxRpcUtils").errorMessageRpcParsing("PassiveIQ",{Success:r}))}),s.apply(this,arguments)}l.sendPassiveIQRPC=e}),98);
__d("WASendPassiveModeProtocol",["WALogger","WASmaxPassiveModeActiveIQRPC","WASmaxPassiveModePassiveIQRPC","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){t==="active"?yield o("WASmaxPassiveModeActiveIQRPC").sendActiveIQRPC():yield o("WASmaxPassiveModePassiveIQRPC").sendPassiveIQRPC(),o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["sendPassiveModeIq: passive mode set to '","'"])),t)}),u.apply(this,arguments)}l.sendPassiveModeProtocol=s}),98);
__d("WASmaxInMdCountryCodeErrors",["WAResultOrError","WASmaxInMdIQErrorBadRequestMixin","WASmaxInMdIQErrorInternalServerErrorMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxInMdIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(e);if(t.success)return o("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:t.value});var n=o("WASmaxInMdIQErrorInternalServerErrorMixin").parseIQErrorInternalServerErrorMixin(e);return n.success?o("WAResultOrError").makeResult({name:"IQErrorInternalServerError",value:n.value}):o("WASmaxParseUtils").errorMixinDisjunction(e,["IQErrorBadRequest","IQErrorInternalServerError"],[t,n])}l.parseCountryCodeErrors=e}),98);
__d("WASmaxInMdGetCountryCodeResponseError",["WAResultOrError","WASmaxInMdCountryCodeErrors","WASmaxInMdIQErrorResponseMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"error");if(!r.success)return r;var a=o("WASmaxInMdIQErrorResponseMixin").parseIQErrorResponseMixin(e,t);if(!a.success)return a;var i=o("WASmaxInMdCountryCodeErrors").parseCountryCodeErrors(r.value);return i.success?o("WAResultOrError").makeResult(babelHelpers.extends({},a.value,{errorCountryCodeErrors:i.value})):i}l.parseGetCountryCodeResponseError=e}),98);
__d("WASmaxInMdGetCountryCodeResponseGetCountryCodeResponse",["WAResultOrError","WASmaxInMdIQResultResponseMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"country_code");if(!r.success)return r;var a=o("WASmaxParseUtils").attrString(r.value,"iso");if(!a.success)return a;var i=o("WASmaxInMdIQResultResponseMixin").parseIQResultResponseMixin(e,t);return i.success?o("WAResultOrError").makeResult(babelHelpers.extends({countryCodeIso:a.value},i.value)):i}l.parseGetCountryCodeResponseGetCountryCodeResponse=e}),98);
__d("WASmaxInMessagePublishAckAdminEditMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"ack");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"edit","3");return n.success?o("WAResultOrError").makeResult({edit:n.value}):n}l.parseAckAdminEditMixin=e}),98);
__d("WASmaxInMessagePublishAckAdminRevokeMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"ack");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"edit","8");return n.success?o("WAResultOrError").makeResult({edit:n.value}):n}l.parseAckAdminRevokeMixin=e}),98);
__d("WASmaxInMessagePublishAckMessageEditMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"ack");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"edit","1");return n.success?o("WAResultOrError").makeResult({edit:n.value}):n}l.parseAckMessageEditMixin=e}),98);
__d("WASmaxInMessagePublishAckMessagePinMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"ack");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"edit","2");return n.success?o("WAResultOrError").makeResult({edit:n.value}):n}l.parseAckMessagePinMixin=e}),98);
__d("WASmaxInMessagePublishEnums",["WAJids"],(function(t,n,r,o,a,i,l){var e,s={CBP:"CBP",NBP:"NBP",PMP:"PMP"},u={delivery:"delivery",no_optimization:"no_optimization"},c={false:"false",true:"true"},d={free_customer_service:"free_customer_service",free_entry_point:"free_entry_point",regular:"regular"},m={lid:"lid",pn:"pn"},p={validators:[(e=o("WAJids")).validateDeviceJid,e.validateDeviceJid,e.validateUserJid,e.validateUserJid],typeName:"DeviceJid|DeviceJid|UserJid|UserJid"},_={validators:[e.validateUserJid,e.validateUserJid],typeName:"UserJid|UserJid"};l.ENUM_CBP_NBP_PMP=s,l.ENUM_DELIVERY_NOOPTIMIZATION=u,l.ENUM_FALSE_TRUE=c,l.ENUM_FREECUSTOMERSERVICE_FREEENTRYPOINT_REGULAR=d,l.ENUM_LID_PN=m,l.DEVICEJID_DEVICEJID_USERJID_USERJID=p,l.USERJID_USERJID=_}),98);
__d("WASmaxInMessagePublishAckPaidConversationMixin",["WAResultOrError","WASmaxInMessagePublishEnums","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"delivery_context");if(!t.success)return t;var n=o("WASmaxParseUtils").attrStringEnum(e,"optimization_goal",o("WASmaxInMessagePublishEnums").ENUM_DELIVERY_NOOPTIMIZATION);return n.success?o("WAResultOrError").makeResult({optimizationGoal:n.value}):n}function s(e){var t=o("WASmaxParseUtils").assertTag(e,"source_url");if(!t.success)return t;var n=o("WASmaxParseUtils").contentString(e);return n.success?o("WAResultOrError").makeResult({elementValue:n.value}):n}function u(e){var t=o("WASmaxParseUtils").assertTag(e,"referral");if(!t.success)return t;var n=o("WASmaxParseUtils").optionalChildWithTag(e,"source_url",s);if(!n.success)return n;var r=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrString,e,"source_type");return r.success?o("WAResultOrError").makeResult({sourceType:r.value,sourceUrl:n.value}):r}function c(e){var t=o("WASmaxParseUtils").assertTag(e,"origin");if(!t.success)return t;var n=o("WASmaxParseUtils").optionalChildWithTag(e,"referral",u);if(!n.success)return n;var r=o("WASmaxParseUtils").attrString(e,"type");return r.success?o("WAResultOrError").makeResult({type:r.value,referral:n.value}):r}function d(e){var t=o("WASmaxParseUtils").assertTag(e,"pricing");if(!t.success)return t;var n=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrString,e,"consumer_country_code");if(!n.success)return n;var r=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrString,e,"business_country_code");if(!r.success)return r;var a=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrIntRange,e,"conversation_status",0,void 0);if(!a.success)return a;var i=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrIntRange,e,"latest_c2b_timestamp",0,void 0);if(!i.success)return i;var l=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrString,e,"analytics_conversation_id");if(!l.success)return l;var s=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrIntRange,e,"b2c_timestamp",0,void 0);return s.success?o("WAResultOrError").makeResult({consumerCountryCode:n.value,businessCountryCode:r.value,conversationStatus:a.value,latestC2bTimestamp:i.value,analyticsConversationId:l.value,b2cTimestamp:s.value}):s}function m(t){var n=o("WASmaxParseUtils").assertTag(t,"ack");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(t,"biz");if(!r.success)return r;var a=o("WASmaxParseUtils").optionalChildWithTag(r.value,"delivery_context",e);if(!a.success)return a;var i=o("WASmaxParseUtils").optionalChildWithTag(r.value,"origin",c);if(!i.success)return i;var l=o("WASmaxParseUtils").optionalChildWithTag(r.value,"pricing",d);if(!l.success)return l;var s=o("WASmaxParseUtils").attrString(r.value,"paid_convo_id");if(!s.success)return s;var u=o("WASmaxParseUtils").attrStringEnum(r.value,"pricing_model",o("WASmaxInMessagePublishEnums").ENUM_CBP_NBP_PMP);if(!u.success)return u;var m=o("WASmaxParseUtils").attrStringEnum(r.value,"billable",o("WASmaxInMessagePublishEnums").ENUM_FALSE_TRUE);if(!m.success)return m;var p=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrIntRange,r.value,"expiration_timestamp",0,void 0);if(!p.success)return p;var _=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrString,r.value,"pricing_category");if(!_.success)return _;var f=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrStringEnum,r.value,"pricing_type",o("WASmaxInMessagePublishEnums").ENUM_FREECUSTOMERSERVICE_FREEENTRYPOINT_REGULAR);return f.success?o("WAResultOrError").makeResult({bizPaidConvoId:s.value,bizPricingModel:u.value,bizBillable:m.value,bizExpirationTimestamp:p.value,bizPricingCategory:_.value,bizPricingType:f.value,bizDeliveryContext:a.value,bizOrigin:i.value,bizPricing:l.value}):f}l.parseAckPaidConversationBizDeliveryContext=e,l.parseAckPaidConversationBizOriginReferralSourceUrl=s,l.parseAckPaidConversationBizOriginReferral=u,l.parseAckPaidConversationBizOrigin=c,l.parseAckPaidConversationBizPricing=d,l.parseAckPaidConversationMixin=m}),98);
__d("WASmaxInMessagePublishAckPaidGroupConversationMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"ack");if(!t.success)return t;var n=o("WASmaxParseUtils").flattenedChildWithTag(e,"biz");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(n.value,"pricing");if(!r.success)return r;var a=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrString,r.value,"business_country_code");return a.success?o("WAResultOrError").makeResult({bizPricingBusinessCountryCode:a.value}):a}l.parseAckPaidGroupConversationMixin=e}),98);
__d("WASmaxInMessagePublishAckPaidAckPaidConversationOrAckPaidGroupConversationConversationMixinGroup",["WAResultOrError","WASmaxInMessagePublishAckPaidConversationMixin","WASmaxInMessagePublishAckPaidGroupConversationMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxInMessagePublishAckPaidConversationMixin").parseAckPaidConversationMixin(e);if(t.success)return o("WAResultOrError").makeResult({name:"AckPaidConversation",value:t.value});var n=o("WASmaxInMessagePublishAckPaidGroupConversationMixin").parseAckPaidGroupConversationMixin(e);return n.success?o("WAResultOrError").makeResult({name:"AckPaidGroupConversation",value:n.value}):o("WASmaxParseUtils").errorMixinDisjunction(e,["AckPaidConversation","AckPaidGroupConversation"],[t,n])}l.parseAckPaidAckPaidConversationOrAckPaidGroupConversationConversationMixinGroup=e}),98);
__d("WASmaxInMessagePublishAckRevokeMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"ack");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"edit","7");return n.success?o("WAResultOrError").makeResult({edit:n.value}):n}l.parseAckRevokeMixin=e}),98);
__d("WASmaxInMessagePublishServerFrankingTagMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").flattenedChildWithTag(e,"franking");if(!t.success)return t;var n=o("WASmaxParseUtils").flattenedChildWithTag(t.value,"reporting_tag");if(!n.success)return n;var r=o("WASmaxParseUtils").contentBytesRange(n.value,9,128);return r.success?o("WAResultOrError").makeResult({frankingReportingTagElementValue:r.value}):r}l.parseServerFrankingTagMixin=e}),98);
__d("WASmaxInMessagePublishAckMixin",["WAResultOrError","WASmaxInMessagePublishAckAdminEditMixin","WASmaxInMessagePublishAckAdminRevokeMixin","WASmaxInMessagePublishAckMessageEditMixin","WASmaxInMessagePublishAckMessagePinMixin","WASmaxInMessagePublishAckPaidAckPaidConversationOrAckPaidGroupConversationConversationMixinGroup","WASmaxInMessagePublishAckRevokeMixin","WASmaxInMessagePublishServerFrankingTagMixin","WASmaxParseReference","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"ack");if(!n.success)return n;var r=o("WASmaxParseReference").attrStringFromReference(t,["to"]);if(!r.success)return r;var a=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"from",r.value);if(!a.success)return a;var i=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"class","message");if(!i.success)return i;var l=o("WASmaxParseReference").attrStringFromReference(t,["id"]);if(!l.success)return l;var s=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"id",l.value);if(!s.success)return s;var u=o("WASmaxParseUtils").attrIntRange(e,"t",0,void 0);if(!u.success)return u;var c=o("WASmaxInMessagePublishAckMessageEditMixin").parseAckMessageEditMixin(e),d=o("WASmaxInMessagePublishAckAdminEditMixin").parseAckAdminEditMixin(e),m=o("WASmaxInMessagePublishAckMessagePinMixin").parseAckMessagePinMixin(e),p=o("WASmaxInMessagePublishAckAdminRevokeMixin").parseAckAdminRevokeMixin(e),_=o("WASmaxInMessagePublishAckRevokeMixin").parseAckRevokeMixin(e),f=o("WASmaxInMessagePublishServerFrankingTagMixin").parseServerFrankingTagMixin(e),g=o("WASmaxInMessagePublishAckPaidAckPaidConversationOrAckPaidGroupConversationConversationMixinGroup").parseAckPaidAckPaidConversationOrAckPaidGroupConversationConversationMixinGroup(e);return o("WAResultOrError").makeResult({class:i.value,t:u.value,ackMessageEditMixin:c.success?c.value:null,ackAdminEditMixin:d.success?d.value:null,ackMessagePinMixin:m.success?m.value:null,ackAdminRevokeMixin:p.success?p.value:null,ackRevokeMixin:_.success?_.value:null,serverFrankingTagMixin:f.success?f.value:null,ackPaidAckPaidConversationOrAckPaidGroupConversationConversationMixinGroup:g.success?g.value:null})}l.parseAckMixin=e}),98);
__d("WASmaxInMessagePublishApplicationNegativeAckMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"ack");if(!t.success)return t;var n=o("WASmaxParseUtils").attrIntRange(e,"application_error",0,void 0);return n.success?o("WAResultOrError").makeResult({applicationError:n.value}):n}l.parseApplicationNegativeAckMixin=e}),98);
__d("WASmaxInMessagePublishMessageNackRetryAttributesMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"ack");if(!t.success)return t;var n=o("WASmaxParseUtils").attrIntRange(e,"backoff",0,86400);return n.success?o("WAResultOrError").makeResult({backoff:n.value}):n}l.parseMessageNackRetryAttributesMixin=e}),98);
__d("WASmaxInMessagePublishNegativeAckMixin",["WAResultOrError","WASmaxInMessagePublishAckMixin","WASmaxInMessagePublishApplicationNegativeAckMixin","WASmaxInMessagePublishMessageNackRetryAttributesMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"ack");if(!n.success)return n;var r=o("WASmaxParseUtils").attrString(e,"error");if(!r.success)return r;var a=o("WASmaxInMessagePublishAckMixin").parseAckMixin(e,t);if(!a.success)return a;var i=o("WASmaxInMessagePublishApplicationNegativeAckMixin").parseApplicationNegativeAckMixin(e),l=o("WASmaxInMessagePublishMessageNackRetryAttributesMixin").parseMessageNackRetryAttributesMixin(e);return o("WAResultOrError").makeResult(babelHelpers.extends({error:r.value},a.value,{applicationNegativeAckMixin:i.success?i.value:null,messageNackRetryAttributesMixin:l.success?l.value:null}))}l.parseNegativeAckMixin=e}),98);
__d("WASmaxInPreKeysDeviceIdentityMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").flattenedChildWithTag(e,"device-identity");if(!t.success)return t;var n=o("WASmaxParseUtils").contentBytes(t.value);return n.success?o("WAResultOrError").makeResult({deviceIdentityElementValue:n.value}):n}l.parseDeviceIdentityMixin=e}),98);
__d("WASmaxInPreKeysEnums",["WAJids"],(function(t,n,r,o,a,i,l){var e,s={validators:[(e=o("WAJids")).validateDeviceJid,e.validateDeviceJid],typeName:"DeviceJid|DeviceJid"},u={validators:[e.validateDeviceJid,e.validateDeviceJid,e.validateInteropDeviceJid,e.validateInteropDeviceJid],typeName:"DeviceJid|DeviceJid|InteropDeviceJid|InteropDeviceJid"},c={validators:[e.validateDeviceJid,e.validateDomainJid],typeName:"DeviceJid|DomainJid"},d={validators:[e.validateUserJid,e.validateUserJid],typeName:"UserJid|UserJid"};l.DEVICEJID_DEVICEJID=s,l.DEVICEJID_DEVICEJID_INTEROPDEVICEJID_INTEROPDEVICEJID=u,l.DEVICEJID_DOMAINJID=c,l.USERJID_USERJID=d}),98);
__d("WASmaxInPreKeysIQErrorResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseReference").attrStringFromReference(t,["id"]);if(!r.success)return r;var a=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"id",r.value);if(!a.success)return a;var i=o("WASmaxParseReference").attrStringFromReference(t,["to"]);if(!i.success)return i;var l=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"from",i.value);if(!l.success)return l;var s=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"type","error");return s.success?o("WAResultOrError").makeResult({type:s.value}):s}l.parseIQErrorResponseMixin=e}),98);
__d("WASmaxInPreKeysIQErrorBadRequestMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","bad-request");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,e,"code",400);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorBadRequestMixin=e}),98);
__d("WASmaxInPreKeysIQErrorFallbackClientMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").attrString(e,"text");if(!n.success)return n;var r=o("WASmaxParseUtils").attrIntRange(e,"code",400,499);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorFallbackClientMixin=e}),98);
__d("WASmaxInPreKeysIQErrorNoValidJIDMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","not-acceptable");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,e,"code",406);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorNoValidJIDMixin=e}),98);
__d("WASmaxInPreKeysRequestErrorsFetch",["WAResultOrError","WASmaxInPreKeysIQErrorBadRequestMixin","WASmaxInPreKeysIQErrorFallbackClientMixin","WASmaxInPreKeysIQErrorNoValidJIDMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxInPreKeysIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(e);if(t.success)return o("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:t.value});var n=o("WASmaxInPreKeysIQErrorNoValidJIDMixin").parseIQErrorNoValidJIDMixin(e);if(n.success)return o("WAResultOrError").makeResult({name:"IQErrorNoValidJID",value:n.value});var r=o("WASmaxInPreKeysIQErrorFallbackClientMixin").parseIQErrorFallbackClientMixin(e);return r.success?o("WAResultOrError").makeResult({name:"IQErrorFallbackClient",value:r.value}):o("WASmaxParseUtils").errorMixinDisjunction(e,["IQErrorBadRequest","IQErrorNoValidJID","IQErrorFallbackClient"],[t,n,r])}l.parseRequestErrorsFetch=e}),98);
__d("WASmaxInPreKeysFetchKeyBundlesResponseRequestError",["WAResultOrError","WASmaxInPreKeysIQErrorResponseMixin","WASmaxInPreKeysRequestErrorsFetch","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"error");if(!r.success)return r;var a=o("WASmaxInPreKeysIQErrorResponseMixin").parseIQErrorResponseMixin(e,t);if(!a.success)return a;var i=o("WASmaxInPreKeysRequestErrorsFetch").parseRequestErrorsFetch(r.value);return i.success?o("WAResultOrError").makeResult(babelHelpers.extends({},a.value,{errorRequestErrorsFetch:i.value})):i}l.parseFetchKeyBundlesResponseRequestError=e}),98);
__d("WASmaxInPreKeysIQErrorFallbackServerMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").attrString(e,"text");if(!n.success)return n;var r=o("WASmaxParseUtils").attrIntRange(e,"code",500,599);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorFallbackServerMixin=e}),98);
__d("WASmaxInPreKeysIQErrorServiceUnavailableMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","service-unavailable");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,e,"code",503);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorServiceUnavailableMixin=e}),98);
__d("WASmaxInPreKeysServerErrors",["WAResultOrError","WASmaxInPreKeysIQErrorFallbackServerMixin","WASmaxInPreKeysIQErrorServiceUnavailableMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxInPreKeysIQErrorServiceUnavailableMixin").parseIQErrorServiceUnavailableMixin(e);if(t.success)return o("WAResultOrError").makeResult({name:"IQErrorServiceUnavailable",value:t.value});var n=o("WASmaxInPreKeysIQErrorFallbackServerMixin").parseIQErrorFallbackServerMixin(e);return n.success?o("WAResultOrError").makeResult({name:"IQErrorFallbackServer",value:n.value}):o("WASmaxParseUtils").errorMixinDisjunction(e,["IQErrorServiceUnavailable","IQErrorFallbackServer"],[t,n])}l.parseServerErrors=e}),98);
__d("WASmaxInPreKeysFetchKeyBundlesResponseServerError",["WAResultOrError","WASmaxInPreKeysIQErrorResponseMixin","WASmaxInPreKeysServerErrors","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"error");if(!r.success)return r;var a=o("WASmaxInPreKeysIQErrorResponseMixin").parseIQErrorResponseMixin(e,t);if(!a.success)return a;var i=o("WASmaxInPreKeysServerErrors").parseServerErrors(r.value);return i.success?o("WAResultOrError").makeResult(babelHelpers.extends({},a.value,{errorServerErrors:i.value})):i}l.parseFetchKeyBundlesResponseServerError=e}),98);
__d("WASmaxInPreKeysIQResultResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseReference").attrStringFromReference(t,["id"]);if(!r.success)return r;var a=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"id",r.value);if(!a.success)return a;var i=o("WASmaxParseReference").attrStringFromReference(t,["to"]);if(!i.success)return i;var l=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"from",i.value);if(!l.success)return l;var s=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"type","result");return s.success?o("WAResultOrError").makeResult({type:s.value}):s}l.parseIQResultResponseMixin=e}),98);
__d("WASmaxInPreKeysResponsePaddingMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"iq");if(!t.success)return t;var n=o("WASmaxParseUtils").flattenedChildWithTag(e,"padding");if(!n.success)return n;var r=o("WASmaxParseUtils").contentBytesRange(n.value,0,524288);return r.success?o("WAResultOrError").makeResult({paddingElementValue:r.value}):r}l.parseResponsePaddingMixin=e}),98);
__d("WASmaxInPreKeysFetchKeyBundlesUserErrorFallbackMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"user");if(!t.success)return t;var n=o("WASmaxParseUtils").flattenedChildWithTag(e,"error");if(!n.success)return n;var r=o("WASmaxParseUtils").attrString(n.value,"text");if(!r.success)return r;var a=o("WASmaxParseUtils").attrIntRange(n.value,"code",500,599);return a.success?o("WAResultOrError").makeResult({errorText:r.value,errorCode:a.value}):a}l.parseFetchKeyBundlesUserErrorFallbackMixin=e}),98);
__d("WASmaxInPreKeysFetchKeyBundlesUserErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"user");if(!t.success)return t;var n=o("WASmaxParseUtils").flattenedChildWithTag(e,"error");if(!n.success)return n;var r=o("WASmaxParseUtils").attrString(n.value,"text");if(!r.success)return r;var a=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,n.value,"code",500);return a.success?o("WAResultOrError").makeResult({errorText:r.value,errorCode:a.value}):a}l.parseFetchKeyBundlesUserErrorMixin=e}),98);
__d("WASmaxInPreKeysKeyDataMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").contentBytesRange(e,32,32);return t.success?o("WAResultOrError").makeResult({elementValue:t.value}):t}l.parseKeyDataMixin=e}),98);
__d("WASmaxInPreKeysIdentityKeyMixin",["WASmaxInPreKeysKeyDataMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").flattenedChildWithTag(e,"identity");if(!t.success)return t;var n=o("WASmaxInPreKeysKeyDataMixin").parseKeyDataMixin(t.value);return n.success,n}l.parseIdentityKeyMixin=e}),98);
__d("WASmaxInPreKeysKeyTypeMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").flattenedChildWithTag(e,"type");if(!t.success)return t;var n=o("WASmaxParseUtils").contentLiteralBytes(t.value,new Uint8Array([5]));return n.success?o("WAResultOrError").makeResult({typeElementValue:n.value}):n}l.parseKeyTypeMixin=e}),98);
__d("WASmaxInPreKeysKeyIDMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"id");if(!t.success)return t;var n=o("WASmaxParseUtils").contentBytesRange(e,3,3);return n.success?o("WAResultOrError").makeResult({elementValue:n.value}):n}l.parseKeyIDMixin=e}),98);
__d("WASmaxInPreKeysPreKeyMixin",["WAResultOrError","WASmaxInPreKeysKeyDataMixin","WASmaxInPreKeysKeyIDMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").flattenedChildWithTag(e,"key");if(!t.success)return t;var n=o("WASmaxParseUtils").flattenedChildWithTag(t.value,"id");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(t.value,"value");if(!r.success)return r;var a=o("WASmaxInPreKeysKeyIDMixin").parseKeyIDMixin(n.value);if(!a.success)return a;var i=o("WASmaxInPreKeysKeyDataMixin").parseKeyDataMixin(r.value);return i.success?o("WAResultOrError").makeResult({keyIdKeyIDMixin:a.value,keyValueKeyDataMixin:i.value}):i}l.parsePreKeyMixin=e}),98);
__d("WASmaxInPreKeysRegistrationIDMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").flattenedChildWithTag(e,"registration");if(!t.success)return t;var n=o("WASmaxParseUtils").contentBytesRange(t.value,4,4);return n.success?o("WAResultOrError").makeResult({registrationElementValue:n.value}):n}l.parseRegistrationIDMixin=e}),98);
__d("WASmaxInPreKeysSignedPreKeyMixin",["WAResultOrError","WASmaxInPreKeysKeyDataMixin","WASmaxInPreKeysKeyIDMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").flattenedChildWithTag(e,"skey");if(!t.success)return t;var n=o("WASmaxParseUtils").flattenedChildWithTag(t.value,"id");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(t.value,"value");if(!r.success)return r;var a=o("WASmaxParseUtils").flattenedChildWithTag(t.value,"signature");if(!a.success)return a;var i=o("WASmaxParseUtils").contentBytesRange(a.value,64,64);if(!i.success)return i;var l=o("WASmaxInPreKeysKeyIDMixin").parseKeyIDMixin(n.value);if(!l.success)return l;var s=o("WASmaxInPreKeysKeyDataMixin").parseKeyDataMixin(r.value);return s.success?o("WAResultOrError").makeResult({skeySignatureElementValue:i.value,skeyIdKeyIDMixin:l.value,skeyValueKeyDataMixin:s.value}):s}l.parseSignedPreKeyMixin=e}),98);
__d("WASmaxInPreKeysFetchKeyBundlesUserSuccessMixin",["WAResultOrError","WASmaxInPreKeysDeviceIdentityMixin","WASmaxInPreKeysIdentityKeyMixin","WASmaxInPreKeysKeyTypeMixin","WASmaxInPreKeysPreKeyMixin","WASmaxInPreKeysRegistrationIDMixin","WASmaxInPreKeysSignedPreKeyMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"user");if(!t.success)return t;var n=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrIntRange,e,"t",0,void 0);if(!n.success)return n;var r=o("WASmaxParseUtils").optionalLiteral(o("WASmaxParseUtils").attrString,e,"is_cloud_api","true");if(!r.success)return r;var a=o("WASmaxInPreKeysRegistrationIDMixin").parseRegistrationIDMixin(e);if(!a.success)return a;var i=o("WASmaxInPreKeysKeyTypeMixin").parseKeyTypeMixin(e),l=o("WASmaxInPreKeysIdentityKeyMixin").parseIdentityKeyMixin(e);if(!l.success)return l;var s=o("WASmaxInPreKeysPreKeyMixin").parsePreKeyMixin(e),u=o("WASmaxInPreKeysSignedPreKeyMixin").parseSignedPreKeyMixin(e);if(!u.success)return u;var c=o("WASmaxInPreKeysDeviceIdentityMixin").parseDeviceIdentityMixin(e);return o("WAResultOrError").makeResult(babelHelpers.extends({t:n.value,isCloudApi:r.value},a.value,{keyTypeMixin:i.success?i.value:null},l.value,{preKeyMixin:s.success?s.value:null},u.value,{deviceIdentityMixin:c.success?c.value:null}))}l.parseFetchKeyBundlesUserSuccessMixin=e}),98);
__d("WASmaxInPreKeysUserFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup",["WAResultOrError","WASmaxInPreKeysFetchKeyBundlesUserErrorFallbackMixin","WASmaxInPreKeysFetchKeyBundlesUserErrorMixin","WASmaxInPreKeysFetchKeyBundlesUserSuccessMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxInPreKeysFetchKeyBundlesUserSuccessMixin").parseFetchKeyBundlesUserSuccessMixin(e);if(t.success)return o("WAResultOrError").makeResult({name:"FetchKeyBundlesUserSuccess",value:t.value});var n=o("WASmaxInPreKeysFetchKeyBundlesUserErrorMixin").parseFetchKeyBundlesUserErrorMixin(e);if(n.success)return o("WAResultOrError").makeResult({name:"FetchKeyBundlesUserError",value:n.value});var r=o("WASmaxInPreKeysFetchKeyBundlesUserErrorFallbackMixin").parseFetchKeyBundlesUserErrorFallbackMixin(e);return r.success?o("WAResultOrError").makeResult({name:"FetchKeyBundlesUserErrorFallback",value:r.value}):o("WASmaxParseUtils").errorMixinDisjunction(e,["UserSuccess","UserError","UserErrorFallback"],[t,n,r])}l.parseUserFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup=e}),98);
__d("WASmaxInPreKeysFetchKeyBundlesResponseSuccess",["WAResultOrError","WASmaxInPreKeysEnums","WASmaxInPreKeysIQResultResponseMixin","WASmaxInPreKeysResponsePaddingMixin","WASmaxInPreKeysUserFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup","WASmaxParseJid","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"user");if(!t.success)return t;var n=o("WASmaxParseJid").attrJidEnum(e,"jid",o("WASmaxInPreKeysEnums").DEVICEJID_DEVICEJID);if(!n.success)return n;var r=o("WASmaxInPreKeysUserFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup").parseUserFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup(e);return r.success?o("WAResultOrError").makeResult({jid:n.value,userFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup:r.value}):r}function s(t,n){var r=o("WASmaxParseUtils").assertTag(t,"iq");if(!r.success)return r;var a=o("WASmaxParseUtils").flattenedChildWithTag(t,"list");if(!a.success)return a;var i=o("WASmaxInPreKeysIQResultResponseMixin").parseIQResultResponseMixin(t,n);if(!i.success)return i;var l=o("WASmaxInPreKeysResponsePaddingMixin").parseResponsePaddingMixin(t),s=o("WASmaxParseUtils").mapChildrenWithTag(a.value,"user",0,1e5,e);return s.success?o("WAResultOrError").makeResult(babelHelpers.extends({},i.value,{responsePaddingMixin:l.success?l.value:null,listUser:s.value})):s}l.parseFetchKeyBundlesResponseSuccessListUser=e,l.parseFetchKeyBundlesResponseSuccess=s}),98);
__d("WASmaxInProfilePictureEnums",["WAJids"],(function(t,n,r,o,a,i,l){var e,s={false:"false",true:"true"},u={image:"image",preview:"preview"},c={lid:"lid",pn:"pn"},d={validators:[(e=o("WAJids")).validateDomainJid,e.validateGroupJid,e.validateUserJid,e.validateUserJid],typeName:"DomainJid|GroupJid|UserJid|UserJid"},m={validators:[e.validateGroupJid,e.validateUserJid],typeName:"GroupJid|UserJid"},p={validators:[e.validateUserJid,e.validateUserJid],typeName:"UserJid|UserJid"};l.ENUM_FALSE_TRUE=s,l.ENUM_IMAGE_PREVIEW=u,l.ENUM_LID_PN=c,l.DOMAINJID_GROUPJID_USERJID_USERJID=d,l.GROUPJID_USERJID=m,l.USERJID_USERJID=p}),98);
__d("WASmaxInProfilePictureIQErrorResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseReference").attrStringFromReference(t,["id"]);if(!r.success)return r;var a=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"id",r.value);if(!a.success)return a;var i=o("WASmaxParseReference").attrStringFromReference(t,["to"]);if(!i.success)return i;var l=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"from",i.value);if(!l.success)return l;var s=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"type","error");return s.success?o("WAResultOrError").makeResult({type:s.value}):s}l.parseIQErrorResponseMixin=e}),98);
__d("WASmaxInProfilePictureIQErrorBadRequestMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","bad-request");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,e,"code",400);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorBadRequestMixin=e}),98);
__d("WASmaxInProfilePictureIQErrorFeatureNotImplementedMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","feature-not-implemented");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,e,"code",501);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorFeatureNotImplementedMixin=e}),98);
__d("WASmaxInProfilePictureIQErrorInternalServerErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","internal-server-error");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,e,"code",500);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorInternalServerErrorMixin=e}),98);
__d("WASmaxInProfilePictureIQErrorItemNotFoundMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","item-not-found");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,e,"code",404);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorItemNotFoundMixin=e}),98);
__d("WASmaxInProfilePictureIQErrorNotAuthorizedMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","not-authorized");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,e,"code",401);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorNotAuthorizedMixin=e}),98);
__d("WASmaxInProfilePictureIQErrorRateOverlimitMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","rate-overlimit");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,e,"code",429);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorRateOverlimitMixin=e}),98);
__d("WASmaxInProfilePictureIQErrorServiceUnavailableMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","service-unavailable");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,e,"code",503);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorServiceUnavailableMixin=e}),98);
__d("WASmaxInProfilePictureProfilePictureGetErrors",["WAResultOrError","WASmaxInProfilePictureIQErrorBadRequestMixin","WASmaxInProfilePictureIQErrorFeatureNotImplementedMixin","WASmaxInProfilePictureIQErrorInternalServerErrorMixin","WASmaxInProfilePictureIQErrorItemNotFoundMixin","WASmaxInProfilePictureIQErrorNotAuthorizedMixin","WASmaxInProfilePictureIQErrorRateOverlimitMixin","WASmaxInProfilePictureIQErrorServiceUnavailableMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxInProfilePictureIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(e);if(t.success)return o("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:t.value});var n=o("WASmaxInProfilePictureIQErrorNotAuthorizedMixin").parseIQErrorNotAuthorizedMixin(e);if(n.success)return o("WAResultOrError").makeResult({name:"IQErrorNotAuthorized",value:n.value});var r=o("WASmaxInProfilePictureIQErrorItemNotFoundMixin").parseIQErrorItemNotFoundMixin(e);if(r.success)return o("WAResultOrError").makeResult({name:"IQErrorItemNotFound",value:r.value});var a=o("WASmaxInProfilePictureIQErrorRateOverlimitMixin").parseIQErrorRateOverlimitMixin(e);if(a.success)return o("WAResultOrError").makeResult({name:"IQErrorRateOverlimit",value:a.value});var i=o("WASmaxInProfilePictureIQErrorInternalServerErrorMixin").parseIQErrorInternalServerErrorMixin(e);if(i.success)return o("WAResultOrError").makeResult({name:"IQErrorInternalServerError",value:i.value});var l=o("WASmaxInProfilePictureIQErrorFeatureNotImplementedMixin").parseIQErrorFeatureNotImplementedMixin(e);if(l.success)return o("WAResultOrError").makeResult({name:"IQErrorFeatureNotImplemented",value:l.value});var s=o("WASmaxInProfilePictureIQErrorServiceUnavailableMixin").parseIQErrorServiceUnavailableMixin(e);return s.success?o("WAResultOrError").makeResult({name:"IQErrorServiceUnavailable",value:s.value}):o("WASmaxParseUtils").errorMixinDisjunction(e,["IQErrorBadRequest","IQErrorNotAuthorized","IQErrorItemNotFound","IQErrorRateOverlimit","IQErrorInternalServerError","IQErrorFeatureNotImplemented","IQErrorServiceUnavailable"],[t,n,r,a,i,l,s])}l.parseProfilePictureGetErrors=e}),98);
__d("WASmaxInProfilePictureGetResponseError",["WAResultOrError","WASmaxInProfilePictureIQErrorResponseMixin","WASmaxInProfilePictureProfilePictureGetErrors","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"error");if(!r.success)return r;var a=o("WASmaxInProfilePictureIQErrorResponseMixin").parseIQErrorResponseMixin(e,t);if(!a.success)return a;var i=o("WASmaxInProfilePictureProfilePictureGetErrors").parseProfilePictureGetErrors(r.value);return i.success?o("WAResultOrError").makeResult(babelHelpers.extends({},a.value,{errorProfilePictureGetErrors:i.value})):i}l.parseGetResponseError=e}),98);
__d("WASmaxInProfilePictureIQResultResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseReference").attrStringFromReference(t,["id"]);if(!r.success)return r;var a=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"id",r.value);if(!a.success)return a;var i=o("WASmaxParseReference").attrStringFromReference(t,["to"]);if(!i.success)return i;var l=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"from",i.value);if(!l.success)return l;var s=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"type","result");return s.success?o("WAResultOrError").makeResult({type:s.value}):s}l.parseIQResultResponseMixin=e}),98);
__d("WASmaxInProfilePictureGetResponseSuccessAvatarURLs",["WAResultOrError","WASmaxInProfilePictureIQResultResponseMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"avatar");if(!t.success)return t;var n=o("WASmaxParseUtils").attrString(e,"url");if(!n.success)return n;var r=o("WASmaxParseUtils").attrString(e,"pose_id");if(!r.success)return r;var a=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrString,e,"hash");return a.success?o("WAResultOrError").makeResult({url:n.value,poseId:r.value,hash:a.value}):a}function s(t,n){var r=o("WASmaxParseUtils").assertTag(t,"iq");if(!r.success)return r;var a=o("WASmaxInProfilePictureIQResultResponseMixin").parseIQResultResponseMixin(t,n);if(!a.success)return a;var i=o("WASmaxParseUtils").mapChildrenWithTag(t,"avatar",1,4,e);return i.success?o("WAResultOrError").makeResult(babelHelpers.extends({},a.value,{avatar:i.value})):i}l.parseGetResponseSuccessAvatarURLsAvatar=e,l.parseGetResponseSuccessAvatarURLs=s}),98);
__d("WASmaxInProfilePictureGetResponseSuccessNoData",["WASmaxInProfilePictureIQResultResponseMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxInProfilePictureIQResultResponseMixin").parseIQResultResponseMixin(e,t);return r.success,r}l.parseGetResponseSuccessNoData=e}),98);
__d("WASmaxInProfilePictureGetResponseSuccessPictureBlob",["WAResultOrError","WASmaxInProfilePictureEnums","WASmaxInProfilePictureIQResultResponseMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"picture");if(!r.success)return r;var a=o("WASmaxParseUtils").attrString(r.value,"id");if(!a.success)return a;var i=o("WASmaxParseUtils").attrStringEnum(r.value,"type",o("WASmaxInProfilePictureEnums").ENUM_IMAGE_PREVIEW);if(!i.success)return i;var l=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrStringEnum,r.value,"has_staging",o("WASmaxInProfilePictureEnums").ENUM_FALSE_TRUE);if(!l.success)return l;var s=o("WASmaxParseUtils").contentBytesRange(r.value,1,void 0);if(!s.success)return s;var u=o("WASmaxInProfilePictureIQResultResponseMixin").parseIQResultResponseMixin(e,t);return u.success?o("WAResultOrError").makeResult(babelHelpers.extends({pictureId:a.value,pictureType:i.value,pictureHasStaging:l.value,pictureElementValue:s.value},u.value)):u}l.parseGetResponseSuccessPictureBlob=e}),98);
__d("WASmaxInProfilePictureGetResponseSuccessPictureURL",["WAResultOrError","WASmaxInProfilePictureEnums","WASmaxInProfilePictureIQResultResponseMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"picture");if(!r.success)return r;var a=o("WASmaxParseUtils").attrString(r.value,"id");if(!a.success)return a;var i=o("WASmaxParseUtils").attrStringEnum(r.value,"type",o("WASmaxInProfilePictureEnums").ENUM_IMAGE_PREVIEW);if(!i.success)return i;var l=o("WASmaxParseUtils").attrString(r.value,"url");if(!l.success)return l;var s=o("WASmaxParseUtils").attrString(r.value,"direct_path");if(!s.success)return s;var u=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrString,r.value,"hash");if(!u.success)return u;var c=o("WASmaxParseUtils").optional(o("WASmaxParseUtils").attrStringEnum,r.value,"has_staging",o("WASmaxInProfilePictureEnums").ENUM_FALSE_TRUE);if(!c.success)return c;var d=o("WASmaxInProfilePictureIQResultResponseMixin").parseIQResultResponseMixin(e,t);return d.success?o("WAResultOrError").makeResult(babelHelpers.extends({pictureId:a.value,pictureType:i.value,pictureUrl:l.value,pictureDirectPath:s.value,pictureHash:u.value,pictureHasStaging:c.value},d.value)):d}l.parseGetResponseSuccessPictureURL=e}),98);
__d("WASmaxInStatsIQErrorBadRequestMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","bad-request");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,e,"code",400);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorBadRequestMixin=e}),98);
__d("WASmaxInStatsIQErrorFeatureNotImplementedMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","feature-not-implemented");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,e,"code",501);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorFeatureNotImplementedMixin=e}),98);
__d("WASmaxInStatsIQErrorNotAcceptableMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"field");if(!t.success)return t;var n=o("WASmaxParseUtils").attrString(e,"name");if(!n.success)return n;var r=o("WASmaxParseUtils").attrString(e,"reason");return r.success?o("WAResultOrError").makeResult({name:n.value,reason:r.value}):r}function s(t){var n=o("WASmaxParseUtils").assertTag(t,"error");if(!n.success)return n;var r=o("WASmaxParseUtils").optionalChildWithTag(t,"field",e);if(!r.success)return r;var a=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,t,"text","not-acceptable");if(!a.success)return a;var i=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,t,"code",406);return i.success?o("WAResultOrError").makeResult({text:a.value,code:i.value,field:r.value}):i}l.parseIQErrorNotAcceptableField=e,l.parseIQErrorNotAcceptableMixin=s}),98);
__d("WASmaxInStatsIQErrorResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseReference").attrStringFromReference(t,["id"]);if(!r.success)return r;var a=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"id",r.value);if(!a.success)return a;var i=o("WASmaxParseReference").attrStringFromReference(t,["to"]);if(!i.success)return i;var l=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"from",i.value);if(!l.success)return l;var s=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"type","error");return s.success?o("WAResultOrError").makeResult({type:s.value}):s}l.parseIQErrorResponseMixin=e}),98);
__d("WASmaxInStatsIQErrorServiceUnavailableMixin",["WAResultOrError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxParseUtils").assertTag(e,"error");if(!t.success)return t;var n=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"text","service-unavailable");if(!n.success)return n;var r=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrInt,e,"code",503);return r.success?o("WAResultOrError").makeResult({text:n.value,code:r.value}):r}l.parseIQErrorServiceUnavailableMixin=e}),98);
__d("WASmaxInStatsIQResultResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseReference").attrStringFromReference(t,["id"]);if(!r.success)return r;var a=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"id",r.value);if(!a.success)return a;var i=o("WASmaxParseReference").attrStringFromReference(t,["to"]);if(!i.success)return i;var l=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"from",i.value);if(!l.success)return l;var s=o("WASmaxParseUtils").literal(o("WASmaxParseUtils").attrString,e,"type","result");return s.success?o("WAResultOrError").makeResult({type:s.value}):s}l.parseIQResultResponseMixin=e}),98);
__d("WASmaxInStatsSendBufferNoRetryError",["WAResultOrError","WASmaxInStatsIQErrorBadRequestMixin","WASmaxInStatsIQErrorFeatureNotImplementedMixin","WASmaxInStatsIQErrorNotAcceptableMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxInStatsIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(e);if(t.success)return o("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:t.value});var n=o("WASmaxInStatsIQErrorNotAcceptableMixin").parseIQErrorNotAcceptableMixin(e);if(n.success)return o("WAResultOrError").makeResult({name:"IQErrorNotAcceptable",value:n.value});var r=o("WASmaxInStatsIQErrorFeatureNotImplementedMixin").parseIQErrorFeatureNotImplementedMixin(e);return r.success?o("WAResultOrError").makeResult({name:"IQErrorFeatureNotImplemented",value:r.value}):o("WASmaxParseUtils").errorMixinDisjunction(e,["IQErrorBadRequest","IQErrorNotAcceptable","IQErrorFeatureNotImplemented"],[t,n,r])}l.parseSendBufferNoRetryError=e}),98);
__d("WASmaxInStatsSendBufferResponseErrorNoRetry",["WAResultOrError","WASmaxInStatsIQErrorResponseMixin","WASmaxInStatsSendBufferNoRetryError","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"error");if(!r.success)return r;var a=o("WASmaxInStatsIQErrorResponseMixin").parseIQErrorResponseMixin(e,t);if(!a.success)return a;var i=o("WASmaxInStatsSendBufferNoRetryError").parseSendBufferNoRetryError(r.value);return i.success?o("WAResultOrError").makeResult(babelHelpers.extends({},a.value,{errorSendBufferNoRetryError:i.value})):i}l.parseSendBufferResponseErrorNoRetry=e}),98);
__d("WASmaxInStatsSendBufferResponseErrorRetry",["WAResultOrError","WASmaxInStatsIQErrorResponseMixin","WASmaxInStatsIQErrorServiceUnavailableMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxParseUtils").flattenedChildWithTag(e,"error");if(!r.success)return r;var a=o("WASmaxInStatsIQErrorServiceUnavailableMixin").parseIQErrorServiceUnavailableMixin(r.value);if(!a.success)return a;var i=o("WASmaxInStatsIQErrorResponseMixin").parseIQErrorResponseMixin(e,t);return i.success?o("WAResultOrError").makeResult(babelHelpers.extends({errorIQErrorServiceUnavailableMixin:a.value},i.value)):i}l.parseSendBufferResponseErrorRetry=e}),98);
__d("WASmaxInStatsSendBufferResponseSuccess",["WASmaxInStatsIQResultResponseMixin","WASmaxParseUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WASmaxParseUtils").assertTag(e,"iq");if(!n.success)return n;var r=o("WASmaxInStatsIQResultResponseMixin").parseIQResultResponseMixin(e,t);return r.success,r}l.parseSendBufferResponseSuccess=e}),98);
__d("WASmaxOutMdBaseIQGetRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("iq",{id:o("WAWap").generateId(),type:"get"});return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeBaseIQGetRequestMixin=s}),98);
__d("WASmaxOutMdGetCountryCodeRequest",["WASmaxJsx","WASmaxOutMdBaseIQGetRequestMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxOutMdBaseIQGetRequestMixin").mergeBaseIQGetRequestMixin(o("WASmaxJsx").smax("iq",{to:o("WAWap").S_WHATSAPP_NET,xmlns:"md"},o("WASmaxJsx").smax("link_code_companion_reg",{stage:"get_country_code"})));return e}l.makeGetCountryCodeRequest=e}),98);
__d("WASmaxMdGetCountryCodeRPC",["WAComms","WASmaxInMdGetCountryCodeResponseError","WASmaxInMdGetCountryCodeResponseGetCountryCodeResponse","WASmaxOutMdGetCountryCodeRequest","WASmaxParsingFailure","WASmaxRpcUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(e){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=o("WASmaxOutMdGetCountryCodeRequest").makeGetCountryCodeRequest(),n=yield o("WAComms").sendSmaxStanza(t,e),r=o("WASmaxInMdGetCountryCodeResponseGetCountryCodeResponse").parseGetCountryCodeResponseGetCountryCodeResponse(n,t);if(r.success)return{name:"GetCountryCodeResponseGetCountryCodeResponse",value:r.value};var a=o("WASmaxInMdGetCountryCodeResponseError").parseGetCountryCodeResponseError(n,t);if(a.success)return{name:"GetCountryCodeResponseError",value:a.value};throw new(o("WASmaxParsingFailure")).SmaxParsingFailure(o("WASmaxRpcUtils").errorMessageRpcParsing("GetCountryCode",{GetCountryCodeResponse:r,Error:a}))}),s.apply(this,arguments)}l.sendGetCountryCodeRPC=e}),98);
__d("WASmaxOutMessagePublishClickToWhatsAppAttributionMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(e){var t=e.ctwaAttributionElementValue,n=o("WASmaxJsx").smax("ctwa_attribution",null,t);return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeClickToWhatsAppAttributionMixin=s}),98);
__d("WASmaxOutMessagePublishContentTypeMediaMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("message",{type:"media"});return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeContentTypeMediaMixin=s}),98);
__d("WASmaxOutMessagePublishContentTypePollCreationMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.metaContenttype,n=o("WASmaxJsx").smax("message",{type:"poll"},o("WASmaxJsx").smax("meta",{polltype:"creation",contenttype:o("WASmaxAttrs").OPTIONAL(o("WAWap").CUSTOM_STRING,t)}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeContentTypePollCreationMixin=s}),98);
__d("WASmaxOutMessagePublishContentTypePollResultSnapshotMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("message",{type:"poll"},o("WASmaxJsx").smax("meta",{polltype:"result_snapshot"}));return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeContentTypePollResultSnapshotMixin=s}),98);
__d("WASmaxOutMessagePublishContentTypePollVoteMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.metaContenttype,n=o("WASmaxJsx").smax("message",{type:"poll"},o("WASmaxJsx").smax("meta",{polltype:"vote",contenttype:o("WASmaxAttrs").OPTIONAL(o("WAWap").CUSTOM_STRING,t)}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeContentTypePollVoteMixin=s}),98);
__d("WASmaxOutMessagePublishContentTypeReactionMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("message",{type:"reaction"});return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeContentTypeReactionMixin=s}),98);
__d("WASmaxOutMessagePublishContentTypeTextMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("message",{type:"text"});return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeContentTypeTextMixin=s}),98);
__d("WASmaxOutMessagePublishCtwaAttributionMixin",["WASmaxChildren","WASmaxJsx","WASmaxMixins","WASmaxOutMessagePublishClickToWhatsAppAttributionMixin"],(function(t,n,r,o,a,i,l){function e(e){var t=o("WASmaxOutMessagePublishClickToWhatsAppAttributionMixin").mergeClickToWhatsAppAttributionMixin(o("WASmaxJsx").smax("ctwa_attribution",null),e);return t}function s(t){var n=t.ctwaAttributionArgs,r=o("WASmaxJsx").smax("message",null,o("WASmaxChildren").OPTIONAL_CHILD(e,n));return r}function u(e,t){var n=s(t);return o("WASmaxMixins").mergeStanzas(e,n)}l.makeCtwaAttributionCtwaAttribution=e,l.mergeCtwaAttributionMixin=u}),98);
__d("WASmaxOutMessagePublishMessageAssociationTypeMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.metaMessageAssociationType,n=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("meta",{message_association_type:o("WAWap").CUSTOM_STRING(t)}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeMessageAssociationTypeMixin=s}),98);
__d("WASmaxOutMessagePublishMsgMetaOriginMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.metaOrigin,n=o("WASmaxJsx").smax("message",null,o("WASmaxJsx").smax("meta",{origin:o("WAWap").CUSTOM_STRING(t)}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeMsgMetaOriginMixin=s}),98);
__d("WASmaxOutMessagePublishRevokeMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("message",{edit:"7"});return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeRevokeMixin=s}),98);
__d("WASmaxOutPreKeysClientRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("iq",{id:o("WAWap").generateId(),xmlns:"encrypt",to:o("WAWap").S_WHATSAPP_NET});return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeClientRequestMixin=s}),98);
__d("WASmaxOutPreKeysFetchKeyBundlesRequest",["WASmaxAttrs","WASmaxChildren","WASmaxJsx","WASmaxOutPreKeysClientRequestMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.userJid,n=e.hasUserReasonIdentity,r=o("WASmaxJsx").smax("user",{jid:o("WAWap").JID(t),reason:o("WASmaxAttrs").OPTIONAL_LITERAL("identity",n)});return r}function s(t){var n=t.userArgs,r=o("WASmaxOutPreKeysClientRequestMixin").mergeClientRequestMixin(o("WASmaxJsx").smax("iq",{type:"get"},o("WASmaxJsx").smax("key",null,o("WASmaxChildren").REPEATED_CHILD(e,n,1,1e5))));return r}l.makeFetchKeyBundlesRequestKeyUser=e,l.makeFetchKeyBundlesRequest=s}),98);
__d("WASmaxOutProfilePictureAddRequestMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.addRequestCode,n=e.addRequestAdmin,r=e.addRequestExpiration,a=o("WASmaxJsx").smax("picture",null,o("WASmaxJsx").smax("add_request",{code:o("WAWap").CUSTOM_STRING(t),admin:o("WASmaxAttrs").OPTIONAL(o("WAWap").USER_JID,n),expiration:o("WAWap").INT(r)}));return a}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeAddRequestMixin=s}),98);
__d("WASmaxOutProfilePictureAvatarMixin",["WASmaxChildren","WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.avatarPoseId,n=o("WASmaxJsx").smax("avatar",{pose_id:o("WAWap").CUSTOM_STRING(t)});return n}function s(t){var n=t.avatarArgs,r=o("WASmaxJsx").smax("picture",{type:"avatar"},o("WASmaxChildren").REPEATED_CHILD(e,n,0,4));return r}function u(e,t){var n=s(t);return o("WASmaxMixins").mergeStanzas(e,n)}l.makeAvatarAvatar=e,l.mergeAvatarMixin=u}),98);
__d("WASmaxOutProfilePictureBaseIQGetRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("iq",{id:o("WAWap").generateId(),type:"get"});return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeBaseIQGetRequestMixin=s}),98);
__d("WASmaxOutProfilePictureBaseGetIQMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutProfilePictureBaseIQGetRequestMixin"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxOutProfilePictureBaseIQGetRequestMixin").mergeBaseIQGetRequestMixin(o("WASmaxJsx").smax("iq",{xmlns:"w:profile:picture"}));return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeBaseGetIQMixin=s}),98);
__d("WASmaxOutProfilePictureServerDomainIQMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("iq",{to:o("WAWap").S_WHATSAPP_NET});return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeServerDomainIQMixin=s}),98);
__d("WASmaxOutProfilePictureGetIQMixin",["WASmaxJsx","WASmaxMixins","WASmaxOutProfilePictureServerDomainIQMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.iqTarget,n=o("WASmaxOutProfilePictureServerDomainIQMixin").mergeServerDomainIQMixin(o("WASmaxJsx").smax("iq",{target:o("WAWap").JID(t)}));return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeGetIQMixin=s}),98);
__d("WASmaxOutProfilePicturePrivacyTokenContentsMixin",["WASmaxJsx","WASmaxMixins"],(function(t,n,r,o,a,i,l){function e(e){var t=e.anyElementValue,n=o("WASmaxJsx").smax("smax$any",null,t);return n}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergePrivacyTokenContentsMixin=s}),98);
__d("WASmaxOutProfilePictureTCTokenMixin",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WASmaxOutProfilePicturePrivacyTokenContentsMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.tctokenT,n=e.privacyTokenContentsMixinArgs,r=o("WASmaxJsx").smax("smax$any",null,o("WASmaxOutProfilePicturePrivacyTokenContentsMixin").mergePrivacyTokenContentsMixin(o("WASmaxJsx").smax("tctoken",{t:o("WASmaxAttrs").OPTIONAL(o("WAWap").INT,t)}),n));return r}function s(t,n){var r=e(n);return o("WASmaxMixins").mergeStanzas(t,r)}l.mergeTCTokenMixin=s}),98);
__d("WASmaxOutProfilePictureGetRequest",["WASmaxAttrs","WASmaxJsx","WASmaxMixins","WASmaxOutProfilePictureAddRequestMixin","WASmaxOutProfilePictureAvatarMixin","WASmaxOutProfilePictureBaseGetIQMixin","WASmaxOutProfilePictureGetIQMixin","WASmaxOutProfilePictureTCTokenMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t,n,r=e.pictureType,a=e.pictureId,i=e.pictureQuery,l=e.pictureInvite,s=e.picturePersonaId,u=e.pictureCommonGid,c=e.addRequestMixinArgs,d=e.tCTokenMixinArgs,m=e.avatarMixinArgs,p=o("WASmaxOutProfilePictureGetIQMixin").mergeGetIQMixin(o("WASmaxOutProfilePictureBaseGetIQMixin").mergeBaseGetIQMixin(o("WASmaxJsx").smax("iq",null,o("WASmaxMixins").optionalMerge(o("WASmaxOutProfilePictureAvatarMixin").mergeAvatarMixin,o("WASmaxMixins").optionalMerge(o("WASmaxOutProfilePictureTCTokenMixin").mergeTCTokenMixin,o("WASmaxMixins").optionalMerge(o("WASmaxOutProfilePictureAddRequestMixin").mergeAddRequestMixin,o("WASmaxJsx").smax("picture",{type:(t=o("WASmaxAttrs")).OPTIONAL((n=o("WAWap")).CUSTOM_STRING,r),id:t.OPTIONAL(n.CUSTOM_STRING,a),query:t.OPTIONAL(n.CUSTOM_STRING,i),invite:t.OPTIONAL(n.CUSTOM_STRING,l),persona_id:t.OPTIONAL(n.CUSTOM_STRING,s),common_gid:t.OPTIONAL(n.GROUP_JID,u)}),c),d),m))),e);return p}l.makeGetRequest=e}),98);
__d("WASmaxOutStatsBaseIQSetRequestMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(t,n,r,o,a,i,l){function e(){var e=o("WASmaxJsx").smax("iq",{id:o("WAWap").generateId(),type:"set"});return e}function s(t){var n=e();return o("WASmaxMixins").mergeStanzas(t,n)}l.mergeBaseIQSetRequestMixin=s}),98);
__d("WASmaxOutStatsSendBufferRequest",["WASmaxJsx","WASmaxOutStatsBaseIQSetRequestMixin","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.addT,n=e.addElementValue,r=o("WASmaxOutStatsBaseIQSetRequestMixin").mergeBaseIQSetRequestMixin(o("WASmaxJsx").smax("iq",{xmlns:"w:stats",to:o("WAWap").S_WHATSAPP_NET},o("WASmaxJsx").smax("add",{t:o("WAWap").INT(t)},n)));return r}l.makeSendBufferRequest=e}),98);
__d("WASmaxOutUnifiedSessionShareRequest",["WASmaxJsx","WAWap"],(function(t,n,r,o,a,i,l){function e(e){var t=e.unifiedSessionId,n=o("WASmaxJsx").smax("ib",null,o("WASmaxJsx").smax("unified_session",{id:o("WAWap").CUSTOM_STRING(t)}));return n}l.makeShareRequest=e}),98);
__d("WASmaxPreKeysFetchKeyBundlesRPC",["WAComms","WASmaxInPreKeysFetchKeyBundlesResponseRequestError","WASmaxInPreKeysFetchKeyBundlesResponseServerError","WASmaxInPreKeysFetchKeyBundlesResponseSuccess","WASmaxOutPreKeysFetchKeyBundlesRequest","WASmaxParsingFailure","WASmaxRpcUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(e,t){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=o("WASmaxOutPreKeysFetchKeyBundlesRequest").makeFetchKeyBundlesRequest(e),r=yield o("WAComms").sendSmaxStanza(n,t),a=o("WASmaxInPreKeysFetchKeyBundlesResponseSuccess").parseFetchKeyBundlesResponseSuccess(r,n);if(a.success)return{name:"FetchKeyBundlesResponseSuccess",value:a.value};var i=o("WASmaxInPreKeysFetchKeyBundlesResponseRequestError").parseFetchKeyBundlesResponseRequestError(r,n);if(i.success)return{name:"FetchKeyBundlesResponseRequestError",value:i.value};var l=o("WASmaxInPreKeysFetchKeyBundlesResponseServerError").parseFetchKeyBundlesResponseServerError(r,n);if(l.success)return{name:"FetchKeyBundlesResponseServerError",value:l.value};throw new(o("WASmaxParsingFailure")).SmaxParsingFailure(o("WASmaxRpcUtils").errorMessageRpcParsing("FetchKeyBundles",{Success:a,RequestError:i,ServerError:l}))}),s.apply(this,arguments)}l.sendFetchKeyBundlesRPC=e}),98);
__d("WASmaxProfilePictureGetRPC",["WAComms","WASmaxInProfilePictureGetResponseError","WASmaxInProfilePictureGetResponseSuccessAvatarURLs","WASmaxInProfilePictureGetResponseSuccessNoData","WASmaxInProfilePictureGetResponseSuccessPictureBlob","WASmaxInProfilePictureGetResponseSuccessPictureURL","WASmaxOutProfilePictureGetRequest","WASmaxParsingFailure","WASmaxRpcUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(e,t){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=o("WASmaxOutProfilePictureGetRequest").makeGetRequest(e),r=yield o("WAComms").sendSmaxStanza(n,t),a=o("WASmaxInProfilePictureGetResponseSuccessPictureURL").parseGetResponseSuccessPictureURL(r,n);if(a.success)return{name:"GetResponseSuccessPictureURL",value:a.value};var i=o("WASmaxInProfilePictureGetResponseSuccessAvatarURLs").parseGetResponseSuccessAvatarURLs(r,n);if(i.success)return{name:"GetResponseSuccessAvatarURLs",value:i.value};var l=o("WASmaxInProfilePictureGetResponseSuccessPictureBlob").parseGetResponseSuccessPictureBlob(r,n);if(l.success)return{name:"GetResponseSuccessPictureBlob",value:l.value};var s=o("WASmaxInProfilePictureGetResponseSuccessNoData").parseGetResponseSuccessNoData(r,n);if(s.success)return{name:"GetResponseSuccessNoData",value:s.value};var u=o("WASmaxInProfilePictureGetResponseError").parseGetResponseError(r,n);if(u.success)return{name:"GetResponseError",value:u.value};throw new(o("WASmaxParsingFailure")).SmaxParsingFailure(o("WASmaxRpcUtils").errorMessageRpcParsing("Get",{SuccessPictureURL:a,SuccessAvatarURLs:i,SuccessPictureBlob:l,SuccessNoData:s,Error:u}))}),s.apply(this,arguments)}l.sendGetRPC=e}),98);
__d("WASmaxStatsSendBufferRPC",["WAComms","WASmaxInStatsSendBufferResponseErrorNoRetry","WASmaxInStatsSendBufferResponseErrorRetry","WASmaxInStatsSendBufferResponseSuccess","WASmaxOutStatsSendBufferRequest","WASmaxParsingFailure","WASmaxRpcUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(e,t){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=o("WASmaxOutStatsSendBufferRequest").makeSendBufferRequest(e),r=yield o("WAComms").sendSmaxStanza(n,t),a=o("WASmaxInStatsSendBufferResponseSuccess").parseSendBufferResponseSuccess(r,n);if(a.success)return{name:"SendBufferResponseSuccess",value:a.value};var i=o("WASmaxInStatsSendBufferResponseErrorNoRetry").parseSendBufferResponseErrorNoRetry(r,n);if(i.success)return{name:"SendBufferResponseErrorNoRetry",value:i.value};var l=o("WASmaxInStatsSendBufferResponseErrorRetry").parseSendBufferResponseErrorRetry(r,n);if(l.success)return{name:"SendBufferResponseErrorRetry",value:l.value};throw new(o("WASmaxParsingFailure")).SmaxParsingFailure(o("WASmaxRpcUtils").errorMessageRpcParsing("SendBuffer",{Success:a,ErrorNoRetry:i,ErrorRetry:l}))}),s.apply(this,arguments)}l.sendSendBufferRPC=e}),98);
__d("WASmaxUnifiedSessionShareRPC",["WAComms","WASmaxOutUnifiedSessionShareRequest","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(e){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=o("WASmaxOutUnifiedSessionShareRequest").makeShareRequest(e);yield o("WAComms").castSmaxStanza(t)}),s.apply(this,arguments)}l.sendShareRPC=e}),98);
__d("WASocketTransport",["Promise","WABinary","WALogger","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=1,m=(function(){function t(t){var n=this;this.$2=!1,this.onData=null,this.onClose=null,this.onError=null,this.dataToSend=new(o("WABinary")).Binary,this.$3=function(t){if(!n.$2){var r=new Uint8Array(t.data);n.onData?n.onData(r):o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["WebSocket #"," dropped "," bytes"])),n.id,r.length)}},this.$4=function(e){n.$2||n.$6(e)},this.$5=function(e){if(o("WALogger").DEV(s||(s=babelHelpers.taggedTemplateLiteralLoose(["WebSocket #"," errored: ",""])),n.id,e),!n.$2){var t=n.onError;t&&t(String(e))}};var r=d++;this.id=r,this.$1=t,t.onmessage=this.$3,t.onclose=this.$4,t.onerror=this.$5}var n=t.prototype;return n.close=function(){this.$2||(this.$1.close(),this.$6())},n.requestSend=function(){if(this.$2){o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["WebSocket #"," not opened"])),this.id);return}this.dataToSend.size()&&this.$1.send(this.dataToSend.readBuffer())},n.$6=function(t){this.$2=!0,this.onClose&&this.onClose(t)},t})();function p(e,t,o,a){var i=new WebSocket(e);return i.binaryType="arraybuffer",new(c||(c=n("Promise")))(function(e,n){i.onopen=function(){a==null||a(),e()},i.onclose=function(e){t==null||t(e),o==null||o(null,e),n(r("err")("WebSocket closed after microtask delay}: "+e.reason+" "+e.code))}}).then(function(){var e=new m(i);return o!=null&&(e.onClose=function(t){t!=null&&o(e.id,t)}),e})}l.WebSocketTransport=m,l.openWebSocket=p}),98);
__d("WATaskScheduler",["Promise","WALogger","WAPromiseBackoffs","WAResolvable","WATimeUtils","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y="no_reschedule",C=(function(){function t(e){this.$1=!1,this.$2={},this.$3={},this.$4={},this.$5=new Map,this.$6=e.scheduledTimeResolver}var r=t.prototype;return r.$7=function(r){var t=this,a=this.$5.get(r);if(a==null){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Tried to start task "," before registering its implementation"])),r).devConsole("start-task-without-impl");return}this.$6.get(r).then(function(e){var i=e==null,l=!i&&e===o("WATimeUtils").DEFAULT_UNIXTIME;if(l){o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Task "," deactivated"])),r);return}var f=e==null?0:e*1e3-o("WATimeUtils").unixTimeMs();f=Math.max(0,f),f=Math.min(f,2147483647),o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Scheduling task "," in ","ms"])),r,f),t.$4[r]=setTimeout(function(){delete t.$4[r],o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Firing task ",""])),r),a(i).then(function(e){if(e==="no_reschedule")return new(h||(h=n("Promise")))(function(){});var a;return e===o("WATimeUtils").DEFAULT_UNIXTIME?(o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Task "," complete, deactivating"])),r),delete t.$3[r],a=o("WATimeUtils").DEFAULT_UNIXTIME):e>=0?(o("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Task "," complete, waiting ",""])),r,e),delete t.$3[r],a=o("WATimeUtils").futureUnixTime(e)):(o("WALogger").LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Task "," will try again later"])),r),a=t.$8(r)),t.$6.set(r,a)}).then(function(){t.$7(r),t.$2[r]&&(t.$2[r].forEach(function(e){return e()}),delete t.$2[r])}).catch(function(e){return o("WALogger").LOG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Task "," failed, try again later: ",""])),r,e),t.$6.set(r,t.$8(r)).then(function(){t.$7(r)})})},f)})},r.$8=function(t){return this.$3[t]||(this.$3[t]=o("WAPromiseBackoffs").createTimer({jitter:.1,max:o("WATimeUtils").HOUR_SECONDS*1e3,algo:{type:"fibonacci",first:1e3,second:2e3}})),o("WATimeUtils").futureUnixTime(Math.round(this.$3[t]()/1e3))},r.$9=function(t,n){this.$2[t]||(this.$2[t]=[]),this.$2[t].push(n)},r.awaitTaskPromise=function(t){var e=this;return new(h||(h=n("Promise")))(function(n){e.$9(t,n)})},r.reschedule=function(t,n){this.$1?(this.$6.set(t,n),this.$4[t]!=null&&clearTimeout(this.$4[t]),this.$7(t)):this.$6.set(t,n)},r.registerTask=function(t,n){this.$1||(this.$1=!0),this.$5.set(t,n),this.$7(t)},r.getScheduledTime=function(t){return this.$6.get(t)},t})(),b=null,v=new(o("WAResolvable")).Resolvable;function S(e){o("WALogger").LOG(f||(f=babelHelpers.taggedTemplateLiteralLoose(["startScheduler invoked"]))),b||(b=new C(e),v.resolve())}function R(e){var t=x("awaitTaskPromise");return t.awaitTaskPromise(e)}function L(e,t){var n=x("reschedule");n.reschedule(e,t)}function E(e,t){v.resolveWasCalled()?L(e,t):v.promise.then(function(){L(e,t)}).catch(function(t){o("WALogger").ERROR(g||(g=babelHelpers.taggedTemplateLiteralLoose(["taskScheduler: reschedule eventually failed for task ",""])),e).devConsole(t).sendLogs("task-scheduler-reschedule-failed")})}function k(e){E(e,o("WATimeUtils").unixTime())}function I(e){E(e,o("WATimeUtils").DEFAULT_UNIXTIME)}function T(e){var t=x("getScheduledTime");return t.getScheduledTime(e)}function D(e,t){var n=x("registerTask");n.registerTask(e,t)}function x(e){if(b)return b;throw r("err")("TaskScheduler::"+e+" called before startScheduler")}l.DO_NOT_RESCHEDULE=y,l.startScheduler=S,l.awaitTaskPromise=R,l._doReschedule=L,l.reschedule=E,l.rescheduleNow=k,l.deactivate=I,l.getScheduledTime=T,l.registerTask=D}),98);
__d("WAVerifyChainCertificateWA6",["WACert.pb","WACryptoUtils","WAHex","WALogger","WAResultOrError","WASignalKeys","WASignalOther","WASignalSignatures","decodeProtobuf"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R="142375574d0a587166aae71ebe516437c4a28b73e3695c6ce1f7f9545da8ee6b",L={SERIAL:0,ISSUER:"WhatsAppLongTerm1",PUBLIC_KEY:o("WASignalKeys").serializeIdentity(new Uint8Array(o("WAHex").parseHex(R)))};function E(t,n){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["verifyChainCertificateWA6: extract leaf and intermediate certificate"])));var r=o("decodeProtobuf").decodeProtobuf(o("WACert.pb").CertChainSpec,t),a=r.intermediate,i=r.leaf;if(a==null||i==null)return o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["verifyChainCertificateWA6: missing leaf and/or intermediate certificate"]))),o("WAResultOrError").makeError("missing-certificate");o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["verifying intermediate certificate"])));var l=k(a);if(!l.success)return o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["verifyChainCertificateWA6: invalid intermediate certificate"]))),o("WAResultOrError").makeError("invalid-certificate");if(l.value.issuerSerial!==L.SERIAL)return o("WALogger").ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["verifyChainCertificateWA6 intermediate certificate was not issued by RootCA"]))),o("WAResultOrError").makeError("invalid-certificate");if(!I(l.value,L.PUBLIC_KEY))return o("WALogger").ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["verifyChainCertificateWA6: intermediate certificate is poorly signed"]))),o("WAResultOrError").makeError("invalid-certificate");o("WALogger").LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["verifying leaf certificate"])));var y=k(i);if(!y.success)return o("WALogger").ERROR(_||(_=babelHelpers.taggedTemplateLiteralLoose(["verifyChainCertificateWA6: invalid leaf certificate"]))),o("WAResultOrError").makeError("invalid-certificate");if(y.value.issuerSerial!==l.value.serial)return o("WALogger").ERROR(f||(f=babelHelpers.taggedTemplateLiteralLoose(["verifyChainCertificateWA6 leaf certificate was not issued by RootCA"]))),o("WAResultOrError").makeError("invalid-certificate");var C=o("WASignalKeys").serializeIdentity(new Uint8Array(l.value.key));return I(y.value,C)?o("WACryptoUtils").arrayBuffersEqual(y.value.key,n)?o("WAResultOrError").makeResult({leaf:y.value,intermediate:l.value}):(o("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["verifyChainCertificateWA6 leafCert.key does not match handshake server.hello.static"]))),o("WAResultOrError").makeError("invalid-certificate")):(o("WALogger").ERROR(g||(g=babelHelpers.taggedTemplateLiteralLoose(["verifyChainCertificateWA6: leaf certificate is poorly signed"]))),o("WAResultOrError").makeError("invalid-certificate"))}function k(e){var t=e.details,n=e.signature;if(!t)return o("WALogger").ERROR(y||(y=babelHelpers.taggedTemplateLiteralLoose(['parseCertificateWA6 certificate is missing "details"']))),o("WAResultOrError").makeError("invalid-certificate");if(!n)return o("WALogger").ERROR(C||(C=babelHelpers.taggedTemplateLiteralLoose(['parseCertificateWA6 certificate is missing "signature"']))),o("WAResultOrError").makeError("invalid-certificate");var r=o("decodeProtobuf").decodeProtobuf(o("WACert.pb").CertChain$NoiseCertificate$DetailsSpec,t),a=r.issuerSerial,i=r.serial,l=r.key,s=r.notAfter,u=r.notBefore;if(a==null)return o("WALogger").ERROR(b||(b=babelHelpers.taggedTemplateLiteralLoose(['parseCertificateWA6 certificate is missing "issuer_serial"']))),o("WAResultOrError").makeError("invalid-certificate");if(i==null)return o("WALogger").ERROR(v||(v=babelHelpers.taggedTemplateLiteralLoose(['parseCertificateWA6 certificate is missing "serial"']))),o("WAResultOrError").makeError("invalid-certificate");if(l==null)return o("WALogger").ERROR(S||(S=babelHelpers.taggedTemplateLiteralLoose(['parseCertificateWA6 certificate is missing "key"']))),o("WAResultOrError").makeError("invalid-certificate");var c=o("WASignalOther").ensureSize(new Uint8Array(n),64);return o("WAResultOrError").makeResult({serial:i,issuerSerial:a,key:l,notBefore:u,notAfter:s,details:t,signature:c})}function I(e,t){return o("WASignalSignatures").verifyMsgSignalVariant(t,new Uint8Array(e.details),e.signature)}l.ROOT_CA=L,l.verifyChainCertificateWA6=E,l.parseCertificateWA6=k}),98);
__d("WAWamTypes",[],(function(t,n,r,o,a,i){"use strict";var e={INT:0,BOOL:1,STRING:2,FLOAT:3};i.TYPES=e}),66);
__d("WAWamBuffer",["WABinary","WAWamTypes","err"],(function(t,n,r,o,a,i,l){"use strict";var e=5,s=47,u=0,c=1,d=2,m=1,p=2,_=0,f=4,g=8,h=(function(){function t(t,n,r,a){var i=this;this.$5=!1,this.$6=!1;var l=new(o("WABinary")).Binary(void 0,!0);switch(l.writeString("WAM"),l.writeUint8(e),l.writeUint8(n),l.writeUint16(r),t){case"regular":l.writeUint8(u);break;case"realtime":l.writeUint8(c);break;default:l.writeUint8(d)}this.$1=t,this.$2=l,this.$3=r,this.$4=n,a.forEach(function(e,t){return void i.writeGlobal(t,e)})}var n=t.prototype;return n.writeGlobal=function(t,n){if(n==null){v(this.$2,t,_);return}if(typeof n=="string")b(this.$2,t,_,n);else if(typeof n=="number")y(this.$2,t,_,n);else if(typeof n=="boolean")y(this.$2,t,_,n?1:0);else throw r("err")("Incorrect value type "+typeof n)},n.writeEvent=function(t,n,r,a){var e=this.$2;y(e,s,_,Math.floor(t/1e3));var i=S(r),l=i===-1?m|f:m;y(e,n,l,a);for(var u=0;u<=i;u+=3){var c=r[u+2];if(c!=null){var d=r[u],g=r[u+1],h=u===i?p|f:p;g===o("WAWamTypes").TYPES.INT?y(e,d,h,c):g===o("WAWamTypes").TYPES.BOOL?y(e,d,h,c?1:0):g===o("WAWamTypes").TYPES.STRING?b(e,d,h,c):C(e,d,h,c)}}this.$6=!0},n.getKey=function(){return{streamId:this.$4,sequenceNumber:this.$3,channel:this.$1}},n.getSize=function(){return this.$2.size()},n.peek=function(){return this.$2.peek(function(e){return e.readByteArrayView()})},n.getBuffer__INTERNAL=function(){return this.$2},n.isFinalized=function(){return this.$5},n.finalize=function(){this.$5=!0},n.hasEvents=function(){return this.$6},t})();function y(e,t,n,r){r===0?v(e,t,n|16):r===1?v(e,t,n|32):-128<=r&&r<128?(v(e,t,n|48),e.writeInt8(r)):-32768<=r&&r<32768?(v(e,t,n|64),e.writeInt16(r)):-2147483648<=r&&r<2147483648?(v(e,t,n|80),e.writeInt32(r)):(v(e,t,n|96),e.writeInt64(r))}function C(e,t,n,r){v(e,t,n|112),e.writeFloat64(r)}function b(e,t,n,r){var a=o("WABinary").numUtf8Bytes(r);a<256?(v(e,t,n|128),e.writeUint8(a)):a<65536?(v(e,t,n|144),e.writeUint16(a)):(v(e,t,n|160),e.writeUint32(a)),e.writeString(r)}function v(e,t,n){t<256?(e.writeUint8(n),e.writeUint8(t)):(e.writeUint8(n|g),e.writeUint16(t))}function S(e){for(var t=-1,n=0;n<e.length;n+=3)e[n+2]!=null&&(t=n);return t}function R(e){for(var t=S(e),n=0;n<=t;n+=3){var r=e[n+2];if(r!=null){var a=e[n+1];if(a===o("WAWamTypes").TYPES.INT&&isNaN(r))return!1}}return!0}function L(e){return typeof e=="number"?!isNaN(e):!0}l.WamBuffer=h,l.canWriteEvent=R,l.canWriteGlobal=L}),98);
__d("WAWam",["Promise","WALogger","WAPromiseEach","WAShiftTimer","WAWamBuffer"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y=65536,C=300*1e3,b=3e3,v=1,S=2,R=6005,L=113760892,E=0,k="none",I={putBuffer:function(t,r,o){return(h||(h=n("Promise"))).resolve()}},T=(function(){function t(t){var n=this;this.$2=[],this.$3=new Map,this.$4=!1,this.$5=new Map,this.$8=-1,this.$9=I,this.$10=null,this.deinitialize=function(){n.$4=!1,n.$2=[],n.$3.clear(),n.$5=new Map,n.$8=-1,n.$9=I,n.serializePending.cancel(),n.finalizeBuffers.cancel()},this.enqueueEvent=function(e,t,r,o,a,i){var l=v;n.$2.push({type:l,id:e,commitTime:t,psIdIntValue:r,weight:a,fields:o,resolve:i}),n.$4&&n.serializePending.onOrBefore(b)},this.enqueueAttributesUpdate=function(t){var r={type:S,delta:[]};t.forEach(function(e,t){e!==void 0&&r.delta.push([t,e])}),r.delta.length>0&&(o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["WAM: Enqueued "," attribute keys for update"])),r.delta.length),n.$2.push(r))},this.finalizeBuffers=new(o("WAShiftTimer")).ShiftTimer(function(){n.finalizeBuffers__INTERNAL()}),this.serializePending=new(o("WAShiftTimer")).ShiftTimer(function(){n.serializePending__INTERNAL()}),this.forceSerializePending=function(){n.$4&&n.$11()&&n.serializePending.forceRunNow()},this.$1=t}var n=t.prototype;return n.initialize=function(t,n,r,a){if(this.$4){o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["WAM: Failed to initialize already initialized WAM"]))).sendLogs("wam-initialize");return}this.$7=a,this.$8=t,this.$9=r,this.$10=n,this.$11()&&this.serializePending.forceRunNow(),this.$4=!0,o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["WAM: Initialized with stream id ",""])),this.$8)},n.finalizeBuffers__INTERNAL=function(){this.$5.forEach(function(e){e.finalize()}),this.$5.size>0&&this.serializePending.onOrBefore(b)},n.$12=function(t){var e;return(e=this.$7)!=null&&e.multipleSequences?t===E?"null-psid":t:"regular"},n.$13=function(t){var e=this.$5.get(t);if(e)return e;var n=this.$12(t);if(this.$10==null){o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["WAM: Sequence number generator not initialised for channel ",""])),this.$1).sendLogs("wam-serializePending");return}var r=this.$10(n);if(e=new(o("WAWamBuffer")).WamBuffer(this.$1,this.$8,r,this.$3),this.$5.set(t,e),t!=="regular")if(this.$6==null)o("WALogger").ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["WAM: Tried to create a private buffer without setting private stats ids"]))).sendLogs("wam-serializePending");else{var a=t===E?k:this.$6.get(t);a==null?o("WALogger").ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["WAM: Tried to create a private buffer without setting private stats id"]))).sendLogs("wam-serializePending"):e.writeGlobal(R,a)}return e},n.serializePending__INTERNAL=function(){var e=this,t=[];this.finalizeBuffers.onOrBefore(C);var n=new Map,r=-1;this.$2.forEach(function(a,i){if(a.type===v){var l=!0;n.forEach(function(e){o("WAWamBuffer").canWriteGlobal(e)||(l=!1)});var s=o("WAWamBuffer").canWriteEvent(a.fields);if(s&&l){var u;switch(e.$1){case"regular":case"realtime":{u=e.$13("regular");break}default:e.$1,a.psIdIntValue==null?o("WALogger").ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["A WAM event in channel private was dropped before serialization. Reason: missing psIdIntValue in the event payload"]))).sendLogs("wam-serializePending"):u=e.$13(a.psIdIntValue)}u!=null&&(n.forEach(function(t,n){var r=e.$3.get(n);(r===void 0||r!==t)&&(e.$5.forEach(function(e){return e.writeGlobal(n,t)}),e.$3.set(n,t))}),n.clear(),u.writeEvent(a.commitTime,a.id,a.fields,a.weight))}else o("WALogger").WARN(_||(_=babelHelpers.taggedTemplateLiteralLoose(["A WAM event in channel "," was dropped before serialization. Event correct: ",", pending attributes correct: ",""])),e.$1,s,l).devConsole("pending attributes",n,"pending event action",a);a.resolve!=null&&t.push(a.resolve),r=i}else{a.type;for(var c=0;c<a.delta.length;++c){var d=a.delta[c],m=d[0],f=d[1];n.set(m,f)}}});var a=!1;this.$5.forEach(function(e){(e.isFinalized()||e.getSize()>y)&&(a=!0)});var i=[];this.$5.forEach(function(t,n){t.hasEvents()?i.push([t.getKey(),t.peek(),e.$12(n)]):o("WALogger").WARN(f||(f=babelHelpers.taggedTemplateLiteralLoose(["Skipping putting buffer to sink, as it does not contain any events"])))});var l=o("WAPromiseEach").promiseEach(i,function(t){var n=t[0],r=t[1],o=t[2];return e.$9.putBuffer(n,r,a,o)}).then(function(){t.forEach(function(e){return void e()})});return this.$2=this.$2.slice(r+1),a&&(this.$5=new Map,this.finalizeBuffers.cancel()),l},n.$11=function(){return this.$2.length>0&&this.$2.some(function(e){return e.type===v})},n.isInitialized=function(){return this.$4},n.getStreamId=function(){return this.$8},n.getPendingActions=function(){return this.$2},n.getBuffers__INTERNAL=function(){return this.$5},n.getGlobals__INTERNAL=function(){return this.$3},n.setGlobals__INTERNAL=function(t){this.$3=t},n.getSink__INTERNAL=function(){return this.$9},n.updatePrivateStatsIds=function(t){if(this.$1!=="private"){o("WALogger").ERROR(g||(g=babelHelpers.taggedTemplateLiteralLoose(["WAM: Tried to set private stats ids on a non-private channel"]))).sendLogs("wam-updatePrivateStatsIds");return}this.$6=t},t})();l.PRIVATE_STATS_DEFAULT_PS_ID_KEY_HASH_INT=L,l.Wam=T}),98);
__d("WAWamChannelManager",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(){this.$1=new Map,this.$2=new Map}var t=e.prototype;return t.getChannelInitialized=function(t){return this.$2.get(t)||!1},t.setChannelInitialized=function(t){this.$2.set(t,!0)},t.isSinkBusy=function(t){return this.$1.get(t)||!1},t.setSinkBusy=function(t,n){this.$1.set(t,n)},t.close=function(){var e=this;this.$1.forEach(function(t,n){e.$1.set(n,!1)}),this.$2.forEach(function(t,n){e.$2.set(n,!1)})},e})(),l;function s(){return l==null&&(l=new e),l}function u(){l!=null&&l.close()}i.getChannelManager=s,i.closeChannelManager=u}),66);
__d("WAWamManager",["WALogger","WAWam"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=65535,d=(function(){function t(e){this.$1=new Map,this.$2=e}var n=t.prototype;return n.$3=function(t,n){n==null||n===0?this.$1.set(t,"uninitialized"):n<0?this.$1.set(t,"uninitialized"):this.$1.set(t,n)},n.getSequenceNumber__INTERNAL=function(){return this.$1},n.initializeForChannel=function(n,r){var t=this;r.forEach(function(r,a){var i;if(n==="regular"&&a==="regular")t.$3(a,r);else if(n==="realtime"&&a==="realtime")t.$3(a,r);else if(n==="private"&&a!=="regular"&&a!=="realtime")t.$3(a,r);else if(n==="private"&&!((i=t.$2)!=null&&i.multipleSequences))t.$3(a,r);else{var l;o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["SequenceNumberGenerator::initializeForChannel: Incorrect combination of parameters: "," "," ",""])),n,a,(l=t.$2)==null?void 0:l.multipleSequences)}})},n.next=function(t){var e=this.$1.get(t),n;return e==null||e==="uninitialized"?n=1:(n=e+1,n>c&&(n=1)),this.$1.set(t,n),n},t})(),m=(function(){function e(){this.$1=new Map,this.$2=null}var t=e.prototype;return t.getWamInstance=function(t){var e=this.$1.get(t);return e||(e=new(o("WAWam")).Wam(t),this.$1.set(t,e)),e},t.initialize=function(t,n,r,a,i){var e=this.getWamInstance(t);if(e.isInitialized()){o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["WAM instance for channel "," has already been initialized"])),t);return}this.$2==null&&(this.$2=new d(i));var l=this.$2;this.$2.initializeForChannel(t,r),e.initialize(n,function(e){return l.next(e)},a,i)},t.deinitialize=function(){this.$1.forEach(function(e,t){e.isInitialized()&&(o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["WamManager: Deinitializing WAM Channel ",""])),t),e.deinitialize())}),this.$2=null},t.enqueueEvent=function(t,n,r,o,a,i,l){var e=this.getWamInstance(t);e.enqueueEvent(n,r,o,a,i,l)},t.enqueueAttributesUpdate=function(t,n){var e=this.getWamInstance(t);e.enqueueAttributesUpdate(n)},t.updatePrivateStatsIds=function(t){var e=this.getWamInstance("private");e.updatePrivateStatsIds(t)},t.forceFlushBuffers=function(){this.$1.forEach(function(e){e.forceSerializePending()})},t.rotateBuffers=function(){this.$1.forEach(function(e){e.finalizeBuffers.forceRunNow()})},t.getSequenceNumberGenerator__INTERNAL=function(){return this.$2},e})();l.WamManager=m}),98);
__d("WAWamUtils",["WABase64","WALogger","WAWamTypes","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=(e={},e[(u=o("WAWamTypes")).TYPES.INT]="number",e[u.TYPES.FLOAT]="number",e[u.TYPES.STRING]="string",e[u.TYPES.BOOL]="boolean",e);function d(e,t){if(t==null||t.length===0)return e;for(var n=new Map,r=0;r<e.length;r+=3){var o=e[r];n.set(o,r)}for(var a=0;a<t.length;++a){var i=t[a],l=i[0],s=i[1],u=i[2];if(u!=null){var d=n.get(l);if(d!=null){var m=e[d+2];if(m!==void 0)continue}var p=c[s];p===typeof u&&(d==null?(n.set(l,e.length),e.push(l,s,u)):e[d+2]=u)}}return e}function m(e){for(var t=new Map,n=new Map,a=0;a<e.length;a+=4){var i=e[a],l=e[a+1],u=e[a+2],c=e[a+3];if(u===o("WAWamTypes").TYPES.FLOAT)throw r("err")("Float attributes are currently not supported in runtime");if(!Array.isArray(i)){o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["logAttributes WAM channel is not an array"]))).sendLogs("wam-log-attributes");return}i.includes("regular")&&t.set(l,c),i.includes("private")&&n.set(l,c)}return{deltaRegular:t,deltaPrivate:n}}function p(e,t){var n=[];return t.forEach(function(t){var r=t.channel;if(r==null){if(e!=="regular")return}else if(r!==e)return;if(t.finished){var a=new Uint8Array(o("WABase64").decodeB64(t.buffer)),i=t.key;n.push({key:i,content:a})}}),n}function _(e){return JSON.stringify([e.streamId,e.sequenceNumber,e.channel])}function f(e,t,n,r,a){var i=_(e);return{bufferKey:i,meta:{streamId:e.streamId,sequenceNumber:e.sequenceNumber},bufferRow:{key:i,channel:t,streamId:n,buffer:o("WABase64").encodeB64(r),finished:a}}}function g(e){var t=null;return e&&(t=e.sequenceNumber),t}l.appendRawFields=d,l.getDeltaFromAttributes=m,l.getFinishedBuffers=p,l.asBufferEntry=f,l.getSequenceNumber=g}),98);
__d("WAWamEntrypoint",["Promise","WALogger","WAWamManager","WAWamUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=1,m=!1,p=null;function _(){return p||(p=new(o("WAWamManager")).WamManager),p}function f(){m=!0}function g(e,t,n,r,o){_().initialize(n,e,t,r,o)}function h(){_().deinitialize()}function y(t,n,r,a,i,l,s){l===void 0&&(l=d);var u=Date.now();m&&s!=null&&o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["wamEntrypoint: log"]))).devConsole(babelHelpers.extends({},s,{id:n,arrayFields:a,rawFields:i,weight:l})),_().enqueueEvent(t,n,u,r,o("WAWamUtils").appendRawFields(a,i),l)}function C(e,t,r,a,i,l,u){l===void 0&&(l=d);var p=Date.now();return m&&u!=null&&o("WALogger").DEV(s||(s=babelHelpers.taggedTemplateLiteralLoose(["wamEntrypoint: logAsync"]))).devConsole(babelHelpers.extends({},u,{id:t,arrayFields:a,rawFields:i,weight:l})),new(c||(c=n("Promise")))(function(n){_().enqueueEvent(e,t,p,r,o("WAWamUtils").appendRawFields(a,i),l,n)})}function b(e,t){var n=o("WAWamUtils").getDeltaFromAttributes(e);if(n!=null){var r=n.deltaRegular,a=n.deltaPrivate;m&&t!=null&&o("WALogger").DEV(u||(u=babelHelpers.taggedTemplateLiteralLoose(["wamEntrypoint: logAttributes"]))).devConsole(babelHelpers.extends({},t,{attributes:e,deltaRegular:r,deltaPrivate:a})),r.size>0&&_().enqueueAttributesUpdate("regular",r),a.size>0&&_().enqueueAttributesUpdate("private",a)}}function v(e){_().updatePrivateStatsIds(e)}function S(){_().forceFlushBuffers()}function R(){_().rotateBuffers()}l.enableDebugMode=f,l.initializeWAM=g,l.deinitializeWAM=h,l.log=y,l.logAsync=C,l.logAttributes=b,l.updatePrivateStatsIds=v,l.forceFlushBuffers=S,l.rotateBuffers=R}),98);
__d("WAWamStorage",["Promise","WALogger","WATimeUtils","WAWamChannelManager","WAWamEntrypoint","WAWamUtils","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_=null,f=null;function g(e){if(f)return f;throw r("err")("WamStorage::"+e+" called before startWamStorage")}function h(t){f==null?f=t:o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[wam] startWamStorage: called again"]))).sendLogs("startWamStorage")}function y(){o("WAWamEntrypoint").deinitializeWAM(),o("WAWamChannelManager").closeChannelManager(),f=null,_=null}function C(e,t,a,i){var l=g("initializeWAMSink"),d=o("WAWamChannelManager").getChannelManager();if(d.getChannelInitialized(t))return(p||(p=n("Promise"))).resolve();d.setChannelInitialized(t);var m=l.getStreamId(e),f={putBuffer:function(r,i,_,f){if(d.isSinkBusy(t))return o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["WamStorage: Sink flush did not happen within timeout, buffer is not saved"]))),(p||(p=n("Promise"))).resolve();d.setSinkBusy(t,!0);var e=o("WAWamUtils").asBufferEntry(r,t,m,i,_),g=e.bufferKey,h=e.meta,y=e.bufferRow;return l.saveBuffer(h,y,f).then(function(){var e=[r.streamId,r.sequenceNumber];o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["WamStorage: Successfully put buffer "," to sink"])),e),_&&(a(),o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["WamStorage: Buffer "," is scheduled for send"])),g))}).finally(function(){d.setSinkBusy(t,!1)})}};return _==null&&(_=l.finishBuffer(m)),_.then(function(){if(l.getStartingSequenceNumbers)return l.getStartingSequenceRow,l.getStartingSequenceNumbers(t,m);if(l.getStartingSequenceRow,i!=null&&i.multipleSequences)throw r("err")("getStartingSequenceRow must not used when enabling support for multiple sequences");return l.getStartingSequenceRow(m).then(function(e){var t=o("WAWamUtils").getSequenceNumber(e),n=new Map;return n.set("regular",t),n})}).then(function(e){o("WAWamEntrypoint").initializeWAM(m,e,t,f,i),t==="private"&&l.updatePrivateStatsIds&&l.updatePrivateStatsIds().then(o("WAWamEntrypoint").updatePrivateStatsIds)})}function b(e){return g("getFinishedStreamBuffers").getBuffers().then(function(t){return o("WAWamUtils").getFinishedBuffers(e,t)})}var v=64,S=function(t,n){var e=(n==null?void 0:n.maxRedeemCount)!=null&&n.maxRedeemCount!==0?n.maxRedeemCount:v,r=(n==null?void 0:n.maxExpirySeconds)!=null&&n.maxExpirySeconds!==0?n.maxExpirySeconds:o("WATimeUtils").DAY_SECONDS,a={maxRedeemCount:e,maxExpirySeconds:r};return o("WATimeUtils").happenedWithin(t.creationTs,a.maxExpirySeconds)?t.redeemCount>=a.maxRedeemCount?(o("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["The private stats token was redeemed maximum number of time. The client shall re-issue a new one"]))),!1):!0:(o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["The private stats token expired. The client shall re-issue a new one"]))),!1)};function R(){var e=g("getPrivateStatsToken");if(!e.redeemPrivateStatsToken)throw r("err")("redeemPrivateStatsToken not implemented for WAM DB");return e.redeemPrivateStatsToken(S)}function L(e){var t=g("savePrivateStatsToken");if(!t.savePrivateStatsToken)throw r("err")("savePrivateStatsToken not implemented for WAM DB");return t.savePrivateStatsToken(e)}function E(){var e=g("privateStatsKillSwitchGetBlockedToken");if(!e.privateStatsKillSwitchGetBlockedToken)throw r("err")("privateStatsKillSwitchGetBlockedToken not implemented for WAM DB");return e.privateStatsKillSwitchGetBlockedToken()}function k(e){var t=g("privateStatsKillSwitchSet");if(!t.privateStatsKillSwitchSet)throw r("err")("privateStatsKillSwitchSet not implemented for WAM DB");return t.privateStatsKillSwitchSet(e)}function I(e){return g("removeBufferByKey").removeBufferByKey(e)}function T(){return g("nukeMetrics").nukeMetrics()}l.startWamStorage=h,l.closeWamStorage=y,l.initializeWAMSink=C,l.getFinishedStreamBuffers=b,l.redeemPrivateStatsToken=R,l.savePrivateStatsToken=L,l.privateStatsKillSwitchGetBlockedToken=E,l.privateStatsKillSwitchSet=k,l.removeBufferByKey=I,l.nukeMetrics=T}),98);
__d("WAWebClientExposureGatingUtils",["WAWebABProps"],(function(t,n,r,o,a,i,l){"use strict";function e(){return o("WAWebABProps").getABPropConfigValue("enable_wefr_client_expo_pulse")}l.clientExposurePulseLoggingEnabled=e}),98);
__d("WAWebWamEnumAppBuildType",[],(function(t,n,r,o,a,i){var e=Object.freeze({DEBUG:1,ALPHA:2,BETA:3,RELEASE:4});i.APP_BUILD_TYPE=e}),66);
__d("WAWebWamEnumDeviceClassification",[],(function(t,n,r,o,a,i){var e=Object.freeze({MOBILE:0,TABLET:1,WEARABLES:2,VR:3,DESKTOP:4,FOLDABLE:5,AR_GLASS:6,WEARABLES_WHATSAPI:7,UNDEFINED:100});i.DEVICE_CLASSIFICATION=e}),66);
__d("WAWebWamEnumPlatformType",[],(function(t,n,r,o,a,i){var e=Object.freeze({IPHONE:1,ANDROID:2,BB:3,BBX:7,S40:4,SYMBIAN:5,WP:6,WEBCLIENT:8,OSMETA:11,ENT:12,SMBA:13,KAIOS:14,SMBI:15,WINDOWS:16,WEB:17,PORTAL:18,BLOKS:19,BLUEA:20,BLUEI:21,FBLITEA:22,GREENA:23,GREENI:24,IGDA:25,IGDI:26,IGLITEA:27,MLITEA:28,MSGRA:29,MSGRI:30,MSGRP:31,MSGRW:32,IGDW:33,PAGE:34,MSGRDM:35,MSGRDW:36,MSGROM:37,MSGROC:38,MSGRM:43,IGDM:44,WEARM:45,CAPI:46,XR:47,MACOS:48,WAMETA_REPL:49,ARDEV:50,WEAROS:51,MSGRVR:52,BLUEW:53,IPHONEWAMETATEST:54,MSGRAR:57,IPAD:58,WAVOIP_CLI:59,MSGRT:60,IGDT:61,ANDROIDWAMETATEST:62,MSGRSG:63,IGDSG:64,INTEROP:65,INTEROP_MSGR:66,IGDVR:67,WASG:68,BLUEVR:69,TEST:9,UNKNOWN:10});i.PLATFORM_TYPE=e}),66);
__d("WAWebWamEnumWebcEnvCode",[],(function(t,n,r,o,a,i){var e=Object.freeze({PROD:0,INTERN:1,DEV:2,E2E:3});i.WEBC_ENV_CODE=e}),66);
__d("WAWebWamEnumWebcWebPlatformType",[],(function(t,n,r,o,a,i){var e=Object.freeze({WEB:1,WIN32:2,DARWIN:3,IOS_TABLET:4,ANDROID_TABLET:5,WINSTORE:6,MACSTORE:7,DARWIN_BETA:8,WIN32_BETA:9,PWA:10,WIN_HYBRID:11});i.WEBC_WEB_PLATFORM_TYPE=e}),66);
__d("WAWebWamGlobals",["WAWebWamCodegenUtils","WAWebWamEnumAppBuildType","WAWebWamEnumDeviceClassification","WAWebWamEnumPlatformType","WAWebWamEnumWebcEnvCode","WAWebWamEnumWebcWebPlatformType"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineGlobal({abKey2:[4473,e.TYPES.STRING,["regular"]],appBuild:[1657,o("WAWebWamEnumAppBuildType").APP_BUILD_TYPE,["regular","private"]],appIsBetaRelease:[21,e.TYPES.BOOLEAN,["regular","private"]],appVersion:[17,e.TYPES.STRING,["regular","private"]],beaconSessionId:[18529,e.TYPES.INTEGER,["regular"]],browser:[779,e.TYPES.STRING,["regular"]],browserVersion:[295,e.TYPES.STRING,["regular"]],datacenter:[2795,e.TYPES.STRING,["regular"]],deviceClassification:[14507,o("WAWebWamEnumDeviceClassification").DEVICE_CLASSIFICATION,["regular"]],deviceName:[13,e.TYPES.STRING,["regular","private"]],deviceVersion:[4505,e.TYPES.STRING,["regular"]],expoKey:[5029,e.TYPES.STRING,["regular","private"]],isInCohort:[19129,e.TYPES.BOOLEAN,["regular"]],mcc:[5,e.TYPES.INTEGER,["regular","private"]],memClass:[655,e.TYPES.INTEGER,["regular","private"]],mnc:[3,e.TYPES.INTEGER,["regular","private"]],networkIsWifi:[23,e.TYPES.BOOLEAN,["regular"]],numCpu:[10317,e.TYPES.INTEGER,["regular"]],ocVersion:[6251,e.TYPES.INTEGER,["regular","private"]],osVersion:[15,e.TYPES.STRING,["regular","private"]],platform:[11,o("WAWebWamEnumPlatformType").PLATFORM_TYPE,["regular","private"]],psCountryCode:[6833,e.TYPES.STRING,["private"]],psId:[6005,e.TYPES.STRING,["private"]],serviceImprovementOptOut:[13293,e.TYPES.BOOLEAN,["regular","private"]],streamId:[3543,e.TYPES.INTEGER,["regular","private"]],wametaLoggerTestFilter:[15881,e.TYPES.STRING,["regular","private"]],webcBucket:[875,e.TYPES.STRING,["regular"]],webcEnv:[633,o("WAWebWamEnumWebcEnvCode").WEBC_ENV_CODE,["regular"]],webcNativeAutolaunch:[1009,e.TYPES.BOOLEAN,["regular"]],webcNativeBetaUpdates:[1007,e.TYPES.BOOLEAN,["regular"]],webcPhoneAppVersion:[1005,e.TYPES.STRING,["regular"]],webcPhoneCharging:[783,e.TYPES.BOOLEAN,["regular"]],webcPhoneDeviceManufacturer:[829,e.TYPES.STRING,["regular"]],webcPhoneDeviceModel:[831,e.TYPES.STRING,["regular"]],webcPhoneOsBuildNumber:[833,e.TYPES.STRING,["regular"]],webcPhoneOsVersion:[835,e.TYPES.STRING,["regular"]],webcPhonePlatform:[707,o("WAWebWamEnumPlatformType").PLATFORM_TYPE,["regular"]],webcRevision:[18491,e.TYPES.INTEGER,["regular"]],webcTabId:[3727,e.TYPES.STRING,["regular"]],webcWebArch:[6605,e.TYPES.STRING,["regular"]],webcWebDeviceManufacturer:[6599,e.TYPES.STRING,["regular"]],webcWebDeviceModel:[6601,e.TYPES.STRING,["regular"]],webcWebOsReleaseNumber:[6603,e.TYPES.STRING,["regular"]],webcWebPlatform:[899,o("WAWebWamEnumWebcWebPlatformType").WEBC_WEB_PLATFORM_TYPE,["regular","private"]],yearClass:[689,e.TYPES.INTEGER,["regular","private"]],yearClass2016:[2617,e.TYPES.INTEGER,["regular","private"]]}),u=[{key:"DefaultPsId",keyHashInt:113760892,rotationPeriodDays:-1},{key:"GroupExitExperienceId",keyHashInt:152546501,rotationPeriodDays:30},{key:"GroupSafetyCheckId",keyHashInt:216763284,rotationPeriodDays:30},{key:"IdPreMetrics",keyHashInt:56300709,rotationPeriodDays:-1},{key:"IdTtl90Days",keyHashInt:37887164,rotationPeriodDays:90},{key:"IdTtlDaily",keyHashInt:248614979,rotationPeriodDays:1},{key:"IdTtlMonthly",keyHashInt:191000728,rotationPeriodDays:30},{key:"IdTtlWeekly",keyHashInt:42196056,rotationPeriodDays:7}];l.Global=s,l.PrivateStatsAllIds=u}),98);
__d("WAWebWefrClientExposureWamEvent",["WAWebWamCodegenUtils"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({WefrClientExposure:[5504,{canonicalEntLastValidationTsMs:[8,e.TYPES.INTEGER],deviceExpId:[5,e.TYPES.STRING],exposureKey:[1,e.TYPES.STRING],guestId:[7,e.TYPES.STRING],isCanonicalEntPresent:[6,e.TYPES.BOOLEAN],sentWithDaily:[3,e.TYPES.BOOLEAN],userLid:[4,e.TYPES.INTEGER]},[1,1,1],"realtime"]},{WefrClientExposure:[]});l.WefrClientExposureWamEvent=s}),98);
__d("WAWebABPropsGlobals",["WAWebABProps","WAWebClientExposureGatingUtils","WAWebDebounce","WAWebNetworkStatus","WAWebWamGlobals","WAWebWefrClientExposureWamEvent","justknobx"],(function(t,n,r,o,a,i,l){var e=1e3,s=new Set,u=new Set,c="";function d(){if(o("WAWebABProps").getABPropConfigValue("wam_disable_expokey_attribute"))o("WAWebWamGlobals").Global.set({expoKey:null});else{var e=g();c!==e&&o("WAWebClientExposureGatingUtils").clientExposurePulseLoggingEnabled()&&(f(e),c=e),o("WAWebWamGlobals").Global.set({expoKey:e})}}function m(e){o("WAWebABProps").getABPropConfigValue("wam_disable_abkey_attribute")?o("WAWebWamGlobals").Global.set({abKey2:null}):e!=null&&o("WAWebWamGlobals").Global.set({abKey2:e})}function p(e){r("justknobx")._("1964")?r("WAWebNetworkStatus").waitIfOffline().then(function(){new(o("WAWebWefrClientExposureWamEvent")).WefrClientExposureWamEvent(e).commit()}):new(o("WAWebWefrClientExposureWamEvent")).WefrClientExposureWamEvent(e).commit()}function _(){if(o("WAWebClientExposureGatingUtils").clientExposurePulseLoggingEnabled()){var e=g();p({exposureKey:e,sentWithDaily:!0})}}var f=r("WAWebDebounce")(function(e){p({exposureKey:e,sentWithDaily:!1})},e);function g(){return Array.from(u).join(",")}l.CLIENT_EXPOSURE_PULSE_DEBOUNCE_MS=e,l.accessedConfigs=s,l.exposureKeys=u,l.updateGlobalExpoKey=d,l.updateGlobalABKey=m,l.logClientExposurePulseEventFromDailyStatsTask=_,l.combineExposuresIntoExpoKey=g}),98);
__d("WAWebApiAbPropConfig",["Promise","WALogger","WAWebABPropsConfigs","WAWebABPropsGlobals","WAWebModelStorageInitialize","WAWebModelStorageUtils","WAWebSchemaAbPropConfig","asyncToGeneratorRuntime","cr:21223","err"],(function(t,n,r,o,a,i,l){var e,s,u;function c(){return o("WAWebModelStorageInitialize").initializeWithoutGKs().then(function(){return o("WAWebSchemaAbPropConfig").getAbpropConfigsTable().all().then(function(e){return e})})}function d(e,t,n){return e==null||t==null?n:t==="bool"?e==="1"||e==="True"||e==="true":t==="int"?parseInt(e,10):t==="float"?parseFloat(e):e}function m(t){var a=o("WAWebABPropsConfigs").ABPropConfigs[t];if(a==null)return o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["invalid ABProps config name"]))).verbose().sendLogs("invalid ABProps config name: "+t),(u||(u=n("Promise"))).reject(r("err")("invalid ABProps config name"));var i=a[0],l=a[1],s=a[2],c=a[3],m=s;return o("WAWebModelStorageInitialize").initializeWithoutGKs().then(function(){return o("WAWebSchemaAbPropConfig").getAbpropConfigsTable().get(String(i)).then(function(e){var t=e?d(e.configValue,l,m):m;return t})})}function p(e,t){return o("WAWebModelStorageUtils").getStorage().lock(["abpropConfigs"],(function(){var r=n("asyncToGeneratorRuntime").asyncToGenerator(function*(n){var r=n[0],a=yield r.all(),i=new Map;a.forEach(function(e){(e.configExpoKey!=null||e.overriddenConfigValue!=null)&&i.set(e.configCode,{configCode:e.configCode,configValue:e.configValue,configExpoKey:e.configExpoKey,hasAccessed:e.hasAccessed,overriddenConfigValue:e.overriddenConfigValue})});var l=!1,s=[];return e.forEach(function(e,t){var n=!1,r=i.get(String(t));if(r){var a=r.configExpoKey;a!=null&&e.configExpoKey!==a?(o("WAWebABPropsGlobals").exposureKeys.delete(a),l=!0,o("WAWebABPropsGlobals").accessedConfigs.delete(t)):a!=null&&(n=r.hasAccessed)}s.push({configCode:String(t),configValue:e.configValue,configExpoKey:e.configExpoKey,hasAccessed:n,overriddenConfigValue:r==null?void 0:r.overriddenConfigValue})}),l&&o("WAWebABPropsGlobals").updateGlobalExpoKey(),t?yield r.bulkCreateOrReplace(s):(yield r.clear(),yield r.bulkCreate(s)),a});return function(e){return r.apply(this,arguments)}})()).then((function(){var r=n("asyncToGeneratorRuntime").asyncToGenerator(function*(r){if(n("cr:21223")&&!t)try{yield n("cr:21223")==null?void 0:n("cr:21223").processAbpropChangelog(r,e)}catch(e){o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Failed to record ABProp diff ",""])),e)}});return function(e){return r.apply(this,arguments)}})())}function _(e){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield o("WAWebSchemaAbPropConfig").getAbpropConfigsTable().get(String(e));t==null||(t==null?void 0:t.hasAccessed)===!0||(yield o("WAWebSchemaAbPropConfig").getAbpropConfigsTable().merge(String(e),{hasAccessed:!0}))}),f.apply(this,arguments)}l.getABPropConfigs=c,l.parseConfigValue=d,l.getConfigValue=m,l.updateABPropConfigs=p,l.setConfigAccessed=_}),98);
__d("WAWebABPropsCache",["WALogger","WAResolvable","WAWebABProps","WAWebABPropsConfigs","WAWebABPropsGlobals","WAWebApiAbPropConfig","WAWebRuntimeEnvironmentUtils","cr:4941","gkx"],(function(t,n,r,o,a,i,l){var e,s=new Map,u=new(o("WAResolvable")).Resolvable,c;function d(e){return c==null&&(c={},Object.keys(o("WAWebABPropsConfigs").ABPropConfigs).forEach(function(e){var t=o("WAWebABPropsConfigs").ABPropConfigs[e],n=t[0];c[n]=e}),Object.freeze(c)),c[e]}function m(){o("WAWebABProps").setGetABPropConfigValueImpl(p)}function p(t){var a=o("WAWebABPropsConfigs").ABPropConfigs[t],i=a[0],l=a[1],s=a[2],c=a[3],d=s;if(!r("gkx")("26258")&&!o("WAWebRuntimeEnvironmentUtils").isWorker()&&n("cr:4941")){var m=new(n("cr:4941"))(window.location.search),p=m.get(t);if(p!=null&&p!=="")return o("WAWebApiAbPropConfig").parseConfigValue(p,l,d)}return u.resolveWasCalled()?f(i):(o("WAWebABProps").usedBeforeInitializationConfigs.includes(t)||o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[abprops] configs need to be initialized before its first access, config name: ",""])),t),d)}function _(e){if(s.get(e)&&!o("WAWebABPropsGlobals").accessedConfigs.has(e)){var t,n=(t=s.get(e))==null?void 0:t.configExpoKey;n!=null&&!o("WAWebABPropsGlobals").exposureKeys.has(n)&&(o("WAWebABPropsGlobals").exposureKeys.add(n),o("WAWebABPropsGlobals").updateGlobalExpoKey()),o("WAWebABPropsGlobals").accessedConfigs.add(e),self.setTimeout(function(){return o("WAWebApiAbPropConfig").setConfigAccessed(e)},0)}}function f(e){_(e);var t=s.get(e);return!r("gkx")("26258")&&(t==null?void 0:t.overriddenConfigValue)!=null?t.overriddenConfigValue:t==null?void 0:t.configValue}function g(){return Array.from(s.values())}function h(){return s}function y(e){var t=!1;e.forEach(function(e){s.set(e.configCode,e),e.hasAccessed===!0&&(o("WAWebABPropsGlobals").accessedConfigs.add(e.configCode),e.configExpoKey!=null&&(o("WAWebABPropsGlobals").exposureKeys.add(e.configExpoKey),t=!0))}),t&&o("WAWebABPropsGlobals").updateGlobalExpoKey(),u.resolve()}function C(){return u.promise}function b(){s.clear(),o("WAWebABPropsGlobals").accessedConfigs.clear(),o("WAWebABPropsGlobals").exposureKeys.clear(),u=new(o("WAResolvable")).Resolvable}l.getABPropConfigNameFromCode=d,l.initializeABPropsCache=m,l.saveExposure=_,l.getAllABPropConfigs=g,l.getAllABPropsMap=h,l.bulkCreateOrReplaceABPropConfigs=y,l.waitForABPropConfigsReady=C,l.clearABPropConfigs=b}),98);
__d("WAWebABPropsUpdateFromStorage",["WALogger","WAWebABPropsCache","WAWebABPropsConfigs","WAWebABPropsGlobals","WAWebApiAbPropConfig","WAWebUserPrefsGeneral","asyncToGeneratorRuntime","gkx"],(function(t,n,r,o,a,i,l){var e,s,u,c;function d(){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var t=!1,n=t;if(!r("gkx")("26258")){var a=yield o("WAWebUserPrefsGeneral").getWhatsAppWebExternalBetaJoinedIdb();r("gkx")("26259")&&a?(o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[abprops][intern] Web Beta joined, using DEBUG default AB prop values"]))),n=!0):t&&a&&(o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[abprops][dev] Web Beta joined, using NON-DEBUG default AB prop values (to simulate intern env)"]))),n=!1)}var i=yield o("WAWebApiAbPropConfig").getABPropConfigs(),l=i.map(function(e){var t=o("WAWebABPropsCache").getABPropConfigNameFromCode(Number(e.configCode));if(t==null)o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[abprops] ABProp (code: ",") exists in storage but no longer available for this client version"])),e.configCode);else{var a=o("WAWebABPropsConfigs").ABPropConfigs[t],i=a[0],l=a[1],s=a[2],c=a[3],d=n?c:s,m=o("WAWebApiAbPropConfig").parseConfigValue(e.configValue,l,d),p;return!r("gkx")("26258")&&e.overriddenConfigValue!=null&&(p=o("WAWebApiAbPropConfig").parseConfigValue(e.overriddenConfigValue,l,d)),{configCode:i,configValue:m,configExpoKey:e.configExpoKey,hasAccessed:e.hasAccessed,overriddenConfigValue:p}}}).filter(Boolean);o("WAWebABPropsCache").bulkCreateOrReplaceABPropConfigs(l),o("WAWebABPropsGlobals").updateGlobalExpoKey(),o("WAWebABPropsGlobals").updateGlobalABKey()}catch(e){o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[abprops] Failed to update ABProps configs cache from storage: ",""])),e).verbose().sendLogs("[abprops] Failed to update ABProps configs cache from storage: "+e)}}),m.apply(this,arguments)}l.updateABPropsFromStorage=d}),98);
__d("WAWebABPropsWamGlobals",["WAWebABProps","WAWebWamGlobals"],(function(t,n,r,o,a,i,l){function e(){o("WAWebWamGlobals").Global.set({serviceImprovementOptOut:o("WAWebABProps").getABPropConfigValue("service_improvement_opt_out_flag")})}l.setAbPropDependingGlobalWamAttributes=e}),98);
__d("WAWebAbPropsParsingJob",["WAWebABPropsConfigs"],(function(t,n,r,o,a,i,l){function e(e,t){var n=new Map;e.forEach(function(e){var t=e.configCode,r=e.configValue,o=e.configExpoKey;n.set(t,{configValue:r,configExpoKey:o})});var r=new Map;return Object.keys(o("WAWebABPropsConfigs").ABPropConfigs).map(function(e){var a=o("WAWebABPropsConfigs").ABPropConfigs[e][0],i=n.get(a);if(!(i==null&&t)){var l=i==null?void 0:i.configValue,s=i==null?void 0:i.configExpoKey;r.set(a,{configValue:l,configExpoKey:s==null?null:s.toString()})}}),r}l.parseABProps=e}),98);
__d("WAWebApiAbPropEventSamplingConfig",["Promise","WAWebModelStorageInitialize","WAWebModelStorageUtils","WAWebSchemaAbPropEventSamplingConfig"],(function(t,n,r,o,a,i,l){var e;function s(){return o("WAWebModelStorageInitialize").initializeWithoutGKs().then(function(){return o("WAWebSchemaAbPropEventSamplingConfig").getAbpropEventSamplingConfigsTable().all().then(function(e){return e})})}function u(e){return o("WAWebModelStorageInitialize").initializeWithoutGKs().then(function(){return o("WAWebSchemaAbPropEventSamplingConfig").getAbpropEventSamplingConfigsTable().get(e).then(function(e){return e==null?void 0:e.samplingWeight})})}function c(t){if(t==null||t.length===0)return(e||(e=n("Promise"))).resolve(!1);var r=[];return t.forEach(function(e){r.push({eventCode:e.eventCode,samplingWeight:e.samplingWeight})}),o("WAWebModelStorageUtils").getStorage().lock(["abprop-event-sampling-configs"],function(e){var t=e[0];return t.clear().then(function(){return t.bulkCreate(r).then(function(){return!0})})})}l.getEventSamplingConfigs=s,l.getEventSamplingWeight=u,l.updateEventSamplingConfigs=c}),98);
__d("WAWebEncryptedRid",["WABase64","WAWebUserPrefsIndexedDBStorage","WAWebUserPrefsMultiDevice"],(function(t,n,r,o,a,i,l){function e(e){return o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set("WAWebEncryptedRid",o("WABase64").encodeB64(e))}function s(){return o("WAWebUserPrefsMultiDevice").isRegistered()?o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get("WAWebEncryptedRid"):null}l.setEncryptedRid=e,l.getEncryptedRid=s}),98);
__d("WAWebEventSampling",["WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s=null;function u(e){return s==null?null:s(e)}function c(t){var n=u(t);return n!=null?(o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[EventSampling] override event sampling weight for ",": ",""])),t,n),Math.abs(n)):null}function d(e){s=e}l.getClientEventSamplingWeight=c,l.setGetEventSamplingConfigValueImpl=d}),98);
__d("WAWebEventSamplingCache",["WAWebApiAbPropEventSamplingConfig","WAWebEventSampling","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e=new Map,s=!1;function u(t){return s?e.get(t):null}function c(){o("WAWebEventSampling").setGetEventSamplingConfigValueImpl(u)}function d(){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=yield o("WAWebApiAbPropEventSamplingConfig").getEventSamplingConfigs();t.forEach(function(t){e.set(t.eventCode,t.samplingWeight)}),s=!0}),m.apply(this,arguments)}l.initializeEventSamplingCache=c,l.updateEventSamplingFromStorage=d}),98);
__d("WAWebStoreSpecialAbProps",["WALogger","WAWebABProps","WAWebLocalStorage","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s=["wa_web_favicons_update_m1","web_ui_refresh_m1","web_retry_quota_exceeded_idb_writes"],u="abprops_needed_early";function c(){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var t=s.reduce(function(e,t){var n=o("WAWebABProps").getABPropConfigValue(t);return n!=null&&(e[t]=n),e},{});r("WAWebLocalStorage")==null||r("WAWebLocalStorage").setItem(u,JSON.stringify(t))}catch(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Failed to store special early abprops"]))).sendLogs(t)}}),d.apply(this,arguments)}l.storeSpecialAbProps=c}),98);
__d("WAWebUserPrefsAppStateSync",["WAWebUserPrefsIndexedDBStorage","WAWebUserPrefsKeys","WAWebUserPrefsStore","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){return yield o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(o("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.CRITICAL_DATA_SYNCED,!0),r("WAWebUserPrefsStore").set(o("WAWebUserPrefsKeys").MD_KEYS.CRITICAL_DATA_SYNCED,!0)}),s.apply(this,arguments)}function u(){var e=o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(o("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.CRITICAL_DATA_SYNCED);return e===!0}function c(e){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){return yield o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(o("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.LAST_PERIODIC_APP_STATE_SYNC_TS,e),r("WAWebUserPrefsStore").set(o("WAWebUserPrefsKeys").MD_KEYS.LAST_PERIODIC_APP_STATE_SYNC_TS,e)}),d.apply(this,arguments)}function m(){var e=o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(o("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.RECENT_MAILBOX_AGE_DAYS);return e}function p(){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){return yield o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(o("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.SHOULD_CHECK_CONTACT_SYNC_STATUS,!0),r("WAWebUserPrefsStore").set(o("WAWebUserPrefsKeys").MD_KEYS.SHOULD_CHECK_CONTACT_SYNC_STATUS,!0)}),_.apply(this,arguments)}function f(){var e=o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(o("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.MD_SYNC_ACTIONS_ACTION_SANITIZED);return e===!0}function g(e){return h.apply(this,arguments)}function h(){return h=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){yield o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(o("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.MD_SYNC_ACTIONS_ACTION_SANITIZED,e),r("WAWebUserPrefsStore").set(o("WAWebUserPrefsKeys").MD_KEYS.MD_SYNC_ACTIONS_ACTION_SANITIZED,e)}),h.apply(this,arguments)}function y(){return r("WAWebUserPrefsStore").set(o("WAWebUserPrefsKeys").MD_KEYS.SYNCD_PRIMARY_ALLOWS_ALL_MUTATIONS,!0)}function C(){return!!r("WAWebUserPrefsStore").get(o("WAWebUserPrefsKeys").MD_KEYS.SYNCD_PRIMARY_ALLOWS_ALL_MUTATIONS)}function b(){return o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(o("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.NON_CRITICAL_DATA_SYNC_STATUS)}function v(e){return S.apply(this,arguments)}function S(){return S=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,n=(t=yield b())!=null?t:{};yield o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(o("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.NON_CRITICAL_DATA_SYNC_STATUS,babelHelpers.extends({},n,e))}),S.apply(this,arguments)}l.setAllCriticalDataSynced=e,l.getAllCriticalDataSynced=u,l.setLastPeriodicAppStateSyncTs=c,l.getLastPeriodicAppStateSyncTs=m,l.setShouldCheckContactSyncStatus=p,l.getMdSyncActionsActionSanitized=f,l.setMdSyncActionsActionSanitized=g,l.setPrimaryAllowsAllMutations=y,l.getPrimaryAllowsAllMutations=C,l.getNonCriticalDataSyncStatus=b,l.setNonCriticalDataSyncStatus=v}),98);
__d("WAWebUserPrefsUiRefresh",["WALogger","WAWebUserPrefsKeys","WAWebUserPrefsStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e){r("WAWebUserPrefsStore").set(o("WAWebUserPrefsKeys").UserPrefs.WebUiRefreshNuxAcknowledged,e)}function d(){return r("WAWebUserPrefsStore").get(o("WAWebUserPrefsKeys").UserPrefs.WebUiRefreshNuxAcknowledged)===!0}function m(){var t=p();r("WAWebUserPrefsStore").set(o("WAWebUserPrefsKeys").UserPrefs.WebUiRefreshNuxViewsCount,t+1),o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[ui-refresh] Incremented nux view count: "," -> ",""])),t,t+1)}function p(){var e=r("WAWebUserPrefsStore").get(o("WAWebUserPrefsKeys").UserPrefs.WebUiRefreshNuxViewsCount);if(e==null)return 0;var t=parseInt(e,10);return isNaN(t)||t<0?(o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[ui-refresh] Invalid nux view count - returning 0"]))),0):t}function _(){r("WAWebUserPrefsStore").set(o("WAWebUserPrefsKeys").UserPrefs.WebUiRefreshNuxViewsCount,0),o("WALogger").DEV(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[ui-refresh] Reset nux view count to 0"])))}l.setUiRefreshNuxAcked=c,l.getUiRefreshNuxAcked=d,l.incrementNuxViewCount=m,l.getNuxViewCount=p,l.resetNuxViewCount=_}),98);
__d("WAWebSyncOnABProps",["WALogger","WAWebABProps","WAWebABPropsWamGlobals","WAWebProtobufsE2E.pb","WAWebStoreSpecialAbProps","WAWebUserPrefsAppStateSync","WAWebUserPrefsCTWA","WAWebUserPrefsTypes","WAWebUserPrefsUiRefresh","asyncToGeneratorRuntime","cr:254"],(function(t,n,r,o,a,i,l){var e,s,u=(e=n("cr:254"))!=null?e:{},c=u.sendPeerDataOperationRequest;function d(e){e!==o("WAWebABProps").getABPropConfigValue("service_improvement_opt_out_flag")&&o("WAWebABPropsWamGlobals").setAbPropDependingGlobalWamAttributes()}function m(){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield o("WAWebUserPrefsAppStateSync").getNonCriticalDataSyncStatus();(e==null?void 0:e[o("WAWebUserPrefsTypes").NonCriticalDataSyncStatusType.RECENT_STICKER_INITIALIZED])===o("WAWebUserPrefsTypes").RecentStickerInitializedStatusType.NEED_REQUEST_BOOTSTRAP&&(o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Recent Stickers: request peer message for recent sticker bootstrap."]))),yield c==null?void 0:c(o("WAWebProtobufsE2E.pb").Message$PeerDataOperationRequestType.SEND_RECENT_STICKER_BOOTSTRAP,{}))}),p.apply(this,arguments)}function _(e){var t=o("WAWebABProps").getABPropConfigValue("ctwa_ad_account_token_storage_kill_switch_web");t===!0&&e===!1&&o("WAWebUserPrefsCTWA").clearAdAccountToken()}function f(e){var t=o("WAWebABProps").getABPropConfigValue("web_ui_refresh_m1");e===!0&&t===!1&&(o("WAWebUserPrefsUiRefresh").resetNuxViewCount(),o("WAWebUserPrefsUiRefresh").setUiRefreshNuxAcked(!1),o("WAWebStoreSpecialAbProps").storeSpecialAbProps())}l.handleServiceImprovementOptOutFlagABPropConfigValueChange=d,l.ensureNonCriticalDataSyncIsInitialized=m,l.handleAdAccountTokenStorageKillSwitchABPropConfigValueChange=_,l.handleUIRefreshNuxOnABPropConfigValueChange=f}),98);
__d("WAWebAbPropsSyncJob",["Promise","WAGetAbPropsProtocol","WALogger","WAPromiseDelays","WAWebABProps","WAWebABPropsGlobals","WAWebABPropsLocalStorage","WAWebABPropsUpdateFromStorage","WAWebAbPropsParsingJob","WAWebApiAbPropConfig","WAWebApiAbPropEventSamplingConfig","WAWebCmd","WAWebEncryptedRid","WAWebEventSamplingCache","WAWebSyncOnABProps","WAWebWorkerSafeBackendApi","asyncToGeneratorRuntime","justknobx"],(function(t,n,r,o,a,i,l){var e,s,u,c,d;o("WAWebCmd").Cmd.on("on_ab_props_update",(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,n=e.partialPreviousABPropsValues,r=e.isInitialSync,a=n.service_improvement_opt_out_flag,i=n.ctwa_ad_account_token_storage_kill_switch_web,l=n.web_ui_refresh_m1;yield(t=o("WAWebSyncOnABProps")).ensureNonCriticalDataSyncIsInitialized(),t.handleServiceImprovementOptOutFlagABPropConfigValueChange(a),t.handleAdAccountTokenStorageKillSwitchABPropConfigValueChange(i),t.handleUIRefreshNuxOnABPropConfigValueChange(l),r&&(yield o("WAWebWorkerSafeBackendApi").workerSafeSendAndReceive("checkOrphanFavoriteStickers"))});return function(t){return e.apply(this,arguments)}})());var m={shouldSendHash:!0};function p(e){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var a=t.shouldSendHash,i=t.localRefreshId,l=r("justknobx")._("3330")&&i!=null,c=l?{propsRefreshId:i}:{propsHash:a?o("WAWebABPropsLocalStorage").getHash():void 0},m=yield o("WAGetAbPropsProtocol").getAbPropsProtocol(c);if(!m.success)return!1;var p=m.value,_=p.abKey,f=p.hash,g=p.refresh,h=p.refreshId,y=p.props,C=p.samplingConfigs,b=p.erid,v=p.isDeltaUpdate,S=b==null?(d||(d=n("Promise"))).resolve():o("WAWebEncryptedRid").setEncryptedRid(b);if(v&&!l?o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["syncABProps: received delta update response without responding to emergency push request"]))).sendLogs("abprops-requested-regular-received-delta"):!v&&l&&o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["syncABProps: received regular update response when responding to emergency push request"]))),!v){o("WAWebABPropsGlobals").updateGlobalABKey(_!=null?_:"");var R=Date.now();o("WAWebABPropsLocalStorage").updateAttributesLocalStorage(_,f,g,R)}if(h!=null&&o("WAWebABPropsLocalStorage").setRefreshId(h),f==null&&!v)return!1;try{return yield(d||(d=n("Promise"))).all([!v&&o("WAWebApiAbPropEventSamplingConfig").updateEventSamplingConfigs(C),o("WAWebApiAbPropConfig").updateABPropConfigs(o("WAWebAbPropsParsingJob").parseABProps(y,v),v),S]),!0}catch(e){o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["update ABProps config table failed"]))).verbose().devConsole(e).sendLogs("update ABProps config table failed when syncing ABProps")}return!1}),_.apply(this,arguments)}function f(e){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){for(var t=o("WAWebABPropsLocalStorage").isABPropsAfterFirstSync(),r=3;r-- >0;)try{var a,i={service_improvement_opt_out_flag:(a=o("WAWebABProps")).getABPropConfigValue("service_improvement_opt_out_flag"),ctwa_ad_account_token_storage_kill_switch_web:a.getABPropConfigValue("ctwa_ad_account_token_storage_kill_switch_web"),web_ui_refresh_m1:a.getABPropConfigValue("web_ui_refresh_m1"),single_e2ee_session_migration_state_outgoing:a.getABPropConfigValue("single_e2ee_session_migration_state_outgoing")},l=e?babelHelpers.extends({},e):babelHelpers.extends({},m);l.localRefreshId==null&&(l.shouldSendHash=t&&l.shouldSendHash!==!1);var s=yield p(l);if(s){yield(d||(d=n("Promise"))).all([o("WAWebABPropsUpdateFromStorage").updateABPropsFromStorage(),o("WAWebEventSamplingCache").updateEventSamplingFromStorage()]),o("WAWebCmd").Cmd.onAbPropsUpdate({partialPreviousABPropsValues:i,isInitialSync:!t});return}}catch(e){r===0&&o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["failed to sync ABProps"]))).verbose().devConsole(e).sendLogs("failed to sync ABProps"),yield o("WAPromiseDelays").delayMs(10*1e3*Math.random())}}),g.apply(this,arguments)}l.syncABProps=p,l.syncABPropsTask=f}),98);
__d("WAWebAiThreadCreationUtils",["WAWebAiThreadTypeUtils","WAWebBotUtils","WAWebMsgKey","WAWebPonyfillsCryptoRandomUUID","WAWebThreadId","WAWebThreadUtils"],(function(t,n,r,o,a,i,l){"use strict";var e="38e75a8e-6bc8-cf82-ab85-73799b39acd9",s={aiThreadType:o("WAWebAiThreadTypeUtils").AiThreadType.Default,title:void 0};function u(){return new(r("WAWebThreadId"))({key:new(r("WAWebMsgKey"))({fromMe:!0,id:e,remote:o("WAWebBotUtils").META_BOT_PN_WID}),type:o("WAWebThreadUtils").ThreadType.AiThread})}function c(e){var t=r("WAWebPonyfillsCryptoRandomUUID")(),n=new(r("WAWebMsgKey"))({fromMe:!0,remote:e,id:t});return new(r("WAWebThreadId"))({key:n,type:o("WAWebThreadUtils").ThreadType.AiThread})}function d(e,t){var n=new(r("WAWebMsgKey"))({fromMe:!0,remote:e,id:t});return new(r("WAWebThreadId"))({key:n,type:o("WAWebThreadUtils").ThreadType.AiThread})}l.HISTORICAL_META_AI_THREAD_INFO=s,l.getHistoricalMetaAiThreadId=u,l.createAiThreadId=c,l.createAiThreadFromMutationIndex=d}),98);
__d("WAWebAlphaRegex",[],(function(t,n,r,o,a,i){var e=new RegExp("[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]");i.default=e}),66);
__d("WAWebWamEnumClientGroupSizeBucket",[],(function(t,n,r,o,a,i){var e=Object.freeze({SMALL:1,MEDIUM:2,LARGE:3,EXTRA_LARGE:4,XX_LARGE:5,XXX_LARGE:6,LT1024:16,LT1500:7,LT2000:8,LT2500:9,LT3000:10,LT3500:11,LT4000:12,LT4500:13,LT5000:14,LARGEST_BUCKET:15});i.CLIENT_GROUP_SIZE_BUCKET=e}),66);
__d("WAWebWamEnumClientMessageSendStage",[],(function(t,n,r,o,a,i){var e=Object.freeze({CLIENT_RENDERED:1,CLIENT_SAVED:2,CLIENT_WRITTEN_WIRE:3,CLIENT_QUEUED:4,CLIENT_WAITING_TO_ENCRYPT:5,CLIENT_READY_TO_SEND:6,CLIENT_ENCRYPT:7,CLIENT_PREKEYS_FETCH:8});i.CLIENT_MESSAGE_SEND_STAGE=e}),66);
__d("WAWebAndroidMessageSendPerfWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumAgentEngagementEnumType","WAWebWamEnumBotType","WAWebWamEnumClientGroupSizeBucket","WAWebWamEnumClientMessageSendStage","WAWebWamEnumEditType","WAWebWamEnumInvisibleMessageCategoryType","WAWebWamEnumMediaType","WAWebWamEnumMessageType","WAWebWamEnumSizeBucket","WAWebWamEnumTypeOfGroupEnum"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({AndroidMessageSendPerf:[1994,{agentEngagementType:[47,o("WAWebWamEnumAgentEngagementEnumType").AGENT_ENGAGEMENT_ENUM_TYPE],appRestart:[16,e.TYPES.BOOLEAN],botType:[48,o("WAWebWamEnumBotType").BOT_TYPE],bucketedSenderKeyDistributionCountPercentage:[32,e.TYPES.INTEGER],bucketedSenderKeyDistributionHashTime:[35,e.TYPES.INTEGER],deviceCount:[36,e.TYPES.INTEGER],deviceSizeBucket:[26,o("WAWebWamEnumSizeBucket").SIZE_BUCKET],durationAbs:[11,e.TYPES.TIMER],durationRelative:[12,e.TYPES.TIMER],durationT:[1,e.TYPES.TIMER],editType:[42,o("WAWebWamEnumEditType").EDIT_TYPE],fetchPrekeys:[15,e.TYPES.BOOLEAN],fetchPrekeysPercentage:[21,e.TYPES.INTEGER],groupSizeBucket:[17,o("WAWebWamEnumClientGroupSizeBucket").CLIENT_GROUP_SIZE_BUCKET],invisibleMessageCategory:[45,o("WAWebWamEnumInvisibleMessageCategoryType").INVISIBLE_MESSAGE_CATEGORY_TYPE],isDirectedMessage:[33,e.TYPES.BOOLEAN],isE2eBackfill:[27,e.TYPES.BOOLEAN],isLid:[41,e.TYPES.BOOLEAN],isMessageFanout:[9,e.TYPES.BOOLEAN],isMessageForward:[8,e.TYPES.BOOLEAN],isPq:[49,e.TYPES.BOOLEAN],isRevokeMessage:[24,e.TYPES.BOOLEAN],isViewOnce:[29,e.TYPES.BOOLEAN],jobsInQueue:[18,e.TYPES.INTEGER],mediaType:[3,o("WAWebWamEnumMediaType").MEDIA_TYPE],messageIsFirstUserMessage:[30,e.TYPES.BOOLEAN],messageIsInvisible:[31,e.TYPES.BOOLEAN],messageType:[4,o("WAWebWamEnumMessageType").MESSAGE_TYPE],networkWasDisconnected:[14,e.TYPES.BOOLEAN],participantCount:[37,e.TYPES.INTEGER],phoneCores:[34,e.TYPES.INTEGER],prekeysEligibleForPrallelProcessing:[28,e.TYPES.BOOLEAN],receiverDeviceCount:[39,e.TYPES.INTEGER],runningTasks:[44,e.TYPES.STRING],sendCount:[13,e.TYPES.INTEGER],sendRetryCount:[10,e.TYPES.INTEGER],sendStage:[2,o("WAWebWamEnumClientMessageSendStage").CLIENT_MESSAGE_SEND_STAGE],senderDeviceCount:[40,e.TYPES.INTEGER],senderKeyDistributionCountPercentage:[23,e.TYPES.INTEGER],sessionsMissingWhenComposing:[25,e.TYPES.BOOLEAN],targetDeviceGroupSizeBucket:[20,o("WAWebWamEnumClientGroupSizeBucket").CLIENT_GROUP_SIZE_BUCKET],threadsInExecution:[19,e.TYPES.INTEGER],typeOfGroup:[38,o("WAWebWamEnumTypeOfGroupEnum").TYPE_OF_GROUP_ENUM],userToDeviceSizeBucket:[46,e.TYPES.STRING]},[1,1,2e3],"regular"]},{AndroidMessageSendPerf:[]});l.AndroidMessageSendPerfWamEvent=s}),98);
__d("WAWebApiBusinessProfile",["invariant","Promise","WALogger","WAWebBizGatingUtils","WAWebBotTypes","WAWebLidMigrationUtils","WAWebSchemaBusinessProfile","WAWebWidFactory","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l,s){var e,u,c,d,m;function p(e){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){return o("WAWebSchemaBusinessProfile").getBusinessProfileTable().get(e)}),_.apply(this,arguments)}function f(e){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=o("WAWebWidFactory").createWid(e);t.isLid()||s(0,86986);var n=yield p(e);if(n==null){var r=o("WAWebLidMigrationUtils").toPn(t);if(r!=null){var a=r.toString(),i=yield p(a);if(i!=null)return babelHelpers.extends({},i,{id:e})}}return n}),g.apply(this,arguments)}function h(e){return y.apply(this,arguments)}function y(){return y=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=o("WAWebWidFactory").createWid(e),n=o("WAWebLidMigrationUtils").toLid(t);if(n!=null){var r=yield p(n.toString());if(r!=null)return babelHelpers.extends({},r,{id:e})}return p(e)}),y.apply(this,arguments)}function C(e){return b.apply(this,arguments)}function b(){return b=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){return o("WAWebBizGatingUtils").isLidMigrationForBusinessProfileEnabled()?o("WAWebWidFactory").createWid(e).isLid()?f(e):h(e):p(e)}),b.apply(this,arguments)}function v(e){return S.apply(this,arguments)}function S(){return S=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield p(e);return t?N(t):null}),S.apply(this,arguments)}function R(e){return L.apply(this,arguments)}function L(){return L=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield v(e);if(t==null){var n=o("WAWebWidFactory").createWid(e),r=o("WAWebLidMigrationUtils").toPn(n);if(r!=null){var a=yield v(r.toString());if(a!=null)return babelHelpers.extends({},a,{id:n})}}return t}),L.apply(this,arguments)}function E(e){return k.apply(this,arguments)}function k(){return k=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=o("WAWebWidFactory").createWid(e),n=o("WAWebLidMigrationUtils").toLid(t);if(n!=null){var r=yield v(n.toString());if(r!=null)return babelHelpers.extends({},r,{id:t})}return v(e)}),k.apply(this,arguments)}function I(e){return T.apply(this,arguments)}function T(){return T=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){if(!o("WAWebBizGatingUtils").isLidMigrationForBusinessProfileEnabled())return v(e);var t=o("WAWebWidFactory").createWid(e);return t.isLid()?R(e):E(e)}),T.apply(this,arguments)}function D(e){return x.apply(this,arguments)}function x(){return x=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=M(e);yield o("WAWebSchemaBusinessProfile").getBusinessProfileTable().createOrMerge(t.id,t)}),x.apply(this,arguments)}function $(e){return P.apply(this,arguments)}function P(){return P=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.id,r=o("WAWebBizGatingUtils").isLidMigrationForBusinessProfileEnabled()?o("WAWebLidMigrationUtils").getPnAndLidToUpdate(t):[t];return(m||(m=n("Promise"))).all(r.map(function(t){return D(babelHelpers.extends({},e,{id:t}))}))}),P.apply(this,arguments)}function N(t){var n=t.commandsDescription,r=o("WAWebWidFactory").createWid(t.id),a=o("WAWebBotTypes").BizBotAutomatedType.cast(t.automatedType),i=o("WAWebBotTypes").BotWelcomeMsgProtocolModeType.cast(t.welcomeMsgProtocolMode),l;if(t.prompts!=null)try{l=JSON.parse(t.prompts),Array.isArray(l)||(l=null,o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["businessProfileFromDbRow: prompts are not an array"]))).sendLogs("businessProfileFromDbRow: prompts are not an array"))}catch(e){o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["businessProfileFromDbRow: prompts parsing failed"]))).sendLogs("businessProfileFromDbRow: prompts parsing failed")}var s;if(t.commands!=null)try{s=JSON.parse(t.commands),Array.isArray(s)||(s=null,o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["businessProfileFromDbRow: commands are not an array"]))).sendLogs("businessProfileFromDbRow: commands are not an array"))}catch(e){o("WALogger").ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["businessProfileFromDbRow: commands parsing failed"]))).sendLogs("businessProfileFromDbRow: commands parsing failed")}return{id:r,automatedType:a,welcomeMsgProtocolMode:i,prompts:l,commands:s,commandsDescription:n}}function M(e){var t=e.commandsDescription,n=e.id.toString(),r;e.automatedType&&(r=e.automatedType);var o;e.welcomeMsgProtocolMode&&(o=e.welcomeMsgProtocolMode);var a=e.prompts?JSON.stringify(e.prompts):void 0,i=e.commands?JSON.stringify(e.commands):void 0;return{id:n,automatedType:r,welcomeMsgProtocolMode:o,prompts:a,commandsDescription:t,commands:i}}l.getBusinessProfileRow=p,l.getBusinessProfileRowLidAware=C,l.getBusinessProfileRecord=v,l.getBusinessProfileRecordLidAware=I,l.createOrMergeBusinessProfileRecordLidAware=$,l.businessProfileFromDbRow=N}),98);
__d("WAWebWorkerStorageUtils",["invariant","Promise","WAWebIdb","WAWebStorage","err"],(function(t,n,r,o,a,i,l,s){var e,u="worker-storage",c=null;function d(){var e=new(r("WAWebIdb"))(u);c=new(o("WAWebStorage")).Storage(e)}function m(){return c!=null||s(0,56324),c}function p(){return c==null?(e||(e=n("Promise"))).reject(r("err")("[worker-storage] Storage should be created first before being destroyed")):c.purge().then(function(){c=null}).catch(function(e){throw c=null,e})}l.DATABASE_NAME=u,l.createStorage=d,l.getStorage=m,l.destroyStorage=p}),98);
__d("WAWebWorkerStorageVersions",["WAWebWorkerStorageUtils"],(function(t,n,r,o,a,i,l){function e(){return o("WAWebWorkerStorageUtils").getStorage().versions.version(0)}function s(){return o("WAWebWorkerStorageUtils").getStorage().versions.version(1)}l.localStorageCreateTable=e,l.deferredMessagesStorageCreateTable=s}),98);
__d("WAWebSchemaDeferredMessagesStorage",["WAWebStorageMutationBuilder","WAWebStorageSchema","WAWebWorkerStorageUtils","WAWebWorkerStorageVersions"],(function(t,n,r,o,a,i,l){var e=o("WAWebStorageMutationBuilder").columnBuilder(),s=e.addColumn,u=e.addEncryptedColumn,c=e.addUserDefinedPrimaryKey;function d(){o("WAWebWorkerStorageUtils").getStorage().add("deferred_messages").version(o("WAWebWorkerStorageVersions").deferredMessagesStorageCreateTable(),[c("id"),s("type"),u("plaintext",o("WAWebStorageSchema").EncryptedValueType.ARRAY_BUFFER),s("info"),s("paymentInfo"),s("bizInfo")]).view(function(e){return{id:e.id,type:e.type,plaintext:e.plaintext,info:e.info,paymentInfo:e.paymentInfo,bizInfo:e.bizInfo}}).useDbMsgEncKeyForEncryptedCol(!0)}function m(){return o("WAWebWorkerStorageUtils").getStorage().table("deferred_messages")}l.addTable=d,l.getTable=m}),98);
__d("WAWebApiDeferredMessagesStorage",["WAWebSchemaDeferredMessagesStorage","WAWebWorkerStorageUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(){return o("WAWebSchemaDeferredMessagesStorage").getTable().all().then(function(e){return e.map(function(e){return{id:e.id,type:e.type,plaintext:e.plaintext,info:e.info,paymentInfo:e.paymentInfo,bizInfo:e.bizInfo}})})}function s(e){var t=e.map(function(e){return{id:e.id,type:e.type,plaintext:e.plaintext,info:e.info,paymentInfo:e.paymentInfo,bizInfo:e.bizInfo}});return o("WAWebWorkerStorageUtils").getStorage().lock(["deferred_messages"],(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var n=e[0];yield n.bulkCreateOrReplace(t)});return function(t){return e.apply(this,arguments)}})())}function u(e){return o("WAWebSchemaDeferredMessagesStorage").getTable().remove(e)}function c(){return o("WAWebSchemaDeferredMessagesStorage").getTable().clear()}var d={getDeferredMessages:e,updateDeferredMessages:s,deleteDeferredMessage:u,clearDeferredMessages:c};l.default=d}),98);
__d("WAWebSchemaLocalStorage",["WAWebStorageMutationBuilder","WAWebWorkerStorageUtils","WAWebWorkerStorageVersions"],(function(t,n,r,o,a,i,l){var e=o("WAWebStorageMutationBuilder").columnBuilder(),s=e.addColumn,u=e.addUserDefinedPrimaryKey;function c(){o("WAWebWorkerStorageUtils").getStorage().add("local_storage").version(o("WAWebWorkerStorageVersions").localStorageCreateTable(),[u("key"),s("value")]).view(function(e){return{key:e.key,value:e.value}})}function d(){return o("WAWebWorkerStorageUtils").getStorage().table("local_storage")}l.addTable=c,l.getTable=d}),98);
__d("WAWebApiLocalStorage",["WAWebSchemaLocalStorage","WAWebWorkerStorageUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(e){return o("WAWebSchemaLocalStorage").getTable().get(e).then(function(e){return e==null?void 0:e.value})}function s(e){var t=e.map(function(e){return{key:e.key,value:e.value}});return o("WAWebWorkerStorageUtils").getStorage().lock(["local_storage"],(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var n=e[0];yield n.clear(),yield n.bulkCreateOrReplace(t)});return function(t){return e.apply(this,arguments)}})())}function u(){return o("WAWebSchemaLocalStorage").getTable().clear()}l.getLocalStorageValue=e,l.updateLocalStorage=s,l.clearLocalStorage=u}),98);
__d("WAWebApiOrphanTcToken",["Promise","WAWebLidMigrationUtils","WAWebSchemaOrphanTcToken","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e;function s(e){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){if(t.isUser()){var r=o("WAWebSchemaOrphanTcToken").getOrphanTcTokenTable(),a=o("WAWebLidMigrationUtils").toPn(t),i=o("WAWebLidMigrationUtils").toLid(t),l=[];a!=null&&l.push(r.remove(a.toString())),i!=null&&l.push(r.remove(i.toString())),yield(e||(e=n("Promise"))).all(l)}}),u.apply(this,arguments)}function c(e){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var r,a;if(!t.isUser())return null;var i=o("WAWebSchemaOrphanTcToken").getOrphanTcTokenTable(),l=o("WAWebLidMigrationUtils").toPn(t),s=o("WAWebLidMigrationUtils").toLid(t),u=[];l!=null&&u.push(i.get(l.toString())),s!=null&&u.push(i.get(s.toString()));var c=yield(e||(e=n("Promise"))).all(u),d=c[0],m=c[1],p=(r=d==null?void 0:d.tcTokenTimestamp)!=null?r:0,_=(a=m==null?void 0:m.tcTokenTimestamp)!=null?a:0;return p>_||m==null?d:m}),d.apply(this,arguments)}function m(e,t){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n;if(e.isUser()){var r=(n=o("WAWebLidMigrationUtils").toLid(e))!=null?n:e,a=r.toString();return o("WAWebSchemaOrphanTcToken").getOrphanTcTokenTable().createOrMerge(a,babelHelpers.extends({chatId:a},t))}}),p.apply(this,arguments)}l.removeOrphanTcToken=s,l.getOrphanTcToken=c,l.createOrUpdateOrphanTcToken=m}),98);
__d("WAWebApiPeerMessageStore",["WAWebMsgKey","WAWebSchemaPeerMessage","WAWebUserPrefsMeUser"],(function(t,n,r,o,a,i,l){var e=["kind"];function s(t){var n=t.map(function(t){var n=t.kind,r=babelHelpers.objectWithoutPropertiesLoose(t,e);return babelHelpers.extends({},r,{id:String(t.id),to:String(t.to),subtype:String(t.subtype)})});return o("WAWebSchemaPeerMessage").getPeerMessageTable().bulkCreate(n)}function u(e){var t=o("WAWebSchemaPeerMessage").getPeerMessageTable(),n=new(r("WAWebMsgKey"))({fromMe:!0,remote:o("WAWebUserPrefsMeUser").getMePnUserOrThrow(),id:e});return t.remove(n.toString())}l.storePeerMessages=s,l.deletePeerMessage=u}),98);
__d("WAWebAutoLogoutGating",["WAWebEnvironment","WAWebUA"],(function(t,n,r,o,a,i,l){function e(){var e=s();return e}function s(){return r("WAWebEnvironment").isWindows?!1:o("WAWebUA").UA.hasCredentiallessIframeSupport&&!o("WAWebUA").UA.isOculusBroswer}function u(){var e=self.location!==self.parent.location;if(!e)return!1;var t=new URLSearchParams(window.location.search),n=t.get("autologout");return n==="1"}function c(){var e=new URL(window.location.href);return e.searchParams.set("autologout","1"),e.toString()}l.isAutoLogoutEnabled=e,l.isRunningInAutoLogoutIframe=u,l.getAutoLogoutIframeUrl=c}),98);
__d("WAWebArkoseExpUtils",["$InternalEnum","WAWebAutoLogoutGating","gkx","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e=n("$InternalEnum")({NONE:-1,CONTROL:0,TEST:1,DEV:2});function s(){if(!r("justknobx")._("5007"))return u();if(o("WAWebAutoLogoutGating").isRunningInAutoLogoutIframe()){var t=window.parent.arkoseVariant,n=e.cast(t);return n!=null?n:u()}var a=u();return window.arkoseVariant=a,a}function u(){return r("gkx")("26256")||!r("gkx")("18518")?e.NONE:r("gkx")("26258")?r("gkx")("19648")?e.TEST:e.CONTROL:r("gkx")("7634")?e.DEV:e.NONE}function c(){return s()===e.TEST||s()===e.DEV}l.ArkoseVariantType=e,l.getArkoseVariant=s,l.isArkoseAllowedToRun=c}),98);
__d("WAWebArrowForwardIcon.react",["WAWebSvgComponentBase","react","stylex"],(function(t,n,r,o,a,i,l){var e=["iconXstyle","height","width","name","viewBox"],s,u,c=s||(s=r("react")),d="arrow-forward";function m(t){var n=t.iconXstyle,a=t.height,i=t.width,l=t.name,s=t.viewBox,m=babelHelpers.objectWithoutPropertiesLoose(t,e),p;if(s){var _=s.x,f=_===void 0?0:_,g=s.y,h=g===void 0?0:g,y=s.width,C=y===void 0?0:y,b=s.height,v=b===void 0?0:b;p=[f,h,C,v].join(" ")}var S=30,R=30;return(a!=null||i!=null)&&(S=a,R=i),c.jsx(o("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers.extends({name:l!=null?l:d},m,{children:c.jsxs("svg",{viewBox:p!=null?p:"0 0 30 30",height:S,width:R,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(n),version:"1.1",x:"0px",y:"0px",enableBackground:"new 0 0 30 30",children:[c.jsx("title",{children:l!=null?l:d}),c.jsx("path",{fill:"currentColor",d:"M15,7l-1.4,1.4l5.6,5.6H7v2h12.2l-5.6,5.6L15,23l8-8L15,7z"})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.ArrowForwardIcon=m}),98);
__d("WAWebBaseJSHaltDetector",["WALogger","WAWebEventEmitter"],(function(t,n,r,o,a,i,l){var e,s,u,c="js_halt",d="clock_change_backwards",m=(function(t){function n(e,n){var r;return r=t.call(this)||this,r.$BaseJsHaltDetector$p_1=e,r.$BaseJsHaltDetector$p_2=n,r}babelHelpers.inheritsLoose(n,t);var r=n.prototype;return r.startDetection=function(){var t=this;if(!this.$BaseJsHaltDetector$p_3){var n=Date.now();this.$BaseJsHaltDetector$p_3=self.setInterval(function(){var e=Date.now(),r=e-n-t.$BaseJsHaltDetector$p_1;r>t.$BaseJsHaltDetector$p_2?t.trigger(c,r):r<-t.$BaseJsHaltDetector$p_2&&t.trigger(d,r),n=e},this.$BaseJsHaltDetector$p_1),o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["JsHaltDetector:detection started"])))}},r.stopDetection=function(){this.$BaseJsHaltDetector$p_3&&(self.clearInterval(this.$BaseJsHaltDetector$p_3),this.$BaseJsHaltDetector$p_3=null,o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["JsHaltDetector:detection stopped"]))))},r.restartDetection=function(){this.stopDetection(),this.startDetection(),o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["JsHaltDetector:detection restarted"])))},n})(r("WAWebEventEmitter"));l.JS_HALT_EVENT=c,l.CLOCK_CHANGE_BACKWARDS_EVENT=d,l.BaseJsHaltDetector=m}),98);
__d("WAWebBizCoexOfflineICDCHandledCache",["WAWebCmd"],(function(t,n,r,o,a,i,l){var e=new Set;function s(t){e.add(t)}function u(t){e.delete(t)}function c(t){return e.has(t)}o("WAWebCmd").Cmd.on("offline_delivery_end",function(){e.clear()}),l.addToOfflineBizHostedSenderICDCProcessedCache=s,l.removeFromOfflineBizHostedSenderICDCProcessedCache=u,l.hasOfflineBizHostedSenderICDCProcessedForSender=c}),98);
__d("WAWebJSHaltDetector",["WAWebBaseJSHaltDetector"],(function(t,n,r,o,a,i,l){var e=3e3,s=1e4,u=new(o("WAWebBaseJSHaltDetector")).BaseJsHaltDetector(s,e);u.startDetection(),l.DEFAULT_THRESHOLD=e,l.jsHaltDetector=u}),98);
__d("WAWebWaitForInitialChatsSynced",["Promise","WAWebCmd","WAWebEventsWaitForBbEvent"],(function(t,n,r,o,a,i,l){var e,s=(e||(e=n("Promise"))).resolve();function u(){s=r("WAWebEventsWaitForBbEvent")(o("WAWebCmd").Cmd,"on_initial_chat_synced")}function c(){return s}l.initWaitForInitialChatsSynced=u,l.waitForInitialChatsSynced=c}),98);
__d("WAWebMessageQueue",["WACustomError","WALogger","WAPromiseQueue","WAPromiseTimeout","WAWebABProps","WAWebApiContact","WAWebEventsWaitForOfflineDeliveryEnd","WAWebEventsWaitForReadyForOffline","WAWebHandleMsgCommon","WAWebOfflineHandler","WAWebPromiseQueue","WAWebWaitForInitialChatsSynced","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u=2e4,c={allChatQueue:new(o("WAWebPromiseQueue")).PromiseQueue,chatQueue:new(o("WAPromiseQueue")).PromiseQueueMap},d={allChatQueue:new(o("WAWebPromiseQueue")).PromiseQueue,chatQueue:new(o("WAPromiseQueue")).PromiseQueueMap};function m(e){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var r=t.chatWid,a=t.isOffline,i=t.msgCategory,l=t.action,m=r.isRegularUser()&&!r.isLid()?o("WAWebApiContact").getCurrentLid(r):null,p=(m!=null?m:r).toString();return i!==o("WAWebHandleMsgCommon").CATEGORY_PEER&&o("WAWebABProps").getABPropConfigValue("web_fix_duplicated_lids_history_sync")&&(yield o("WAWebWaitForInitialChatsSynced").waitForInitialChatsSynced()),a&&!o("WAWebOfflineHandler").OfflineMessageHandler.isResumeFromRestartComplete()?d.allChatQueue.enqueue(function(){return d.chatQueue.enqueue(p,n("asyncToGeneratorRuntime").asyncToGenerator(function*(){return yield o("WAWebEventsWaitForReadyForOffline").waitForOfflineProcessReady(),o("WAPromiseTimeout").promiseTimeout(l(),u).catch(function(t){if(t instanceof o("WACustomError").TimeoutError)return o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Offline chat queue MAX_MESSAGE_DELAY exceeded"]))).tags("messaging"),null;throw t})}))}):(yield o("WAWebEventsWaitForOfflineDeliveryEnd").waitForOfflineDeliveryEnd(),c.allChatQueue.enqueue(function(){return c.chatQueue.enqueue(p,function(){return o("WAPromiseTimeout").promiseTimeout(l(),u).catch(function(e){if(e instanceof o("WACustomError").TimeoutError)return o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Online chat queue MAX_MESSAGE_DELAY exceeded"]))).tags("messaging"),null;throw e})})}))}),p.apply(this,arguments)}function _(){return d.allChatQueue.wait()}function f(){return c.allChatQueue.wait()}l.onMessageQueue=m,l.waitForOfflineMessageQueue=_,l.waitForOnlineMessageQueue=f}),98);
__d("WAWebOfflineResumeConst",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum").Mirrored(["INIT","RESUME_ON_RESTART","RESUME_WITH_OPEN_TAB","COMPLETE"]),l=2e4,s=100,u=2e3,c=6e4,d=1e3,m=1e3;i.ResumeStatus=e,i.OFFLINE_STANZA_COUNT_CHECK_TIMEOUT_MS=l,i.OFFLINE_STANZA_COUNT_LIMIT=s,i.OFFLINE_DEVICE_SYNC_DELAY=u,i.OFFLINE_STANZA_TIMEOUT_MS=c,i.OFFLINE_PREVIEW_PERIOD_MS=d,i.UI_UPDATE_TIME_MS=m}),66);
__d("WAWebBlockingOfflineResumeManager",["WALogger","WAShiftTimer","WAWebABProps","WAWebApiPendingDeviceSync","WAWebAppTracker","WAWebBackendApi","WAWebBrokerGlobalAppState","WAWebChatThreadLogging","WAWebCmd","WAWebEnvironment","WAWebHandleMsgTypes.flow","WAWebJSHaltDetector","WAWebMessageQueue","WAWebOfflineResumeConst","WAWebOfflineResumeTypes.flow","WAWebOfflineResumeUtils","WAWebPageLoadLogging","WAWebSignalProtocolStore","WAWebUserPrefsGeneral","WAWebWamEnumWebcScenarioType","WAWebWamMemoryStat","WAWebWamOfflineResumeReporter","WAWebWorkerSafeBackendApi","asyncToGeneratorRuntime","gkx"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I,T;function D(){return T==null&&(T=new $),T}function x(){T=null}var $=(function(){function t(){var e=this;this.$7=null,this.$8=new(o("WAShiftTimer")).ShiftTimer(function(){o("WAWebCmd").Cmd.handleOfflineProgressUpdate(),e.$8.onOrAfter(o("WAWebOfflineResumeConst").UI_UPDATE_TIME_MS)}),this.$10=!1,this.resumeType=o("WAWebOfflineResumeTypes.flow").ResumeType.Blocking,this.$11()}var a=t.prototype;return a.$11=function(){this.offlineMessagePreviewCounter=-1,this.$2=0,this.$3=0,this.$4=!1,this.$5=null,this.$1=o("WAWebOfflineResumeConst").ResumeStatus.INIT},a.$12=function(n){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] offline resume stage: "," -> ",""])),this.$1,n),this.$1=n},a.setStatus_TESTONLY=function(t){o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] offline resume stage: "," -> ",""])),this.$1,t),this.$1=t},a.processOfflinePreview=function(t){if(o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logOfflinePreviewT(),this.isResumeFromRestartComplete())o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] Offline session is complete when receiving offline preview ib."]))),o("WAWebOfflineResumeUtils").exceedResumeWithOpenTabLimit(t.message,t.receipt)&&(o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] restart client due to exceed the LIMIT, message: ",", receipt: ",""])),t.message,t.receipt),o("WAWebOfflineResumeUtils").refreshWindow()),o("WAWebJSHaltDetector").jsHaltDetector.restartDetection(),this.$12(o("WAWebOfflineResumeConst").ResumeStatus.RESUME_WITH_OPEN_TAB),o("WAWebBackendApi").frontendFireAndForget("updateChatSortListener",{enable:!1}),self.setTimeout(function(){o("WAWebBackendApi").frontendFireAndForget("updateChatSortListener",{enable:!0})},7e3);else if(this.$1===o("WAWebOfflineResumeConst").ResumeStatus.INIT)o("WAWebAppTracker").AppTracker.start(o("WAWebAppTracker").AppTrackerType.BlockingOR),r("WAWebBrokerGlobalAppState").initOrUpdateTracking(o("WAWebWamEnumWebcScenarioType").WEBC_SCENARIO_TYPE.OFFLINE_RESUME),o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logOfflineCount(t),this.$5=t.message>0,this.$4=t.message===0,this.offlineMessagePreviewCounter=t.message,this.$2=0,this.$9=Date.now(),o("WAWebSignalProtocolStore").enableMemSignalStore(),o("WAWebCmd").Cmd.handleOfflineProgressUpdate(),o("WAWebJSHaltDetector").jsHaltDetector.restartDetection(),this.$12(o("WAWebOfflineResumeConst").ResumeStatus.RESUME_ON_RESTART),this.$13(t.message,t.receipt),this.$8.onOrAfter(o("WAWebOfflineResumeConst").UI_UPDATE_TIME_MS),o("WAWebCmd").Cmd.readyForProcessOffline(),o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] start handling offline stanza"])));else{var e=this.$9;if(e!=null){var n=Date.now()-e;n<o("WAWebOfflineResumeConst").OFFLINE_PREVIEW_PERIOD_MS?(o("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] Accept multiple offline preview ibs during offline resume, delay ","."])),n),this.offlineMessagePreviewCounter+=t.message,this.$5=this.offlineMessagePreviewCounter>0,this.$4=this.offlineMessagePreviewCounter===0,o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logOfflineCount(t),o("WAWebCmd").Cmd.handleOfflineProgressUpdate()):r("gkx")("26258")?o("WALogger").LOG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] Reject multiple offline preview ib during offline resume, delay ","."])),n):o("WALogger").ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] Reject multiple offline preview ibs during offline resume, delay ",""])),n).sendLogs("offline-multiple-preview")}this.$14()}},a.getOfflineDeliveryProgress=function(){return this.$4?100:this.offlineMessagePreviewCounter===-1?0:this.offlineMessagePreviewCounter===0?100:Math.min(Math.ceil(100*this.$2/this.offlineMessagePreviewCounter),100)},a.processOfflineSessionComplete=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,n=this,r=e;if(self.setTimeout(function(){o("WAWebBackendApi").frontendFireAndForget("updateChatSortListener",{enable:!0})},3e3),(t=this.$7)==null||t.cancel(),this.$7=null,o("WAWebCmd").Cmd.readyForProcessOffline(),o("WALogger").LOG(f||(f=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] start handling offline stanza"]))),this.$1===o("WAWebOfflineResumeConst").ResumeStatus.COMPLETE){o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logLastStanzaT(),o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.commit();return}else if(this.$1===o("WAWebOfflineResumeConst").ResumeStatus.RESUME_WITH_OPEN_TAB){yield o("WAWebMessageQueue").waitForOnlineMessageQueue(),yield o("WAWebApiPendingDeviceSync").doPendingDeviceSync(),this.$12(o("WAWebOfflineResumeConst").ResumeStatus.COMPLETE),o("WAWebCmd").Cmd.offlineDeliveryEnd();return}return this.$5=r>0,this.$4=r===0,this.$6=0,self.setTimeout(function(){n.$6>o("WAWebOfflineResumeConst").OFFLINE_STANZA_COUNT_LIMIT&&(o("WALogger").WARN(g||(g=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] "," received after offline completion marker. Refreshing window due to potential server issue."])),n.$6),o("WAWebOfflineResumeUtils").refreshWindow())},o("WAWebOfflineResumeConst").OFFLINE_STANZA_COUNT_CHECK_TIMEOUT_MS),o("WAWebCmd").Cmd.handleOfflineProgressUpdate(),this.$12(o("WAWebOfflineResumeConst").ResumeStatus.COMPLETE),this.$15()});function t(t){return e.apply(this,arguments)}return t})(),a.isResumeFromRestartComplete=function(){return this.$1!==o("WAWebOfflineResumeConst").ResumeStatus.RESUME_ON_RESTART&&this.$1!==o("WAWebOfflineResumeConst").ResumeStatus.INIT},a.isResumeOnSocketDisconnectInProgress=function(){return this.$1===o("WAWebOfflineResumeConst").ResumeStatus.RESUME_WITH_OPEN_TAB},a.isResumeFromRestartInProgress=function(){return this.$1!==o("WAWebOfflineResumeConst").ResumeStatus.INIT&&!o("WAWebCmd").Cmd.isOfflineDeliveryEnd},a.isResumeComplete=function(){return this.$1===o("WAWebOfflineResumeConst").ResumeStatus.COMPLETE},a.getHasMessagesToDownload=function(){return this.$5},a.getFinishedDownloading=function(){return this.getOfflineDeliveryProgress()===100},a.shouldUseOfflineResumeScreen=function(){return this.offlineMessagePreviewCounter>this.$2},a.processDecryptResult=function(t){this.$14(),this.$2+=1,t===o("WAWebHandleMsgTypes.flow").E2EProcessResult.RETRY&&(this.$3+=1)},a.offlineStanzaReceivedAfterComplete=function(){this.isResumeFromRestartComplete()&&(this.$6+=1)},a.newOfflineStanza=function(t,n){this.$14(),o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logAddOfflineSizeBytes(n),o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logOldestStanzaTime(t)},a.getResumeUIProgressBarType=function(){return o("WAWebOfflineResumeTypes.flow").ResumeUIProgressBarType.None},a.$14=function(){this.$7&&this.$7.onOrAfter(o("WAWebOfflineResumeConst").OFFLINE_STANZA_TIMEOUT_MS)},a.$13=function(t,n){var e,r=this;(e=this.$7)==null||e.cancel(),this.$7=new(o("WAShiftTimer")).ShiftTimer(function(){r.$1!==o("WAWebOfflineResumeConst").ResumeStatus.COMPLETE&&(o("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking]: offline session completed by timeout"]))),o("WALogger").ERROR(y||(y=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking]offline resume finished by timeout"]))).sendLogs("blocking-offline-resume-timeout",{sampling:.01}),r.processOfflineSessionComplete(t+n).catch(function(e){o("WALogger").ERROR(C||(C=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] processOfflineSessionComplete failed in timeout handler: ",""])),e).sendLogs("blocking-offline-resume-timeout-handler",{sampling:.01})}),r.$7=null,o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logMissedOfflineComplete())}),this.$7.onOrAfter(o("WAWebOfflineResumeConst").OFFLINE_STANZA_TIMEOUT_MS)},a.$15=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){o("WAWebPageLoadLogging").startPageLoadQplMeasure("waitForOfflineMessageQueue"),yield o("WAWebMessageQueue").waitForOfflineMessageQueue(),o("WAWebPageLoadLogging").endPageLoadQplMeasure("waitForOfflineMessageQueue"),this.$4=!0,o("WAWebCmd").Cmd.handleOfflineProgressUpdate(),o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logOfflineDecryptionErrorCount(this.$3),o("WALogger").LOG(b||(b=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] _onOfflineComplete: waitForOfflineMsgThread done, total decryption error: ",""])),this.$3),this.$3=0,o("WAWebPageLoadLogging").startPageLoadQplMeasure("clearOfflineSnapShot"),yield o("WAWebOfflineResumeUtils").clearOfflineSnapShot(),o("WAWebPageLoadLogging").endPageLoadQplMeasure("clearOfflineSnapShot"),o("WALogger").LOG(v||(v=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] _onOfflineComplete: clearOfflineSnapShot done."]))),o("WAWebSignalProtocolStore").enablePersistSignalStore(),o("WAWebOfflineResumeUtils").runReceiptCleanUpLoop().catch(function(e){o("WALogger").ERROR(S||(S=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] runReceiptCleanUpLoop failed: ",""])),e).sendLogs("blocking-offline-resume-receipt-cleanup",{sampling:.01})}),o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logLastStanzaT(),o("WAWebPageLoadLogging").startPageLoadQplMeasure("loadMainScreen"),yield o("WAWebOfflineResumeUtils").loadMainScreen({shouldUpdateReceipts:!0,shouldRestoreChatsAndMsgs:!this.$10}),o("WAWebPageLoadLogging").endPageLoadQplMeasure("loadMainScreen"),o("WAWebCmd").Cmd.offlineDeliveryEnd(),o("WAWebAppTracker").AppTracker.stop(o("WAWebAppTracker").AppTrackerType.BlockingOR),o("WAWebUserPrefsGeneral").setOfflinePushCount(0).catch(function(e){o("WALogger").ERROR(R||(R=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] setOfflinePushCount failed: ",""])),e).sendLogs("blocking-offline-resume-push-count",{sampling:.01})}),o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.commit().catch(function(e){o("WALogger").ERROR(L||(L=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] OfflineResumeReporter.commit failed: ",""])),e).sendLogs("blocking-offline-resume-reporter-commit",{sampling:.01})}),o("WAWebWorkerSafeBackendApi").workerSafeFireAndForget("processAllOrphanPaymentNotifications"),o("WAWebChatThreadLogging").uploadChatThreadLoggingEvents().catch(function(e){o("WALogger").ERROR(E||(E=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] uploadChatThreadLoggingEvents failed: ",""])),e).sendLogs("blocking-offline-resume-upload-ctl",{sampling:.01})}),r("WAWebBrokerGlobalAppState").initOrUpdateTracking(o("WAWebWamEnumWebcScenarioType").WEBC_SCENARIO_TYPE.IDLE),o("WAWebWamMemoryStat").setCurrentMemoryScenario(o("WAWebWamEnumWebcScenarioType").WEBC_SCENARIO_TYPE.IDLE),self.setTimeout(function(){o("WAWebApiPendingDeviceSync").doPendingDeviceSync().catch(function(e){o("WALogger").ERROR(k||(k=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] doPendingDeviceSync failed: ",""])),e).sendLogs("blocking-offline-resume-device-sync",{sampling:.01})})},o("WAWebOfflineResumeConst").OFFLINE_DEVICE_SYNC_DELAY),(r("WAWebEnvironment").isWindows||o("WAWebABProps").getABPropConfigValue("wa_web_resume_timer_fix_enabled"))&&(o("WALogger").LOG(I||(I=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][blocking] cancel progress bar timer"]))),this.$8.forceRunNow(),this.$8.cancel())});function t(){return e.apply(this,arguments)}return t})(),t})();l.getOrCreateInstance=D,l.clearInstance=x,l.OfflineBlockingResumeStageManager=$}),98);
__d("WAWebBotDeviceCapabilities",["WASyncdConst","WAWebProtobufSyncAction.pb","WAWebProtobufsDeviceCapabilities.pb","WAWebSyncdDb","WAWebUserPrefsMeUser","asyncToGeneratorRuntime","decodeProtobuf"],(function(t,n,r,o,a,i,l){"use strict";function e(){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield u();return e===o("WAWebProtobufsDeviceCapabilities.pb").DeviceCapabilities$AiThread$SupportLevel.INFRA||e===o("WAWebProtobufsDeviceCapabilities.pb").DeviceCapabilities$AiThread$SupportLevel.FULL}),s.apply(this,arguments)}function u(){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e,t,n='["'+o("WASyncdConst").Actions.DeviceCapabilities+'","'+o("WAWebUserPrefsMeUser").getMeDevicePnOrThrow().user+':0@s.whatsapp.net"]',r=yield o("WAWebSyncdDb").getSyncAction(n);if((r==null?void 0:r.binarySyncData)==null)return o("WAWebProtobufsDeviceCapabilities.pb").DeviceCapabilities$AiThread$SupportLevel.NONE;var a=(e=(t=o("decodeProtobuf").decodeProtobuf(o("WAWebProtobufSyncAction.pb").SyncActionDataSpec,r.binarySyncData).value)==null||(t=t.deviceCapabilities)==null||(t=t.aiThread)==null?void 0:t.supportLevel)!=null?e:o("WAWebProtobufsDeviceCapabilities.pb").DeviceCapabilities$AiThread$SupportLevel.NONE;return a}),c.apply(this,arguments)}l.primaryHasAiThreadSupport=e}),98);
__d("WAWebMsmsgMsgSecretCache",["WAWebCmd"],(function(t,n,r,o,a,i,l){var e=(function(){function e(){var e=this;this.cache=new Map,o("WAWebCmd").Cmd.on("logout",function(){return e.clearCache()})}var t=e.prototype;return t.addMsmsgMsgSecretToCache=function(t,n){this.cache.set(t,n)},t.getMsmsgMsgSecretFromCache=function(t){return this.cache.get(t)},t.clearCache=function(){this.cache=new Map},e})(),s=new e;l.msmsgMsgSecretCache=s}),98);
__d("WAWebBotMessageSecret",["WABinary","WACryptoAesGcm","WACryptoHkdf","WALogger","WANullthrows","WAWebBotTypes","WAWebDBMessageSerialization","WAWebLidMigrationUtils","WAWebMsgKey","WAWebMsmsgMsgSecretCache","WAWebProtobufsE2E.pb","WAWebSchemaMessage","WAWebUserPrefsMeUser","WAWebWidToJid","asyncToGeneratorRuntime","decodeProtobuf"],(function(t,n,r,o,a,i,l){var e,s,u,c=32,d="Bot Message";function m(e){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=new(o("WABinary")).Binary(e).readByteArrayView(),n=yield o("WACryptoHkdf").extractAndExpand(new Uint8Array(t),d,c);return n}),p.apply(this,arguments)}function _(e,t){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){return t.msgInfo.author.isFbidBot()?y(e,t):g(e,t)}),f.apply(this,arguments)}function g(e,t){return h.apply(this,arguments)}function h(){return h=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){var a,i,l=n.msgMeta,s=n.msgInfo,u=o("decodeProtobuf").decodeProtobuf(o("WAWebProtobufsE2E.pb").MessageSecretMessageSpec,t),c=l.targetSenderJid?o("WAWebUserPrefsMeUser").isMeAccount(l.targetSenderJid):!0,d={fromMe:c,remote:(a=l.targetChatJid)!=null?a:s.chat,id:r("WANullthrows")(l.targetId,"decryptMsmsgBotMessage: targetId")};s.chat.isGroup()&&(d.participant=l.targetSenderJid);var m=yield b(d),p=o("WAWebWidToJid").widToUserJid((i=l.targetSenderJid)!=null?i:o("WAWebUserPrefsMeUser").getMePnUserOrThrow()),_=o("WAWebWidToJid").widToUserJid(r("WANullthrows")(s.author,"decryptMsmsgBotMessage: author")),f=null,g=r("WANullthrows")(u.encIv,"decryptMsmsgBotMessage: encIv"),h=r("WANullthrows")(u.encPayload,"decryptMsmsgBotMessage: encPayload");try{var y=s.externalId,C=yield S(y,p,_,m);f=yield o("WACryptoAesGcm").gcmDecrypt(C,g,h,y+"\0"+_)}catch(t){var v;o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["decryptMsmsgBotMessage: fallback to botEditTargetId: ",""])),t);var R=r("WANullthrows")((v=n.msgBotInfo)==null?void 0:v.botEditTargetId,"decryptMsmsgBotMessage: botEditTargetId"),L=yield S(R,p,_,m);f=yield o("WACryptoAesGcm").gcmDecrypt(L,g,h,R+"\0"+_)}return f}),h.apply(this,arguments)}function y(e,t){return C.apply(this,arguments)}function C(){return C=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n,a=t.msgMeta,i=t.msgInfo,l=t.msgBotInfo,u=o("WAWebUserPrefsMeUser").getMeLidUserOrThrow(),c=(n=a.targetSenderJid)!=null?n:u,d={fromMe:o("WAWebUserPrefsMeUser").isMeAccount(c),remote:i.chat,id:r("WANullthrows")(a.targetId,"decryptMsmsgFbidBotMessage: targetId")};if(i.chat.isGroup()){var m;d.participant=(m=o("WAWebLidMigrationUtils").toPn(c))!=null?m:c}var p=yield b(d),_=i.externalId;((l==null?void 0:l.botEditType)===o("WAWebBotTypes").BotMsgEditType.INNER||(l==null?void 0:l.botEditType)===o("WAWebBotTypes").BotMsgEditType.LAST)&&((l==null?void 0:l.botEditTargetId)!=null?_=l==null?void 0:l.botEditTargetId:o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(['decryptMsmsgFbidBotMessage: fallback to externalId for edit="','" message'])),l==null?void 0:l.botEditType));var f=o("WAWebWidToJid").widToUserJid(r("WANullthrows")(i.author,"decryptMsmsgFbidBotMessage: author")),g=yield S(_,o("WAWebWidToJid").widToUserJid(c),f,p),h=o("decodeProtobuf").decodeProtobuf(o("WAWebProtobufsE2E.pb").MessageSecretMessageSpec,e),y=h.encIv,C=h.encPayload,v=yield o("WACryptoAesGcm").gcmDecrypt(g,r("WANullthrows")(y,"decryptMsmsgFbidBotMessage: encIv"),r("WANullthrows")(C,"decryptMsmsgFbidBotMessage: encPayload"),_+"\0"+f);return v}),C.apply(this,arguments)}function b(e){return v.apply(this,arguments)}function v(){return v=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,n=new(r("WAWebMsgKey"))(e),a=n.toString(),i=(t=o("WAWebLidMigrationUtils").getAlternateMsgKey(n))==null?void 0:t.toString(),l=o("WAWebMsmsgMsgSecretCache").msmsgMsgSecretCache.getMsmsgMsgSecretFromCache(a);if(l==null&&i!=null&&(l=o("WAWebMsmsgMsgSecretCache").msmsgMsgSecretCache.getMsmsgMsgSecretFromCache(i)),l==null){var s=yield o("WAWebSchemaMessage").getMessageTable().bulkGet([a,i].filter(Boolean)),c=s[0],d=s[1];c==null&&d==null&&o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["getDecryptSecretForMsg: targetMsg is null, chat=",", targetMsgKey=",", altTargetMsgKey=",""])),e.remote,a,i),l=o("WAWebDBMessageSerialization").messageFromDbRow(r("WANullthrows")(c!=null?c:d,"decryptMsmsgBotMessage: targetMsg")).messageSecret}return m(r("WANullthrows")(l,"decryptMsmsgBotMessage: decryptSecretBase"))}),v.apply(this,arguments)}function S(e,t,n,r){return R.apply(this,arguments)}function R(){return R=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r){var a=o("WABinary").Binary.build(e,t,n).readBuffer(),i=yield o("WACryptoHkdf").extractAndExpand(new Uint8Array(r),a,c);return i}),R.apply(this,arguments)}l.genBotMsgSecretFromMsgSecret=m,l.decryptMsmsgBotMessage=_}),98);
__d("WAWebBotSystemMsg",["WATimeUtils","WAWebBackendApi","WAWebBotGating","WAWebCmd","WAWebContactSystemMsg","WAWebMsgType","WAWebSchemaChat","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e=new Map;function s(e){return o("WAWebContactSystemMsg").genNotificationMsg(e,{type:"notification_template",kind:o("WAWebMsgType").MsgKind.NotificationTemplate,subtype:"bot_init",templateParams:[]})}function u(e,t){var n;if(o("WAWebBotGating").isBotEnabled()&&!t.id.isBot()&&e.botMessageSecret!=null&&t.hasCreatedBotInvokeSystemMsg!==!0&&(n=e.invokedBotWid)!=null&&n.isBot()){var r=m(t.id);return r}return null}function c(e){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=t.id.remote,r=t.t;if((yield f(n))!==!0&&!n.isBot()){var o=m(n,r);return e.set(n.toJid(),!0),o}return null}),d.apply(this,arguments)}function m(e,t){return o("WAWebContactSystemMsg").genNotificationMsg(e,{type:o("WAWebMsgType").MSG_TYPE.NOTIFICATION_TEMPLATE,kind:o("WAWebMsgType").MsgKind.NotificationTemplate,subtype:"bot_invoke_disclaimer",templateParams:[],t:t!=null?t:o("WATimeUtils").unixTime()})}function p(e){return o("WAWebContactSystemMsg").genNotificationMsg(e,{type:o("WAWebMsgType").MSG_TYPE.NOTIFICATION_TEMPLATE,kind:o("WAWebMsgType").MsgKind.NotificationTemplate,subtype:"biz_bot_1p_disclosure",templateParams:[]})}function _(e){return o("WAWebContactSystemMsg").genNotificationMsg(e,{type:o("WAWebMsgType").MSG_TYPE.NOTIFICATION_TEMPLATE,kind:o("WAWebMsgType").MsgKind.NotificationTemplate,subtype:"biz_bot_3p_disclosure",templateParams:[]})}function f(e){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=null;if(o("WAWebCmd").Cmd.isMainStreamReadyMd){var r=yield o("WAWebBackendApi").frontendSendAndReceive("getChat",{chatId:t});return r&&(n=r.hasCreatedBotInvokeSystemMsg),n}var a=yield o("WAWebSchemaChat").getChatTable().get(t.toString());return n=a==null?void 0:a.hasCreatedBotInvokeSystemMsg,e.set(t.toJid(),n),n}),g.apply(this,arguments)}o("WAWebCmd").Cmd.on("logout",function(){e=new Map}),l.genBotInitSystemMsg=s,l.getMaybeSysMsgForBotInvoke=u,l.createSysMsgForIncomingBotInvoke=c,l.genBizBot1pDisclosureMessage=p,l.genBizBot3pDisclosureMessage=_}),98);
__d("WAWebBuildAiThreadUpdateHelper",["WANullthrows","WAWebAiThreadCreationUtils","WAWebAiThreadTypeUtils","WAWebBotDeviceCapabilities","WAWebBotGating","WAWebBotUtils","WAWebDBMessageSerialization","WAWebSchemaMessage","WAWebThreadMsgUtils","asyncToGeneratorRuntime","compactMap"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.filter(function(e){return o("WAWebBotUtils").isMetaAiBot(e.id.remote)});if(t.length===0)return null;var n=yield o("WAWebBotDeviceCapabilities").primaryHasAiThreadSupport();if(!n||!o("WAWebBotGating").isAiChatThreadsInfraEnabled())return null;var r=t.filter(function(e){return!o("WAWebThreadMsgUtils").msgHasAiThread(e)});if(r.length===0)return null;var a={threadId:o("WAWebAiThreadCreationUtils").getHistoricalMetaAiThreadId(),aiThreadInfo:{aiThreadType:o("WAWebAiThreadTypeUtils").AiThreadType.Default}},i=u(r);if(i.length===0)return{targetMsgThreadMap:new Map,defaultThreadAttributes:a};var l=yield c(i,e);return{targetMsgThreadMap:l,defaultThreadAttributes:a}}),s.apply(this,arguments)}function u(e){return r("compactMap")(e,o("WAWebBotUtils").getBotResponseTargetMsgKey)}function c(e,t){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=new Map,r=f(t),o=e.reduce(function(e,t){var o=t.toString(),a=r.get(o);return a==null?e.push(t):_(a,n),e},[]);return o.length===0||(yield m(o,n)),n}),d.apply(this,arguments)}function m(e,t){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=e.map(function(e){return e.toString()}),r=yield o("WAWebSchemaMessage").getMessageTable().bulkGet(n,!1),a=r.filter(Boolean).map(function(e){return o("WAWebDBMessageSerialization").messageFromDbRow(e)});a.forEach(function(e){return _(e,t)})}),p.apply(this,arguments)}function _(e,t){if(o("WAWebThreadMsgUtils").msgHasAiThread(e)){var n=r("WANullthrows")(o("WAWebThreadMsgUtils").getMsgAiThread(e)),a=o("WAWebAiThreadTypeUtils").getAiThreadInfoFromType(void 0,o("WAWebAiThreadTypeUtils").AiThreadType.Default);t.set(e.id.toString(),{threadId:n,aiThreadInfo:a})}}function f(e){var t=new Map;for(var n of e)t.set(n.id.toString(),n);return t}l.buildAiThreadUpdateHelpers=e}),98);
__d("WAWebBuildType",["$InternalEnum","WAWebEnvironment","WAWebUserPrefsGeneral","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e=n("$InternalEnum")({RELEASE:0,BETA:1,ALPHA:2,DEBUG:3});function s(){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=yield o("WAWebUserPrefsGeneral").getWhatsAppWebExternalBetaJoinedIdb(),n=r("WAWebEnvironment").getEnvironment();return(function(t){if(Array.isArray(t)&&t.length===2&&t[0]==="prod"&&t[1]===!0)return e.BETA;if(Array.isArray(t)&&t.length===2&&t[0]==="prod"&&t[1]===!1)return e.RELEASE;if(Array.isArray(t)&&t.length===2&&t[0]==="intern"&&t[1]===!0)return e.DEBUG;if(Array.isArray(t)&&t.length===2&&t[0]==="intern"&&t[1]===!1||Array.isArray(t)&&t.length===2&&t[0]==="dev"&&t[1]===!0)return e.BETA;if(Array.isArray(t)&&t.length===2&&t[0]==="dev"&&t[1]===!1)return e.DEBUG;throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+t)})([n,t])}),u.apply(this,arguments)}l.BuildType=e,l.getBuildType=s}),98);
__d("WAWebChatEphemeralExemptionCache",[],(function(t,n,r,o,a,i){var e=(function(){function e(){this.chatEphemeralExemptionMap=new Map}var t=e.prototype;return t.has=function(t){return this.chatEphemeralExemptionMap.has(t)},t.get=function(t){var e;return(e=this.chatEphemeralExemptionMap.get(t))!=null?e:null},t.add=function(t,n){this.chatEphemeralExemptionMap.set(t,n)},t.clear=function(){this.chatEphemeralExemptionMap.clear()},e})(),l=new e;i.default=l}),66);
__d("WAWebWamEnumActionConducted",[],(function(t,n,r,o,a,i){var e=Object.freeze({MUTE:1,UNMUTE:2,EXPIRE:3});i.ACTION_CONDUCTED=e}),66);
__d("WAWebWamEnumChatMuteNotificationChoice",[],(function(t,n,r,o,a,i){var e=Object.freeze({NO_NOTIFICATIONS_WHEN_MUTED:1,YES_NOTIFICATIONS_WHEN_MUTED:2});i.CHAT_MUTE_NOTIFICATION_CHOICE=e}),66);
__d("WAWebWamEnumMuteChatType",[],(function(t,n,r,o,a,i){var e=Object.freeze({ONE_ON_ONE:1,GROUP:2,CHANNEL:3,INTEROP:4,INORGANIC_NOTIFICATION:5});i.MUTE_CHAT_TYPE=e}),66);
__d("WAWebWamEnumMuteEntryPoint",[],(function(t,n,r,o,a,i){var e=Object.freeze({CHAT_LIST_SCREEN:1,CONTACT_INFO:2,CONVERSATION_SCREEN:3,CHAT_MORE_OPTIONS:4,CHAT_LONG_PRESS_OPTIONS:5,INORGANIC_NOTIFICATION:6,LIST_BASED_MUTE:7});i.MUTE_ENTRY_POINT=e}),66);
__d("WAWebWamEnumWaOfficialAccountName",[],(function(t,n,r,o,a,i){var e=Object.freeze({WHATSAPP_CHATPSA:1});i.WA_OFFICIAL_ACCOUNT_NAME=e}),66);
__d("WAWebChatMuteWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumActionConducted","WAWebWamEnumChatMuteNotificationChoice","WAWebWamEnumMuteChatType","WAWebWamEnumMuteEntryPoint","WAWebWamEnumWaOfficialAccountName"],(function(t,n,r,o,a,i,l){var e=o("WAWebWamCodegenUtils").defineEvents({ChatMute:[2280,{actionConducted:[3,o("WAWebWamEnumActionConducted").ACTION_CONDUCTED],chatMuteNotificationChoice:[5,o("WAWebWamEnumChatMuteNotificationChoice").CHAT_MUTE_NOTIFICATION_CHOICE],muteChatType:[4,o("WAWebWamEnumMuteChatType").MUTE_CHAT_TYPE],muteDuration:[1,o("WAWebWamCodegenUtils").TYPES.TIMER],muteEntryPoint:[6,o("WAWebWamEnumMuteEntryPoint").MUTE_ENTRY_POINT],muteGroupSize:[2,o("WAWebWamCodegenUtils").TYPES.INTEGER],waOfficialAccountName:[7,o("WAWebWamEnumWaOfficialAccountName").WA_OFFICIAL_ACCOUNT_NAME]},[1,1,1],"regular"]},{ChatMute:[]});l.ChatMuteWamEvent=e}),98);
__d("WAWebChatOriginTypes",[],(function(t,n,r,o,a,i){var e=new Set(["createChat","createChatOnNewMsg","debugOpenChatFlow","debugConvertToLidChat","debugCreateChat","jest","updateDeviceTableApi","fixturesChatFactory","securityCodeApi","restoreMessagesForChat","processUnreadMessage","loadLastMessagesFromDb","processPreviewMessageInChat","historyMsgHandlerAction","updateMessageUIAction","msgCollectionFindQuery","msgCollectionGetStarred","msgCollectionGetEvents","msgCollectionGetVoipCallLogs","msgCollectionGetMessagesById","msgCollectionQueryVCard","msgCollectionIncrementalStarredUpdate","msgCollectionQueryMedia","msgCollectionSearch","msgCollectionGetContext","username_change_notification","username_contactless_search","voipCallLog"]),l=new Set(["username_change_notification","username_contactless_search"]);i.VALID_LID_ORIGINS=e,i.VALID_USERNAME_ORIGINS=l}),66);
__d("WAWebWamEnumPsaMessageActionType",[],(function(t,n,r,o,a,i){var e=Object.freeze({SAVE:1,FORWARD:2,REACT:3,LINK_CLICK:4,MEDIA_PLAY:5,DELETE:6,PUSH_NOTIFICATION_CLICK:7,PUSH_NOTIFICATION_RENDER:8});i.PSA_MESSAGE_ACTION_TYPE=e}),66);
__d("WAWebChatPsaActionWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumMediaType","WAWebWamEnumPsaMessageActionType"],(function(t,n,r,o,a,i,l){var e=o("WAWebWamCodegenUtils").defineEvents({ChatPsaAction:[3572,{messageMediaType:[1,o("WAWebWamEnumMediaType").MEDIA_TYPE],psaCampaignId:[4,o("WAWebWamCodegenUtils").TYPES.STRING],psaMessageActionType:[2,o("WAWebWamEnumPsaMessageActionType").PSA_MESSAGE_ACTION_TYPE],psaMsgId:[5,o("WAWebWamCodegenUtils").TYPES.STRING]},[1,1,1],"regular"]},{ChatPsaAction:[]});l.ChatPsaActionWamEvent=e}),98);
__d("WAWebWamEnumReadEntryPoint",[],(function(t,n,r,o,a,i){var e=Object.freeze({CHAT_LIST:1,CHAT:2});i.READ_ENTRY_POINT=e}),66);
__d("WAWebChatPsaReadWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumMediaType","WAWebWamEnumReadEntryPoint"],(function(t,n,r,o,a,i,l){var e=o("WAWebWamCodegenUtils").defineEvents({ChatPsaRead:[3574,{messageMediaType:[1,o("WAWebWamEnumMediaType").MEDIA_TYPE],psaCampaignId:[4,o("WAWebWamCodegenUtils").TYPES.STRING],psaMsgId:[5,o("WAWebWamCodegenUtils").TYPES.STRING],readEntryPoint:[3,o("WAWebWamEnumReadEntryPoint").READ_ENTRY_POINT]},[1,1,1],"regular"]},{ChatPsaRead:[]});l.ChatPsaReadWamEvent=e}),98);
__d("WAWebWamEnumPsaBlockReason",[],(function(t,n,r,o,a,i){var e=Object.freeze({OTHER:0,MESSAGES_ARENT_HELPFUL:1,TOO_MANY_MESSAGES:2,IT_LOOKS_SUSPICIOUS:3});i.PSA_BLOCK_REASON=e}),66);
__d("WAWebWamEnumPsaMessageRemoveAction",[],(function(t,n,r,o,a,i){var e=Object.freeze({BLOCK:1,UNBLOCK:2,ARCHIVE:3,UNARCHIVE:4,CLEAR:5,DELETE_ALL:6});i.PSA_MESSAGE_REMOVE_ACTION=e}),66);
__d("WAWebWamEnumPsaMessageRemoveEntryPoint",[],(function(t,n,r,o,a,i){var e=Object.freeze({BLOCK_FROM_CONTACT_INFO:1,BLOCK_FROM_CHAT:2,UNBLOCK_FROM_CONTACT_INFO:3,UNBLOCK_FROM_CHAT:4,UNBLOCK_FROM_PRIVACY_SETTINGS:5,ARCHIVE_FROM_CHAT_LIST:6,ARCHIVE_FROM_DELETE_OPTION:7,UNARCHIVE_FROM_ARCHIVED_CHAT_LIST:8,CLEAR_FROM_CONTACT_INFO:9,CLEAR_FROM_CHAT_LIST:10,DELETE_ALL_FROM_CHAT_LIST:11,DELETE_ALL_FROM_CONTACT_INFO:12,DELETE_ALL_FROM_CONVERSATION:13,CLEAR_FROM_CONVERSATION:14,BLOCK_FROM_CONSENT_MODAL:15});i.PSA_MESSAGE_REMOVE_ENTRY_POINT=e}),66);
__d("WAWebChatPsaRemoveWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumMediaType","WAWebWamEnumPsaBlockReason","WAWebWamEnumPsaMessageRemoveAction","WAWebWamEnumPsaMessageRemoveEntryPoint","WAWebWamEnumWaOfficialAccountName"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({ChatPsaRemove:[3582,{lastReceivedMediaType:[2,o("WAWebWamEnumMediaType").MEDIA_TYPE],lastReceivedMessageTs:[4,e.TYPES.TIMER],lastReceivedMsgId:[8,e.TYPES.STRING],psaBlockReason:[10,o("WAWebWamEnumPsaBlockReason").PSA_BLOCK_REASON],psaCampaignId:[9,e.TYPES.STRING],psaMessageRemoveAction:[5,o("WAWebWamEnumPsaMessageRemoveAction").PSA_MESSAGE_REMOVE_ACTION],psaMessageRemoveEntryPoint:[6,o("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT],waOfficialAccountName:[7,o("WAWebWamEnumWaOfficialAccountName").WA_OFFICIAL_ACCOUNT_NAME]},[1,1,1],"regular"]},{ChatPsaRemove:[]});l.ChatPsaRemoveWamEvent=s}),98);
__d("isWAWebFeatureDetectionAppleTouchscreen",["WAWebMiscBrowserUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=r("WAWebMiscBrowserUtils").info();return e.os.toLowerCase()!=="mac os"?!1:!!navigator.maxTouchPoints&&navigator.maxTouchPoints>2}l.default=e}),98);
__d("WAWebLinkDeviceScreenGatedUtils",["$InternalEnum","WAWebAutoLogoutGating","gkx","isWAWebFeatureDetectionAppleTouchscreen","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e=n("$InternalEnum")({M1_WINNER:1});function s(){if(!r("justknobx")._("5007"))return u();if(o("WAWebAutoLogoutGating").isRunningInAutoLogoutIframe()){var t=window.parent.linkDeviceVariant,n=e.cast(t);return n!=null?n:u()}var a=u();return window.linkDeviceVariant=a,a}function u(){return e.M1_WINNER}function c(){return r("gkx")("16993")?r("gkx")("18089")?"test":"control":"none"}function d(){return r("gkx")("18827")?r("gkx")("18828")?"test":"control":"none"}function m(){return r("isWAWebFeatureDetectionAppleTouchscreen")()&&r("gkx")("20339")}function p(){return r("gkx")("20730")?r("gkx")("20731")?"test":"control":"none"}l.LinkDeviceScreenVariantType=e,l.getLinkDeviceScreenVariant=s,l.getOptimizedRegFromWebVariant=c,l.getLocalizationFixVariant=d,l.isAppleTouchscreenOverlayEnabled=m,l.getSimplifiedPairingInstructionsVariant=p}),98);
__d("WDSColorStyles.stylex",[],(function(t,n,r,o,a,i,l){"use strict";var e={accent:{color:"x1v5yvga",$$css:!0},accentDeemphasized:{color:"xlrvqgf",$$css:!0},accentEmphasized:{color:"xk4n5i7",$$css:!0},secondaryNegative:{color:"x30a034",$$css:!0},secondaryNegativeDeemphasized:{color:"xnx2rc7",$$css:!0},secondaryNegativeEmphasized:{color:"xqnyt8g",$$css:!0},secondaryPositive:{color:"x1du590y",$$css:!0},secondaryPositiveDeemphasized:{color:"x1o0ficv",$$css:!0},secondaryWarning:{color:"x1f81s73",$$css:!0},secondaryWarningDeemphasized:{color:"x7zpmqd",$$css:!0},contentDefault:{color:"x14ug900",$$css:!0},contentDeemphasized:{color:"xhslqc4",$$css:!0},contentDisabled:{color:"x18cpw0e",$$css:!0},contentOnAccent:{color:"x1pse0pq",$$css:!0},contentActionDefault:{color:"xuwfzo9",$$css:!0},contentActionEmphasized:{color:"xo1mcw5",$$css:!0},contentExternalLink:{color:"x1ph7ams",$$css:!0},contentInverse:{color:"xowaa7l",$$css:!0},contentRead:{color:"x1rv0e52",$$css:!0},persistentAlwaysBranded:{color:"x1r8hjv8",$$css:!0},persistentAlwaysBlack:{color:"x1lljey2",$$css:!0},persistentAlwaysWhite:{color:"x17t9dm2",$$css:!0},persistentActivityIndicator:{color:"x8dwe99",$$css:!0},systemsBubbleContentDeemphasized:{color:"x1bvqhpb",$$css:!0},systemsBubbleContentE2E:{color:"x1syykee",$$css:!0},systemsBubbleContentBusiness:{color:"x1tynsoc",$$css:!0}},s={accent:{backgroundColor:"xfn3atn",$$css:!0},accentDeemphasized:{backgroundColor:"x1abdmlv",$$css:!0},accentEmphasized:{backgroundColor:"xfmgztn",$$css:!0},backgroundWashPlain:{backgroundColor:"x1c7u0tx",$$css:!0},backgroundWashInset:{backgroundColor:"x6egj2d",$$css:!0},backgroundElevatedWashPlain:{backgroundColor:"xw6alqk",$$css:!0},backgroundElevatedWashInset:{backgroundColor:"xs1q97v",$$css:!0},backgroundDimmer:{backgroundColor:"x1honnu5",$$css:!0},surfaceDefault:{backgroundColor:"x1280gxy",$$css:!0},surfaceEmphasized:{backgroundColor:"x1h3rtpe",$$css:!0},surfaceElevatedDefault:{backgroundColor:"x16w0wmm",$$css:!0},surfaceElevatedEmphasized:{backgroundColor:"x1od0jb8",$$css:!0},surfaceHighlight:{backgroundColor:"x4wrhlh",$$css:!0},surfaceInverse:{backgroundColor:"xpip370",$$css:!0},surfacePressed:{backgroundColor:"xluxjuk",$$css:!0},linesDivider:{backgroundColor:"x3x0x6p",$$css:!0},linesOutlineDefault:{backgroundColor:"xs7vtfe",$$css:!0},linesOutlineDeemphasized:{backgroundColor:"x1t9q1nc",$$css:!0},persistentAlwaysBranded:{backgroundColor:"xyp3urf",$$css:!0},persistentAlwaysBlack:{backgroundColor:"x1e6sl3u",$$css:!0},persistentAlwaysWhite:{backgroundColor:"x1p8t8ri",$$css:!0},persistentActivityIndicator:{backgroundColor:"xaf9mo1",$$css:!0},systemsBubbleSurfaceIncoming:{backgroundColor:"x1ew7x2d",$$css:!0},systemsBubbleSurfaceOutgoing:{backgroundColor:"x1g5lz36",$$css:!0},systemsBubbleSurfaceOverlay:{backgroundColor:"x1bu39yj",$$css:!0},systemsBubbleSurfaceSystem:{backgroundColor:"x1k43qru",$$css:!0},systemsBubbleSurfaceE2E:{backgroundColor:"xbqjg82",$$css:!0},systemsBubbleSurfaceBusiness:{backgroundColor:"xwokz8p",$$css:!0},systemsChatSurfaceComposer:{backgroundColor:"xk7ee7b",$$css:!0},systemsChatbackgroundWallpaper:{backgroundColor:"x1q80dvb",$$css:!0},systemsChatForegroundWallpaper:{backgroundColor:"x1fast2d",$$css:!0},systemsChatSurfaceTray:{backgroundColor:"xhjsbib",$$css:!0},systemsStatusSeen:{backgroundColor:"xpecwr1",$$css:!0},componentsPlatformGestureBar:{backgroundColor:"xfau404",$$css:!0},componentsPlatformStatusBar:{backgroundColor:"xe1xe2n",$$css:!0},componentsSurfaceNavBar:{backgroundColor:"xdwp13e",$$css:!0},componentsOutlineProfilePhoto:{backgroundColor:"xu10ooz",$$css:!0},componentsFilterSurfaceSelected:{backgroundColor:"x5byq67",$$css:!0},componentsActiveListRow:{backgroundColor:"x1fe8iih",$$css:!0}};l.WDSColorStyles=e,l.WDSBackgroundColorStyles=s}),98);
__d("WDSSvgComponentBase.react",["Locale","WDSColorStyles.stylex","err","react","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e=["children"],s=["aria-label","aria-hidden","directional","displayInline","containerRef","colorName","xstyle","testid","overrideDirection"],u,c,d=c||(c=o("react")),m={reverse:{display:"x1lliihq",transform:"xpk2tj9",$$css:!0},inline:{display:"x1rg5ohu",verticalAlign:"x11njtxf",$$css:!0}};function p(t){var n=t.children,a=babelHelpers.objectWithoutPropertiesLoose(t,e);if(n==null)throw r("err")("Cannot use WDSBaseSvgSpan without SVG children");var i=a["aria-label"],l=a["aria-hidden"],c=a.directional,p=a.displayInline,_=a.containerRef,f=a.colorName,g=a.xstyle,h=a.testid,y=a.overrideDirection,C=babelHelpers.objectWithoutPropertiesLoose(a,s),b;y!=null?b=y==="rtl":b=c===!0?o("Locale").isRTL():!1;var v=f!=null?o("WDSColorStyles.stylex").WDSColorStyles[f]:null,S=[b?m.reverse:null,p===!0&&m.inline,v,g],R=l===!1?!1:i==null;return d.jsx("span",babelHelpers.extends({"data-testid":void 0,"aria-hidden":R,"aria-label":i,ref:_},C,(u||(u=r("stylex"))).props(S),{children:n}))}p.displayName=p.name+" [from "+i.id+"]",l.default=p}),98);
__d("WDSIconIcCheck.react",["WDSSvgComponentBase.react","react","stylex"],(function(t,n,r,o,a,i,l){var e=["iconXstyle","height","width","viewBox"],s,u,c=s||(s=r("react")),d="ic-check";function m(t){var n=t.iconXstyle,o=t.height,a=t.width,i=t.viewBox,l=babelHelpers.objectWithoutPropertiesLoose(t,e),s;if(i){var m=i.x,p=m===void 0?0:m,_=i.y,f=_===void 0?0:_,g=i.width,h=g===void 0?0:g,y=i.height,C=y===void 0?0:y;s=[p,f,h,C].join(" ")}var b=24,v=24;return(o!=null||a!=null)&&(b=o,v=a),c.jsx(r("WDSSvgComponentBase.react"),babelHelpers.extends({},l,{children:c.jsxs("svg",{viewBox:s!=null?s:"0 0 24 24",height:b,width:v,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(n),fill:"none",children:[c.jsx("title",{children:d}),c.jsx("path",{d:"M9.55002 15.15L18.025 6.675C18.225 6.475 18.4625 6.375 18.7375 6.375C19.0125 6.375 19.25 6.475 19.45 6.675C19.65 6.875 19.75 7.1125 19.75 7.3875C19.75 7.6625 19.65 7.9 19.45 8.1L10.25 17.3C10.05 17.5 9.81669 17.6 9.55002 17.6C9.28336 17.6 9.05002 17.5 8.85002 17.3L4.55002 13C4.35002 12.8 4.25419 12.5625 4.26252 12.2875C4.27086 12.0125 4.37502 11.775 4.57502 11.575C4.77502 11.375 5.01252 11.275 5.28752 11.275C5.56252 11.275 5.80002 11.375 6.00002 11.575L9.55002 15.15Z",fill:"currentColor"})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),98);
__d("WDSBaseCheckbox.react",["BaseCheckbox.react","BaseView.react","WDSHoverStateStyles","WDSIconIcCheck.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e=["appearsOnMedia","children","disabled","id","onChange","onKeyDown","platform","shape","tabIndex","testid","value"],s,u=s||(s=o("react")),c=s.useState,d="xuza879-B",m={root:{height:"xxk0z11",width:"xvy4d1p",display:"x3nfvp2",alignItems:"x6s0dn4",justifyContent:"xl56j7k",boxSizing:"x9f619",paddingTop:"xyqdw3p",paddingInlineEnd:"x1im30kd",paddingBottom:"xg8j3zb",paddingInlineStart:"x1djpfga",position:"x1n2onr6",$$css:!0},checkboxBorder:{boxSizing:"x9f619",flexShrink:"x2lah0s",borderTopWidth:"xamhcws",borderInlineEndWidth:"x1alpsbp",borderBottomWidth:"xlxy82",borderInlineStartWidth:"xyumdvf",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",alignItems:"x6s0dn4",justifyContent:"xl56j7k",display:"x3nfvp2",$$css:!0},checkboxBorderUnselected:{borderTopColor:"x1pyc6se",borderInlineEndColor:"x1mlb2bo",borderBottomColor:"x16pkwpw",borderInlineStartColor:"xqe4bef",$$css:!0},checkboxBorderSelected:{borderTopColor:"xlze6vy",borderInlineEndColor:"x47fsot",borderBottomColor:"x1rrvw3c",borderInlineStartColor:"x18djku1",backgroundColor:"xfn3atn",$$css:!0},checkboxBorderCircle:{borderStartStartRadius:"xt8t1vi",borderStartEndRadius:"x1xc408v",borderEndEndRadius:"x129tdwq",borderEndStartRadius:"x15urzxu",$$css:!0},disabledCheckbox:{opacity:"x1lxidc1",filter:"x4dje6k",$$css:!0},mediaCheckboxUnselected:{borderTopColor:"x1zfx7y",borderInlineEndColor:"x1gj3efs",borderBottomColor:"x151wx5t",borderInlineStartColor:"xea0m3l",$$css:!0},mediaCheckboxSelected:{borderTopColor:"x1zfx7y",borderInlineEndColor:"x1gj3efs",borderBottomColor:"x151wx5t",borderInlineStartColor:"xea0m3l",backgroundColor:"x1p8t8ri",$$css:!0},checkmarkWrapper:{display:"x78zum5",alignItems:"x6s0dn4",justifyContent:"xl56j7k",$$css:!0},checkedCheckmark:{opacity:"x1hc1fzr",animationName:"x1oyg3g3",animationTimingFunction:"xa3vuyk",animationFillMode:"x10e4vud",animationDuration:"x1shwlz2",$$css:!0},uncheckedCheckmark:{opacity:"xg01cxk",$$css:!0}},p={checkboxBorder:{height:"xmix8c7",width:"x1xp8n7a",borderStartStartRadius:"xbrszos",borderStartEndRadius:"xea3l6g",borderEndEndRadius:"x18isctg",borderEndStartRadius:"x2q3nzr",$$css:!0}},_={checkboxBorder:{height:"x17rw0jw",width:"x17z2i9w",borderStartStartRadius:"xt8t1vi",borderStartEndRadius:"x1xc408v",borderEndEndRadius:"x129tdwq",borderEndStartRadius:"x15urzxu",$$css:!0}};function f(t){var n=t.appearsOnMedia,a=n===void 0?!1:n,i=t.children,l=t.disabled,s=l===void 0?!1:l,d=t.id,f=t.onChange,g=t.onKeyDown,h=t.platform,y=t.shape,C=y===void 0?"square":y,b=t.tabIndex,v=t.testid,S=t.value,R=S===void 0?!1:S,L=babelHelpers.objectWithoutPropertiesLoose(t,e),E=h==="iOS",k=c(!1),I=k[0],T=k[1];function D(e){var t=e.key==="Enter"||e.key===" ";t&&(e.preventDefault(),f==null||f(null)),g==null||g(e)}var x=R===!0||R==="indeterminate",$=R==="indeterminate",P=x||$===!0,N=[],M=[P?m.mediaCheckboxSelected:m.mediaCheckboxUnselected],w=[m.checkboxBorderCircle];return I&&(w.push(o("WDSHoverStateStyles").WDSComponentHoverStateStyles.WDSCheckboxCircle),P?(N.push(o("WDSHoverStateStyles").WDSComponentHoverStateStyles.WDSCheckboxSelected),M.push(o("WDSHoverStateStyles").WDSComponentHoverStateStyles.WDSCheckboxMediaSelected)):(N.push(o("WDSHoverStateStyles").WDSComponentHoverStateStyles.WDSCheckboxUnselected),M.push(o("WDSHoverStateStyles").WDSComponentHoverStateStyles.WDSCheckboxMediaUnselected))),u.jsx(r("BaseCheckbox.react"),babelHelpers.extends({},L,{checked:x,disabled:s,id:d,onClick:f,onKeyDown:D,onMouseEnter:function(){return T(!0)},onMouseLeave:function(){return T(!1)},suppressFocusRing:!0,testid:void 0,xstyle:m.root,tabIndex:b,children:u.jsxs(r("BaseView.react"),{"aria-hidden":!0,tabIndex:-1,testid:void 0,xstyle:[m.checkboxBorder,E?_.checkboxBorder:p.checkboxBorder,P?m.checkboxBorderSelected:m.checkboxBorderUnselected,s&&m.disabledCheckbox,I&&o("WDSHoverStateStyles").WDSComponentHoverStateStyles.WDSCheckboxBase].concat(a?M:N,C==="circle"||E?w:[]),children:[$===!0?u.jsx("div",babelHelpers.extends({},{0:{className:"x36qwtl x1fsd2vl xt8t1vi x1xc408v x129tdwq x15urzxu xep993w x1hc1fzr x1oyg3g3 xa3vuyk x10e4vud x1shwlz2"},1:{className:"x36qwtl x1fsd2vl xt8t1vi x1xc408v x129tdwq x15urzxu x1hc1fzr x1oyg3g3 xa3vuyk x10e4vud x1shwlz2 x1e6sl3u"}}[!!a<<0])):u.jsx(r("WDSIconIcCheck.react"),{width:18,height:18,xstyle:m.checkmarkWrapper,colorName:a?"persistentAlwaysBlack":"contentOnAccent",iconXstyle:[x?m.checkedCheckmark:m.uncheckedCheckmark]}),i]})}))}f.displayName=f.name+" [from "+i.id+"]",l.default=f}),98);
__d("WAWebCheckBox.react",["$InternalEnum","WAWebABProps","WAWebKeyboardHotKeys.react","WAWebLinkDeviceScreenGatedUtils","WDSBaseCheckbox.react","WDSFocusStateStyles","react","stylex","useMergeRefs","useWAWebFocusState"],(function(t,n,r,o,a,i,l){var e,s,u,c=u||(u=r("react")),d=(e||(e=o("react"))).useRef,m=5,p=10,_=4,f=8,g="xh7cyri-B",h="xwetn48-B",y={checkboxContainer:{position:"x1n2onr6",display:"x1rg5ohu",width:"x1xp8n7a",height:"xmix8c7",verticalAlign:"xxymvpz",cursor:"x1ypdohk",borderStartStartRadius:"xr9e8f9",borderStartEndRadius:"x1e4oeot",borderEndEndRadius:"x1ui04y5",borderEndStartRadius:"x6en5u8",transform:"x17dzmu4",$$css:!0},roundedCheckboxContainer:{borderStartStartRadius:"xvs2etk",borderStartEndRadius:"xg3wpu6",borderEndEndRadius:"x1jwbhkm",borderEndStartRadius:"xgg4q86",$$css:!0},disabledCheckboxContainer:{cursor:"xt0e3qv",$$css:!0},checkbox:{position:"x1n2onr6",boxSizing:"x9f619",height:"x5yr21d",pointerEvents:"x47corl",backgroundColor:"xjbqb8w",borderTopWidth:"x1ktv7sr",borderInlineEndWidth:"x142x0oa",borderBottomWidth:"xv7zg05",borderInlineStartWidth:"x12dgle5",borderTopColor:"x1hj3nd5",borderInlineEndColor:"xjjclns",borderBottomColor:"x1ywb9b",borderInlineStartColor:"x1212ok9",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderStartStartRadius:"xr9e8f9",borderStartEndRadius:"x1e4oeot",borderEndEndRadius:"x1ui04y5",borderEndStartRadius:"x6en5u8",transitionProperty:"xts7igz",transitionDuration:"xv1tzdm",$$css:!0},pollsCheckboxReceiver:{borderTopColor:"x1128f5s",borderInlineEndColor:"x13kd0oy",borderBottomColor:"x1jdxhwu",borderInlineStartColor:"xj1yhid",$$css:!0},pollsCheckboxSender:{borderTopColor:"xknwhpl",borderInlineEndColor:"x1g0ajyl",borderBottomColor:"x1xx3qdw",borderInlineStartColor:"xtiunav",$$css:!0},roundedCheckbox:{borderStartStartRadius:"xvs2etk",borderStartEndRadius:"xg3wpu6",borderEndEndRadius:"x1jwbhkm",borderEndStartRadius:"xgg4q86",$$css:!0},checkedCheckbox:{backgroundColor:"xfn3atn",borderTopColor:"xlze6vy",borderInlineEndColor:"x47fsot",borderBottomColor:"x1rrvw3c",borderInlineStartColor:"x18djku1",$$css:!0},pollsCheckedCheckboxReceiver:{backgroundColor:"xfn3atn",borderTopColor:"xlze6vy",borderInlineEndColor:"x47fsot",borderBottomColor:"x1rrvw3c",borderInlineStartColor:"x18djku1",$$css:!0},pollsCheckedCheckboxSender:{backgroundColor:"xfn3atn",borderTopColor:"xlze6vy",borderInlineEndColor:"x47fsot",borderBottomColor:"x1rrvw3c",borderInlineStartColor:"x18djku1",$$css:!0},autoLogoutCheckedCheckboxSender:{backgroundColor:"xy7xkci",borderTopColor:"x1xtg2tb",borderInlineEndColor:"x1acu24o",borderBottomColor:"x1muebr1",borderInlineStartColor:"x19e1r83",$$css:!0},disabledCheckbox:{backgroundColor:"x3qdkio",borderTopColor:"x1wpzk8y",borderInlineEndColor:"xts9ub1",borderBottomColor:"xhl97hz",borderInlineStartColor:"x16gmtct",$$css:!0},disabledCheckboxOutline:{backgroundColor:"xjbqb8w",$$css:!0},pollsDisabledCheckedCheckboxReceiver:{backgroundColor:"x1wqby5h",borderTopColor:"x1v8p93f",borderInlineEndColor:"x1o3jo1z",borderBottomColor:"x16stqrj",borderInlineStartColor:"xv5lvn5",$$css:!0},pollsDisabledUncheckedCheckboxReceiver:{borderTopColor:"x1sa7cev",borderInlineEndColor:"xmo3yxm",borderBottomColor:"xzim36q",borderInlineStartColor:"x1656ei8",backgroundColor:null,$$css:!0},pollsDisabledCheckedCheckboxSender:{backgroundColor:"xpzuy9b",borderTopColor:"x1v8p93f",borderInlineEndColor:"x1o3jo1z",borderBottomColor:"x16stqrj",borderInlineStartColor:"xv5lvn5",$$css:!0},pollsDisabledUncheckedCheckboxSender:{borderTopColor:"x7s9935",borderInlineEndColor:"x1i8jwm6",borderBottomColor:"xymrcl3",borderInlineStartColor:"xv5he41",backgroundColor:null,$$css:!0},checkmark:{position:"x10l6tqk",top:"x1pdr0v7",left:"xcqyyxr",width:"x1ftt334",height:"x170jfvy",borderTop:"x76ihet",borderRight:"x1u9eeiz",borderBottom:"x13couss",borderLeft:"xcym7qx",transform:"x1158fpu",$$css:!0},checkmarkDirection:{direction:"xzt5al7",$$css:!0},roundedCheckmark:{width:"x51ohtg",height:"xdk7pt",$$css:!0},checkedCheckmark:{opacity:"x1hc1fzr",animationName:"xnlt6tn",animationTimingFunction:"xa3vuyk",animationFillMode:"x10e4vud",animationDuration:"x1shwlz2",$$css:!0},roundedCheckedCheckmark:{animationName:"xwigvol",$$css:!0},uncheckedCheckmark:{opacity:"xg01cxk",$$css:!0},partialCheckmark:{position:"x10l6tqk",width:"x1ftt334",height:"x170jfvy",borderTop:"x76ihet",borderRight:"x1u9eeiz",borderBottom:"x112ta8",borderLeft:"xcym7qx",transform:"x1iffjtl",$$css:!0},outlineWhite:{borderTopColor:"x1zfx7y",borderInlineEndColor:"x1gj3efs",borderBottomColor:"x151wx5t",borderInlineStartColor:"xea0m3l",$$css:!0},outlineWhiteChecked:{backgroundColor:"x1p8t8ri",borderTopColor:"x1zfx7y",borderInlineEndColor:"x1gj3efs",borderBottomColor:"x151wx5t",borderInlineStartColor:"xea0m3l",$$css:!0},outlinedWhiteCheckmark:{borderInlineEndColor:"x7nxbsa",borderBottomColor:"x126uxjm",$$css:!0},whiteCheckmark:{borderTopStyle:"x1ejq31n",borderInlineEndWidth:"x142x0oa",borderInlineEndStyle:"x18b5jzi",borderInlineEndColor:"x1gj3efs",borderBottomWidth:"xv7zg05",borderBottomStyle:"x1q0q8m5",borderBottomColor:"x151wx5t",borderInlineStartStyle:"xstzfhl",$$css:!0}},C=n("$InternalEnum").Mirrored(["PARTIAL","OUTLINE","POLLS_RECEIVER","POLLS_SENDER","AUTO_LOGOUT","OUTLINE_WHITE"]);function b(e){var t=e.ariaLabel,n=e.checked,a=e.disabled,i=a===void 0?!1:a,l=e.id,u=e.onArrowKeyLeftRight,m=e.onChange,p=e.tabIndex,_=e.testid,f=e.theme,g=d(null),h=n&&f===C.PARTIAL,b=r("useWAWebFocusState")(),v=b[0],S=b[1],R=r("useMergeRefs")(g,v);function L(e){e.stopPropagation();var t=g.current;t!=null&&t.focus(),m(e)}function E(e){var t;e.preventDefault(),(t=g.current)==null||t.click()}var k=function(t){if(o("WAWebKeyboardHotKeys.react").SpecialKeyMap.space===t.keyCode||o("WAWebKeyboardHotKeys.react").SpecialKeyMap.enter===t.keyCode){var e;t.preventDefault(),(e=g.current)==null||e.click(),m()}(o("WAWebKeyboardHotKeys.react").SpecialKeyMap.right===t.keyCode||o("WAWebKeyboardHotKeys.react").SpecialKeyMap.left===t.keyCode)&&(u==null||u(t.keyCode))},I=f===C.POLLS_RECEIVER||f===C.POLLS_SENDER,T=o("WAWebABProps").getABPropConfigValue("wds_web_checkbox");return T?c.jsx(r("WDSBaseCheckbox.react"),{tabIndex:p!=null?p:void 0,value:h?"indeterminate":n,disabled:i,id:l,onChange:function(t){t&&m(t)},onKeyDown:k,testid:void 0,"aria-label":t,appearsOnMedia:f===C.OUTLINE_WHITE,shape:I?"circle":"square"}):c.jsxs(c.Fragment,{children:[c.jsx("input",{ref:R,className:"x10l6tqk x1i1rx1s xjm9jq1 x6ikm8r x10wlt62 xeh89do x1hyvwdk xuxw1ft",checked:n,disabled:i?!0:void 0,indeterminate:h?!0:void 0,"aria-label":t,onClick:function(t){t.stopPropagation()},onChange:L,onKeyDown:k,type:"checkbox",id:l,tabIndex:p!=null?p:0,"data-testid":void 0}),c.jsx("div",babelHelpers.extends({onClick:E},(s||(s=r("stylex"))).props(y.checkboxContainer,i&&y.disabledCheckboxContainer,S&&o("WDSFocusStateStyles").WDSFocusStateStyles.genericFocusPersistent,I&&y.roundedCheckboxContainer),{tabIndex:-1,"aria-hidden":"true","data-testid":void 0,children:c.jsx("div",babelHelpers.extends({},s.props(y.checkbox,n&&y.checkedCheckbox,i&&y.disabledCheckbox,i&&!n&&(f===C.OUTLINE||C.OUTLINE_WHITE)&&y.disabledCheckboxOutline,!n&&f===C.OUTLINE_WHITE&&y.outlineWhite,n&&f===C.OUTLINE_WHITE&&y.outlineWhiteChecked,f===C.POLLS_RECEIVER&&y.pollsCheckboxReceiver,f===C.POLLS_SENDER&&y.pollsCheckboxSender,I&&y.roundedCheckbox,n&&f===C.POLLS_RECEIVER&&y.pollsCheckedCheckboxReceiver,n&&f===C.POLLS_SENDER&&y.pollsCheckedCheckboxSender,n&&f===C.AUTO_LOGOUT&&y.autoLogoutCheckedCheckboxSender,i&&f===C.POLLS_RECEIVER&&(n?y.pollsDisabledCheckedCheckboxReceiver:y.pollsDisabledUncheckedCheckboxReceiver),i&&f===C.POLLS_SENDER&&(n?y.pollsDisabledCheckedCheckboxSender:y.pollsDisabledUncheckedCheckboxSender)),{children:c.jsx("div",babelHelpers.extends({},s.props(y.checkmark,o("WAWebLinkDeviceScreenGatedUtils").getLocalizationFixVariant()==="test"&&y.checkmarkDirection,n&&f!==C.PARTIAL&&y.checkedCheckmark,n&&I&&y.roundedCheckedCheckmark,!n&&y.uncheckedCheckmark,h&&y.partialCheckmark,I&&y.roundedCheckmark,n&&f===C.OUTLINE_WHITE&&y.outlinedWhiteCheckmark,n&&f===C.AUTO_LOGOUT&&y.whiteCheckmark)))}))}))]})}b.displayName=b.name+" [from "+i.id+"]",l.CheckboxTheme=C,l.CheckBox=b}),98);
__d("WAWebEphemeralityResolver",["WALogger","WATimeUtils","WAWebEphemeralityTypes"],(function(t,n,r,o,a,i,l){var e,s,u,c;function d(t){if(!t)return o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["getDisappearingModeSettingForUser: empty contact"]))),null;var n=t.disappearingModeDuration,r=t.disappearingModeSettingTimestamp;return o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["getDisappearingModeSettingForUser: disappearing mode setting fetched for ",": duration="," settingTimestamp=",""])),t.id.toString(),n,r).tags("DM","DDM"),n==null||n===0?null:{duration:n,settingTimestamp:r!=null?r:0}}function m(e){var t=d(e);return t!=null?t.duration:null}function p(e){return e!=null?e:0}function _(e){return e!=null?e:o("WAWebEphemeralityTypes").DisappearingModeInitiator.ChangedInChat}function f(e){return e!=null?e:o("WATimeUtils").unixTime()}function g(e){return e!=null?e:o("WAWebEphemeralityTypes").DisappearingModeTrigger.ChatSettings}function h(e,t){var n=t===o("WAWebEphemeralityTypes").DisappearingModeInitiator.InitiatedByMe;return e!=null?e:n}function y(e){return e==null||e.duration==null&&e.settingTimestamp==null&&e.initiator==null?null:{duration:p(e.duration),settingTimestamp:f(e.settingTimestamp),initiator:_(e.initiator),disappearingModeTrigger:g(e.disappearingModeTrigger),initiatedByMe:h(e.initiatedByMe,e.initiator)}}function C(e,t){return(e==null?void 0:e.duration)===(t==null?void 0:t.duration)&&(e==null?void 0:e.settingTimestamp)===(t==null?void 0:t.settingTimestamp)&&(e==null?void 0:e.initiator)===(t==null?void 0:t.initiator)}function b(e,t){var n=m(e),r=m(t);if(n==null&&r==null)return o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[DMResolve] DM setting for chat is null"]))).tags("DM","DDM"),null;var a;n!=null&&(a={duration:n,settingTimestamp:o("WATimeUtils").unixTime(),initiator:o("WAWebEphemeralityTypes").DisappearingModeInitiator.InitiatedByMe,disappearingModeTrigger:o("WAWebEphemeralityTypes").DisappearingModeTrigger.AccountSettings,initiatedByMe:!0});var i;return r!=null&&(i={duration:r,settingTimestamp:o("WATimeUtils").unixTime(),initiator:o("WAWebEphemeralityTypes").DisappearingModeInitiator.InitiatedByOther,disappearingModeTrigger:o("WAWebEphemeralityTypes").DisappearingModeTrigger.AccountSettings,initiatedByMe:!1}),a!=null&&i!=null?i.duration<a.duration?i:a:a!=null?a:i}function v(e,t){var n=y(e);if(n==null&&t==null)return null;if(n!=null&&t==null)return{duration:n.duration,settingTimestamp:n.settingTimestamp,initiator:n.initiator===o("WAWebEphemeralityTypes").DisappearingModeInitiator.InitiatedByMe?o("WAWebEphemeralityTypes").DisappearingModeInitiator.ChangedInChat:n.initiator,disappearingModeTrigger:o("WAWebEphemeralityTypes").DisappearingModeTrigger.ChatSettings,initiatedByMe:n.initiator===o("WAWebEphemeralityTypes").DisappearingModeInitiator.InitiatedByMe};if(n==null&&t!=null)return{duration:t.duration,settingTimestamp:f(t.settingTimestamp),initiator:_(t.initiator),disappearingModeTrigger:g(t.disappearingModeTrigger),initiatedByMe:t.initiatedByMe};if(n!=null&&t!=null){var r,a;return n.settingTimestamp>((r=t.settingTimestamp)!=null?r:0)?babelHelpers.extends({},n):n.settingTimestamp<((a=t.settingTimestamp)!=null?a:0)?{duration:t.duration,settingTimestamp:f(t.settingTimestamp),initiator:_(t.initiator),disappearingModeTrigger:g(t.disappearingModeTrigger),initiatedByMe:t.initiatedByMe}:babelHelpers.extends({},n,{initiator:t.initiator===o("WAWebEphemeralityTypes").DisappearingModeInitiator.ChangedInChat?o("WAWebEphemeralityTypes").DisappearingModeInitiator.ChangedInChat:n.initiator})}}function S(e,t){o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[DMResolve] resolving new incoming chat DM settings"]))).devConsole({incomingMsgSettings:e,localDDMDuration:t});var n=y(e),r=p(t);if(n==null&&r===0)return null;if(n!=null&&r===0)return{duration:n.duration,settingTimestamp:n.settingTimestamp,initiator:n.initiator===o("WAWebEphemeralityTypes").DisappearingModeInitiator.InitiatedByMe?o("WAWebEphemeralityTypes").DisappearingModeInitiator.ChangedInChat:n.initiator,disappearingModeTrigger:n.disappearingModeTrigger,initiatedByMe:n.initiatedByMe};if(n==null&&r>0)return{duration:r,settingTimestamp:o("WATimeUtils").unixTime(),initiator:o("WAWebEphemeralityTypes").DisappearingModeInitiator.InitiatedByMe,disappearingModeTrigger:o("WAWebEphemeralityTypes").DisappearingModeTrigger.AccountSettings,initiatedByMe:!0};if(n!=null&&r>0){if(n.initiator===o("WAWebEphemeralityTypes").DisappearingModeInitiator.ChangedInChat||n.duration>0&&n.duration<r){var a=n.initiator,i=n.initiatedByMe;return a===o("WAWebEphemeralityTypes").DisappearingModeInitiator.InitiatedByMe&&(a=o("WAWebEphemeralityTypes").DisappearingModeInitiator.ChangedInChat,i=!0),{initiator:a,settingTimestamp:n.settingTimestamp,duration:n.duration,disappearingModeTrigger:n.disappearingModeTrigger,initiatedByMe:i}}return r<n.duration?{duration:r,settingTimestamp:o("WATimeUtils").unixTime(),initiator:o("WAWebEphemeralityTypes").DisappearingModeInitiator.InitiatedByMe,disappearingModeTrigger:o("WAWebEphemeralityTypes").DisappearingModeTrigger.AccountSettings,initiatedByMe:!0}:babelHelpers.extends({},n)}}l.getDisappearingModeSettingForUser=d,l.getEphemeralDurationForUser=m,l.resolveEphermalityDuration=p,l.resolveDisappearingModeInitiator=_,l.resolveSettingTimestamp=f,l.resolveDisappearingModeTrigger=g,l.resolveDisappearingModeInitiatedByMe=h,l.compareEphemeralityFields=C,l.resolveNewChatDMSettings=b,l.resolveExistingChatDMSettings=v,l.resolveNewIncomingChatDMSettings=S}),98);
__d("WAWebGetCTWAEligibilityFromConversion",["WAArrayBufferUtils"],(function(t,n,r,o,a,i,l){var e="FB_Ads";function s(t){var n=t.conversionData,r=t.conversionSource;if(n==null||r!==e)return null;try{var a=o("WAArrayBufferUtils").arrayBufferToString(n);return{data:a,source:e}}catch(e){return null}}l.SMB_DATA_SHARING_ALLOWED_SOURCE=e,l.getCTWAEligibilityFromConversion=s}),98);
__d("WAWebPrivacyModeSystemMsg",["$InternalEnum","WAWebHandleMsgTypes.flow"],(function(t,n,r,o,a,i,l){var e=n("$InternalEnum").Mirrored(["E2EE","BSP","FB","HOSTED_GROUP"]);function s(t){return t==null||t.actualActors===o("WAWebHandleMsgTypes.flow").ActualActorsEnumType.Self&&t.hostStorage===o("WAWebHandleMsgTypes.flow").HostStorageEnumType.OnPremise?e.E2EE:t.actualActors===o("WAWebHandleMsgTypes.flow").ActualActorsEnumType.Capi?e.HOSTED_GROUP:t.hostStorage===o("WAWebHandleMsgTypes.flow").HostStorageEnumType.Facebook?e.FB:e.BSP}function u(e,t){return e==null?t:t==null||e.privacyModeTs>t.privacyModeTs?e:t}function c(e,t){return e==null&&t==null?0:t==null?1:e==null?-1:e.privacyModeTs-t.privacyModeTs}function d(e){var t,n=(t=e.bizInfo)==null?void 0:t.verifiedName;return n==null?null:e.biz&&n.isApi===!0?n.privacyMode:null}l.ReducedPrivacyMode=e,l.getReducedPrivacyMode=s,l.getLatestPrivacyMode=u,l.comparePrivacyMode=c,l.getPrivacyModeFromQueryExistResponse=d}),98);
__d("WAWebInitialSystemMsg",["WALogger","WANullthrows","WAWebABProps","WAWebAdvHostedAccountTypeSystemMsg","WAWebApiDeviceList","WAWebBizCoexGatingUtils","WAWebBizCoexUtils","WAWebBotSystemMsg","WAWebBotTos","WAWebBotTypes","WAWebContactSystemMsg","WAWebMobilePlatforms","WAWebPrivacyModeSystemMsg","WAWebProtobufsAdv.pb","WAWebUserPrefsMultiDevice","WAWebWid","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e;function s(e,t,n){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,a){if(r("WAWebWid").isPSA(t))return[o("WAWebContactSystemMsg").genEncryptNotificationMsg(t,"chat_psa")];if(t.isBot())return[o("WAWebBotSystemMsg").genBotInitSystemMsg(t)];if(r("WAWebWid").isCAPISupportAccount(t))return o("WAWebABProps").getABPropConfigValue("support_use_dedicated_system_event")?[o("WAWebContactSystemMsg").genNonE2ENotificationMsg(t,"support_system_message")]:[o("WAWebContactSystemMsg").genNonE2ENotificationMsg(t,"biz_privacy_mode_init_fb")];if(a===o("WAWebBotTypes").BizBotAutomatedType.FULL_3P)return[o("WAWebBotSystemMsg").genBizBot3pDisclosureMessage(t)];if(o("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&t.isUser()){if(o("WAWebMobilePlatforms").isSMB()&&(yield o("WAWebUserPrefsMultiDevice").getIsHostedMeAccount())===!0)return o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[Hosted] inserting is me hosted notification msg"]))),[r("WANullthrows")(o("WAWebAdvHostedAccountTypeSystemMsg").genAdvMeAccountIsHostedNotificationMsg(t,t))];var i=o("WAWebUserPrefsMultiDevice").getHaveProcessedCoexAdv();if(i&&t.isUser()){var l=yield o("WAWebApiDeviceList").getDeviceRecord(t);if((l==null?void 0:l.advAccountType)===o("WAWebProtobufsAdv.pb").ADVEncryptionType.HOSTED||(l==null?void 0:l.deletedChangedToHost)===!0)return o("WAWebBizCoexUtils").shouldDedupInitialHostedSystemMsg(t)?[]:[r("WANullthrows")(o("WAWebAdvHostedAccountTypeSystemMsg").genAdvAccountTypeInitialSysMsg(t,t))]}}var s=[],u=o("WAWebPrivacyModeSystemMsg").getReducedPrivacyMode(n);switch(u){case o("WAWebPrivacyModeSystemMsg").ReducedPrivacyMode.E2EE:s.push(o("WAWebContactSystemMsg").genEncryptNotificationMsg(t));break;case o("WAWebPrivacyModeSystemMsg").ReducedPrivacyMode.BSP:s.push(o("WAWebContactSystemMsg").genNonE2ENotificationMsg(t,"biz_privacy_mode_init_bsp"));break;case o("WAWebPrivacyModeSystemMsg").ReducedPrivacyMode.FB:s.push(o("WAWebContactSystemMsg").genNonE2ENotificationMsg(t,"biz_privacy_mode_init_fb"));break;case o("WAWebPrivacyModeSystemMsg").ReducedPrivacyMode.HOSTED_GROUP:s.push(o("WAWebContactSystemMsg").genNonE2ENotificationMsg(t,"is_capi_hosted_group"));break}return a===o("WAWebBotTypes").BizBotAutomatedType.PARTIAL_1P&&o("WAWebBotTos").hasAcceptedBizBotTos()&&s.push(o("WAWebBotSystemMsg").genBizBot1pDisclosureMessage(t)),s}),u.apply(this,arguments)}l.default=s}),98);
__d("WAWebMsgEphemerality",["WAWebEphemeralityTypes","WAWebMsgType"],(function(t,n,r,o,a,i,l){var e;function s(e){var t;if(e.ephemeralDuration==null&&e.ephemeralSettingTimestamp==null&&e.disappearingModeInitiator==null)return null;var n=(t=e.ephemeralDuration)!=null?t:0,r=e.ephemeralSettingTimestamp,a=e.disappearingModeInitiator,i=e.disappearingModeTrigger,l=e.disappearingModeInitiatedByMe;return e.subtype==="ephemeral_setting"&&(r=e.t,a=o("WAWebEphemeralityTypes").DisappearingModeInitiator.ChangedInChat),{duration:n,settingTimestamp:r,initiator:a,disappearingModeTrigger:i,initiatedByMe:l}}var u=[(e=o("WAWebMsgType")).MSG_TYPE.CHAT,e.MSG_TYPE.IMAGE,e.MSG_TYPE.VIDEO,e.MSG_TYPE.AUDIO,e.MSG_TYPE.PTT,e.MSG_TYPE.DOCUMENT,e.MSG_TYPE.PRODUCT,e.MSG_TYPE.STICKER,e.MSG_TYPE.POLL_CREATION,e.MSG_TYPE.POLL_RESULT_SNAPSHOT,e.MSG_TYPE.NEWSLETTER_ADMIN_INVITE,e.MSG_TYPE.GROUPS_V4_INVITE,e.MSG_TYPE.CALL_LOG];function c(e){return!!u.includes(e)}l.getMsgEphemeralitySettings=s,l.ephemeralMessageTypes=u,l.messageSupportsEphemerality=c}),98);
__d("WAWebWamEnumFmxEntryPoint",[],(function(t,n,r,o,a,i){var e=Object.freeze({FMX_CARD:0,SAFETY_TOOLS:1});i.FMX_ENTRY_POINT=e}),66);
__d("WAWebWamEnumFmxEvent",[],(function(t,n,r,o,a,i){var e=Object.freeze({BLOCK:0,ADD_CONTACT:1,REPORT:2,SAFETY_TOOLS:3,COMMON_GROUPS:4,CONTACT_INFO:5,FMX_CARD_INSERTED:6,FMX_CARD_VIEWED:7,LEARN_MORE:8,HIGHLIGHT_GROUP_NAME:9,FMX_CARD_TRUST_SIGNALS_FB_IG_VIEWED:10,STOP_MARKETING_MSG_OFFERS:11,MESSAGE_PREFERENCES:12});i.FMX_EVENT=e}),66);
__d("WAWebWamEnumHighlightGroupType",[],(function(t,n,r,o,a,i){var e=Object.freeze({UNKNOWN:0,SINGLE:1,CREATOR:2,ADMIN:3,SAVED_CONTACTS:4,PARTICIPANTS:5,MORE:6});i.HIGHLIGHT_GROUP_TYPE=e}),66);
__d("WAWebPsFmxActionWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumFmxEntryPoint","WAWebWamEnumFmxEvent","WAWebWamEnumHighlightGroupType"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({PsFmxAction:[7054,{commonGroupNum:[1,e.TYPES.INTEGER],countryShown:[2,e.TYPES.BOOLEAN],fmxEntryPoint:[3,o("WAWebWamEnumFmxEntryPoint").FMX_ENTRY_POINT],fmxEvent:[4,o("WAWebWamEnumFmxEvent").FMX_EVENT],highlightGroupType:[5,o("WAWebWamEnumHighlightGroupType").HIGHLIGHT_GROUP_TYPE],isSenderSmb:[6,e.TYPES.BOOLEAN],notAContactShown:[7,e.TYPES.BOOLEAN]},[1,1,1],"private",113760892]},{PsFmxAction:[]});l.PsFmxActionWamEvent=s}),98);
__d("WAWebSagaSystemMsg",["WAWebContactSystemMsg","WAWebMsgType"],(function(t,n,r,o,a,i,l){function e(e){return o("WAWebContactSystemMsg").genNotificationMsg(e,{type:"notification_template",kind:o("WAWebMsgType").MsgKind.NotificationTemplate,subtype:"saga_init",templateParams:[]})}l.genSagaInitSystemMsg=e}),98);
__d("WAWebCreateChat",["Promise","WALogger","WANullthrows","WAWebABProps","WAWebABPropsSaga","WAWebApiBusinessProfile","WAWebApiChat","WAWebApiContact","WAWebApiContactUsernameFields","WAWebApiOrphanTcToken","WAWebApiVerifiedBusinessName","WAWebBackendApi","WAWebBizGatingUtils","WAWebBotTypes","WAWebChatOriginTypes","WAWebContactSystemMsg","WAWebCountryCodeUtils","WAWebCtwaAGMUtils","WAWebEphemeralityResolver","WAWebEphemeralityTypes","WAWebEphemeralityUtils","WAWebFMXGatingUtils","WAWebGetCTWAEligibilityFromConversion","WAWebGetMessageCache","WAWebHandleMsgTypes.flow","WAWebHandleSingleMsg","WAWebInitialSystemMsg","WAWebLid1X1MigrationGating","WAWebLidAwareContactsDB","WAWebLidMigrationUtils","WAWebMsgEphemerality","WAWebPrivacyModeSystemMsg","WAWebPsFmxActionWamEvent","WAWebQueryBusinessProfile","WAWebSagaSystemMsg","WAWebUpdateLidMetadataJob","WAWebUserPrefsMeUser","WAWebUsernameGatingUtils","WAWebWamEnumFmxEntryPoint","WAWebWamEnumFmxEvent","WAWebWidFactory","WAWebWorkerSafeBackendApi","asyncToGeneratorRuntime","lodash"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g,h,y,C;function b(e,t,n,r){return v.apply(this,arguments)}function v(){return v=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,a){var i=a!=null?a:{},l=i.forceUsync,h=l===void 0?!1:l,y=i.firstIncomingMsg,C=i.nextPrivacyMode,b=i.createdOffline,v=b===void 0?!1:b;o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["createChat: ",""])),t);var R=e.chatId,k=R;if(R.isLid()){r("WANullthrows")(n==null?void 0:n.lidOriginType,"Origin type is missing when creating LID chat");var T=o("WAWebApiContact").getPhoneNumber(R),D=!o("WAWebChatOriginTypes").VALID_LID_ORIGINS.has(t),x=o("WAWebChatOriginTypes").VALID_USERNAME_ORIGINS.has(t)&&T!=null;x&&!o("WAWebLid1X1MigrationGating").Lid1X1MigrationUtils.isLidMigrated()?(o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["createChat: "," trying to create new username chat when phone number is known."])),t).sendLogs("unexpected-username-lid-chat"),T!=null&&(k=T)):D&&!o("WAWebLid1X1MigrationGating").Lid1X1MigrationUtils.isLidMigrated()&&(o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["lid: ",", origin type: ",""])),e.chatId.toLogString(),n==null?void 0:n.lidOriginType),o("WALogger").ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["createChat: "," unexpected lid chat created"])),t).sendLogs("unexpected-lid-chat"));var $=yield o("WAWebApiContact").getContactRecord(o("WAWebUserPrefsMeUser").getMePnUserOrThrow());t==="username_contactless_search"&&($==null?void 0:$.username)==null&&(yield o("WAWebUpdateLidMetadataJob").updateLidMetadataJob([{lid:R,data:{shareOwnPn:!0}}]))}var P=k.isUser()&&h?yield o("WAWebWorkerSafeBackendApi").workerSafeSendAndReceive("getOrQueryUsyncInfo",{wid:k}):null,N=P==null?k:P.wid;if(!k.equals(N)){var M=yield o("WAWebApiChat").getChatRecord(N);if(M!=null)return}var w=!1,A=!1,F=null;if((P==null?void 0:P.bizInfo)!=null){var O,B;w=(O=P.bizInfo)==null?void 0:O.verifiedName.isApi,A=(B=P.bizInfo)==null?void 0:B.verifiedName.isSmb,F=o("WAWebPrivacyModeSystemMsg").getPrivacyModeFromQueryExistResponse(P)}else if(P==null){var W=yield o("WAWebApiVerifiedBusinessName").getVerifiedBusinessNameRecordLidAware(N);W!=null&&(A=W.isSmb,w=W.isApi,F=W.privacyMode!=null?o("WAWebApiVerifiedBusinessName").convertPrivacyModeFromStorageType(W.privacyMode):null)}var q=n!=null?babelHelpers.extends({},n,{id:N}):{id:N};if(o("WAWebLidMigrationUtils").shouldHaveAccountLid(N)){var U,V,H;q.accountLid=r("WANullthrows")(e.accountLid,"account lid not provided for one on one chat creation"),o("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["createChat: creating new chat with chat_id="," account_lid: ",", pn: ",""])),N.toLogString(),(U=q.accountLid)==null?void 0:U.toLogString(),(V=(H=o("WAWebLidMigrationUtils").toPn(N))==null?void 0:H.toLogString())!=null?V:"n/a")}var G=N.isUser()&&!N.isBot()?yield E(N,w,y):null;G!=null&&(o("WALogger").LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["[DMResolve] DM settings found for new chat"]))).devConsole(G),q.ephemeralDuration=G.duration,q.ephemeralSettingTimestamp=G.settingTimestamp,q.disappearingModeInitiator=G.initiator,o("WAWebABProps").getABPropConfigValue("dm_initiator_trigger")&&(q.disappearingModeTrigger=G.disappearingModeTrigger,q.disappearingModeInitiatedByMe=G.initiatedByMe));var z=o("WAWebPrivacyModeSystemMsg").getLatestPrivacyMode(C,F);N.isUser()&&o("WAWebBackendApi").frontendFireAndForget("updateBusinessInfo",{contactId:N,businessInfo:{privacyMode:z}});var j;(y==null?void 0:y.subtype)!=="ephemeral_setting"&&(j=L(N,G==null?void 0:G.duration,G==null?void 0:G.initiator));var K;N.isCAPISupportAccount()&&o("WAWebABPropsSaga").getIsSagaV1Enabled()&&!o("WAWebABPropsSaga").getIsSagaProtobufSystemMessageEnabled()&&(K=o("WAWebSagaSystemMsg").genSagaInitSystemMsg(N));var Q=o("WAWebBizGatingUtils").getFmxAgmEnabled(),X=(y==null?void 0:y.ctwaContext)!=null&&o("WAWebGetCTWAEligibilityFromConversion").getCTWAEligibilityFromConversion({conversionData:y.ctwaContext.conversionData,conversionSource:y.ctwaContext.conversionSource}),Y=y==null?void 0:y.ctwaContext,J=(Y==null?void 0:Y.sourceApp)!==o("WAWebCtwaAGMUtils").AGM_SOURCE_APP.WHATSAPP||o("WAWebBizGatingUtils").getWamoAgmEnabled(),Z=yield o("WAWebContactSystemMsg").genContactInfoCardMsg(N,{isSmb:A,isEnterprise:w||(y==null?void 0:y.senderOrRecipientAccountTypeHosted)===!0,iAmStartingChat:y==null||y.id.fromMe,isWASupportStartingChat:y!=null&&N.isCAPISupportAccount(),isFromCTWA:Y!=null&&X!=null,isFMXCtWA:Y!=null&&J&&o("WAWebBizGatingUtils").getFmxAgmEnabled()});Z!=null&&o("WAWebFMXGatingUtils").fmxLoggingEnabled()&&new(o("WAWebPsFmxActionWamEvent")).PsFmxActionWamEvent({fmxEntryPoint:o("WAWebWamEnumFmxEntryPoint").FMX_ENTRY_POINT.FMX_CARD,fmxEvent:o("WAWebWamEnumFmxEvent").FMX_EVENT.FMX_CARD_INSERTED,isSenderSmb:A}).commit();var ee;(A||w)&&(ee=yield I(N));var te=yield r("WAWebInitialSystemMsg")(N,z,ee);te.some(function(e){return e.subtype==="biz_bot_3p_disclosure"})?q.bizBotSystemMsgType=o("WAWebBotTypes").BizBotType.BIZ_3P:te.some(function(e){return e.subtype==="biz_bot_1p_disclosure"})&&(q.bizBotSystemMsgType=o("WAWebBotTypes").BizBotType.BIZ_1P);var ne=yield o("WAWebApiOrphanTcToken").getOrphanTcToken(N);if(ne){var re,oe;o("WALogger").LOG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["createChat: found orphan tc token for ",""])),N.toLogString()),q.tcToken=(re=ne.tcToken)!=null?re:null,q.tcTokenTimestamp=(oe=ne.tcTokenTimestamp)!=null?oe:null,yield o("WAWebApiOrphanTcToken").removeOrphanTcToken(N)}try{if(!o("WAWebLid1X1MigrationGating").Lid1X1MigrationUtils.isLidMigrated()&&q.id.isRegularUserPn()){var ae=o("WAWebApiContact").getCurrentLid(q.id);ae!=null&&(q.originalLid=ae)}}catch(e){o("WALogger").ERROR(f||(f=babelHelpers.taggedTemplateLiteralLoose(["createChat: failed to get lid for ",", ",", ",""])),q.id.toLogString(),e.message,e.stack).sendLogs("createChat-lid-offline-resume-workaround-failed-chat")}yield o("WAWebBackendApi").frontendFireAndForget("chatCollectionGadd",{chat:q}),yield o("WAWebApiChat").createChatRecord(N,S(q));var ie=o("WAWebHandleMsgTypes.flow").MessageOverwriteOption.NO_OVERWRITE,le=!1,se=Q?[].concat(te,[Z,j,K]).filter(Boolean):[Z].concat(te,[j,K]).filter(Boolean);if(v)o("WAWebGetMessageCache").getMessageCache().addMessages(se.map(function(e){return{msg:e}}),!1);else{o("WALogger").LOG(g||(g=babelHelpers.taggedTemplateLiteralLoose(["createChat: will add "," messages to chat ",""])),se.length,N.toLogString());for(var ue of se)yield o("WAWebHandleSingleMsg").handleSingleMsg({chatId:N,newMsg:ue,handleSingleMsgOrigin:"createChat",messageOverwriteOption:ie,preserveOrder:le})}if(e.chatId.isUser()){var ce=o("WAWebWidFactory").createUserWidOrThrow(e.chatId.toString()),de=ce.toJid(),me=o("WAWebApiContact").getContactHash(de),pe={id:de,contactHash:me},_e;if(o("WAWebUsernameGatingUtils").usernameDisplayedEnabled()){var fe=yield o("WAWebApiContactUsernameFields").getContactUsernameCountryCode(N);fe==null&&(_e=yield o("WAWebCountryCodeUtils").getUsernameCountryCodeFromPnOrServer(ce),_e&&(pe.usernameCountryCode=_e))}yield r("WAWebLidAwareContactsDB").createOrMerge(de,pe)}}),v.apply(this,arguments)}function S(t){var n,r,a,i,l,s,u={id:t.id.toString(),accountLid:(n=t.accountLid)==null?void 0:n.toString(),t:t.t,isAutoMuted:!1,unreadCount:(r=t.unreadCount)!=null?r:0,notSpam:t.notSpam,ephemeralDuration:t.ephemeralDuration,ephemeralSettingTimestamp:t.ephemeralSettingTimestamp,disappearingModeInitiator:(t.disappearingModeInitiator!=null,t.disappearingModeInitiator),tcToken:(a=t.tcToken)!=null?a:void 0,tcTokenTimestamp:(i=t.tcTokenTimestamp)!=null?i:void 0,tcTokenSenderTimestamp:(l=t.tcTokenSenderTimestamp)!=null?l:void 0,bizBotSystemMsgType:t.bizBotSystemMsgType,lidOriginType:t.lidOriginType,createdLocally:(s=t.createdLocally)!=null?s:!1};if(o("WAWebABProps").getABPropConfigValue("dm_initiator_trigger")){var c;u.disappearingModeTrigger=(t.disappearingModeTrigger!=null,t.disappearingModeTrigger),u.disappearingModeInitiatedByMe=(c=t.disappearingModeInitiatedByMe)!=null?c:void 0}t.name!=null&&(u.name=t.name),t.isReadOnly!=null&&(u.isReadOnly=t.isReadOnly),t.muteExpiration!=null&&(u.muteExpiration=t.muteExpiration);try{var d=t;d.originalLid!=null&&(u.originalLid=d.originalLid.toString())}catch(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["createChatObjectForStorage: failed: ",", ",""])),t.message,t.stack).sendLogs("createChat-lid-offline-resume-workaround-failed-conversion")}return u}function R(e){var t=S(e);return r("lodash").pickBy(t,function(e){return e!=null})}function L(e,t,n){var r=null;return t!=null&&(n===o("WAWebEphemeralityTypes").DisappearingModeInitiator.ChangedInChat?r=o("WAWebContactSystemMsg").genDisappearingModeUpdateSystemMsg(e,t,null):r=o("WAWebContactSystemMsg").genDefaultDisappearingModeSystemMsg(e,t,n===o("WAWebEphemeralityTypes").DisappearingModeInitiator.InitiatedByMe)),r}function E(e,t,n){return k.apply(this,arguments)}function k(){return k=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,r){o("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["getDisappearingModeSettingForNewChat"])));var a=yield(C||(C=n("Promise"))).all([o("WAWebApiContact").getContactRecord(o("WAWebUserPrefsMeUser").getMePnUserOrThrow()),o("WAWebApiContact").getContactRecord(e)]),i=a[0],l=a[1];if(l&&o("WAWebEphemeralityUtils").isEphemeralityDisabledForMessagingWithContact(l))return o("WALogger").LOG(y||(y=babelHelpers.taggedTemplateLiteralLoose(["getDisappearingModeSettingForNewChat: ephemerality disabled for messaging with contact"]))),null;if(!t&&e.isUser()&&!e.isPSA()){var s=r==null||r.id.fromMe;if(s)return o("WAWebEphemeralityResolver").resolveNewChatDMSettings(i,l);var u=o("WAWebEphemeralityResolver").getEphemeralDurationForUser(i);return o("WAWebEphemeralityResolver").resolveNewIncomingChatDMSettings(r?o("WAWebMsgEphemerality").getMsgEphemeralitySettings(r):null,u)}}),k.apply(this,arguments)}function I(e){return T.apply(this,arguments)}function T(){return T=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,n=yield o("WAWebApiBusinessProfile").getBusinessProfileRow(e.toString());if(n)return o("WAWebBotTypes").BizBotAutomatedType.cast(n.automatedType);var r=yield o("WAWebQueryBusinessProfile").queryBusinessProfile([{wid:e}]);return(t=r[0])==null||(t=t.profile)==null?void 0:t.automated_type}),T.apply(this,arguments)}l.createChat=b,l.createNewsletterObjectForStorage=R}),98);
__d("WAWebMessageLidOriginType",["WAWebUserPrefsPhoneNumberHidingThreadPromotionMigration","WAWebUsernameTypes"],(function(t,n,r,o,a,i,l){function e(e,t){if(e.isLid())return(t==null?void 0:t.origin)!=null?(t.origin,o("WAWebUserPrefsPhoneNumberHidingThreadPromotionMigration").hasPhoneNumberHidingThreadPromotionMigrationStarted()?o("WAWebUsernameTypes").LidOriginType.GENERAL:o("WAWebUsernameTypes").LidOriginType.cast(t.origin)):o("WAWebUsernameTypes").LidOriginType.GENERAL}l.determineLidOriginTypeForIncomingMessage=e}),98);
__d("WAWebCheckChatExistsOrCreate",["WALogger","WAWebApiChat","WAWebApiHydrateWidsUtil","WAWebBackendApi","WAWebCreateChat","WAWebCurrentUser","WAWebLid1X1MigrationGating","WAWebMessageLidOriginType","WAWebRuntimeEnvironmentUtils","WAWebUsernameTypes","WAWebWidFactory","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p;function _(e){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){return o("WAWebRuntimeEnvironmentUtils").isWorker()?(yield o("WAWebApiChat").getChatRecord(e))!=null:o("WAWebBackendApi").frontendSendAndReceive("hasChat",{chatId:e})}),f.apply(this,arguments)}var g=new Map;function h(e){var t=e.destinationChat,n=e.msgMeta,r=e.options,a=e.chatOriginType,i=e.initialProps,l=t.chatId,s=l.isRegularUser()?o("WAWebMessageLidOriginType").determineLidOriginTypeForIncomingMessage(o("WAWebWidFactory").asUserWidOrThrow(l),n):null;return o("WAWebCreateChat").createChat(t,a,babelHelpers.extends({createdLocally:!1,lidOriginType:s},i),r)}function y(e){return C.apply(this,arguments)}function C(){return C=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var r,a=t.destinationChat,i=a.chatId,l=i.toString();if(o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["checkChatExistsOrCreate called with chatWid=",", accountLid=",""])),i.toLogString(),(r=a.accountLid)==null?void 0:r.toLogString()),o("WAWebCurrentUser").isEmployee()){var f,y;o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["checkChatExistsOrCreate: first message id: ",""])),(f=(y=t.options.firstIncomingMsg)==null?void 0:y.id.toString())!=null?f:"not-passed")}var C=g.get(l);C!=null&&(yield C);var b=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield _(i);if(e!==!0){var n,r;if(i.isLid()&&!o("WAWebLid1X1MigrationGating").Lid1X1MigrationUtils.isLidMigrated()&&(t==null||(n=t.initialProps)==null?void 0:n.lidOriginType)!==o("WAWebUsernameTypes").LidOriginType.PNH_CTWA&&((r=t.msgMeta)==null?void 0:r.origin)!=="ctwa"){var a,s;o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["checkChatExistsOrCreate: chat origin: ",". lid origin ",", ",""])),t.chatOriginType,(a=t.msgMeta)==null?void 0:a.origin,t==null||(s=t.initialProps)==null?void 0:s.lidOriginType),o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["checkChatExistsOrCreate: asked to create Lid chat ",", "," but is not migrated"])),i.toLogString(),t.chatOriginType).sendLogs("checkChatExistsOrCreate: asked to create Lid chat but is not migrated")}try{var f;o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["checkChatExistsOrCreate: chat does not exist, creating chat ",", ",""])),i.toLogString(),t==null||(f=t.initialProps)==null?void 0:f.lidOriginType),yield h(t)}catch(e){if(!o("WAWebRuntimeEnvironmentUtils").isWorker()&&e instanceof o("WAWebApiChat").CreateChatDuplicateError){var y=yield o("WAWebApiChat").getChatRecord(i);if(y!=null){yield o("WAWebBackendApi").frontendFireAndForget("chatCollectionGadd",{chat:babelHelpers.extends({},o("WAWebApiHydrateWidsUtil").hydrateWids(y),{id:i})});var C=yield _(i);return C||o("WALogger").ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["checkChatExistsOrCreate for ",", unable to restore chat from DB"])),i.toLogString()).tags("messaging").sendLogs("checkChatExistsOrCreate failed to restore chat",{sampling:.01}),C}}o("WALogger").ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["checkChatExistsOrCreate for ",", failed with error: ",", stack: ",""])),i.toLogString(),e,e.stack).tags("messaging").sendLogs("checkChatExistsOrCreate failed",{sampling:.01})}}return g.delete(l),e})();return g.set(l,b),b}),C.apply(this,arguments)}l.doesChatExist=_,l.checkChatExistsOrCreate=y}),98);
__d("WAWebProtobufsWa6.pb",["$InternalEnum","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s,u=(s=n("$InternalEnum"))({OFF:0,STANDARD:1}),c=s({DEFAULT:0,GUEST:1}),d=s({WHATSAPP:0,MESSENGER:1,INTEROP:2,INTEROP_MSGR:3,WHATSAPP_LID:4}),m=s({SYSTEM:0,GOOGLE:1,HARDCODED:2,OVERRIDE:3,FALLBACK:4,MNS:5,MNS_SECONDARY:6,SOCKS_PROXY:7}),p=s({CELLULAR_UNKNOWN:0,WIFI_UNKNOWN:1,CELLULAR_EDGE:100,CELLULAR_IDEN:101,CELLULAR_UMTS:102,CELLULAR_EVDO:103,CELLULAR_GPRS:104,CELLULAR_HSDPA:105,CELLULAR_HSUPA:106,CELLULAR_HSPA:107,CELLULAR_CDMA:108,CELLULAR_1XRTT:109,CELLULAR_EHRPD:110,CELLULAR_LTE:111,CELLULAR_HSPAP:112}),_=s({PUSH:0,USER_ACTIVATED:1,SCHEDULED:2,ERROR_RECONNECT:3,NETWORK_SWITCH:4,PING_RECONNECT:5,UNKNOWN:6}),f=s({SHARE_EXTENSION:0,SERVICE_EXTENSION:1,INTENTS_EXTENSION:2}),g=s({WEB_BROWSER:0,APP_STORE:1,WIN_STORE:2,DARWIN:3,WIN32:4,WIN_HYBRID:5}),h=s({PHONE:0,TABLET:1,DESKTOP:2,WEARABLE:3,VR:4}),y=s({RELEASE:0,BETA:1,ALPHA:2,DEBUG:3}),C=s({ANDROID:0,IOS:1,WINDOWS_PHONE:2,BLACKBERRY:3,BLACKBERRYX:4,S40:5,S60:6,PYTHON_CLIENT:7,TIZEN:8,ENTERPRISE:9,SMB_ANDROID:10,KAIOS:11,SMB_IOS:12,WINDOWS:13,WEB:14,PORTAL:15,GREEN_ANDROID:16,GREEN_IPHONE:17,BLUE_ANDROID:18,BLUE_IPHONE:19,FBLITE_ANDROID:20,MLITE_ANDROID:21,IGLITE_ANDROID:22,PAGE:23,MACOS:24,OCULUS_MSG:25,OCULUS_CALL:26,MILAN:27,CAPI:28,WEAROS:29,ARDEVICE:30,VRDEVICE:31,BLUE_WEB:32,IPAD:33,TEST:34,SMART_GLASSES:35,BLUE_VR:36,AR_WRIST:37}),b={},v={},S={},R={},L={},E={},k={},I={},T={},D={},x={},$={};b.name="HandshakeMessage",b.internalSpec={clientHello:[2,(e=o("WAProtoConst")).TYPES.MESSAGE,R],serverHello:[3,e.TYPES.MESSAGE,S],clientFinish:[4,e.TYPES.MESSAGE,v]},v.name="HandshakeMessage$ClientFinish",v.internalSpec={static:[1,e.TYPES.BYTES],payload:[2,e.TYPES.BYTES],extendedCiphertext:[3,e.TYPES.BYTES]},S.name="HandshakeMessage$ServerHello",S.internalSpec={ephemeral:[1,e.TYPES.BYTES],static:[2,e.TYPES.BYTES],payload:[3,e.TYPES.BYTES],extendedStatic:[4,e.TYPES.BYTES]},R.name="HandshakeMessage$ClientHello",R.internalSpec={ephemeral:[1,e.TYPES.BYTES],static:[2,e.TYPES.BYTES],payload:[3,e.TYPES.BYTES],useExtended:[4,e.TYPES.BOOL],extendedCiphertext:[5,e.TYPES.BYTES]},L.name="ClientPayload",L.internalSpec={username:[1,e.TYPES.UINT64],passive:[3,e.TYPES.BOOL],userAgent:[5,e.TYPES.MESSAGE,x],webInfo:[6,e.TYPES.MESSAGE,T],pushName:[7,e.TYPES.STRING],sessionId:[9,e.TYPES.SFIXED32],shortConnect:[10,e.TYPES.BOOL],connectType:[12,e.TYPES.ENUM,p],connectReason:[13,e.TYPES.ENUM,_],shards:[14,e.FLAGS.REPEATED|e.TYPES.INT32],dnsSource:[15,e.TYPES.MESSAGE,I],connectAttemptCount:[16,e.TYPES.UINT32],device:[18,e.TYPES.UINT32],devicePairingData:[19,e.TYPES.MESSAGE,k],product:[20,e.TYPES.ENUM,d],fbCat:[21,e.TYPES.BYTES],fbUserAgent:[22,e.TYPES.BYTES],oc:[23,e.TYPES.BOOL],lc:[24,e.TYPES.INT32],iosAppExtension:[30,e.TYPES.ENUM,f],fbAppId:[31,e.TYPES.UINT64],fbDeviceId:[32,e.TYPES.BYTES],pull:[33,e.TYPES.BOOL],paddingBytes:[34,e.TYPES.BYTES],yearClass:[36,e.TYPES.INT32],memClass:[37,e.TYPES.INT32],interopData:[38,e.TYPES.MESSAGE,E],trafficAnonymization:[40,e.TYPES.ENUM,u],lidDbMigrated:[41,e.TYPES.BOOL],accountType:[42,e.TYPES.ENUM,c],connectionSequenceInfo:[43,e.TYPES.SFIXED32],paaLink:[44,e.TYPES.BOOL],preacksCount:[45,e.TYPES.INT32],processingQueueSize:[46,e.TYPES.INT32]},E.name="ClientPayload$InteropData",E.internalSpec={accountId:[1,e.TYPES.UINT64],token:[2,e.TYPES.BYTES],enableReadReceipts:[3,e.TYPES.BOOL]},k.name="ClientPayload$DevicePairingRegistrationData",k.internalSpec={eRegid:[1,e.TYPES.BYTES],eKeytype:[2,e.TYPES.BYTES],eIdent:[3,e.TYPES.BYTES],eSkeyId:[4,e.TYPES.BYTES],eSkeyVal:[5,e.TYPES.BYTES],eSkeySig:[6,e.TYPES.BYTES],buildHash:[7,e.TYPES.BYTES],deviceProps:[8,e.TYPES.BYTES]},I.name="ClientPayload$DNSSource",I.internalSpec={dnsMethod:[15,e.TYPES.ENUM,m],appCached:[16,e.TYPES.BOOL]},T.name="ClientPayload$WebInfo",T.internalSpec={refToken:[1,e.TYPES.STRING],version:[2,e.TYPES.STRING],webdPayload:[3,e.TYPES.MESSAGE,D],webSubPlatform:[4,e.TYPES.ENUM,g],browser:[5,e.TYPES.STRING],browserVersion:[6,e.TYPES.STRING]},D.name="ClientPayload$WebInfo$WebdPayload",D.internalSpec={usesParticipantInKey:[1,e.TYPES.BOOL],supportsStarredMessages:[2,e.TYPES.BOOL],supportsDocumentMessages:[3,e.TYPES.BOOL],supportsUrlMessages:[4,e.TYPES.BOOL],supportsMediaRetry:[5,e.TYPES.BOOL],supportsE2EImage:[6,e.TYPES.BOOL],supportsE2EVideo:[7,e.TYPES.BOOL],supportsE2EAudio:[8,e.TYPES.BOOL],supportsE2EDocument:[9,e.TYPES.BOOL],documentTypes:[10,e.TYPES.STRING],features:[11,e.TYPES.BYTES]},x.name="ClientPayload$UserAgent",x.internalSpec={platform:[1,e.TYPES.ENUM,C],appVersion:[2,e.TYPES.MESSAGE,$],mcc:[3,e.TYPES.STRING],mnc:[4,e.TYPES.STRING],osVersion:[5,e.TYPES.STRING],manufacturer:[6,e.TYPES.STRING],device:[7,e.TYPES.STRING],osBuildNumber:[8,e.TYPES.STRING],phoneId:[9,e.TYPES.STRING],releaseChannel:[10,e.TYPES.ENUM,y],localeLanguageIso6391:[11,e.TYPES.STRING],localeCountryIso31661Alpha2:[12,e.TYPES.STRING],deviceBoard:[13,e.TYPES.STRING],deviceExpId:[14,e.TYPES.STRING],deviceType:[15,e.TYPES.ENUM,h],deviceModelType:[16,e.TYPES.STRING]},$.name="ClientPayload$UserAgent$AppVersion",$.internalSpec={primary:[1,e.TYPES.UINT32],secondary:[2,e.TYPES.UINT32],tertiary:[3,e.TYPES.UINT32],quaternary:[4,e.TYPES.UINT32],quinary:[5,e.TYPES.UINT32]},l.ClientPayload$TrafficAnonymization=u,l.ClientPayload$AccountType=c,l.ClientPayload$Product=d,l.ClientPayload$DNSSource$DNSResolutionMethod=m,l.ClientPayload$ConnectType=p,l.ClientPayload$ConnectReason=_,l.ClientPayload$IOSAppExtension=f,l.ClientPayload$WebInfo$WebSubPlatform=g,l.ClientPayload$UserAgent$DeviceType=h,l.ClientPayload$UserAgent$ReleaseChannel=y,l.ClientPayload$UserAgent$Platform=C,l.HandshakeMessageSpec=b,l.HandshakeMessage$ClientFinishSpec=v,l.HandshakeMessage$ServerHelloSpec=S,l.HandshakeMessage$ClientHelloSpec=R,l.ClientPayloadSpec=L,l.ClientPayload$InteropDataSpec=E,l.ClientPayload$DevicePairingRegistrationDataSpec=k,l.ClientPayload$DNSSourceSpec=I,l.ClientPayload$WebInfoSpec=T,l.ClientPayload$WebInfo$WebdPayloadSpec=D,l.ClientPayload$UserAgentSpec=x,l.ClientPayload$UserAgent$AppVersionSpec=$}),98);
__d("WAWebClientPayloadReleaseChannel",["WALogger","WAWebBuildType","WAWebProtobufsWa6.pb","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s;function u(){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=yield o("WAWebBuildType").getBuildType();switch(t){case o("WAWebBuildType").BuildType.RELEASE:return o("WAWebProtobufsWa6.pb").ClientPayload$UserAgent$ReleaseChannel.RELEASE;case o("WAWebBuildType").BuildType.BETA:return o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[Web] Enabling BETA features"]))),o("WAWebProtobufsWa6.pb").ClientPayload$UserAgent$ReleaseChannel.BETA;case o("WAWebBuildType").BuildType.ALPHA:return o("WAWebProtobufsWa6.pb").ClientPayload$UserAgent$ReleaseChannel.ALPHA;case o("WAWebBuildType").BuildType.DEBUG:return o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[Web]: Enabling DEBUG features"]))),o("WAWebProtobufsWa6.pb").ClientPayload$UserAgent$ReleaseChannel.DEBUG}}),c.apply(this,arguments)}l.getReleaseChannel=u}),98);
__d("WAWebSyncdMdSession",["WABinary","WACryptoSha256","WANullthrows","WAWebCryptoCurve25519","WAWebSignalCommonUtils","WAWebSignalProtocolStore","WAWebUserPrefsMeUser","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){function e(){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=o("WAWebSignalCommonUtils").createSignalAddress(o("WAWebUserPrefsMeUser").getMePnUserOrThrow()).toString(),t=r("WANullthrows")(yield o("WAWebSignalProtocolStore").getPersistSignalProtocolStore().loadIdentityKey(e)),n=o("WAWebCryptoCurve25519").toCurveKeyPubKey(o("WAWebSignalCommonUtils").strToBuffer(t)),a=r("WANullthrows")(yield o("WAWebSignalProtocolStore").getPersistSignalProtocolStore().getIdentityKeyPair()),i=o("WAWebCryptoCurve25519").toCurveKeyPubKey(a.pubKey);return u(n,i)}),s.apply(this,arguments)}function u(e,t){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){if(e.byteLength!==32)throw r("err")("genSessionId: primary identity public key is "+e.byteLength+" bytes, should be 32!");if(t.byteLength!==32)throw r("err")("genSessionId: companion identity public key is "+e.byteLength+" bytes, should be 32!");var n=new(o("WABinary")).Binary;n.writeBuffer(e),n.write(95),n.writeBuffer(t);var a=n.readByteArrayView(),i=yield o("WACryptoSha256").sha256Base64(a);return i}),c.apply(this,arguments)}l.genCurrentSessionId=e,l.genSessionId=u}),98);
__d("WAWebSyncdMdSyncFieldstatMeta",["Promise","WAStorageEstimator","WAWebSyncdMdSession","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s=-2,u=-1,c=(function(){function t(){this.$1={mdStorageQuotaBytes:-2,mdStorageQuotaUsedBytes:-2},this.$2=null}var r=t.prototype;return r.getStorageEstimation=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(this.$1.mdStorageQuotaBytes!==s)return(e||(e=n("Promise"))).resolve(this.$1);var t=yield o("WAStorageEstimator").estimateStorage();return this.$1={mdStorageQuotaBytes:t.success?t.value.quota:u,mdStorageQuotaUsedBytes:t.success?t.value.usage:u},this.$1});function r(){return t.apply(this,arguments)}return r})(),r.getMdSessionId=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){return this.$2!=null?this.$2:(this.$2=yield o("WAWebSyncdMdSession").genCurrentSessionId(),this.$2)});function t(){return e.apply(this,arguments)}return t})(),t})(),d=new c;l.STORAGE_QUOTA_UNAVAILABLE=u,l.MdSyncFieldStatsMeta=d}),98);
__d("WAWebSocketConstants",[],(function(t,n,r,o,a,i){var e={OPENING:"OPENING",PAIRING:"PAIRING",UNPAIRED:"UNPAIRED",UNPAIRED_IDLE:"UNPAIRED_IDLE",CONNECTED:"CONNECTED",CONFLICT:"CONFLICT",UNLAUNCHED:"UNLAUNCHED",PROXYBLOCK:"PROXYBLOCK",TOS_BLOCK:"TOS_BLOCK",SMB_TOS_BLOCK:"SMB_TOS_BLOCK",DEPRECATED_VERSION:"DEPRECATED_VERSION",SCREEN_LOCKED:"SCREEN_LOCKED"},l={DISCONNECTED:"DISCONNECTED",SYNCING:"SYNCING",RESUMING:"RESUMING",CONNECTED:"CONNECTED"};i.SOCKET_STATE=e,i.SOCKET_STREAM=l}),66);
__d("WAWebDirectConnectionX509",["JSResourceForInteraction","Promise","WALogger","WAWebDirectConnectionUtils","asyncToGeneratorRuntime","filterNulls","pvutils-1.0.17","requireDeferred"],(function(t,n,r,o,a,i,l){var e,s,u,c,d=r("requireDeferred")("asn1js-2.1.1").__setRef("WAWebDirectConnectionX509"),m="-----BEGIN CERTIFICATE-----",p="-----END CERTIFICATE-----",_="(?:"+m+")((?:.|\n)*?)(?:"+p+")",f="2.5.4.3";function g(){return r("JSResourceForInteraction")("pkijs").__setRef("WAWebDirectConnectionX509").load()}function h(t){var n="";try{n=atob(t)}catch(t){o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[direct-connection] base64 decoding failed with ",""])),t.toString())}return C(n)}function y(e){return btoa(b(e))}function C(e){for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=e.charCodeAt(r);return n.buffer}function b(e){return String.fromCharCode.apply(String,Array.from(new Uint8Array(e)))}function v(e,t){return S.apply(this,arguments)}function S(){return S=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield g(),r=n.CertificateChainValidationEngine;return new r({trustedCerts:t,certs:e})}),S.apply(this,arguments)}function R(e,t){return e.flat().reduce(function(e,n){return e.every(function(e){return!o("pvutils-1.0.17").isEqualBuffer(e.tbs,n.tbs)})&&t.includes(n)?[].concat(e,[n]):e},[])}function L(){return E.apply(this,arguments)}function E(){return E=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield r("JSResourceForInteraction")("WAWebDirectConnectionCaBundle").__setRef("WAWebDirectConnectionX509").load(),t=e.CA_BUNDLE;return k(t)}),E.apply(this,arguments)}function k(e){return I.apply(this,arguments)}function I(){return I=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield g(),a=t.Certificate,i=yield new(c||(c=n("Promise")))(function(e){d.onReady(function(t){e(t().fromBER)})});return r("filterNulls")(Array.from(e.matchAll(new RegExp(_,"gm"))).map(function(e){var t=e[0],n=e[1],r=i(h(n)),l=r.result,u;try{u=l.error?null:new a({schema:l})}catch(e){o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[direct-connection] certificate chain parsing from Get Public Key IQ failed with ",""])),e.toString())}return u}))}),I.apply(this,arguments)}function T(e,t){return D.apply(this,arguments)}function D(){return D=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){return(yield v(e,t)).verify()}),D.apply(this,arguments)}function x(e,t){return $.apply(this,arguments)}function $(){return $=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var r=yield v(e,t),a=R(yield(c||(c=n("Promise"))).all(e.map(function(e){return r.findIssuer(e,r)})),t);return a.length===0?(o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[direct-connection] no trusted root certificates could be found for ",""])),P(e[0])),null):a}),$.apply(this,arguments)}function P(e){var t;return(t=e.issuer.typesAndValues.find(function(e){var t=e.type;return t===f}))==null?void 0:t.value.valueBlock.value}function N(e){return o("WAWebDirectConnectionUtils").stringToCertificateString(e.map(function(e){var t=y(e.toSchema(!0).toBER(!1)).split(/(.{0,64})/g).filter(function(e){return e!==""}).join("\n");return m+"\n"+t+"\n"+p}).join("\n"))}function M(){return w.apply(this,arguments)}function w(){return w=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield g(),t=e.getEngine;return t()}),w.apply(this,arguments)}function A(e){return F.apply(this,arguments)}function F(){return F=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield g(),n=t.getRandomValues;return n(e)}),F.apply(this,arguments)}function O(e,t){return B.apply(this,arguments)}function B(){return B=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield e.getPublicKey({algorithm:{algorithm:{name:"RSA-OAEP",hash:{name:"SHA-256"}},usages:["encrypt"]}}),r=yield M(),o=yield r.subtle.encrypt({name:"RSA-OAEP"},n,t);return y(o)}),B.apply(this,arguments)}l.base64ToArrayBuffer=h,l.arrayBufferToBase64=y,l.stringToArrayBuffer=C,l.arrayBufferToString=b,l.fetchFromCABundle=L,l.extractCertificates=k,l.validateCertificates=T,l.genRootIssuers=x,l.encodeToString=N,l.getEngine=M,l.getRandomValues=A,l.encryptWithPublicKey=O}),98);
__d("WAWebUserPrefsScreenLock",["WAArrayBufferUtils","WABase64","WABinary","WAWebDbEncryptionKey","WAWebDirectConnectionX509","WAWebPermanentStorage","WAWebUserPrefsKeys","WAWebUserPrefsStore","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(){var e;T(o("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_DURATION_SECONDS);var t=parseInt((e=r("WAWebUserPrefsStore").getUser(o("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_DURATION_SECONDS))!=null?e:0,10);return t!==0}function s(){return T(o("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_DURATION_SECONDS),r("WAWebUserPrefsStore").getUser(o("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_DURATION_SECONDS)}function u(){var e;return T(o("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_DURATION_SECONDS),(e=r("WAWebUserPrefsStore").getUser(o("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_DURATION_SECONDS))!=null?e:0}function c(e){r("WAWebUserPrefsStore").setUser(o("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_DURATION_SECONDS,e)}function d(e){r("WAWebUserPrefsStore").setUser(o("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_IV,e)}function m(){return T(o("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_IV),r("WAWebUserPrefsStore").getUser(o("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_IV)}function p(e){return r("WAWebUserPrefsStore").setUser(o("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_SALT,e,{shouldWriteToIdb:!1})}function _(){return T(o("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_SALT,!1),r("WAWebUserPrefsStore").getUser(o("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_SALT)}function f(e){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=I(),n=yield R(String(e),t);return r("WAWebUserPrefsStore").setUser(o("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_ITERATIONS,n+"_"+t)}),g.apply(this,arguments)}function h(){return y.apply(this,arguments)}function y(){return y=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){T(o("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_ITERATIONS);var e=r("WAWebUserPrefsStore").getUser(o("WAWebUserPrefsKeys").MD_KEYS.SCREEN_LOCK_ITERATIONS);if(e==null)return null;if(typeof e=="number")return parseInt(e,10);var t=e.split("_"),n=t[0],a=t[1];if(n==null||a==null)return null;var i=yield E(n,a);return parseInt(i,10)}),y.apply(this,arguments)}function C(){return b.apply(this,arguments)}function b(){return b=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){T(o("WAWebUserPrefsKeys").MD_KEYS.SCREEN_UNLOCK_TRY_COUNT);var e=r("WAWebUserPrefsStore").getUser(o("WAWebUserPrefsKeys").MD_KEYS.SCREEN_UNLOCK_TRY_COUNT);if(e==null)return 0;if(typeof e=="number")return parseInt(e,10);var t=e.split("_"),n=t[0],a=t[1],i=yield E(n,a);return parseInt(i,10)}),b.apply(this,arguments)}function v(e,t){return S.apply(this,arguments)}function S(){return S=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=I(),a=yield R(String(e),n);t.aborted||r("WAWebUserPrefsStore").setUser(o("WAWebUserPrefsKeys").MD_KEYS.SCREEN_UNLOCK_TRY_COUNT,a+"_"+n)}),S.apply(this,arguments)}function R(e,t){return L.apply(this,arguments)}function L(){return L=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=new Uint8Array(o("WABase64").decodeB64(t)),r=o("WAWebDbEncryptionKey").DbEncKeyStore.getEncKeys()[0],a=yield self.crypto.subtle.encrypt({iv:n,name:"AES-CBC"},r.key,o("WAArrayBufferUtils").stringToArrayBuffer(e));return o("WABase64").encodeB64(a)}),L.apply(this,arguments)}function E(e,t){return k.apply(this,arguments)}function k(){return k=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=new Uint8Array(o("WABase64").decodeB64(t));yield o("WAWebDbEncryptionKey").DbEncKeyStore.waitForInit();var r=o("WAWebDbEncryptionKey").DbEncKeyStore.getEncKeys()[0],a=yield self.crypto.subtle.decrypt({iv:n,name:"AES-CBC"},r.key,o("WABase64").decodeB64(e));return o("WAWebDirectConnectionX509").arrayBufferToString(a)}),k.apply(this,arguments)}function I(){var e=new Uint8Array(16);self.crypto.getRandomValues(e);var t=new(o("WABinary")).Binary(e).readByteArrayView(16);return o("WABase64").encodeB64(t)}function T(e,t){var n=r("WAWebUserPrefsStore").get(e);if(n!=null){var o=t!=null?{shouldWriteToIdb:t}:null;r("WAWebUserPrefsStore").setUser(e,n,o!=null?o:{}),r("WAWebPermanentStorage").removeItem(e)}}l.getScreenLockEnabled=e,l.getScreenLockDurationForLogging=s,l.getScreenLockDurationInSeconds=u,l.setScreenLockDurationInSeconds=c,l.setScreenLockIvString=d,l.getScreenLockIvString=m,l.setScreenLockSalt=p,l.getScreenLockSalt=_,l.setScreenLockIterations=f,l.getScreenLockIterations=h,l.getScreenUnlockTryCount=C,l.setScreenUnlockTryCount=v}),98);
__d("WAWebUserPrefsInfoStore",["Promise","WAArrayBufferUtils","WABase64","WABinary","WALogger","WAWebCmd","WAWebCryptoCurve25519","WAWebDbEncryptionKey","WAWebL10N","WAWebLogoutReasonConstants","WAWebSocketConstants","WAWebSocketLogoutJob","WAWebUserPrefsMultiDevice","WAWebUserPrefsScreenLock","asyncToGeneratorRuntime","cr:1234","gkx"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I=(e=n("cr:1234"))!=null?e:{},T=I.LockScreenResolvable,D=(function(){function e(){this.$1=null}var t=e.prototype;return t.get=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){return this.$1==null&&(this.$1=yield this.getOsRelease()),{osVersion:this.$1,osBuild:"0.1",hardware:"desktop",manufacturer:"",device:"Desktop",lg:r("WAWebL10N").getLanguage(),lc:r("WAWebL10N").getRegion()||"",mcc:"000",mnc:"000",sim_mnc:"000",sim_mcc:"000"}});function t(){return e.apply(this,arguments)}return t})(),t.getOsRelease=function(){var e="0.1";return(k||(k=n("Promise"))).resolve(e)},e})(),x=new D,$=128,P="AES-GCM",N="PBKDF2",M=r("gkx")("26256")?1e4:6e5,w=(function(){function e(){this.cachedPasscodeDerivedKey=null}var t=e.prototype;return t.resetCachedPasscodeDerivedKey=function(){this.cachedPasscodeDerivedKey=null},t.getCertficateChain=function(t){var e=o("WAArrayBufferUtils").arrayBufferToString(t);try{var n=JSON.parse(e),r=n.intermediate,a=n.leaf;return{intermediate:{key:o("WABase64").decodeB64(r.key),notAfter:Number(r.notAfter),notBefore:Number(r.notBefore)},leaf:{key:o("WABase64").decodeB64(a.key),notAfter:Number(a.notAfter),notBefore:Number(a.notBefore)}}}catch(e){return o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Error parsing certificate chain: ",""])),e),null}},t.get=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=o("WAWebUserPrefsMultiDevice").getNoiseInfo();if(!e)return o("WALogger").DEV(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Noise encryptedNoiseInfo: "," is null"])),!e).tags("info-store"),null;var t=this.$1();if(!t)return o("WALogger").DEV(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Noise ivArray : "," is null"])),!t).tags("info-store"),null;if(e=yield this.$2(e,t),o("WAWebUserPrefsScreenLock").getScreenLockEnabled()){o("WAWebCmd").Cmd.setSocketState(o("WAWebSocketConstants").SOCKET_STATE.SCREEN_LOCKED);var n=yield this.passcodeUnlockNoiseInfo(e);n&&(e=n)}var r=yield this.$3(e);return r?e:(o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Decrypted noise key was invalid."]))).tags("info-store"),null)});function t(){return e.apply(this,arguments)}return t})(),t.setCertificateChain=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield this.get();if(t)try{var n=babelHelpers.extends({},e.intermediate,{key:o("WABase64").encodeB64(e.intermediate.key)}),r=babelHelpers.extends({},e.leaf,{key:o("WABase64").encodeB64(e.leaf.key)}),a=JSON.stringify({intermediate:n,leaf:r});return t.certificateChainBuffer=o("WAArrayBufferUtils").stringToArrayBuffer(a),this.set(t)}catch(e){o("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Error serializing certificate chain: ",""])),e).sendLogs("handshake-serialization-failed")}});function t(t){return e.apply(this,arguments)}return t})(),t.set=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=this,r=e;if(this.cachedPasscodeDerivedKey!=null){var a=this.cachedPasscodeDerivedKey,i=r,l=i.recoveryToken,s=i.staticKeyPair,u=s.pubKey,c=s.privKey,d=i.certificateChainBuffer;try{var m=yield(k||(k=n("Promise"))).all([l,u,c,d].map(function(e){return t.encryptNoiseWithPasscodeDerivedKey(e,a)}));m[0]&&m[1]&&m[2]&&(r={recoveryToken:m[0],staticKeyPair:{pubKey:m[1],privKey:m[2]},certificateChainBuffer:m[3]})}catch(e){o("WALogger").DEV(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Failed to lock noise info: ",""])),e)}}var _=new Uint8Array(64);self.crypto.getRandomValues(_);var f=this.$4(_);yield this.$5(f);var g=yield(k||(k=n("Promise"))).all([this.$6(r.recoveryToken,f[0]),this.$6(r.staticKeyPair.pubKey,f[1]),this.$6(r.staticKeyPair.privKey,f[2]),r.certificateChainBuffer?this.$6(r.certificateChainBuffer,f[3]):(k||(k=n("Promise"))).resolve(void 0)]),h=g[0],y=g[1],C=g[2],b=g[3];return r.recoveryToken=h,r.staticKeyPair.pubKey=y,r.staticKeyPair.privKey=C,r.certificateChainBuffer=b,o("WAWebUserPrefsMultiDevice").setNoiseInfo(r)});function t(t){return e.apply(this,arguments)}return t})(),t.$5=function(t){return o("WAWebUserPrefsMultiDevice").setNoiseInfoIv(t.map(o("WABase64").encodeB64))},t.$1=function(){var e=o("WAWebUserPrefsMultiDevice").getNoiseInfoIv();return e?e.map(function(e){return new Uint8Array(o("WABase64").decodeB64(e))}):null},t.$4=function(t){var e=new(o("WABinary")).Binary(t);return[e.readByteArrayView(16),e.readByteArrayView(16),e.readByteArrayView(16),e.readByteArrayView(16)]},t.$6=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=o("WAWebDbEncryptionKey").DbEncKeyStore.getEncKeys()[0],r=yield self.crypto.subtle.encrypt({iv:t,name:"AES-CBC"},n.key,e);return r});function t(t,n){return e.apply(this,arguments)}return t})(),t.$2=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var r=yield(k||(k=n("Promise"))).all([this.$7(e.recoveryToken,t[0]),this.$7(e.staticKeyPair.pubKey,t[1]),this.$7(e.staticKeyPair.privKey,t[2]),e.certificateChainBuffer!=null?this.$7(e.certificateChainBuffer,t[3]):(k||(k=n("Promise"))).resolve(void 0)]),o=r[0],a=r[1],i=r[2],l=r[3];return e.certificateChainBuffer=l,e.recoveryToken=o,e.staticKeyPair.pubKey=a,e.staticKeyPair.privKey=i,e});function t(t,n){return e.apply(this,arguments)}return t})(),t.$7=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=o("WAWebDbEncryptionKey").DbEncKeyStore.getEncKeys()[0],r=yield self.crypto.subtle.decrypt({iv:t,name:"AES-CBC"},n.key,e);return r});function t(t,n){return e.apply(this,arguments)}return t})(),t.$3=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=!0;try{for(var n=yield o("WAWebCryptoCurve25519").keyPair(e.staticKeyPair.privKey),r=n.pubKey,a=new Uint8Array(r),i=new Uint8Array(e.staticKeyPair.pubKey),l=0;l<a.length;l++)if(a[l]!==i[l]){t=!1;break}}catch(e){o("WALogger").LOG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Decrypted noise key failed validation."]))).tags("info-store"),t=!1}return t});function t(t){return e.apply(this,arguments)}return t})(),t.lockNoiseInfo=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield this.deriveKeyFromPasscode(e);this.createScreenLockIv();var n=yield this.get();if(!n||!n.staticKeyPair)return o("WALogger").DEV(f||(f=babelHelpers.taggedTemplateLiteralLoose(["Empty noiseInfo when trying to lock noise info with passcode."]))).tags("info-store"),!1;try{return this.cachedPasscodeDerivedKey=t,yield this.set(n),!0}catch(e){this.cachedPasscodeDerivedKey=null,o("WALogger").DEV(g||(g=babelHelpers.taggedTemplateLiteralLoose(["Failed to lock noise info: ",""])),e)}return!1});function t(t){return e.apply(this,arguments)}return t})(),t.passcodeUnlockNoiseInfo=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){if(t===void 0&&(t=!1),T==null)return null;var n;if(this.cachedPasscodeDerivedKey==null){var r;t?r=yield T.waitForPasscodeAfterIncorrectAttempt():r=yield T.waitForPasscode(),n=yield this.deriveKeyFromPasscode(r)}else n=this.cachedPasscodeDerivedKey;var a=yield this.getUnlockedNoiseInfo(e,n);return!a||!(yield this.$3(a))?(o("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Decrypted noise key was invalid."]))).tags("info-store"),this.passcodeUnlockNoiseInfo(e,!0)):(T.correctPasscodeEntered(n),o("WAWebCmd").Cmd.setSocketState(o("WAWebSocketConstants").SOCKET_STATE.OPENING),a)});function t(t,n){return e.apply(this,arguments)}return t})(),t.getUnlockedNoiseInfo=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var r=this,a=e.recoveryToken,i=e.staticKeyPair,l=i.pubKey,s=i.privKey,u=e.certificateChainBuffer;try{var c=yield(k||(k=n("Promise"))).all([a,l,s,u].map(function(e){return r.decryptNoiseWithPasscodeDerivedKey(e,t)}));if(c[0]&&c[1]&&c[2])return this.cachedPasscodeDerivedKey=t,{recoveryToken:c[0],staticKeyPair:{pubKey:c[1],privKey:c[2]},certificateChainBuffer:c[3]}}catch(e){return o("WALogger").DEV(y||(y=babelHelpers.taggedTemplateLiteralLoose(["Error with decrypting the noise with the passcode derived key: ",""])),e),null}});function t(t,n){return e.apply(this,arguments)}return t})(),t.removeLockOnNoiseInfo=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=o("WAWebUserPrefsMultiDevice").getNoiseInfo();if(!t)return o("WALogger").DEV(C||(C=babelHelpers.taggedTemplateLiteralLoose(["Noise Info: "," is null, so there is no lock to remove."])),!t).tags("info-store"),!1;var n=this.$1();if(!n)return o("WALogger").DEV(b||(b=babelHelpers.taggedTemplateLiteralLoose(["Noise ivArray : "," is null"])),!n).tags("info-store"),!1;t=yield this.$2(t,n);var r=yield this.deriveKeyFromPasscode(e),a=yield this.getUnlockedNoiseInfo(t,r);if(a!=null){var i=yield this.$3(a);return i?(this.cachedPasscodeDerivedKey=null,yield this.set(a),o("WAWebUserPrefsScreenLock").setScreenLockSalt(null),o("WAWebUserPrefsScreenLock").setScreenLockIvString(""),yield o("WAWebUserPrefsScreenLock").setScreenLockIterations(null),!0):(o("WALogger").LOG(v||(v=babelHelpers.taggedTemplateLiteralLoose(["Decrypted noise key was invalid."]))).tags("info-store"),!1)}return o("WALogger").DEV(S||(S=babelHelpers.taggedTemplateLiteralLoose(["Removing lock on Noise info failed."]))),!1});function t(t){return e.apply(this,arguments)}return t})(),t.deriveKeyFromPasscode=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=new TextEncoder().encode(e),n=yield self.crypto.subtle.importKey("raw",t,{name:N},!1,["deriveKey"]),r=yield this.getOrGenScreenLockSalt(),o=yield self.crypto.subtle.deriveKey({name:N,hash:"SHA-256",salt:r,iterations:yield this.getScreenLockIterationCount()},n,{name:P,length:$},!1,["encrypt","decrypt"]);return o});function t(t){return e.apply(this,arguments)}return t})(),t.getOrGenScreenLockSalt=function(){var e=null;return o("WAWebUserPrefsScreenLock").getScreenLockEnabled()||(e=new Uint8Array($),self.crypto.getRandomValues(e),e=btoa(String.fromCharCode.apply(String,Array.from(new Uint8Array(e)))),o("WAWebUserPrefsScreenLock").setScreenLockSalt(e)),e=o("WAWebUserPrefsScreenLock").getScreenLockSalt(),e==null&&(o("WALogger").DEV(R||(R=babelHelpers.taggedTemplateLiteralLoose(["[DB ENC CRITICAL ERROR] null returned for local app lock salt"]))),o("WAWebSocketLogoutJob").socketLogout(o("WAWebLogoutReasonConstants").LogoutReason.MissingScreenLockSalt)),e=Uint8Array.from(atob(e),function(e){return e.charCodeAt(0)}),(k||(k=n("Promise"))).resolve(e)},t.createScreenLockIv=function(){var e=new Uint8Array(16);self.crypto.getRandomValues(e);var t=new(o("WABinary")).Binary(e).readByteArrayView(16);o("WAWebUserPrefsScreenLock").setScreenLockIvString(o("WABase64").encodeB64(t))},t.getScreenLockIvArray=function(){var e=o("WAWebUserPrefsScreenLock").getScreenLockIvString();return e?new Uint8Array(o("WABase64").decodeB64(e)):null},t.encryptNoiseWithPasscodeDerivedKey=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){if(e==null)return null;var n=this.getScreenLockIvArray();if(!n)return o("WALogger").DEV(L||(L=babelHelpers.taggedTemplateLiteralLoose(["App lock iv array: "," is null"])),!n).tags("info-store"),null;var r=yield self.crypto.subtle.encrypt({iv:n,name:P},t,e);return r});function t(t,n){return e.apply(this,arguments)}return t})(),t.decryptNoiseWithPasscodeDerivedKey=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){if(e==null)return null;var n=this.getScreenLockIvArray();if(!n)return o("WALogger").DEV(E||(E=babelHelpers.taggedTemplateLiteralLoose(["App lock iv array: "," is null"])),!n).tags("info-store"),null;var r=yield self.crypto.subtle.decrypt({iv:n,name:P},t,e);return r});function t(t,n){return e.apply(this,arguments)}return t})(),t.calculatePBKDF2Iterations=function(){var e=navigator.hardwareConcurrency;return M*Math.max(1,Number.isNaN(e)?1:e)},t.getScreenLockIterationCount=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield o("WAWebUserPrefsScreenLock").getScreenLockIterations();return(!o("WAWebUserPrefsScreenLock").getScreenLockEnabled()||e==null)&&(e=this.calculatePBKDF2Iterations(),yield o("WAWebUserPrefsScreenLock").setScreenLockIterations(e)),e});function t(){return e.apply(this,arguments)}return t})(),e})(),A=new w;l.deviceInfo=x,l.waNoiseInfo=A}),98);
__d("WAWebPwaDocumentMetadataUtils",["WAWebNoop","WAWebRuntimeEnvironmentUtils"],(function(t,n,r,o,a,i,l){var e="",s=-1,u;o("WAWebRuntimeEnvironmentUtils").isWorker()||(e=document.title);function c(t){t===void 0&&(t=null),t!=null&&(e=t),d(e)}function d(e){p()?document.title=" ":(self.clearTimeout(u),document.title+=" ",u=self.setTimeout(function(){document.title=e},0))}function m(e){e!=null&&(s=e),p!=null&&p()&&"setAppBadge"in navigator&&(s===-1||s===0?navigator.clearAppBadge==null||navigator.clearAppBadge().catch(r("WAWebNoop")):navigator.setAppBadge==null||navigator.setAppBadge(s).catch(r("WAWebNoop")))}function p(){return"matchMedia"in self?window.matchMedia("(display-mode: standalone)").matches:!1}l.setDocumentTitle=c,l.setAppBadge=m,l.isCurrentWebSessionInsidePwa=p}),98);
__d("WAWebWamPlatform",["WAWebEnvironment","WAWebPwaDocumentMetadataUtils"],(function(t,n,r,o,a,i,l){function e(){return r("WAWebEnvironment").isWindows===!0?"WIN_HYBRID":o("WAWebPwaDocumentMetadataUtils").isCurrentWebSessionInsidePwa()?"PWA":"WEB"}l.getWamPlatform=e}),98);
__d("WAWebClientPayload",["WABase64","WAByteArray","WAMd5","WAWebBuildConstants","WAWebClientFeatureFlags","WAWebClientPayloadReleaseChannel","WAWebEnvironment","WAWebLid1X1MigrationGating","WAWebMiscBrowserUtils","WAWebProtobufsCompanionReg.pb","WAWebProtobufsWa6.pb","WAWebSyncdMdSyncFieldstatMeta","WAWebUserPrefsInfoStore","WAWebUserPrefsMeUser","WAWebWamPlatform","asyncToGeneratorRuntime","encodeProtobuf","gkx","justknobx"],(function(t,n,r,o,a,i,l){var e=null;function s(e){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=o("WAWebUserPrefsMeUser").getMeDevicePnOrThrow(),r=babelHelpers.extends({},yield m(t),{username:parseInt(n.user,10),device:n.device!=null?n.device:0,lidDbMigrated:o("WAWebLid1X1MigrationGating").Lid1X1MigrationUtils.isLidMigrated()},e);return o("encodeProtobuf").encodeProtobuf(o("WAWebProtobufsWa6.pb").ClientPayloadSpec,r).readByteArrayView()}),u.apply(this,arguments)}function c(e,t,n){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=_(),a=yield f(),i=babelHelpers.extends({},yield m(n),{devicePairingData:{buildHash:r,deviceProps:a,eRegid:o("WAByteArray").intToBytes(4,e.registrationId),eKeytype:o("WAByteArray").intToBytes(1,5),eIdent:e.identityKeyPair.pubKey,eSkeyId:o("WAByteArray").intToBytes(3,t.keyId),eSkeyVal:t.keyPair.pubKey,eSkeySig:t.signature}});return o("encodeProtobuf").encodeProtobuf(o("WAWebProtobufsWa6.pb").ClientPayloadSpec,i).readByteArrayView()}),d.apply(this,arguments)}function m(e){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,n;return{passive:(t=e==null?void 0:e.passive)!=null?t:!1,pull:(n=e==null?void 0:e.pull)!=null?n:!1,connectType:o("WAWebProtobufsWa6.pb").ClientPayload$ConnectType.WIFI_UNKNOWN,connectReason:o("WAWebProtobufsWa6.pb").ClientPayload$ConnectReason.USER_ACTIVATED,userAgent:yield y(),webInfo:{webSubPlatform:v()}}}),p.apply(this,arguments)}function _(){var e=o("WABase64").decodeB64(r("WAMd5")(o("WAWebBuildConstants").VERSION_BASE)),t=new Uint8Array(e);return t}function f(){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=r("WAWebMiscBrowserUtils").info(),t;if(e.version&&e.version!==""){var n=e.version.split(".");n.length>0&&e.version&&/^[0-9\.]+$/.test(e.version)&&(t={primary:parseInt(n[0],10),secondary:n.length>1?parseInt(n[1],10):void 0,tertiary:n.length>2?parseInt(n[2],10):void 0})}var a={inlineInitialPayloadInE2EeMsg:!0,supportBotUserAgentChatHistory:!0,supportCagReactionsAndPolls:!0,supportRecentSyncChunkMessageCountTuning:!0,supportHostedGroupMsg:!0,supportBizHostedMsg:!0,supportFbidBotChatHistory:!0,supportMessageAssociation:!0,supportCallLogHistory:r("WAWebEnvironment").isWindows,supportGroupHistory:r("gkx")("15338"),thumbnailSyncDaysLimit:r("justknobx")._("4736")},i=o("WAWebClientFeatureFlags").isFeatureEnabled("debug_1_year_history_sync");if(i)a=babelHelpers.extends({},a,{fullSyncDaysLimit:365});else{var l=yield o("WAWebSyncdMdSyncFieldstatMeta").MdSyncFieldStatsMeta.getStorageEstimation();l.mdStorageQuotaBytes!==o("WAWebSyncdMdSyncFieldstatMeta").STORAGE_QUOTA_UNAVAILABLE&&(a=babelHelpers.extends({},a,{storageQuotaMb:Math.trunc(l.mdStorageQuotaBytes/1024/1024)}))}var s=r("WAWebEnvironment").isWindows&&!r("justknobx")._("1836");s&&(a.onDemandReady=!0,a.completeOnDemandReady=!0);var u=r("WAWebEnvironment").isWindows?o("WAWebProtobufsCompanionReg.pb").DeviceProps$PlatformType.UWP:b(e.name),c={os:e.os,version:t,platformType:u,requireFullSync:i,historySyncConfig:a},d=o("encodeProtobuf").encodeProtobuf(o("WAWebProtobufsCompanionReg.pb").DevicePropsSpec,c).readByteArrayView();return d}),g.apply(this,arguments)}function h(t){e=t}function y(){return C.apply(this,arguments)}function C(){return C=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield o("WAWebUserPrefsInfoStore").deviceInfo.get(),t={appVersion:{primary:Number(o("WAWebBuildConstants").VERSION_PRIMARY),secondary:Number(o("WAWebBuildConstants").VERSION_SECONDARY),tertiary:Number(o("WAWebBuildConstants").VERSION_TERTIARY)},platform:o("WAWebProtobufsWa6.pb").ClientPayload$UserAgent$Platform.WEB,releaseChannel:yield o("WAWebClientPayloadReleaseChannel").getReleaseChannel(),mcc:e.mcc,mnc:e.mnc,osVersion:e.osVersion,manufacturer:e.manufacturer,device:e.device,osBuildNumber:e.osBuild,localeLanguageIso6391:e.lg,localeCountryIso31661Alpha2:e.lc};if(r("WAWebEnvironment").isWindows){var n;t.appVersion={primary:Number((n=o("WAWebBuildConstants")).VERSION_PRIMARY),secondary:Number(n.VERSION_SECONDARY),tertiary:Number(n.VERSION_TERTIARY),quaternary:Number(n.WINDOWS_BUILD)},(o("WAWebBuildConstants").WINDOWS_BUILD==null?void 0:o("WAWebBuildConstants").WINDOWS_BUILD.length)===6&&(t.mcc=o("WAWebBuildConstants").WINDOWS_BUILD.substr(0,3),t.mnc=o("WAWebBuildConstants").WINDOWS_BUILD.substr(3,3))}return t}),C.apply(this,arguments)}function b(e){switch(e){case"Chrome":return o("WAWebProtobufsCompanionReg.pb").DeviceProps$PlatformType.CHROME;case"Firefox":return o("WAWebProtobufsCompanionReg.pb").DeviceProps$PlatformType.FIREFOX;case"IE":return o("WAWebProtobufsCompanionReg.pb").DeviceProps$PlatformType.IE;case"Opera":return o("WAWebProtobufsCompanionReg.pb").DeviceProps$PlatformType.OPERA;case"Safari":return o("WAWebProtobufsCompanionReg.pb").DeviceProps$PlatformType.SAFARI;case"Edge":return o("WAWebProtobufsCompanionReg.pb").DeviceProps$PlatformType.EDGE;case"electron":case"Desktop":return o("WAWebProtobufsCompanionReg.pb").DeviceProps$PlatformType.DESKTOP;case"ipad":case"iPad":return o("WAWebProtobufsCompanionReg.pb").DeviceProps$PlatformType.IPAD;case"tablet":case"Android tablet":return o("WAWebProtobufsCompanionReg.pb").DeviceProps$PlatformType.ANDROID_TABLET;case"Ohana":return o("WAWebProtobufsCompanionReg.pb").DeviceProps$PlatformType.OHANA;case"Aloha":return o("WAWebProtobufsCompanionReg.pb").DeviceProps$PlatformType.ALOHA;case"Catalina":return o("WAWebProtobufsCompanionReg.pb").DeviceProps$PlatformType.CATALINA;default:return o("WAWebProtobufsCompanionReg.pb").DeviceProps$PlatformType.UNKNOWN}}function v(){switch(o("WAWebWamPlatform").getWamPlatform()){case"WEB":case"PWA":return o("WAWebProtobufsWa6.pb").ClientPayload$WebInfo$WebSubPlatform.WEB_BROWSER;case"DARWIN":case"DARWIN_BETA":return o("WAWebProtobufsWa6.pb").ClientPayload$WebInfo$WebSubPlatform.DARWIN;case"MACSTORE":return o("WAWebProtobufsWa6.pb").ClientPayload$WebInfo$WebSubPlatform.APP_STORE;case"WIN_HYBRID":return o("WAWebProtobufsWa6.pb").ClientPayload$WebInfo$WebSubPlatform.WIN_HYBRID;default:return}}l.getClientPayloadForLogin=s,l.getClientPayloadForRegistration=c,l.setClientPayloadOverride=h}),98);
__d("WAWebContactGetters",["WAMd5","WATimeUtils","WAWebAlphaRegex","WAWebBusinessProfileTypes","WAWebContactComparator","WAWebGetters","WAWebGettersCaches","WAWebL10N","WAWebUserPrefsMeUser","WAWebWid"],(function(t,n,r,o,a,i,l){var e=o("WAWebGetters").createGetterFactories({createCache:o("WAWebGettersCaches").createContactsCache}),s=e.field,u=e.computed,c=e.unsafeIdentityGetter,d=c,m=s("id"),p=s("pushname"),_=s("isBusiness"),f=s("verifiedLevel"),g=s("verifiedName"),h=s("name"),y=s("forcedBusinessUpdateFromServer"),C=s("isContactSyncCompleted"),b=s("type"),v=s("requestedPnTimestamp"),S=s("shortName"),R=s("isEnterprise"),L=s("isSmb"),E=s("labels"),k=s("statusMute"),I=s("parentStatusMute"),T=u(function(e){var t=e[0],n=e[1];return t||n},[k,I]),D=s("privacyMode"),x=s("isHosted"),$=s("businessProfile"),P=u(function(e){var t=e[0],n=e[1],r=e[2],a=e[3];return n&&r!==o("WAWebBusinessProfileTypes").VERIFIED_LEVEL.HIGH?a:t},[p,_,f,g]),N=u(function(e){var t=e[0];return t||""},[p]),M=u(function(e){var t=e[0],n=e[1];return t!==o("WAWebBusinessProfileTypes").VERIFIED_LEVEL.HIGH?null:n?r("WAWebL10N").accentFold(n):null},[f,g]),w=/^[^0-9]+$/,A=u(function(e){var t=e[0],n=e[1],a=e[2],i=e[3];function l(e){var t=e.toLowerCase(),n=r("WAWebAlphaRegex").exec(t);if(n&&n.index===0||n&&w.test(t.slice(n.index))){var a=n[0],i=r("WAWebL10N").removeAccents(a);return o("WAWebContactComparator").getCollator().compare(i,a)?a:i}return"#"}return t?l(t):a===o("WAWebBusinessProfileTypes").VERIFIED_LEVEL.HIGH&&n?l(n):i!=null&&i!==""?"~":"#"},[h,g,f,P]),F=u(function(e){var t=e[0];return o("WAWebUserPrefsMeUser").isMeAccount(t)},[m]),O=u(function(e){var t=e[0];return r("WAWebWid").isUser(t)},[m]),B=u(function(e){var t=e[0];return r("WAWebWid").isGroup(t)},[m]),W=u(function(e){var t=e[0];return r("WAWebWid").isBroadcast(t)},[m]),q=u(function(e){var t=e[0];return r("WAWebWid").isNewsletter(t)},[m]),U=u(function(e){var t=e[0];return r("WAWebWid").isBot(t)},[m]),V=u(function(e){var t=e[0];return r("WAWebWid").isAiHub(t)},[m]),H=u(function(e){var t=e[0];return r("WAWebWid").isPSA(t)},[m]),G=u(function(e){var t=e[0];return r("WAWebWid").isIAS(t)},[m]),z=u(function(e){var t=e[0];return r("WAWebWid").isSupportAccount(t)},[m]),j=u(function(e){var t=e[0];return r("WAWebWid").isCAPISupportAccount(t)},[m]),K=u(function(e){var t=e[0],n=e[1];return t&&n==="in"},[O,b]),Q=u(function(e){var t=e[0],n=e[1];return t?r("WAMd5")((n.user||"")+"WA_ADD_NOTIF"):null},[O,m]),X=u(function(e){var t=e[0],n=e[1];return t?r("WAWebWid").user(n):null},[O,m]),Y=u(function(e){var t=e[0];return t==null||t+o("WATimeUtils").DAY_SECONDS<o("WATimeUtils").unixTime()},[v]),J=u(function(e){var t=e[0],n=e[1],r=e[2],a=e[3],i=e[4],l=e[5];return i||t&&n===o("WAWebBusinessProfileTypes").VERIFIED_LEVEL.HIGH&&(r===a||!r||l.isBot())},[_,f,h,g,z,m]),Z=u(function(e){var t=e[0],n=e[1],r=e[2],a=e[3];return t&&n===o("WAWebBusinessProfileTypes").VERIFIED_LEVEL.HIGH&&!!r&&r!==a},[_,f,h,g]),ee=u(function(e){var t=e[0],n=e[1];return t&&n===o("WAWebBusinessProfileTypes").VERIFIED_LEVEL.HIGH},[_,f]),te=u(function(e){var t=e[0],n=e[1];return t&&(n===o("WAWebBusinessProfileTypes").VERIFIED_LEVEL.HIGH||n===o("WAWebBusinessProfileTypes").VERIFIED_LEVEL.LOW)},[_,f]),ne=u(function(e){var t=e[0],n=e[1];return!t&&!n},[y,C]),re=u(function(e){var t=e[0],n=e[1];return t&&n===o("WAWebBusinessProfileTypes").VERIFIED_LEVEL.HIGH},[_,f]);l.getContactUnsafe=d,l.getId=m,l.getPushname=p,l.getIsBusiness=_,l.getVerifiedLevel=f,l.getVerifiedName=g,l.getName=h,l.getRequestedPnTimestamp=v,l.getShortName=S,l.getIsEnterprise=R,l.getIsSmb=L,l.getLabels=E,l.getStatusMute=k,l.getCalculatedStatusMute=T,l.getPrivacyMode=D,l.getIsHosted=x,l.getBusinessProfile=$,l.getNotifyName=P,l.getPremiumMessageName=N,l.getSearchVerifiedName=M,l.getHeader=A,l.getIsMe=F,l.getIsUser=O,l.getIsGroup=B,l.getIsBroadcast=W,l.getIsNewsletter=q,l.getIsBot=U,l.getIsAiHub=V,l.getIsPSA=H,l.getIsIAS=G,l.getIsSupportAccount=z,l.getIsCAPISupportAccount=j,l.getIsWAContact=K,l.getUserhash=Q,l.getUserid=X,l.getCanRequestPhoneNumber=Y,l.getShowBusinessCheckmarkAsPrimary=J,l.getShowBusinessCheckmarkAsSecondary=Z,l.getShowBusinessCheckmarkInChatlist=ee,l.getIsDisplayNameApproved=te,l.getShouldForceBusinessUpdate=ne,l.getShowAsMetaVerified=re}),98);
__d("WAWebContactComparator",["WAWebBusinessProfileTypes","WAWebCmd","WAWebContactGetters","WAWebL10NConstants"],(function(t,n,r,o,a,i,l){var e;d(),o("WAWebCmd").Cmd.on("set_collator",d);function s(e){if(e.name)return e.name;if(e.verifiedLevel===o("WAWebBusinessProfileTypes").VERIFIED_LEVEL.HIGH&&e.verifiedName)return e.verifiedName}var u=function(n,r){var t,a,i,l,u=(t=s(n))!=null?t:"",c=(a=s(r))!=null?a:"";if(!u&&c)return 1;if(u&&!c)return-1;if(u&&c){var d,m,p=(d=o("WAWebContactGetters").getHeader(n))!=null?d:"",_=(m=o("WAWebContactGetters").getHeader(r))!=null?m:"";if(p&&_){var f=e.compare(p,_);return f===0?e.compare(u,c):f}}var g=(i=o("WAWebContactGetters").getNotifyName(n))!=null?i:"",h=(l=o("WAWebContactGetters").getNotifyName(r))!=null?l:"";if(!g&&h)return 1;if(g&&!h)return-1;if(g&&h)return e.compare(g,h);var y=n.id.toString(),C=r.id.toString();return y&&C?y.localeCompare(C):-1};function c(){return e}function d(t){var n;if(t===void 0&&(t=o("WAWebL10NConstants").DEFAULT_LOCALE),(n=self.Intl)!=null&&n.Collator){var r=self.Intl.Collator([t],{sensitivity:"base"});e={compare:function(t,n){try{return r.compare(t,n)}catch(e){return 0}}}}else e={compare:function(t,n){return t.localeCompare(n)}}}l.ContactComparator=u,l.getCollator=c}),98);
__d("WAWebVoipBackendLoadable",["JSResourceForInteraction","Promise","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=yield(e||(e=n("Promise"))).all([r("JSResourceForInteraction")("WAWebVoipInit").__setRef("WAWebVoipBackendLoadable").load(),r("JSResourceForInteraction")("WAWebHandleVoipCallOffer").__setRef("WAWebVoipBackendLoadable").load()]),o=t[0],a=t[1];return{WAWebVoipInit:o,WAWebHandleVoipCallOffer:a}});return function(){return t.apply(this,arguments)}})();l.requireVoipJsBackend=s}),98);
__d("WAWebWebcRawPlatformsWamEvent",["WAWebWamCodegenUtils"],(function(t,n,r,o,a,i,l){var e=o("WAWebWamCodegenUtils").defineEvents({WebcRawPlatforms:[2416,{webcRawPlatform:[1,o("WAWebWamCodegenUtils").TYPES.STRING]},[1,1,1],"regular"]},{WebcRawPlatforms:[]});l.WebcRawPlatformsWamEvent=e}),98);
__d("WAWebConnModel",["WALogger","WAWebBaseModel","WAWebL10N","WAWebL10NConstants","WAWebMobilePlatforms","WAWebUserPrefsGeneral","WAWebUserPrefsMeUser","WAWebVoipBackendLoadable","WAWebVoipGatingUtils","WAWebWamEnumPlatformType","WAWebWamGlobals","WAWebWebcRawPlatformsWamEvent","asyncToGeneratorRuntime","gkx"],(function(t,n,r,o,a,i,l){var e,s=(function(t){function a(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,e.id=o("WAWebBaseModel").prop(),e.ref=o("WAWebBaseModel").prop(),e.refTTL=o("WAWebBaseModel").prop(),e.refId=o("WAWebBaseModel").prop(),e.wid=o("WAWebBaseModel").prop(),e.connected=o("WAWebBaseModel").prop(),e.protoVersion=o("WAWebBaseModel").prop(),e.clientToken=o("WAWebBaseModel").prop(),e.serverToken=o("WAWebBaseModel").prop(),e.secret=o("WAWebBaseModel").prop(),e.isResponse=o("WAWebBaseModel").prop(),e.lc=o("WAWebBaseModel").prop(),e.lg=o("WAWebBaseModel").prop(),e.locales=o("WAWebBaseModel").prop(),e.is24h=o("WAWebBaseModel").prop(),e.platform=o("WAWebBaseModel").prop(),e.phone=o("WAWebBaseModel").prop(),e.tos=o("WAWebBaseModel").prop(),e.smbTos=o("WAWebBaseModel").prop(0),e.pushname=o("WAWebBaseModel").prop(),e.blockStoreAdds=o("WAWebBaseModel").session(!1),e.meReadyTriggered=o("WAWebBaseModel").session(!1),e.refExpiry=o("WAWebBaseModel").derived(function(){return Date.now()+this.refTTL},["ref","refTTL"]),e.locale=o("WAWebBaseModel").derived(function(){return this.formatLocale(this.lg,this.lc)},["lg","lc"]),e.localesList=o("WAWebBaseModel").derived(function(){return!this.locales||!this.locales.length?this.lg?[[this.lg,this.lc]]:[]:this.locales.split(",").reduce(function(e,t){var n=t.split("-"),r=n[0],o=n[1];return r&&e.push([r,o]),e},[])},["locales","lg","lc"]),e.allLocales=o("WAWebBaseModel").derived(function(){var e=this;return Array.from(new Set(this.localesList.map(function(t){var n=t[0],r=t[1];return e.formatLocale(n,r)}))).filter(Boolean)},["localesList"]),e.allLanguages=o("WAWebBaseModel").derived(function(){return Array.from(new Set(this.localesList.map(function(e){var t=e[0],n=e[1];return t})))},["localesList"]),e.platformField=o("WAWebBaseModel").derived(function(){return this.platform&&o("WAWebWamEnumPlatformType").PLATFORM_TYPE[this.platform.toUpperCase()]||o("WAWebWamEnumPlatformType").PLATFORM_TYPE.UNKNOWN},["platform"]),e.tosShowCallNotification=o("WAWebBaseModel").derived(function(){return!0},["tos"]),e.isSMB=o("WAWebBaseModel").derived(function(){return this.platform===o("WAWebMobilePlatforms").PLATFORMS.SMBA||this.platform===o("WAWebMobilePlatforms").PLATFORMS.SMBI},["platform"]),babelHelpers.assertThisInitialized(e)||babelHelpers.assertThisInitialized(e)}babelHelpers.inheritsLoose(a,t);var i=a.prototype;return i.initialize=function(){var e=this;o("WAWebBaseModel").BaseModel.prototype.initialize.call(this),this.listenTo(this,"change:locale",function(e,t){r("WAWebL10N").setLocale(t,o("WAWebL10NConstants").L10N_PRIORITY.PHONE,!1)}),this.listenTo(this,"change:phone",function(){u(e.phone)}),this.listenTo(this,"change:platform",this.$ConnImpl$p_1),this.on("me_ready",n("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(o("WAWebVoipGatingUtils").isCallingEnabled()){var e=yield o("WAWebVoipBackendLoadable").requireVoipJsBackend(),t=e.WAWebVoipInit;yield t.initWAWebVoip()}}))},i.delete=function(){o("WAWebUserPrefsGeneral").setPushname(),this.clear()},i.canSetMyPushname=function(){return!this.isSMB},i.$ConnImpl$p_1=function(){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Conn: platform change: ",""])),this.platform),this.platform&&o("WAWebWamGlobals").Global.set({webcPhonePlatform:this.platformField}),r("gkx")("26259")&&new(o("WAWebWebcRawPlatformsWamEvent")).WebcRawPlatformsWamEvent({webcRawPlatform:this.platform}).commit()},i.formatLocale=function(t,n){return t?n?t.toLowerCase()+"-"+n.toUpperCase():t.toLowerCase():null},i.shouldSaveToCache=function(){return!!o("WAWebUserPrefsMeUser").getMaybeMeDevicePn()&&!!this.id},a})(o("WAWebBaseModel").BaseModel);s.Proxy="conn";function u(e){e===void 0&&(e={});var t=e,n=t.mcc,r=t.mnc;n&&typeof n=="string"&&(n=parseInt(n,10)),r&&typeof r=="string"&&(r=parseInt(r,10)),o("WAWebWamGlobals").Global.set({mcc:n!=null?n:null,mnc:r!=null?r:null,webcPhoneDeviceManufacturer:e.device_manufacturer||null,webcPhoneDeviceModel:e.device_model||null,webcPhoneOsBuildNumber:e.os_build_number||null,webcPhoneOsVersion:e.os_version||null,webcPhoneAppVersion:e.wa_version||null})}var c=o("WAWebBaseModel").defineModel(s),d=new c({id:"1"});l.Conn=d}),98);
__d("WAWebWidFormat",["fbt","WAJids","WALogger","WAPhoneUtils","WATypeUtils","WAWebL10N","WAWebUsernameGatingUtils","WAWebWid","WAWebWidFactory","gkx","lodash"],(function(t,n,r,o,a,i,l,s){var e,u=r("lodash").memoize(function(e){return e==="Server"?e:o("WAPhoneUtils").formatPhone(e)});function c(e){return r("WAWebL10N").isRTL()?r("WAWebL10N").isolateLTR(u(e)):u(e)}function d(t){return o("WAWebUsernameGatingUtils").shouldLogUnknownNumberError()&&o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["GetUnknownNumber: unexpected unknown number displayed for wid: ",""])),t==null?void 0:t.toLogString()),s._(/*BTDS*/"\u0631\u0642\u0645 \u063a\u064a\u0631 \u0645\u0639\u0631\u0648\u0641").toString()}function m(){return s._(/*BTDS*/"\u0645\u0633\u062a\u062e\u062f\u0645 \u063a\u064a\u0631 \u0645\u0639\u0631\u0648\u0641").toString()}function p(e){return o("WAWebUsernameGatingUtils").usernameDisplayedEnabled()?m():d(e)}function _(e){return e instanceof r("WAWebWid")?e.isLid()?r("gkx")("26258")?p(e):e.toString():c(e.user):o("WATypeUtils").isString(e)?e.endsWith(o("WAJids").LID_DOMAIN)?r("gkx")("26258")?p(o("WAWebWidFactory").createUserWidOrThrow(e)):e:c(e.split("@")[0]):""}l.getUnknownUserOrNumber=p,l.widToFormattedUser=_}),226);
__d("fbs",["fbt","invariant","FbtHooks","FbtPureStringResult"],(function(t,n,r,o,a,i,l,s){var e,u={},c=babelHelpers.extends({},l,{_param:function(t,r,o){return typeof r=="string"||r instanceof n("FbtPureStringResult")||s(0,11709,r,typeof r),l._param(t,r,o)},_plural:function(t,r,o){return o==null||typeof o=="string"||o instanceof n("FbtPureStringResult")||s(0,47119,o,typeof o),l._plural(t,r,o)},_wrapContent:function(r,o,a,i){var t=typeof r=="string"?[r]:r,l=(e||(e=n("FbtHooks"))).getErrorListener({hash:a,translation:o});return e.getFbsResult({contents:t,errorListener:l,extraOptions:i,patternHash:a,patternString:o})},cachedResults:u}),d=c;a.exports=d}),null);
__d("WAWebFrontendContactGetters",["fbt","WAWebABProps","WAWebBusinessProfileTypes","WAWebConnModel","WAWebContactGetters","WAWebGetters","WAWebGettersCaches","WAWebL10N","WAWebLidMigrationUtils","WAWebUsernameGatingUtils","WAWebWamEnumOppositeVisibleIdentificationType","WAWebWid","WAWebWidFormat","cr:17143","fbs","isStringNullOrEmpty"],(function(t,n,r,o,a,i,l,s){var e,u=(e=n("cr:17143"))!=null?e:{},c=u.ContactCollection,d=o("WAWebGetters").createGetterFactories({root:o("WAWebContactGetters").getContactUnsafe,createCache:o("WAWebGettersCaches").createFrontendContactsCache}),m=d.field,p=d.computed,_=m("phoneNumber"),f=m("displayNameLID"),g=m("locale"),h=m("pendingAction"),y=m("isContactBlocked"),C=m("shareOwnPn"),b=m("businessProfile"),v=m("commonGroups"),S=m("businessCatalog"),R=m("textStatusString"),L=m("textStatusEmoji"),E=m("textStatusEphemeralDuration"),k=m("textStatusLastUpdateTime"),I=m("textStatusExpiryTs"),T=m("usernameKey"),D=m("username"),x=m("usernameCountryCode"),$=m("isUsernameContact"),P=m("isEphemeralityDisabled"),N=p(function(e){var t=e[0];return t!=null&&t.length>0?{displayName:"@"+t,type:o("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.USERNAME}:null},[D]),M=p(function(e){var t=e[0];return t!=null?t.displayName:null},[N]),w=p(function(e){var t=e[0],n=e[1],r=e[2];return n!=null&&o("WAWebUsernameGatingUtils").usernameDisplayedEnabled()?{displayName:n,type:o("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.USERNAME}:t!=null?{displayName:t,type:o("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.MASKED_PHONE_NUMBER}:{displayName:o("WAWebWidFormat").getUnknownUserOrNumber(r),type:o("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.PLACEHOLDER}},[f,M,o("WAWebContactGetters").getId]),A=p(function(e){var t=e[0],n=e[1];return t!=null?{displayName:o("WAWebWidFormat").widToFormattedUser(t),type:o("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.PHONE_NUMBER}:n},[_,w]),F=p(function(e){var t=e[0];return t.displayName},[A]),O=p(function(e){var t=e[0],n=e[1];return t!=null&&t!==""?{displayName:t,type:o("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.SAVED_CONTACT_NAME}:n},[o("WAWebContactGetters").getName,A]),B=p(function(e){var t=e[0];return t.displayName},[O]),W=p(function(e){var t=e[0],n=e[1];return t.isLid()?n:{displayName:o("WAWebWidFormat").widToFormattedUser(t),type:o("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.PHONE_NUMBER}},[o("WAWebContactGetters").getId,A]),q=p(function(e){var t=e[0],n=e[1];return n!=null&&o("WAWebUsernameGatingUtils").usernameDisplayedEnabled()?n:t},[W,N]),U=p(function(e){var t=e[0];return t.displayName},[w]),V=p(function(e){var t=e[0];return t.displayName},[q]);function H(e){return e?r("fbs")._(/*BTDS*/"\u0648\u0627\u062a\u0633\u0627\u0628 \u0644\u0644\u0623\u0639\u0645\u0627\u0644").toString():r("fbs")._(/*BTDS*/"\u0648\u0627\u062a\u0633\u0627\u0628").toString()}var G=p(function(e){var t=e[0],n=e[1];if(!t.isRegularUser())return!1;if(t.isLid())return n;var r=o("WAWebLidMigrationUtils").toUserLid(t),a=r!=null?c==null?void 0:c.get(r):null;return a!=null&&a.isUsernameContact},[o("WAWebContactGetters").getId,$]),z=p(function(e){var t=e[0],n=e[1],r=e[2];return!!(t&&(n!=null&&n.length||r))},[o("WAWebContactGetters").getIsUser,o("WAWebContactGetters").getName,G]),j=p(function(e){var t=e[0],n=e[1],r=e[2];return!r&&t&&n!==o("WAWebBusinessProfileTypes").VERIFIED_LEVEL.HIGH},[o("WAWebContactGetters").getIsBusiness,o("WAWebContactGetters").getVerifiedLevel,z]),K=p(function(e){var t=e[0],n=e[1],r=e[2];return r?null:t||n},[o("WAWebContactGetters").getName,o("WAWebContactGetters").getNotifyName,j]),Q=p(function(e){var t=e[0],n=e[1],a=e[2],i=e[3];return a&&!r("isStringNullOrEmpty")(o("WAWebConnModel").Conn.pushname)?{displayName:o("WAWebConnModel").Conn.pushname,type:o("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.PUSHNAME}:r("WAWebWid").isPSA(t)?{displayName:H(o("WAWebConnModel").Conn.isSMB),type:null}:n!=null&&n!==""?{displayName:n,type:o("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.SAVED_CONTACT_NAME}:i},[o("WAWebContactGetters").getId,K,o("WAWebContactGetters").getIsMe,q]),X=p(function(e){var t=e[0];return t.displayName},[Q]),Y=p(function(e){var t=e[0];return t.type},[Q]),J=p(function(e){var t=e[0],n=e[1],a=e[2],i=e[3],l=e[4];if(r("WAWebWid").isPSA(a))return{displayName:H(o("WAWebConnModel").Conn.isSMB),type:null};if(r("WAWebWid").isSupportAccount(a))return{displayName:r("WAWebL10N").accentFold("WhatsApp Support"),type:null};if(i){var u=s._(/*BTDS*/"{nameOrPhoneNumber} (\u0623\u0646\u062a)",[s._param("nameOrPhoneNumber",t!=null?t:n)]);return{displayName:r("WAWebL10N").accentFold(u.toString()),type:o("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.SAVED_CONTACT_NAME}}return t!=null?{displayName:r("WAWebL10N").accentFold(t),type:o("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.SAVED_CONTACT_NAME}:null},[o("WAWebContactGetters").getName,V,o("WAWebContactGetters").getId,o("WAWebContactGetters").getIsMe,g]),Z=p(function(e){var t=e[0];return t!=null?t.displayName:null},[J]),ee=p(function(e){var t=e[0],n=e[1],a=e[2],i=e[3],l=e[4],s=e[5],u=e[6],c=e[7];return n?u?{displayName:r("fbs")._(/*BTDS*/"\u0623\u0646\u062a").toString(),type:null}:r("WAWebWid").isPSA(n)?{displayName:H(o("WAWebConnModel").Conn.isSMB),type:null}:r("WAWebWid").isSupportAccount(n)?{displayName:"WhatsApp Support",type:null}:t?{displayName:t,type:o("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.SAVED_CONTACT_NAME}:a===o("WAWebBusinessProfileTypes").VERIFIED_LEVEL.HIGH&&i?{displayName:i,type:o("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.VERIFIED_BUSINESS_NAME}:s?l:{displayName:"",type:null}:{displayName:"",type:null}},[o("WAWebContactGetters").getName,o("WAWebContactGetters").getId,o("WAWebContactGetters").getVerifiedLevel,o("WAWebContactGetters").getVerifiedName,q,o("WAWebContactGetters").getIsUser,o("WAWebContactGetters").getIsMe,g]),te=p(function(e){var t=e[0];return t.displayName},[ee]),ne=p(function(e){var t=e[0],n=e[1],o=e[2],a=e[3],i=e[4];if(!o)return{displayName:"",type:null};if(a)return{displayName:r("fbs")._(/*BTDS*/"\u0623\u0646\u062a").toString(),type:null};if(t!=null)return{displayName:t,type:null};var l=n.displayName;return{displayName:l&&l.replace(/\s/g," "),type:n.type}},[o("WAWebContactGetters").getShortName,ee,o("WAWebContactGetters").getId,o("WAWebContactGetters").getIsMe,g]),re=p(function(e){var t=e[0];return t.displayName},[ne]),oe=p(function(e){var t=e[0],n=e[1],o=e[2],a=e[3],i=e[4];if(!o)return{displayName:"",type:null};if(a)return{displayName:r("fbs")._(/*BTDS*/"\u0623\u0646\u062a").toString(),type:null};if(t!=null&&t!=="")return{displayName:t,type:null};var l=n.displayName,s=n.type;return{displayName:l,type:s}},[o("WAWebContactGetters").getShortName,ee,o("WAWebContactGetters").getId,o("WAWebContactGetters").getIsMe,g]),ae=p(function(e){var t=e[0];return t.displayName},[oe]),ie=p(function(e){var t=e[0],n=e[1];return t?!o("WAWebABProps").getABPropConfigValue("web_display_name_for_enterprise_biz_vlevel_low_killswitch"):n?!o("WAWebABProps").getABPropConfigValue("web_display_name_for_biz_vlevel_low_killswitch"):!1},[o("WAWebContactGetters").getIsEnterprise,o("WAWebContactGetters").getIsSmb]),le=p(function(e){var t=e[0],n=e[1],a=e[2],i=e[3],l=e[4],s=e[5],u=e[6],c=e[7];return n?r("WAWebWid").isPSA(n)?{displayName:H(o("WAWebConnModel").Conn.isSMB),type:null}:r("WAWebWid").isSupportAccount(n)?{displayName:"WhatsApp Support",type:null}:t?{displayName:t,type:o("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.SAVED_CONTACT_NAME}:a===o("WAWebBusinessProfileTypes").VERIFIED_LEVEL.HIGH&&i?{displayName:i,type:o("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.VERIFIED_BUSINESS_NAME}:u&&s&&i?{displayName:i,type:o("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.VERIFIED_BUSINESS_NAME}:l:{displayName:"",type:null}},[o("WAWebContactGetters").getName,o("WAWebContactGetters").getId,o("WAWebContactGetters").getVerifiedLevel,o("WAWebContactGetters").getVerifiedName,q,o("WAWebContactGetters").getIsDisplayNameApproved,ie,g]),se=p(function(e){var t=e[0];return t.displayName},[le]),ue=p(function(e){var t=e[0],n=e[1];return t?{displayName:t,type:o("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.SAVED_CONTACT_NAME}:n?{displayName:n,type:o("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE.PUSHNAME}:null},[o("WAWebContactGetters").getName,o("WAWebContactGetters").getPushname]),ce=p(function(e){var t=e[0],n=e[1],r=e[2],o=e[3],a=e[4];return t&&!!r&&o&&n!==r&&!a.isBot()},[o("WAWebContactGetters").getIsBusiness,o("WAWebContactGetters").getName,o("WAWebContactGetters").getVerifiedName,z,o("WAWebContactGetters").getId]);l.getPhoneNumber=_,l.getPendingAction=h,l.getIsContactBlocked=y,l.getShareOwnPn=C,l.getBusinessProfile=b,l.getCommonGroups=v,l.getBusinessCatalog=S,l.getTextStatusString=R,l.getTextStatusEmoji=L,l.getTextStatusEphemeralDuration=E,l.getTextStatusLastUpdateTime=k,l.getTextStatusExpiryTs=I,l.getUsernameKey=T,l.getUsername=D,l.getUsernameCountryCode=x,l.getIsEphemeralityDisabled=P,l.getFormattedUsernameAndType=N,l.getFormattedUsername=M,l.getPnForLid=F,l.getUserDisplayNameForLid=B,l.getFormattedPhoneAndType=W,l.getFormattedUsernameOrPhoneAndType=q,l.getMaskedPhoneLid=U,l.getFormattedUsernameOrPhone=V,l.getIsUsernameContact=G,l.getIsMyContact=z,l.getIsNonVerified=j,l.getMentionName=K,l.getDisplayNameAndType=Q,l.getDisplayName=X,l.getDisplayNameType=Y,l.getSearchName=Z,l.getFormattedNameAndType=ee,l.getFormattedName=te,l.getFormattedShortNameWithNonBreakingSpaces=re,l.getFormattedShortNameAndType=oe,l.getFormattedShortName=ae,l.getFormattedUserAndType=le,l.getFormattedUser=se,l.getFormattedSavedNameOrPushnameWithType=ue,l.getShowBiz3pBotVerifiedNameAsSecondary=ce}),226);
__d("WAWebClock",["fbt","$InternalEnum","WALogger","WATimeUtils","WAWeb-moment","WAWebContactGetters","WAWebEventEmitter","WAWebFrontendContactGetters","WAWebL10N","WAWebL10NConstants","WAWebL10nGetRenderedLocale","WAWebUserPrefsLocales","err"],(function(t,n,r,o,a,i,l,s){var e,u,c,d=6e4,m=1e3,p=["fi","id","ms","ms-my"],_="America/Belem",f="America/Porto_Velho",g="skew_change",h="hour24_format_change",y=-1,C=n("$InternalEnum")({DeviceTimeFormat:2,PhoneTimeFormat:1,LocaleTimeFormat:0}),b=(function(t){function n(){var n;if(n=t.call(this)||this,n.$ClockImpl$p_1=!1,n.skewMS=0,n.skew=0,Intl.DateTimeFormat&&Intl.DateTimeFormat().resolvedOptions){var r=Intl.DateTimeFormat().resolvedOptions().timeZone;switch(r?o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Intl.DateTimeFormat().resolvedOptions().timeZone is ",""])),r):o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Intl.DateTimeFormat().resolvedOptions().timeZone does not exist"]))),r){case"America/Sao_Paulo":n.timeZoneHardCode=_;break;case"America/Campo_Grande":case"America/Cuiaba":n.timeZoneHardCode=f;break}}return n.initIs24HourBasedOnLocale(),n}babelHelpers.inheritsLoose(n,t);var a=n.prototype;return a.getIs24Hour=function(){return this.$ClockImpl$p_1},a.setIs24Hour=function(t,n){if(n!==C.LocaleTimeFormat&&t!=null){var e=this.getIs24Hour();n===C.DeviceTimeFormat?o("WAWebUserPrefsLocales").setDeviceHour24(t):n===C.PhoneTimeFormat&&o("WAWebUserPrefsLocales").setPhoneHour24(t),!(n===C.PhoneTimeFormat&&o("WAWebUserPrefsLocales").getDeviceHour24()!=null)&&(this.$ClockImpl$p_1=t,e!==t&&this.trigger(h))}},a.initIs24HourBasedOnLocale=function(){var e=o("WAWebUserPrefsLocales").getDeviceHour24(),t=o("WAWebUserPrefsLocales").getPhoneHour24();e!=null?this.setIs24Hour(e,C.DeviceTimeFormat):t!=null?this.setIs24Hour(t,C.PhoneTimeFormat):this.$ClockImpl$p_1=o("WAWebL10NConstants").LOCALES_THAT_PREFER_24HOUR_TIME.has(r("WAWebL10N").getNormalizedLocale())},a.setSkew=function(t){Math.abs(t)>d&&o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Setting large clockskew: ","ms"])),t);var e=this.skewMS;this.skewMS=t,this.skew=Math.round(t/1e3),Math.abs(e-this.skewMS)>m&&this.trigger(g)},a.getSkew=function(){return this.skew},a.getServerTimeMs=function(){return Date.now()+this.skewMS},a.getServerTime=function(){return new Date(this.getServerTimeMs())},a.convertGlobalToLocalUnixTime=function(t){return t+this.skew},a.timePassedFromNowMoment=function(t,n){var e=n.omitSuffix;return r("WAWeb-moment").unix(t).fromNow(e)},a.timePassedFromNowIntl=function(t,n){var e=n.style,o=r("WAWeb-moment")(),a=r("WAWeb-moment").unix(t),i=a.diff(o,"days"),l=a.diff(o,"hours"),s=a.diff(o,"minutes"),u=a.diff(o,"seconds"),c=r("WAWebL10N").getNormalizedLocale(),d=new Intl.RelativeTimeFormat(c,{style:e});return i!==0?d.format(i,"day"):l!==0?d.format(l,"hour"):s!==0?d.format(s,"minute"):d.format(u,"second")},a.relativeStr=function(t){var e=t+this.skew;return e>=r("WAWeb-moment")().startOf("day").unix()?this.$ClockImpl$p_2(e):this.$ClockImpl$p_3(e,!1)},a.relativeDateStr=function(t){return this.$ClockImpl$p_3(t+this.skew,!1)},a.relativeDateAndTimeStr=function(t){return this.$ClockImpl$p_3(t+this.skew,!0)},a.monthStr=function(t){var e=t+this.skew,n=e*1e3;return e>=r("WAWeb-moment")().startOf("month").unix()&&e<=r("WAWeb-moment")().endOf("month").unix()?s._(/*BTDS*/"\u0647\u0630\u0627 \u0627\u0644\u0634\u0647\u0631"):e>=r("WAWeb-moment")().startOf("year").unix()&&e<=r("WAWeb-moment")().endOf("year").unix()?Intl.DateTimeFormat(r("WAWeb-moment").locale(),{month:"long"}).format(n):Intl.DateTimeFormat(r("WAWeb-moment").locale(),{month:"long",year:"numeric"}).format(n)},a.timeStr=function(t){var e=this.getIs24Hour();if(this.shouldUseIntlDateTimeFormat()){var n=(t+this.skew)*1e3,o={hour12:!e,hour:"numeric",minute:"numeric"},a={year:"numeric",month:"numeric",day:"numeric"};this.timeZoneHardCode!=null&&(o=babelHelpers.extends({},o,{timeZone:this.timeZoneHardCode}),a=babelHelpers.extends({},a,{timeZone:this.timeZoneHardCode}));var i=Intl.DateTimeFormat(r("WAWeb-moment").locale(),o).format(n),l=Intl.DateTimeFormat(r("WAWeb-moment").locale(),a).format(n);return i+", "+l}return r("WAWeb-moment").unix(t+this.skew).format(e?"HH"+this.$ClockImpl$p_4()+"mm, l":"LT, l")},a.timestampStr=function(t){return this.$ClockImpl$p_2(t+this.skew)},a.timestampStrFormat=function(){return this.getIs24Hour()?"HH"+this.$ClockImpl$p_4()+"mm":"LT"},a.timestampHour=function(t){var e=t+this.skew,n=r("WAWeb-moment").unix(e).hour();return this.getIs24Hour()?n:n%12},a.textStatusExpiryStr=function(t){var e=t+this.skew,n=this.$ClockImpl$p_2(e),r=this.$ClockImpl$p_3(e,!1);return s._(/*BTDS*/"\u062d\u062a\u0649 {date} \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("date",r),s._param("time",n)])},a.newsletterDescriptionCreatedStr=function(t){var e=this.daysDeltaAbs(t),n=t+this.skew,r=this.$ClockImpl$p_2(n);if(e===0)return s._(/*BTDS*/"\u062a\u0645 \u0627\u0644\u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u064a\u0648\u0645\u060c \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("time",r)]);if(e===1)return s._(/*BTDS*/"\u062a\u0645 \u0627\u0644\u0625\u0646\u0634\u0627\u0621 \u0623\u0645\u0633\u060c \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("time",r)]);if(e<7){var o=this.$ClockImpl$p_3(n,!1);return s._(/*BTDS*/"\u062a\u0645 \u0627\u0644\u0625\u0646\u0634\u0627\u0621 \u064a\u0648\u0645 {day} \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("day",o),s._param("time",r)])}var a=this.$ClockImpl$p_3(n,!1);return s._(/*BTDS*/"\u062a\u0645 \u0627\u0644\u0625\u0646\u0634\u0627\u0621 \u0641\u064a {date} \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("date",a),s._param("time",r)])},a.createdStr=function(t){var e=this.daysDeltaAbs(t),n=t+this.skew,r=this.$ClockImpl$p_2(n);if(e===0)return s._(/*BTDS*/"\u0623\u064f\u0646\u0634\u0650\u0626\u062a \u0627\u0644\u064a\u0648\u0645 \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("time",r)]);if(e===1)return s._(/*BTDS*/"\u0623\u064f\u0646\u0634\u0650\u0626\u062a \u0623\u0645\u0633 \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("time",r)]);if(e<7){var o=this.$ClockImpl$p_3(n,!1);return s._(/*BTDS*/"\u0623\u064f\u0646\u0634\u0650\u0626\u062a {day} \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("day",o),s._param("time",r)])}var a=this.$ClockImpl$p_3(n,!1);return s._(/*BTDS*/"\u0623\u064f\u0646\u0634\u0650\u0626\u062a \u0628\u062a\u0627\u0631\u064a\u062e {date} \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("date",a),s._param("time",r)])},a.addedStr=function(t){var e=this.daysDeltaAbs(t),n=t+this.skew,r=this.$ClockImpl$p_2(n);if(e===0)return s._(/*BTDS*/"\u062a\u0645\u062a \u0627\u0644\u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u064a\u0648\u0645 \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("time",r)]);if(e===1)return s._(/*BTDS*/"\u062a\u0645\u062a \u0627\u0644\u0625\u0636\u0627\u0641\u0629 \u0623\u0645\u0633 \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("time",r)]);if(e<7){var o=this.$ClockImpl$p_3(n,!1);return s._(/*BTDS*/"\u062a\u0645\u062a \u0627\u0644\u0625\u0636\u0627\u0641\u0629 \u064a\u0648\u0645 {day} \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("day",o),s._param("time",r)])}var a=this.$ClockImpl$p_3(n,!1);return s._(/*BTDS*/"\u062a\u0645\u062a \u0627\u0644\u0625\u0636\u0627\u0641\u0629 \u0628\u062a\u0627\u0631\u064a\u062e {date} \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("date",a),s._param("time",r)])},a.updatedStr=function(t){var e=this.daysDeltaAbs(t),n=t+this.skew,r=this.$ClockImpl$p_2(n);if(e===0)return s._(/*BTDS*/"\u062a\u0645 \u0627\u0644\u062a\u062d\u062f\u064a\u062b \u0627\u0644\u064a\u0648\u0645 \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("time",r)]);if(e===1)return s._(/*BTDS*/"\u062a\u0645 \u0627\u0644\u062a\u062d\u062f\u064a\u062b \u0623\u0645\u0633 \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("time",r)]);if(e<7){var o=this.$ClockImpl$p_3(n,!1);return s._(/*BTDS*/"\u062a\u0645 \u0627\u0644\u062a\u062d\u062f\u064a\u062b \u064a\u0648\u0645 {day} \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("day",o),s._param("time",r)])}var a=this.$ClockImpl$p_3(n,!1);return s._(/*BTDS*/"\u062a\u0645 \u0627\u0644\u062a\u062d\u062f\u064a\u062b \u0628\u062a\u0627\u0631\u064a\u062e {date} \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("date",a),s._param("time",r)])},a.groupCreatedByStr=function(t,n,r){var e=this.daysDeltaAbs(t),o=t+this.skew,a=this.$ClockImpl$p_2(o);if(e===0)return r?s._(/*BTDS*/"\u0644\u0642\u062f \u0623\u0646\u0634\u0623\u062a \u0627\u0644\u0645\u062c\u0645\u0648\u0639\u0629\u060c \u0627\u0644\u064a\u0648\u0645 \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("time",a)]):s._(/*BTDS*/"\u0623\u0646\u0634\u0623 \u0627\u0644\u0645\u062c\u0645\u0648\u0639\u0629 {name}\u060c \u0627\u0644\u064a\u0648\u0645 \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("name",n),s._param("time",a)]);if(e===1)return r?s._(/*BTDS*/"\u0645\u062c\u0645\u0648\u0639\u0629 \u0623\u0646\u0634\u0623\u062a\u0647\u0627 \u0623\u0646\u062a\u060c \u0623\u0645\u0633 \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("time",a)]):s._(/*BTDS*/"\u0623\u0646\u0634\u0623 \u0627\u0644\u0645\u062c\u0645\u0648\u0639\u0629 {name}\u060c \u0623\u0645\u0633 \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("name",n),s._param("time",a)]);if(e<7){var i=this.$ClockImpl$p_5(t);return r?s._(/*BTDS*/"\u0645\u062c\u0645\u0648\u0639\u0629 \u0623\u0646\u0634\u0623\u062a\u0647\u0627 \u0623\u0646\u062a\u060c \u064a\u0648\u0645 {on_day} \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("on_day",i),s._param("time",a)]):s._(/*BTDS*/"\u0623\u0646\u0634\u0623 \u0627\u0644\u0645\u062c\u0645\u0648\u0639\u0629 {name}\u060c \u0641\u064a \u064a\u0648\u0645 {on_day} \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("name",n),s._param("on_day",i),s._param("time",a)])}var l=this.$ClockImpl$p_3(o,!1);return r?s._(/*BTDS*/"\u0645\u062c\u0645\u0648\u0639\u0629 \u0623\u0646\u0634\u0623\u062a\u0647\u0627 \u0623\u0646\u062a\u060c \u064a\u0648\u0645 {date} \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("date",l),s._param("time",a)]):s._(/*BTDS*/"\u0645\u062c\u0645\u0648\u0639\u0629 \u0623\u0646\u0634\u0623\u0647\u0627 {name}\u060c \u064a\u0648\u0645 {date} \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("name",n),s._param("date",l),s._param("time",a)])},a.createdByOnDateStr=function(t,n){var e=this.$ClockImpl$p_6(t);if(n){if(o("WAWebContactGetters").getIsMe(n))return s._(/*BTDS*/"\u0623\u0646\u0634\u0623\u062a\u0647\u0627 \u0623\u0646\u062a \u0641\u064a {date}",[s._param("date",e)]);if(o("WAWebFrontendContactGetters").getIsMyContact(n))return s._(/*BTDS*/"\u0623\u0646\u0634\u0623\u0647\u0627 {name} \u0641\u064a {date}",[s._param("name",o("WAWebFrontendContactGetters").getFormattedName(n)),s._param("date",e)])}return s._(/*BTDS*/"\u062a\u0645 \u0625\u0646\u0634\u0627\u0624\u0647\u0627 \u0641\u064a {date}",[s._param("date",e)])},a.groupCreatedStr=function(t,n,r){if(t==null||isNaN(t))return r||n==null||n===""?null:s._(/*BTDS*/"\u062a\u0645 \u0627\u0644\u0625\u0646\u0634\u0627\u0621 \u0628\u0648\u0627\u0633\u0637\u0629 {name}",[s._param("name",n)]);var e=this.daysDeltaAbs(t),o=t+this.skew;if(e===0)return r||n==null||n===""?s._(/*BTDS*/"\u0623\u064f\u0646\u0634\u0626\u064e\u062a \u0627\u0644\u064a\u0648\u0645"):s._(/*BTDS*/"\u0623\u0646\u0634\u0623\u0647\u0627 {name} \u0627\u0644\u064a\u0648\u0645",[s._param("name",n)]);if(e===1)return r||n==null||n===""?s._(/*BTDS*/"\u0623\u064f\u0646\u0634\u0626\u064e\u062a \u0623\u0645\u0633"):s._(/*BTDS*/"\u0623\u0646\u0634\u0623\u0647\u0627 {name} \u0623\u0645\u0633",[s._param("name",n)]);if(e<7){var a=this.$ClockImpl$p_5(t);return r||n==null||n===""?s._(/*BTDS*/"\u0623\u064f\u0646\u0634\u0626\u064e\u062a \u064a\u0648\u0645 {on_day}",[s._param("on_day",a)]):s._(/*BTDS*/"\u0623\u0646\u0634\u0623\u0647\u0627 {name} \u064a\u0648\u0645 {on_day}",[s._param("on_day",a),s._param("name",n)])}var i=this.$ClockImpl$p_3(o,!1);return r||n==null||n===""?s._(/*BTDS*/"\u062a\u0645 \u0627\u0644\u0625\u0646\u0634\u0627\u0621 \u0641\u064a {date}",[s._param("date",i)]):s._(/*BTDS*/"\u0623\u0646\u0634\u0623\u0647\u0627 {name} \u0641\u064a {date}",[s._param("date",i),s._param("name",n)])},a.suggestedOnDateStr=function(t){var e=r("WAWeb-moment").unix(t).format("l");return s._(/*BTDS*/"\u062a\u0645 \u0627\u0642\u062a\u0631\u0627\u062d\u0647\u0627 \u0641\u064a {date}",[s._param("date",e)])},a.communityCreatedByStr=function(t,n,r){var e=this.daysDeltaAbs(t),o=t+this.skew,a=this.$ClockImpl$p_2(o);if(e===0)return r?s._(/*BTDS*/"\u0645\u062c\u062a\u0645\u0639 \u0623\u0646\u0634\u0623\u062a\u0647 \u0623\u0646\u062a\u060c \u0627\u0644\u064a\u0648\u0645 \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("time",a)]):s._(/*BTDS*/"\u0623\u0646\u0634\u0623\u0647 {name}\u060c \u0627\u0644\u064a\u0648\u0645 \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("name",n),s._param("time",a)]);if(e===1)return r?s._(/*BTDS*/"\u0623\u0646\u0634\u0623\u062a\u0647 \u0623\u0646\u062a\u060c \u0623\u0645\u0633 \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("time",a)]):s._(/*BTDS*/"\u0623\u0646\u0634\u0623\u0647 {name}\u060c \u0623\u0645\u0633 \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("name",n),s._param("time",a)]);if(e<7){var i=this.$ClockImpl$p_5(t);return r?s._(/*BTDS*/"\u0623\u0646\u0634\u0623\u062a\u0647 \u0623\u0646\u062a\u060c \u064a\u0648\u0645 {on-day} \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("on-day",i),s._param("time",a)]):s._(/*BTDS*/"\u0623\u0646\u0634\u0623\u0647 {name}\u060c \u064a\u0648\u0645 {on-day} \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("name",n),s._param("on-day",i),s._param("time",a)])}var l=this.$ClockImpl$p_3(o,!1);return r?s._(/*BTDS*/"\u0623\u0646\u0634\u0623\u062a\u0647 \u0623\u0646\u062a\u060c \u064a\u0648\u0645 {date} \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("date",l),s._param("time",a)]):s._(/*BTDS*/"\u0623\u0646\u0634\u0623\u0647 {name}\u060c \u064a\u0648\u0645 {date} \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("name",n),s._param("date",l),s._param("time",a)])},a.statusTimePassedString=function(t){try{return this.timePassedFromNowIntl(t,{style:"long"})}catch(e){return this.timePassedFromNowMoment(t,{omitSuffix:!1})}},a.$ClockImpl$p_5=function(t){var e=t+this.skew,n=r("WAWeb-moment").unix(e);switch(n.day()){case 0:return s._(/*BTDS*/"\u064a\u0648\u0645 \u0627\u0644\u0623\u062d\u062f");case 1:return s._(/*BTDS*/"\u064a\u0648\u0645 \u0627\u0644\u0627\u062b\u0646\u064a\u0646");case 2:return s._(/*BTDS*/"\u064a\u0648\u0645 \u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621");case 3:return s._(/*BTDS*/"\u064a\u0648\u0645 \u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621");case 4:return s._(/*BTDS*/"\u064a\u0648\u0645 \u0627\u0644\u062e\u0645\u064a\u0633");case 5:return s._(/*BTDS*/"\u064a\u0648\u0645 \u0627\u0644\u062c\u0645\u0639\u0629");case 6:return s._(/*BTDS*/"\u064a\u0648\u0645 \u0627\u0644\u0633\u0628\u062a");default:throw r("err")("Unexpected day number")}},a.untilStr=function(t){return this.$ClockImpl$p_7(t,s._(/*BTDS*/"\u062f\u0627\u0626\u0645\u064b\u0627"),function(e){return s._(/*BTDS*/"\u062d\u062a\u0649 \u0627\u0644\u064a\u0648\u0645 \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("time",e)])},function(e){return s._(/*BTDS*/"\u062d\u062a\u0649 \u0627\u0644\u063a\u062f \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("time",e)])},function(e,t){return s._(/*BTDS*/"\u062d\u062a\u0649 {day} \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("day",e),s._param("time",t)])},function(e,t){return s._(/*BTDS*/"\u062d\u062a\u0649 {date} \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("date",e),s._param("time",t)])})},a.$ClockImpl$p_7=function(t,n,r,o,a,i){if(t===y)return n;var e=this.daysDeltaAbs(t),l=t+this.skew,s=this.$ClockImpl$p_2(l);if(e===0)return r(s);if(e===1)return o(s);if(e<7){var u=this.$ClockImpl$p_3(l,!1);return a(u,s)}var c=this.$ClockImpl$p_3(l,!1);return i(c,s)},a.mutedUntilStr=function(t){return this.$ClockImpl$p_7(t,s._(/*BTDS*/"\u0643\u062a\u0645 \u062f\u0627\u0626\u0645\u064b\u0627"),function(e){return s._(/*BTDS*/"\u0643\u062a\u0645 \u062d\u062a\u0649 \u0627\u0644\u064a\u0648\u0645 \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("time",e)])},function(e){return s._(/*BTDS*/"\u0643\u062a\u0645 \u062d\u062a\u0649 \u0627\u0644\u063a\u062f \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("time",e)])},function(e,t){return s._(/*BTDS*/"\u0643\u062a\u0645 \u062d\u062a\u0649 {day} \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("day",e),s._param("time",t)])},function(e,t){return s._(/*BTDS*/"\u0643\u062a\u0645 \u062d\u062a\u0649 {date} \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("date",e),s._param("time",t)])})},a.lastSeenStr=function(t){var e=this.daysDeltaAbs(t),n=t+this.skew,r=this.$ClockImpl$p_2(n);if(e===0)return s._(/*BTDS*/"\u0622\u062e\u0631 \u0638\u0647\u0648\u0631 \u0627\u0644\u064a\u0648\u0645 \u0639\u0646\u062f {time}",[s._param("time",r)]);if(e===1)return s._(/*BTDS*/"\u0622\u062e\u0631 \u0638\u0647\u0648\u0631 \u0627\u0644\u0623\u0645\u0633 \u0639\u0646\u062f  {time}",[s._param("time",r)]);if(e<7){var o=this.$ClockImpl$p_3(n,!1);return s._(/*BTDS*/"\u0622\u062e\u0631 \u0638\u0647\u0648\u0631 \u0628\u062a\u0627\u0631\u064a\u062e {date}  \u0639\u0646\u062f {time}",[s._param("date",o),s._param("time",r)])}var a=this.$ClockImpl$p_3(n,!1);return s._(/*BTDS*/"\u0622\u062e\u0631 \u0638\u0647\u0648\u0631 \u0628\u062a\u0627\u0631\u064a\u062e {date} at {time}",[s._param("date",a),s._param("time",r)])},a.daysDeltaAbs=function(t,n){var e=t,o=r("WAWeb-moment").unix(e).startOf("day"),a=n===void 0?r("WAWeb-moment")().startOf("day"):r("WAWeb-moment").unix(n).startOf("day"),i=a.diff(o,"days");return Math.abs(i)},a.durationStr=function(t){var e=typeof t=="string"?parseInt(t,10):t,n=r("WAWeb-moment").utc(e*1e3);if(n.isValid()){var a=e<o("WATimeUtils").HOUR_SECONDS?"m:ss":"H:mm:ss";return n.format(a)}return""},a.callDurationStr=function(t){var e,n=t,r=Math.floor(n/(e=o("WATimeUtils")).DAY_SECONDS);n-=r*e.DAY_SECONDS;var a=Math.floor(n/e.HOUR_SECONDS);n-=a*e.HOUR_SECONDS;var i=Math.floor(n/e.MINUTE_SECONDS),l=Math.floor(n%e.MINUTE_SECONDS),u=s._(/*BTDS*/"_j{\"*\":\"{days} \\u064a\\u0648\\u0645\",\"4\":\"{days} \\u064a\\u0648\\u0645 \\u0648\\u0627\\u062d\\u062f\",\"8\":\"{days} \\u064a\\u0648\\u0645\\u0627\\u0646\",\"20\":\"{days} \\u0623\\u064a\\u0627\\u0645\",\"12\":\"{days} \\u064a\\u0648\\u0645\\u064b\\u0627\",\"_1\":\"\\u064a\\u0648\\u0645 \\u0648\\u0627\\u062d\\u062f\"}",[s._plural(r,"days")]),c=s._(/*BTDS*/"_j{\"*\":\"{hours} \\u0633\\u0627\\u0639\\u0629\",\"4\":\"{hours} \\u0633\\u0627\\u0639\\u0629 \\u0648\\u0627\\u062d\\u062f\\u0629\",\"8\":\"{hours} \\u0633\\u0627\\u0639\\u062a\\u0627\\u0646\",\"20\":\"{hours} \\u0633\\u0627\\u0639\\u0627\\u062a\",\"_1\":\"\\u0633\\u0627\\u0639\\u0629 \\u0648\\u0627\\u062d\\u062f\\u0629\"}",[s._plural(a,"hours")]),d=s._(/*BTDS*/"_j{\"*\":\"{minutes} \\u062f\\u0642\\u064a\\u0642\\u0629\",\"4\":\"{minutes} \\u062f\\u0642\\u064a\\u0642\\u0629 \\u0648\\u0627\\u062d\\u062f\\u0629\",\"8\":\"{minutes} \\u062f\\u0642\\u064a\\u0642\\u062a\\u0627\\u0646\",\"20\":\"{minutes} \\u062f\\u0642\\u0627\\u0626\\u0642\",\"_1\":\"\\u062f\\u0642\\u064a\\u0642\\u0629 \\u0648\\u0627\\u062d\\u062f\\u0629\"}",[s._plural(i,"minutes")]),m=s._(/*BTDS*/"_j{\"*\":\"{seconds} \\u062b\\u0627\\u0646\\u064a\\u0629\",\"4\":\"{seconds} \\u062b\\u0627\\u0646\\u064a\\u0629 \\u0648\\u0627\\u062d\\u062f\\u0629\",\"8\":\"{seconds} \\u062b\\u0627\\u0646\\u064a\\u062a\\u0627\\u0646\",\"20\":\"{seconds} \\u062b\\u0648\\u0627\\u0646\\u064d\",\"_1\":\"\\u062b\\u0627\\u0646\\u064a\\u0629 \\u0648\\u0627\\u062d\\u062f\\u0629\"}",[s._plural(l,"seconds")]);return r>0?s._(/*BTDS*/"{x days} {x hours} {x minutes} {x seconds}",[s._param("x days",u),s._param("x hours",c),s._param("x minutes",d),s._param("x seconds",m)]):a>0?s._(/*BTDS*/"{x hours} {x minutes} {x seconds}",[s._param("x hours",c),s._param("x minutes",d),s._param("x seconds",m)]):i>0?s._(/*BTDS*/"{x minutes} {x seconds}",[s._param("x minutes",d),s._param("x seconds",m)]):m},a.callDurationStrSimple=function(t){var e,n=t,r=Math.floor(n/(e=o("WATimeUtils")).DAY_SECONDS);n-=r*e.DAY_SECONDS;var a=Math.floor(n/e.HOUR_SECONDS);n-=a*e.HOUR_SECONDS;var i=Math.floor(n%e.MINUTE_SECONDS),l=r*24+a,u=Math.floor(t/e.MINUTE_SECONDS);return r>=1?s._(/*BTDS*/"_j{\"*\":\"{days} \\u064a\\u0648\\u0645\",\"4\":\"\\u064a\\u0648\\u0645 \\u0648\\u0627\\u062d\\u062f\",\"8\":\"\\u064a\\u0648\\u0645\\u0627\\u0646\",\"20\":\"{days} \\u0623\\u064a\\u0627\\u0645\",\"12\":\"{days} \\u064a\\u0648\\u0645\\u064b\\u0627\",\"_1\":\"\\u064a\\u0648\\u0645 \\u0648\\u0627\\u062d\\u062f\"}",[s._plural(r,"days")]):l>=1?s._(/*BTDS*/"_j{\"*\":\"{hours} \\u0633\\u0627\\u0639\\u0629\",\"4\":\"\\u0633\\u0627\\u0639\\u0629 \\u0648\\u0627\\u062d\\u062f\\u0629\",\"8\":\"\\u0633\\u0627\\u0639\\u062a\\u0627\\u0646\",\"20\":\"{hours} \\u0633\\u0627\\u0639\\u0627\\u062a\",\"_1\":\"\\u0633\\u0627\\u0639\\u0629 \\u0648\\u0627\\u062d\\u062f\\u0629\"}",[s._plural(l,"hours")]):u>=1?s._(/*BTDS*/"_j{\"*\":\"{minutes} \\u062f\\u0642\\u064a\\u0642\\u0629\",\"4\":\"\\u062f\\u0642\\u064a\\u0642\\u0629 \\u0648\\u0627\\u062d\\u062f\\u0629\",\"8\":\"\\u062f\\u0642\\u064a\\u0642\\u062a\\u0627\\u0646\",\"20\":\"{minutes} \\u062f\\u0642\\u0627\\u0626\\u0642\",\"_1\":\"\\u062f\\u0642\\u064a\\u0642\\u0629 \\u0648\\u0627\\u062d\\u062f\\u0629\"}",[s._plural(u,"minutes")]):s._(/*BTDS*/"_j{\"*\":\"{seconds} \\u062b\\u0627\\u0646\\u064a\\u0629\",\"4\":\"\\u062b\\u0627\\u0646\\u064a\\u0629 \\u0648\\u0627\\u062d\\u062f\\u0629\",\"8\":\"\\u062b\\u0627\\u0646\\u064a\\u062a\\u0627\\u0646\",\"20\":\"{seconds} \\u062b\\u0648\\u0627\\u0646\\u064d\",\"_1\":\"\\u062b\\u0627\\u0646\\u064a\\u0629 \\u0648\\u0627\\u062d\\u062f\\u0629\"}",[s._plural(i,"seconds")])},a.relativeShortStr=function(t){if(t<0)throw r("err")("negative duration");if(t===0)return s._(/*BTDS*/"\u0627\u0644\u0622\u0646");var e=r("WAWeb-moment")().subtract(t,"seconds").year(),n=r("WAWeb-moment")().year();if(n!==e){var o=r("WAWeb-moment")().subtract(t,"seconds").format("MMM DD, YYYY");return s._(/*BTDS*/"{formattedDate}",[s._param("formattedDate",o)])}var a=Math.floor(t/86400);if(a>7){var i=r("WAWeb-moment")().subtract(t,"seconds").format("MMM DD");return s._(/*BTDS*/"{formattedDate}",[s._param("formattedDate",i)])}return t<60?s._(/*BTDS*/"\u0627\u0644\u0622\u0646"):this.shortDurationString(t)},a.timeLeftStr=function(t){var e=this.shortDurationString(t);return s._(/*BTDS*/"\u064a\u062a\u0628\u0642\u0649 {time}",[s._param("time",e)])},a.shortDurationString=function(t){var e=Math.floor(t/86400);if(e>0)return s._(/*BTDS*/"_j{\"*\":\"\\u064a\\u0648\\u0645 \\u0648\\u0627\\u062d\\u062f\"}",[s._plural(e),s._param("days",e)]);var n=Math.floor(t/3600);if(n>0)return s._(/*BTDS*/"_j{\"*\":\"\\u0633\\u0627\\u0639\\u0629 \\u0648\\u0627\\u062d\\u062f\\u0629\"}",[s._plural(n),s._param("hours",n)]);var r=Math.floor(t/60);return r>0?s._(/*BTDS*/"_j{\"*\":\"\\u062f\\u0642\\u064a\\u0642\\u0629 \\u0648\\u0627\\u062d\\u062f\\u0629\"}",[s._plural(r),s._param("minutes",r)]):s._(/*BTDS*/"_j{\"*\":\"\\u062b\\u0627\\u0646\\u064a\\u0629 \\u0648\\u0627\\u062d\\u062f\\u0629\"}",[s._plural(t),s._param("seconds",t)])},a.enforcementTimeLeftStr=function(t){var e=Math.floor(t/3600),n=Math.floor(t%3600/60),r=t%60;if(e>24||e===24&&(n>0||r>0)){var o=Math.ceil(t/86400);return s._(/*BTDS*/"_j{\"*\":\"{days} \\u064a\\u0648\\u0645\",\"4\":\"\\u064a\\u0648\\u0645 \\u0648\\u0627\\u062d\\u062f\",\"8\":\"\\u064a\\u0648\\u0645\\u0627\\u0646\",\"20\":\"{days} \\u0623\\u064a\\u0627\\u0645\",\"12\":\"{days} \\u064a\\u0648\\u0645\\u064b\\u0627\",\"_1\":\"\\u064a\\u0648\\u0645 \\u0648\\u0627\\u062d\\u062f\"}",[s._plural(o,"days")])}var a=e.toString().padStart(2,"0"),i=n.toString().padStart(2,"0"),l=r.toString().padStart(2,"0");return s._(/*BTDS*/"{x hours}:{x minutes}:{x seconds}",[s._param("x hours",a),s._param("x minutes",i),s._param("x seconds",l)])},a.paymentTimestampStr=function(t){var e=t+this.skew,n=r("WAWeb-moment").unix(e),o=n.startOf("day"),a=r("WAWeb-moment")().startOf("day").diff(o,"days");if(a===0)return s._(/*BTDS*/"\u0627\u0644\u064a\u0648\u0645");if(a===1)return s._(/*BTDS*/"\u0623\u0645\u0633");if(a<7)switch(n.day()){case 0:default:return s._(/*BTDS*/"\u064a\u0648\u0645 \u0627\u0644\u0623\u062d\u062f");case 1:return s._(/*BTDS*/"\u064a\u0648\u0645 \u0627\u0644\u0625\u062b\u0646\u064a\u0646");case 2:return s._(/*BTDS*/"\u064a\u0648\u0645 \u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621");case 3:return s._(/*BTDS*/"\u064a\u0648\u0645 \u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621");case 4:return s._(/*BTDS*/"\u064a\u0648\u0645 \u0627\u0644\u062e\u0645\u064a\u0633");case 5:return s._(/*BTDS*/"\u064a\u0648\u0645 \u0627\u0644\u062c\u0645\u0639\u0629");case 6:return s._(/*BTDS*/"\u064a\u0648\u0645 \u0627\u0644\u0633\u0628\u062a")}else{var i=n.format("MMMM d");return s._(/*BTDS*/"\u0628\u062a\u0627\u0631\u064a\u062e {date}",[s._param("date",i)])}},a.pastParticipantOnDateAtTime=function(t,n){var e=this.daysDeltaAbs(t),r=t+this.skew,o=this.$ClockImpl$p_2(r);if(e===0)return s._(/*BTDS*/"{action} \u0627\u0644\u064a\u0648\u0645 \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("action",n),s._param("time",o)]);if(e===1)return s._(/*BTDS*/"{action} \u0628\u0627\u0644\u0623\u0645\u0633 \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("action",n),s._param("time",o)]);var a=this.$ClockImpl$p_3(r,!1);return s._(/*BTDS*/"{action} {date} \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("action",n),s._param("date",a),s._param("time",o)])},a.membershipApprovalRequestSectionDate=function(t){var e=this.daysDeltaAbs(t),n=t+this.skew;if(e===0)return{key:"today",date:s._(/*BTDS*/"\u0627\u0644\u064a\u0648\u0645")};if(e===1)return{date:s._(/*BTDS*/"\u0623\u0645\u0633"),key:"yesterday"};var o=r("WAWeb-moment").unix(n).format("LL");return{date:o,key:o}},a.dsaDisplayDate=function(t){if(this.shouldUseIntlDateTimeFormat()){var e=(t+this.skew)*1e3,n={year:"numeric",month:"short",day:"numeric"};return Intl.DateTimeFormat(r("WAWeb-moment").locale(),n).format(e)}return r("WAWeb-moment").unix(t+this.skew).format("ll")},a.periodCoveredDateStr=function(t,n){var e=r("WAWeb-moment").unix(n),o=r("WAWeb-moment").unix(t),a=this.$ClockImpl$p_8();return o.format(a)+" - "+e.format(a)},a.lastUpdatedDateStr=function(t){var e=r("WAWeb-moment").unix(t),n=this.$ClockImpl$p_8();return e.format(n)},a.$ClockImpl$p_8=function(){switch(o("WAWebL10nGetRenderedLocale").WAWebL10nGetRenderedLocale()){case"de_DE":case"sk_SK":return"Do MMM";default:return"DD MMM"}},a.$ClockImpl$p_2=function(t){var e=this.getIs24Hour();if(this.shouldUseIntlDateTimeFormat()){var n={hour12:!e,hour:"numeric",minute:"numeric"};this.timeZoneHardCode!=null&&(n=babelHelpers.extends({},n,{timeZone:this.timeZoneHardCode}));var o=Intl.DateTimeFormat(r("WAWeb-moment").locale(),n).format(t*1e3);return e?o.replace(/^24/,"00"):o.replace(/^0/,"12")}return r("WAWeb-moment").unix(t).format(this.timestampStrFormat())},a.$ClockImpl$p_6=function(t){if(this.shouldUseIntlDateTimeFormat()){var e={year:"numeric",month:"numeric",day:"numeric"};this.timeZoneHardCode!=null&&(e=babelHelpers.extends({},e,{timeZone:this.timeZoneHardCode}));var n=Intl.DateTimeFormat(r("WAWeb-moment").locale(),e).format(t*1e3);return n}return r("WAWeb-moment").unix(t).format("l")},a.$ClockImpl$p_3=function(t,n){var e=r("WAWeb-moment")().startOf("day"),o=r("WAWeb-moment").unix(t).startOf("day"),a=e.diff(o,"days"),i=this.$ClockImpl$p_2(t);if(a===0)return n?s._(/*BTDS*/"\u0627\u0644\u064a\u0648\u0645 \u0641\u064a \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("time",i)]):s._(/*BTDS*/"\u0627\u0644\u064a\u0648\u0645");if(a===1)return n?s._(/*BTDS*/"\u0623\u0645\u0633 \u0641\u064a \u0627\u0644\u0633\u0627\u0639\u0629 {time}",[s._param("time",i)]):s._(/*BTDS*/"\u0623\u0645\u0633");if(!n&&Math.abs(a)<7)return r("WAWeb-moment").unix(t).format("dddd");var l=this.$ClockImpl$p_6(t);return n?s._(/*BTDS*/"{date} \u0641\u064a {time}",[s._param("date",l),s._param("time",i)]):l},a.$ClockImpl$p_4=function(){var e=r("WAWeb-moment").locale();return p.includes(e)?".":":"},a.shouldUseIntlDateTimeFormat=function(){return Intl.DateTimeFormat&&!o("WAWebL10NConstants").LOCALE_DATE_TIME_CUSTOMIZATIONS[r("WAWeb-moment").locale()]&&!o("WAWebL10NConstants").SHOULD_USE_MOMENT_LOCALE_FORMAT.has(r("WAWeb-moment").locale())},a.tryAgainInStr=function(t){var e=Math.floor(t/86400);if(e>0){var n=s._(/*BTDS*/"_j{\"*\":\"{days} \\u064a\\u0648\\u0645\"}",[s._plural(e),s._param("days",e)]);return s._(/*BTDS*/"\u0627\u0644\u0631\u062c\u0627\u0621 \u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629 \u062e\u0644\u0627\u0644 {time}.",[s._param("time",n)])}var r=Math.floor(t/3600);if(r>0){var o=s._(/*BTDS*/"_j{\"*\":\"{hours} \\u0633\\u0627\\u0639\\u0629\"}",[s._plural(r),s._param("hours",r)]);return s._(/*BTDS*/"\u0627\u0644\u0631\u062c\u0627\u0621 \u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629 \u062e\u0644\u0627\u0644 {time}.",[s._param("time",o)])}var a=Math.floor(t/60);if(a>0){var i=s._(/*BTDS*/"_j{\"*\":\"{minutes} \\u062f\\u0642\\u064a\\u0642\\u0629\"}",[s._plural(a),s._param("minutes",a)]);return s._(/*BTDS*/"\u0627\u0644\u0631\u062c\u0627\u0621 \u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629 \u062e\u0644\u0627\u0644 {time}.",[s._param("time",i)])}var l=s._(/*BTDS*/"_j{\"*\":\"{seconds} \\u062b\\u0627\\u0646\\u064a\\u0629\"}",[s._plural(t),s._param("seconds",t)]);return s._(/*BTDS*/"\u0627\u0644\u0631\u062c\u0627\u0621 \u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629 \u062e\u0644\u0627\u0644 {time}.",[s._param("time",l)])},n})(r("WAWebEventEmitter")),v=new b;l.SKEW_CHANGE_EVENT=g,l.HOUR24_FORMAT_CHANGE_EVENT=h,l.MUTE_ALWAYS_EXPIRATION_SENTINEL=y,l.TimeFormatSource=C,l.Clock=v}),226);
__d("WAWebClockSkewDifferenceTWamEvent",["WAWebWamCodegenUtils"],(function(t,n,r,o,a,i,l){var e=o("WAWebWamCodegenUtils").defineEvents({ClockSkewDifferenceT:[3178,{clockSkewHourly:[1,o("WAWebWamCodegenUtils").TYPES.INTEGER]},[1,1e3,1e4],"private",37887164]},{ClockSkewDifferenceT:[]});l.ClockSkewDifferenceTWamEvent=e}),98);
__d("WAWebCommonSocketPlatformDetails",["WALogger","WAVerifyChainCertificateWA6","WAWapDict","WAWebProtobufsWa6.pb","asyncToGeneratorRuntime","decodeProtobuf","encodeProtobuf","err"],(function(t,n,r,o,a,i,l){var e,s=new Uint8Array([87,65,6,o("WAWapDict").DICT_VERSION]);function u(e){return o("encodeProtobuf").encodeProtobuf(o("WAWebProtobufsWa6.pb").HandshakeMessageSpec,{clientHello:e}).readByteArrayView()}function c(e){return o("encodeProtobuf").encodeProtobuf(o("WAWebProtobufsWa6.pb").HandshakeMessageSpec,{clientFinish:e}).readByteArrayView()}function d(e){return o("decodeProtobuf").decodeProtobuf(o("WAWebProtobufsWa6.pb").HandshakeMessageSpec,e).serverHello}function m(e){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=t.certificate,a=t.serverStatic;o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["processCertificate start"])));var i=yield o("WAVerifyChainCertificateWA6").verifyChainCertificateWA6(n,a);if(!i.success)throw r("err")("verifyCertificateWA6 - "+i.error)}),p.apply(this,arguments)}function _(){return null}function f(e){if(e==null)return null;var t=e!=null?e:{},n=t.intermediate,r=t.leaf;return r&&n?r.key:null}l.WA_WEB_PROTO_HEADER=s,l.encodeHandshakeHello=u,l.encodeHandshakeFinish=c,l.decodeServerHello=d,l.processCertificate=m,l.serverInfoIfKnown=_,l.makeServerInfoIfKnown=f}),98);
__d("WAWebCommsProcessAck",["WALogger","WAWebActiveMessageRanges","WAWebDBMessageUtils","WAWebMsgKey","WAWebMsgType","WAWebSchemaMessage","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime","cr:634"],(function(t,n,r,o,a,i,l){var e,s,u=(e=n("cr:634"))!=null?e:{},c=u.MsgCollection;function d(e){var t=e.attrs,n=t.id,r=t.from,a=t.t;if(e.attrs.class==="message"){var i=o("WAWebWidFactory").createWid(String(r)),l=m(e);f(String(n),i,parseInt(a,10),l),_(l,String(n),i)}}function m(e){var t,n,r=e.content;if(!Array.isArray(r)||((t=r[0])==null?void 0:t.tag)!=="rcat")return null;var o=(n=r[0])==null?void 0:n.content;return Array.isArray(o)?null:o}function p(e,t){return t.isGroup()?new(r("WAWebMsgKey"))({fromMe:!0,remote:t,id:e,participant:o("WAWebUserPrefsMeUser").getMePnUserOrThrow()}):new(r("WAWebMsgKey"))({fromMe:!0,remote:t,id:e})}function _(e,t,n){if(e!=null){var r=c==null?void 0:c.get(p(t,n));r!=null&&(r.rcat=e)}}function f(e,t,n,r){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r){var a=p(e,t),i=String(a);try{var l=yield o("WAWebSchemaMessage").getMessageTable().get(i);if((l==null?void 0:l.type)===o("WAWebMsgType").MSG_TYPE.REACTION)return;var u=o("WAWebDBMessageUtils").MessagePropertyType.cast(l==null?void 0:l.messageRangeIndex.split("_")[1]);o("WAWebSchemaMessage").getMessageTable().merge(i,{messageRangeIndex:o("WAWebDBMessageUtils").craftMessageRangeIndex(t.toString(),!1,u===o("WAWebDBMessageUtils").MessagePropertyType.SystemMessage,n),rcat:r})}catch(e){throw o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["processAckForOutgoingMessage: failed to update in storage"]))).verbose().devConsole(e).sendLogs("message processAckForOutgoingMessage failed"),e}o("WAWebActiveMessageRanges").checkAndRemoveActiveMessageRanges(a,n)}),g.apply(this,arguments)}l.default=d}),98);
__d("WAWebPassiveModeManager",["Promise","WAAbortError","WALogger","WAPromiseQueue","WAPromiseRaceAbort","WAResolvable","WASendPassiveModeProtocol","WAWebCmd","WAWebHandleOfflineAbProps","WAWebPageLoadLogging","WAWebQplQuickPerformanceLoggerMarkerIds","WAWebQplQuickPerformanceLoggerModule","WAWebWamOfflineResumeReporter"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E=6e4,k=(function(){function t(){var t=this;this.$1=new AbortController,this.$2=new(o("WAResolvable")).Resolvable,this.$3=!1,this.$4=[],this.$5=[],this.$7=E,this.$8=new(o("WAPromiseQueue")).PromiseQueue,o("WAWebCmd").Cmd.on("socket_stream_disconnected",function(){var n;o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: trying to abort passive mode because of disconnect"]))),o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: "," tasks from current or last run: ",""])),t.$5.length,t.$5.map(function(e){return e.name}).join(", ")),o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: processing tasks finished: ",""])),t.$2.resolveWasCalled()),(n=t.$1)==null||n.abort(),t.resetState()})}var a=t.prototype;return a.passiveTimeoutTimer_TESTONLY=function(){return this.$6},a.resetState=function(){o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: reset status"]))),this.$5=[],this.$6&&(self.clearTimeout(this.$6),this.$6=null),this.$3=!1,this.$2.resolveWasCalled()||this.$2.resolve(),this.$2=new(o("WAResolvable")).Resolvable,this.$1=new AbortController},a.registerPassiveTask=function(t,n){this.$4.find(function(e){return e.name===t})?o("WALogger").WARN(m||(m=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: passive task "," already registered"])),t):(o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: register passive task ",""])),t),this.$4.push({name:t,task:n}))},a.enableDebugPassiveMode=function(){},a.executePassiveTasks=function(){var e=this;if(!this.shouldConnectAsPassiveMode()){this.$2.resolve();return}var t=[].concat(this.$4);this.$4=[],this.$8.enqueue(function(){e.$5=t,o("WAWebPageLoadLogging").startPageLoadQplMeasure("passive_tasks"),o("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.OFFLINE_RESUME,"PassiveTasks_start"),o("WALogger").LOG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: executePassiveTasks: start to execute "," passive tasks: ",""])),t.length,t.map(function(e){return e.name}).join(", "));var a=r("WAPromiseRaceAbort")((L||(L=n("Promise"))).all(t.map(function(t){var n=t.task;return n(e.$1.signal).catch(function(e){if(e.name===o("WAAbortError").ABORT_ERROR)throw e;o("WALogger").ERROR(f||(f=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: executePassiveTasks: failed for single task with ",""])),e)})})),e.$1.signal).then(function(){o("WALogger").LOG(g||(g=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: executePassiveTasks: complete all tasks"]))),e.$9()}).catch(o("WAAbortError").catchAbort(function(){o("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: executePassiveTasks: abort by disconnect, skip send active"]))),e.$2.resolve()})).catch(function(t){o("WALogger").ERROR(y||(y=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: executePassiveTasks: end with error ",""])),t),e.$9()}).finally(function(){o("WAWebPageLoadLogging").endPageLoadQplMeasure("passive_tasks"),o("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(o("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.OFFLINE_RESUME,"PassiveTasks_end"),o("WALogger").LOG(C||(C=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: executePassiveTasks: done"]))),e.resetState()}),i=new L(function(t){e.$6=self.setTimeout(function(){var n=o("WALogger").ERROR(b||(b=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: executePassiveTasks: passive mode end with timeout"])));o("WAWebHandleOfflineAbProps").isNonBlockingOfflineResumeExpEnabled()&&(n=n.tags("offline-resume-experimental")),n.sendLogs("passive-timeout"),e.$9(),e.resetState(),t()},e.$7)});return L.race([a,i])})},a.$9=function(){o("WALogger").LOG(v||(v=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: _endPassiveMode"]))),this.$2.resolve(),o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logOfflinePassiveT(),this.$3||(o("WALogger").LOG(S||(S=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: send passive active iq"]))),o("WASendPassiveModeProtocol").sendPassiveModeProtocol("active"))},a.waitForPassiveTaskEnd=function(){return this.$2.promise},a.shouldConnectAsPassiveMode=function(){return this.$3||this.$4.length>0},a.setPassiveModeTimeout=function(t){o("WALogger").LOG(R||(R=babelHelpers.taggedTemplateLiteralLoose(["PassiveModeManager: setPassiveModeTimeout: config timeout to be ",""])),t),this.$7=t},t})(),I=new k;l.DEFAULT_MAX_PASSIVE_MODE_TIME_MS=E,l.PassiveTaskManager=I}),98);
__d("WAWebOnlineDanglingReceipts",["Promise","WALogger","WATimeUtils","WAWebABProps","WAWebCommsSendPing","WAWebNetworkStatus","WAWebSchemaDanglingReceipt","WAWebSendReceiptJobCommon","WAWebWamOfflineResumeReporter","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g,h,y=new Map,C=null,b=120*1e3;function v(t,n,r){var a;y.has(t)||y.set(t,new Map);var i=y.get(t);i!=null&&i.has(n)||i==null||i.set(n,[]),i==null||(a=i.get(n))==null||a.push(r),C||(C=self.setTimeout(function(){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[online-preacks] clear online dangling receipts due to timeout"]))),I(),C=null},b))}function S(){return y.size>0&&o("WAWebABProps").getABPropConfigValue("web_pre_acks_m3_receipts_enabled")}function R(){return L.apply(this,arguments)}function L(){return L=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=String(o("WATimeUtils").unixTime()),t=0,r=Array.from(y.keys()).map(function(n){var r=y.get(n);if(r)return r.forEach(function(e){t+=e.length}),o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[online-preacks]: sending online dangling grouped receipts: ",""])),r.size),o("WAWebSendReceiptJobCommon").sendAggregateReceipts({to:n,type:o("WAWebSendReceiptJobCommon").RECEIPT_TYPE.DELIVERY,t:e,groupedReceipt:r})});yield(h||(h=n("Promise"))).all(r),o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logOfflinePreackCount(t,!0),E()}),L.apply(this,arguments)}function E(){return k.apply(this,arguments)}function k(){return k=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(y.size!==0){if(!r("WAWebNetworkStatus").online){o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[online-preacks] clearOnlineDanglingReceiptsAfterSending: skip due to offline"])));return}o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[online-preacks] clearOnlineDanglingReceiptsAfterSending: sending ping"])));var e=yield o("WAWebCommsSendPing").blockSendPing();(e||!o("WAWebABProps").getABPropConfigValue("web_offline_resume_wait_for_ping_response_enabled"))&&(o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["[online-preacks] clearOnlineDanglingReceiptsAfterSending: clearing receipts"]))),y.clear())}}),k.apply(this,arguments)}function I(){return T.apply(this,arguments)}function T(){return T=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(y.size!==0){if(!r("WAWebNetworkStatus").online)return D();try{o("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[online-preacks] clearOrFlushOnlineDanglingReceipts: sending ping"])));var e=yield o("WAWebCommsSendPing").blockSendPing();(e||!o("WAWebABProps").getABPropConfigValue("web_offline_resume_wait_for_ping_response_enabled"))&&(o("WALogger").LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["[online-preacks] clearOrFlushOnlineDanglingReceipts: clearing receipts"]))),y.clear())}catch(e){o("WALogger").LOG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["[online-preacks] clearOrFlushOnlineDanglingReceipts: failed to clear receipts: ",""])),e),D()}}}),T.apply(this,arguments)}function D(){return x.apply(this,arguments)}function x(){return x=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(!(!S()||!o("WAWebABProps").getABPropConfigValue("web_pre_acks_m3_enabled"))){o("WALogger").LOG(f||(f=babelHelpers.taggedTemplateLiteralLoose(["[online-preacks]: clearOrFlushOnlineDanglingReceipts: flush due to offline."])));var e=[];y.forEach(function(t,n){t.forEach(function(t,r){t.forEach(function(t){e.push({from:String(n),author:String(r),externalId:t})})})}),e.length>0&&(o("WALogger").LOG(g||(g=babelHelpers.taggedTemplateLiteralLoose(["[online-preacks]: clearOrFlushOnlineDanglingReceipts: flush "," receipts"])),e.length),yield o("WAWebSchemaDanglingReceipt").getTable().create({receipts:e,acks:[]}),y.clear())}}),x.apply(this,arguments)}l.addOnlineDanglingReceipts=v,l.hasOnlineDanglingReceipts=S,l.sendAndClearOnlineDanglingReceipts=R}),98);
__d("WAWebUploadPrekeysForRegTask",["Promise","WAComms","WADeprecatedSendIq","WALogger","WAWap","WAWebConstantsDeprecated","WAWebSignalKeyApi","WAWebSignalStoreApi","WAWebSignalUtilsApi","WAWebUploadPreKeysJob","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g=(function(){function t(){}var a=t.prototype;return a.startKeyGenerationStage=function(){return this.$1||(this.$1=this.$3()),this.$1},a.startKeyUploadStage=function(){return this.$2||(this.$2=this.$4()),this.$2},a.$3=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["PrekeyUploadForRegistrationTask: start key generation"])));var t=yield(f||(f=n("Promise"))).all([o("WAWebSignalStoreApi").waSignalStore.getRegistrationInfo(),o("WAWebSignalStoreApi").waSignalStore.getSignedPreKey()]),a=t[0],i=t[1];if(!a||!i)throw r("err")("No signal info is available");var l=yield o("WAWebSignalStoreApi").waSignalStore.getOrGenPreKeys(o("WAWebUploadPreKeysJob").UPLOAD_KEYS_COUNT,o("WAWebSignalKeyApi").generatePreKeyPair);return o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["PrekeyUploadForRegistrationTask: successfully generated "," keys"])),l.length),{regInfo:a,signedPreKey:i,prekeys:l}});function a(){return t.apply(this,arguments)}return a})(),a.$4=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=this.$1||this.startKeyGenerationStage(),t=yield e,n=t.regInfo,a=t.signedPreKey,i=t.prekeys;o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["PrekeyUploadForRegistrationTask: start key upload"])));var l=i.length;if(l===0)throw r("err")("No preKey is available");var s=i[i.length-1].keyId,f=n.registrationId,g=n.identityKeyPair,h=o("WAWap").wap("iq",{id:o("WAWap").generateId(),xmlns:"encrypt",type:"set",to:o("WAWap").S_WHATSAPP_NET},o("WAWap").wap("registration",null,o("WAWap").BIG_ENDIAN_CONTENT(f)),o("WAWap").wap("type",null,r("WAWebConstantsDeprecated").KEY_BUNDLE_TYPE),o("WAWap").wap("identity",null,g.pubKey),o("WAWap").wap("list",null,i.map(o("WAWebSignalUtilsApi").xmppPreKey)),o("WAWebSignalUtilsApi").xmppSignedPreKey(a));try{yield o("WAComms").waitForConnection(),yield o("WAWebSignalStoreApi").waSignalStore.markKeyAsUploaded(s);var y=yield o("WADeprecatedSendIq").deprecatedSendIqWithoutRetry(h,o("WAWebUploadPreKeysJob").uploadPreKeyResParser);if(y.success)return o("WAWebSignalStoreApi").waSignalStore.setServerHasPreKeys(!0),o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["_uploadPreKeys: "," keys uploaded, raw stanza size: ","b"])),i.length,h.toString().length),{success:!0};var C=y.errorCode;return C>=500?o("WALogger").WARN(d||(d=babelHelpers.taggedTemplateLiteralLoose(["_uploadPreKeys: server requested backoff "," (count: ",", size: ","b)"])),C,l,h.toString().length):C===406?o("WALogger").WARN(m||(m=babelHelpers.taggedTemplateLiteralLoose(["_uploadPreKeys: uploaded invalid keys (count: ",", size: ","b)"])),l,h.toString().length):o("WALogger").WARN(p||(p=babelHelpers.taggedTemplateLiteralLoose(["_uploadPreKeys: unrecognized error "," (count: ",", size: ","b)"])),C,l,h.toString().length),{errorCode:y.errorCode,errorText:y.errorText}}catch(e){o("WALogger").WARN(_||(_=babelHelpers.taggedTemplateLiteralLoose(["_uploadPreKeys: disconnected, unclear if on server: "," (count: ",", size: ","b)"])),e,l,h.toString().length);return}});function t(){return e.apply(this,arguments)}return t})(),t})();function h(){return new g}l.default=h}),98);
__d("WAWebWamEnumWebcNativeUpsellCtaQrScreenExperimentGroup",[],(function(t,n,r,o,a,i){var e=Object.freeze({NONE:1,TEST_BANNER_SLIM:2,TEST_BANNER_LARGE:3,CONTROL:4});i.WEBC_NATIVE_UPSELL_CTA_QR_SCREEN_EXPERIMENT_GROUP=e}),66);
__d("WAWebDesktopUpsellQRCodeBannerExperiment",["WAWebWamEnumWebcNativeUpsellCtaQrScreenExperimentGroup"],(function(t,n,r,o,a,i,l){function e(){return o("WAWebWamEnumWebcNativeUpsellCtaQrScreenExperimentGroup").WEBC_NATIVE_UPSELL_CTA_QR_SCREEN_EXPERIMENT_GROUP.TEST_BANNER_SLIM}l.getWAWebDesktopUpsellQRCodeBannerExperiment=e}),98);
__d("WAWebDeviceFeatures",["WAWebSessionStorage"],(function(t,n,r,o,a,i,l){"use strict";function e(){return navigator.platform}function s(){return navigator.deviceMemory===void 0?"undefined":""+navigator.deviceMemory}function u(){var e=window.devicePixelRatio;return e==null||e===void 0?"undefined":e*window.outerWidth+"x"+e*window.outerHeight}function c(){var e,t;return(e=(t=navigator)==null||(t=t.connection)==null?void 0:t.rtt)!=null?e:-1}function d(){var e;return(e=r("WAWebSessionStorage")==null?void 0:r("WAWebSessionStorage").length)!=null?e:-1}function m(){return"ontouchstart"in window&&"TouchEvent"in window}function p(){return{cpuPlatform:e(),deviceMemory:s(),screenResolution:u(),connectionRoundTripTime:c(),sessionStorageLength:d(),touchPresence:m()}}l.default=p}),98);
__d("WAWebNativeCameraQRLinkedDeviceUtils",["$InternalEnum","WAWebAutoLogoutGating","gkx","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e=n("$InternalEnum")({NONE:-1,CONTROL:0,TEST:1});function s(){if(!r("justknobx")._("5007"))return u();if(o("WAWebAutoLogoutGating").isRunningInAutoLogoutIframe()){var t=window.parent.nativeCameraVariant,n=e.cast(t);return n!=null?n:u()}var a=u();return window.nativeCameraVariant=a,a}function u(){return!r("gkx")("14464")||r("gkx")("26256")?e.NONE:r("gkx")("15235")?e.TEST:e.CONTROL}function c(){return s()===e.TEST}l.NativeCameraQRLinkedDeviceVariantType=e,l.getNativeCameraQRLinkedDeviceVariant=s,l.isNativeCameraQRLinkedDeviceTest=c}),98);
__d("WAWebLinkDeviceExperience",["WABitArray","WAWebArkoseExpUtils","WAWebAutoLogoutGating","WAWebDesktopUpsellQRCodeBannerExperiment","WAWebDeviceFeatures","WAWebLinkDeviceScreenGatedUtils","WAWebNativeCameraQRLinkedDeviceUtils","WAWebWamEnumWebcNativeUpsellCtaQrScreenExperimentGroup"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e){this.flag=e}var t=e.prototype;return t.getIndex=function(){return u()-1-this.flag},e})(),s={ScreenRefreshFlag:new e(0),AutoLogoutFlag:new e(1),DesktopUpsellBannerControlFlag:new e(2),DesktopUpsellBannerTestSlimBannerFlag:new e(3),DesktopUpsellBannerTestLargeBannerFlag:new e(4),PairingScreenRefreshVariant1Flag:new e(6),LinkDeviceScreenControl:new e(8),LinkDeviceScreenTest:new e(9),OptimizedRegistrationControl:new e(10),OptimizedRegistrationTest:new e(11),ArkoseControl:new e(12),ArkoseTest:new e(13),LocalizationFixControl:new e(14),LocalizationFixTest:new e(15),TouchPresence:new e(16),AppleTouchscreenOverlay:new e(17)};function u(){return Math.max.apply(Math,Object.values(s).map(function(e){return e.flag}))+1}function c(e){var t=new(r("WABitArray"))(u());t.set(s.ScreenRefreshFlag.getIndex()),o("WAWebAutoLogoutGating").isAutoLogoutEnabled()&&t.set(s.AutoLogoutFlag.getIndex());var n=o("WAWebDesktopUpsellQRCodeBannerExperiment").getWAWebDesktopUpsellQRCodeBannerExperiment();switch(n){case o("WAWebWamEnumWebcNativeUpsellCtaQrScreenExperimentGroup").WEBC_NATIVE_UPSELL_CTA_QR_SCREEN_EXPERIMENT_GROUP.NONE:break;case o("WAWebWamEnumWebcNativeUpsellCtaQrScreenExperimentGroup").WEBC_NATIVE_UPSELL_CTA_QR_SCREEN_EXPERIMENT_GROUP.CONTROL:{t.set(s.DesktopUpsellBannerControlFlag.getIndex());break}case o("WAWebWamEnumWebcNativeUpsellCtaQrScreenExperimentGroup").WEBC_NATIVE_UPSELL_CTA_QR_SCREEN_EXPERIMENT_GROUP.TEST_BANNER_SLIM:{t.set(s.DesktopUpsellBannerTestSlimBannerFlag.getIndex());break}case o("WAWebWamEnumWebcNativeUpsellCtaQrScreenExperimentGroup").WEBC_NATIVE_UPSELL_CTA_QR_SCREEN_EXPERIMENT_GROUP.TEST_BANNER_LARGE:{t.set(s.DesktopUpsellBannerTestLargeBannerFlag.getIndex());break}}var a=o("WAWebLinkDeviceScreenGatedUtils").getLinkDeviceScreenVariant();switch(a){case o("WAWebLinkDeviceScreenGatedUtils").LinkDeviceScreenVariantType.M1_WINNER:t.set(s.PairingScreenRefreshVariant1Flag.getIndex());break}var i=o("WAWebNativeCameraQRLinkedDeviceUtils").getNativeCameraQRLinkedDeviceVariant();switch(i){case o("WAWebNativeCameraQRLinkedDeviceUtils").NativeCameraQRLinkedDeviceVariantType.NONE:break;case o("WAWebNativeCameraQRLinkedDeviceUtils").NativeCameraQRLinkedDeviceVariantType.CONTROL:t.set(s.LinkDeviceScreenControl.getIndex());break;case o("WAWebNativeCameraQRLinkedDeviceUtils").NativeCameraQRLinkedDeviceVariantType.TEST:t.set(s.LinkDeviceScreenTest.getIndex());break}var l=o("WAWebLinkDeviceScreenGatedUtils").getOptimizedRegFromWebVariant(),c=(e==null?void 0:e.resultType)==="WEB_REGISTRATION_CAMPAIGN"||l==="test";c?t.set(s.OptimizedRegistrationTest.getIndex()):l==="control"&&t.set(s.OptimizedRegistrationControl.getIndex());var d=o("WAWebArkoseExpUtils").getArkoseVariant();switch(d){case o("WAWebArkoseExpUtils").ArkoseVariantType.CONTROL:t.set(s.ArkoseControl.getIndex());break;case o("WAWebArkoseExpUtils").ArkoseVariantType.TEST:t.set(s.ArkoseTest.getIndex());break;default:break}var m=o("WAWebLinkDeviceScreenGatedUtils").getLocalizationFixVariant();switch(m){case"control":t.set(s.LocalizationFixControl.getIndex());break;case"test":t.set(s.LocalizationFixTest.getIndex());break}return r("WAWebDeviceFeatures")().touchPresence&&t.set(s.TouchPresence.getIndex()),o("WAWebLinkDeviceScreenGatedUtils").isAppleTouchscreenOverlayEnabled()&&t.set(s.AppleTouchscreenOverlay.getIndex()),t.toNumber()}l.getWebCompanionLinkDeviceExperienceId=c}),98);
__d("WAWebWamEnumApplicationState",[],(function(t,n,r,o,a,i){var e=Object.freeze({FOREGROUND:1,BACKGROUND:2});i.APPLICATION_STATE=e}),66);
__d("WAWebWamEnumMdLinkDeviceCompanionStage",[],(function(t,n,r,o,a,i){var e=Object.freeze({PAIR_SUCCESS_RECEIVED:1,PAIR_DEVICE_SIGN_SENT:2,FIRST_CONNECT:3,UPLOAD_PREKEYS:4,COMPLETE:5,GENERATE_PREKEYS:6,SENT_PREKEYS:7});i.MD_LINK_DEVICE_COMPANION_STAGE=e}),66);
__d("WAWebMdLinkDeviceCompanionWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumApplicationState","WAWebWamEnumMdLinkDeviceCompanionStage"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({MdLinkDeviceCompanion:[2576,{appContext:[13,e.TYPES.STRING],appContextBitfield:[14,e.TYPES.INTEGER],applicationState:[12,o("WAWebWamEnumApplicationState").APPLICATION_STATE],mdCompanionRefHash:[10,e.TYPES.STRING],mdDurationS:[8,e.TYPES.INTEGER],mdLinkDeviceCompanionErrorCode:[6,e.TYPES.INTEGER],mdLinkDeviceCompanionStage:[4,o("WAWebWamEnumMdLinkDeviceCompanionStage").MD_LINK_DEVICE_COMPANION_STAGE],mdLinkDeviceExperienceId:[11,e.TYPES.INTEGER],mdRegAttemptId:[9,e.TYPES.STRING],mdSessionId:[1,e.TYPES.STRING],mdTimestampS:[7,e.TYPES.INTEGER],mdWasUpgraded:[5,e.TYPES.BOOLEAN],userLocale:[15,e.TYPES.STRING]},[1,1,1],"regular"]},{MdLinkDeviceCompanion:[]});l.MdLinkDeviceCompanionWamEvent=s}),98);
__d("WAWebWamDeviceLinkReporter",["WABase64","WABinary","WACryptoSha256","WAResolvable","WATimeUtils","WAWebAppTracker","WAWebLinkDeviceExperience","WAWebMdLinkDeviceCompanionWamEvent","WAWebWamEnumMdLinkDeviceCompanionStage","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e=null,s=null,u=null,c=null;function d(e,t,n){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,r){e=new(o("WAWebMdLinkDeviceCompanionWamEvent")).MdLinkDeviceCompanionWamEvent;var a=yield f(t,n);return s={regStartTime:r,sessionId:a},a}),m.apply(this,arguments)}function p(e){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n;e&&(yield(n=c)==null?void 0:n.promise,c=new(o("WAResolvable")).Resolvable,u=t,yield h())}),_.apply(this,arguments)}function f(e,t){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=new(o("WABinary")).Binary;n.writeBuffer(e),n.write(95),n.writeBuffer(t);var r=n.readByteArrayView(),a=yield o("WACryptoSha256").sha256(r);return o("WABase64").encodeB64(a)}),g.apply(this,arguments)}function h(t){var n;if(!(!e||!s)){var r=s,a=o("WATimeUtils").unixTimeWithoutClockSkewCorrection()-r.regStartTime;if(u!=null){e=new(o("WAWebMdLinkDeviceCompanionWamEvent")).MdLinkDeviceCompanionWamEvent({mdDurationS:a,mdSessionId:r.sessionId,mdTimestampS:r.regStartTime,mdLinkDeviceCompanionErrorCode:t==null?0:t,mdLinkDeviceCompanionStage:u,mdLinkDeviceExperienceId:o("WAWebLinkDeviceExperience").getWebCompanionLinkDeviceExperienceId()});var i=e;o("WAWebAppTracker").attachWAMAppContext(i,a*1e3),i.commitAndWaitForFlush(!0),(n=c)==null||n.resolve(),(t!=null||i.mdLinkDeviceCompanionStage===o("WAWebWamEnumMdLinkDeviceCompanionStage").MD_LINK_DEVICE_COMPANION_STAGE.COMPLETE)&&(e=null,s=null,u=null)}}}l.initDeviceLinkEvent=d,l.setDeviceLinkPairStage=p,l.commitDeviceLinkEvent=h}),98);
__d("WAWebRegisterPassiveTasks",["WAAbortError","WACustomError","WALogger","WAPromiseLoop","WAPromiseTimeout","WAWebABPropsLocalStorage","WAWebABPropsWamGlobals","WAWebAbPropsSyncJob","WAWebClearDanglingReceipts","WAWebGetMessageCache","WAWebHandleOfflineAbProps","WAWebOnlineDanglingReceipts","WAWebPassiveModeManager","WAWebSchemaDanglingReceipt","WAWebSignalStoreApi","WAWebUploadPrekeysForRegTask","WAWebUserPrefsGeneral","WAWebWamDeviceLinkReporter","WAWebWamEnumMdLinkDeviceCompanionStage","asyncToGeneratorRuntime","cr:10195","gkx"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L=4,E=60*1e3;function k(){return I.apply(this,arguments)}function I(){return I=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=yield o("WAWebSignalStoreApi").waSignalStore.getServerHasPreKeys();if(!t){yield o("WAWebWamDeviceLinkReporter").setDeviceLinkPairStage(o("WAWebWamEnumMdLinkDeviceCompanionStage").MD_LINK_DEVICE_COMPANION_STAGE.UPLOAD_PREKEYS);var a=r("WAWebUploadPrekeysForRegTask")();a.startKeyGenerationStage(),o("WAWebPassiveModeManager").PassiveTaskManager.registerPassiveTask("KeyUpload",function(t){return o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[passive] start key upload"]))),a.startKeyUploadStage().then(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[passive] key upload complete"]))),yield o("WAWebWamDeviceLinkReporter").setDeviceLinkPairStage(o("WAWebWamEnumMdLinkDeviceCompanionStage").MD_LINK_DEVICE_COMPANION_STAGE.COMPLETE),yield o("WAWebWamDeviceLinkReporter").commitDeviceLinkEvent()})).catch((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["error while uploading prekeys, ",""])),e).verbose().devConsole(e).sendLogs("error while uploading prekeys"),yield o("WAWebWamDeviceLinkReporter").commitDeviceLinkEvent(-1)});return function(t){return e.apply(this,arguments)}})())})}(r("gkx")("17264")||r("gkx")("26259")||!o("WAWebABPropsLocalStorage").isABPropsAfterFirstSync()||(yield o("WAWebUserPrefsGeneral").getWhatsAppWebExternalBetaDirtyBitIdb()))&&(yield o("WAWebPassiveModeManager").PassiveTaskManager.registerPassiveTask("SyncABProps",function(e){return o("WAWebAbPropsSyncJob").syncABPropsTask().catch(function(e){o("WALogger").WARN(c||(c=babelHelpers.taggedTemplateLiteralLoose(["error while sync ab props prekeys, ",""])),e).verbose()})}),o("WAWebUserPrefsGeneral").setWhatsAppWebExternalBetaDirtyBitIdb(!1),o("WAWebABPropsWamGlobals").setAbPropDependingGlobalWamAttributes())}),I.apply(this,arguments)}function T(){return D.apply(this,arguments)}function D(){return D=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){o("WAWebOnlineDanglingReceipts").hasOnlineDanglingReceipts()&&o("WAWebPassiveModeManager").PassiveTaskManager.registerPassiveTask("SendOnlineDanglingReceipts",n("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["[passive] start sending online dangling receipts"]))),yield o("WAWebOnlineDanglingReceipts").sendAndClearOnlineDanglingReceipts(),o("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[passive] sending online dangling receipts complete"])))}catch(e){o("WALogger").ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["error while sending online dangling receipts, ",""])),e).verbose().devConsole(e).sendLogs("send-online-dangling-receipts-failed")}}));var e=yield o("WAWebSchemaDanglingReceipt").getTable().all(),t=e.length>0,r=o("WAWebGetMessageCache").getMessageCache().size()>0||o("WAWebGetMessageCache").getMessageCache().checkpointQueue.size()>0;(t||r)&&o("WAWebPassiveModeManager").PassiveTaskManager.registerPassiveTask("SendDanglingReceipts",(function(){var a=n("asyncToGeneratorRuntime").asyncToGenerator(function*(n){if(t)try{o("WALogger").LOG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["[passive] sending dangling receipts"]))),yield o("WAWebClearDanglingReceipts").sendAndClearDanglingReceipts(e,n),o("WALogger").LOG(f||(f=babelHelpers.taggedTemplateLiteralLoose(["[passive] sending dangling receipts: done"])))}catch(e){if(e.name===o("WAAbortError").ABORT_ERROR)throw e;o("WALogger").ERROR(g||(g=babelHelpers.taggedTemplateLiteralLoose(["[passive] sending dangling receipts failed: ",""])),e).verbose().devConsole(e).sendLogs("send-and-clear-dangling-receipts-failed")}r&&(yield $())});return function(e){return a.apply(this,arguments)}})())}),D.apply(this,arguments)}var x=null;function $(){return P.apply(this,arguments)}function P(){return P=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(x)return o("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[passive] flush message cache: skip"]))),x;try{o("WALogger").LOG(y||(y=babelHelpers.taggedTemplateLiteralLoose(["[passive] flush message cache"])));var e=o("WAPromiseLoop").promiseLoop((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){o("WALogger").LOG(C||(C=babelHelpers.taggedTemplateLiteralLoose(["[passive] flush message cache: size: ",", queue size: ",", generation: ",""])),o("WAWebGetMessageCache").getMessageCache().size(),o("WAWebGetMessageCache").getMessageCache().checkpointQueue.size(),n),o("WAWebGetMessageCache").getMessageCache().size()>0&&o("WAWebGetMessageCache").getMessageCache().createSnapshot(),yield o("WAWebGetMessageCache").getMessageCache().checkpointQueue.wait(),o("WAWebGetMessageCache").getMessageCache().size()===0&&o("WAWebGetMessageCache").getMessageCache().checkpointQueue.size()===0?e():n+1>=L&&(o("WALogger").WARN(b||(b=babelHelpers.taggedTemplateLiteralLoose(["[passive] flush message cache: stop after "," attempts"])),L),e())});return function(t,n,r){return e.apply(this,arguments)}})());x=o("WAPromiseTimeout").promiseTimeout(e,E),yield x,o("WALogger").LOG(v||(v=babelHelpers.taggedTemplateLiteralLoose(["[passive] flush message cache: done"])))}catch(e){if(e instanceof o("WACustomError").TimeoutError){var t=o("WALogger").ERROR(S||(S=babelHelpers.taggedTemplateLiteralLoose(["[passive] flush message cache: timeout"])));o("WAWebHandleOfflineAbProps").isNonBlockingOfflineResumeExpEnabled()&&(t=t.tags("offline-resume-experimental")),t.sendLogs("passive-flush-message-cache-timeout",{sampling:.01})}else o("WALogger").ERROR(R||(R=babelHelpers.taggedTemplateLiteralLoose(["[passive] flush message cache failed: ",""])),e).verbose().devConsole(e).sendLogs("passive-flush-message-cache-failed",{sampling:.01})}finally{x=null}}),P.apply(this,arguments)}l.registerPassiveTaskForStartUp=k,l.registerPassiveTasksForConnect=T}),98);
__d("WAWebGetClientPayloadForLogin",["WALogger","WAWebClientPayload","WAWebPassiveModeManager","WAWebRegisterPassiveTasks","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s;function u(e){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=t||{passive:!1,pull:!0},r=self.performance.now();yield o("WAWebRegisterPassiveTasks").registerPassiveTasksForConnect(),o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[comms] getClientPayloadForLogin registered passive tasks in ","ms"])),Math.ceil(self.performance.now()-r)).tags("launch-socket-chat"),n.passive=o("WAWebPassiveModeManager").PassiveTaskManager.shouldConnectAsPassiveMode();var a=self.performance.now(),i=yield o("WAWebClientPayload").getClientPayloadForLogin(n);return o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[comms] getClientPayloadForLogin generated payload in ","ms"])),Math.ceil(self.performance.now()-a)).tags("launch-socket-chat"),i}),c.apply(this,arguments)}l.getClientPayloadForLogin=u}),98);
__d("WAWebGetClientPayloadForRegistration",["Promise","WALogger","WAWebClientPayload","WAWebSignalStoreApi","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){var e,s,u;function c(e){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var a=self.performance.now(),i=yield(u||(u=n("Promise"))).all([o("WAWebSignalStoreApi").waSignalStore.getRegistrationInfo(),o("WAWebSignalStoreApi").waSignalStore.getSignedPreKey()]),l=i[0],c=i[1];if(o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[comms] getClientPayloadForRegistration fetched signalInfo in ","ms"])),Math.ceil(self.performance.now()-a)).tags("launch-socket-chat"),!c||!l)throw r("err")("Invalid signal credentials");var d=self.performance.now(),m=yield o("WAWebClientPayload").getClientPayloadForRegistration(l,c,t);return o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[comms] getClientPayloadForRegistration generated payload in ","ms"])),Math.ceil(self.performance.now()-d)).tags("launch-socket-chat"),m}),d.apply(this,arguments)}l.getClientPayloadForRegistration=c}),98);
__d("WAWebCookieDomain",["gkx"],(function(t,n,r,o,a,i,l){var e=".web.whatsapp.com";r("gkx")("26258")||(e=".dev-web.whatsapp.com");var s=e;l.COOKIE_DOMAIN=s}),98);
__d("WAWebEventsWaitForEvent",["Promise","WAAbortError"],(function(t,n,r,o,a,i,l){var e;function s(t,r,a,i){return a===void 0&&(a=function(){return!0}),i!=null&&i.aborted?(e||(e=n("Promise"))).reject(new(o("WAAbortError")).AbortError):new(e||(e=n("Promise")))(function(e,n){var l=function(){a.apply(this,arguments)&&(u==null||u(),e.apply(this,arguments))},s=function(){u==null||u(),n(new(o("WAAbortError")).AbortError)},u=function(){t.removeEventListener(r,l),i==null||i.removeEventListener("abort",s),u=null};i==null||i.addEventListener("abort",s),t.addEventListener(r,l)})}l.default=s}),98);
__d("WAWebEventsWaitForOffline",["WAWebEventsWaitForEvent"],(function(t,n,r,o,a,i,l){function e(e){return r("WAWebEventsWaitForEvent")(window,"offline",void 0,e)}l.default=e}),98);
__d("WAWebWatchedSocket",["WAAbortError","WABinary","WASocketTransport","WAWebEventsWaitForOffline","WAWebNoop"],(function(t,n,r,o,a,i,l){var e=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.dataToSend=new(o("WABinary")).Binary,n.wsUrl=t.url,n.$WatchedSocket$p_2=new AbortController,n.$WatchedSocket$p_1=r("WAWebEventsWaitForOffline")(n.$WatchedSocket$p_2.signal).then(function(){return n.close()}).catch(o("WAAbortError").catchAbort(r("WAWebNoop"))),n}return babelHelpers.inheritsLoose(t,e),t})(o("WASocketTransport").WebSocketTransport);l.WatchedSocket=e}),98);
__d("WAWebOpenSocket",["Promise","WAAbortError","WALogger","WANullthrows","WAPromiseRetryLoop","WAWebCookieDomain","WAWebLocalStorage","WAWebMiscErrors","WAWebWatchedSocket","gkx"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g,h,y=["wss://web.whatsapp.com/ws/chat","wss://web.whatsapp.com:5222/ws/chat"];function C(){if(!r("gkx")("26258")){var e,t=(e=r("WANullthrows")(r("WAWebLocalStorage")).getItem("wdev-pinning-cookie-value"))!=null?e:"";document.cookie=["sticky_routing="+t.replace(/\"/g,""),"path=/","domain="+o("WAWebCookieDomain").COOKIE_DOMAIN,"secure"].join(";")}}function b(t){t.code!==1e3&&o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[socket] Immediate socket closure: closed: "," ",""])),t.code,t.reason).tags("socket")}function v(e,t){var n=e!=null?"[socket] "+e+" closed. code: "+t.code:"[socket] closed connection during initialization. Code: "+t.code;switch(t.code){case 1e3:case 1001:o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[socket] ",""])),n).tags("socket");break;case 1006:e!=null&&o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[socket] ",""])),n).tags("socket"),o("WALogger").COUNT(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[socket] ",""])),n).tags("socket");break;case 1002:case 1003:case 1007:case 1008:case 1009:case 1010:case 1011:case 1015:o("WALogger").ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["[socket] ",""])),n).tags("socket");break;default:o("WALogger").ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[socket] ",". Reason: ",", clean: ",""])),n,t.reason,t.wasClean).tags("socket");break}}function S(e){var t=new AbortController;return new(h||(h=n("Promise")))(function(n,r){var a=!1,i=[];e.forEach(function(l){o("WALogger").DEV(p||(p=babelHelpers.taggedTemplateLiteralLoose(["[socket] openWebSocketsConcurrently opening ws with ","."])),l).tags("socket"),R(l,t.signal,b,v).then(function(e){a?(o("WALogger").DEV(f||(f=babelHelpers.taggedTemplateLiteralLoose(["[socket] openWebSocketsConcurrently closing socket with "," as loser"])),l).tags("socket"),t.abort(),e.close(1e3,"loser socket")):(a=!0,o("WALogger").LOG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["[socket] openWebSocketsConcurrently opened socket with "," ws."])),l).tags("socket").devConsole(e),n(e))}).catch(function(t){t.name!=="AbortError"&&(o("WALogger").WARN(g||(g=babelHelpers.taggedTemplateLiteralLoose(["[socket] openWebSocketsConcurrently socket with "," failed: ",""])),l,t).tags("socket"),i.push(t),i.length===e.length&&r(t))})})})}function R(e,t,r,a){var i=new WebSocket(e);return i.binaryType="arraybuffer",new(h||(h=n("Promise")))(function(e,n){i.onopen=e,i.onclose=function(e){if(t!=null&&t.aborted){n(new(o("WAAbortError")).AbortError);return}r==null||r(e),a==null||a(null,e),n(new(o("WAWebMiscErrors")).SocketError(e))}}).then(function(){return i})}function L(){return{jitter:.1,max:1e4,algo:{type:"fibonacci",first:1e3,second:1e3},relativeDelay:!0}}function E(){return self.navigator!=null?self.navigator.onLine:!0}function k(e){var t=y.map(function(t){return e!=null?t+"?ED="+e:t}),n=!0;C();var r=function(){E()&&n===!1&&(n=!0,a.reset())},a=new(o("WAPromiseRetryLoop")).PromiseRetryLoop({name:"socketOpener",timer:L(),code:function(r){return S(t).then(function(e){r(new(o("WAWebWatchedSocket")).WatchedSocket(e))}).catch(function(){n=E()})}});return self.addEventListener("online",r),a.start(),a.promise().finally(function(){self.removeEventListener("online",r)})}l.openWebSocket=k}),98);
__d("WAWebProcessCertificate",["WALogger","WAVerifyChainCertificateWA6","WAWebDbEncryptionKey","WAWebUserPrefsInfoStore","WAWebUserPrefsScreenLock","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){var e,s,u,c,d;function m(e){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=t.certificate,a=t.serverStatic,i=t.isRegistered;o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[socket] processCertificate start"]))).tags("handshake");var l=o("WAVerifyChainCertificateWA6").verifyChainCertificateWA6(n,a);if(o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[socket] processCertificate finished with success: ",""])),l.success).tags("handshake"),!l.success)throw r("err")("[socket] processCertificate error: "+l.error);if(i&&!o("WAWebUserPrefsScreenLock").getScreenLockEnabled()){var m=l.value,p=m.intermediate,_=m.leaf;_&&p&&(o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[socket] persisting cert chain start"]))).tags("handshake"),o("WAWebDbEncryptionKey").DbEncKeyStore.waitForInit().then(function(){o("WAWebUserPrefsInfoStore").waNoiseInfo.setCertificateChain({intermediate:{key:p.key,notAfter:Number(p.notAfter),notBefore:Number(p.notBefore)},leaf:{key:_.key,notAfter:Number(_.notAfter),notBefore:Number(_.notBefore)}}).then(function(){o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[socket] persisting cert chain finished"]))).tags("handshake")}).catch(function(e){o("WALogger").ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["[socket] processCertificate: failed to set cert chain: ",""])),e).sendLogs("handhshake-set-cert-chain",{sampling:.01})})}))}}),p.apply(this,arguments)}l.verifyAndProcessCertificate=m}),98);
__d("WAWebWamEnumWebcSocketConnectReasonType",[],(function(t,n,r,o,a,i){var e=Object.freeze({PAGE_LOAD:0,RECONNECT:1});i.WEBC_SOCKET_CONNECT_REASON_TYPE=e}),66);
__d("WAWebWebcSocketConnectWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumWebcSocketConnectReasonType"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({WebcSocketConnect:[5450,{webcAuthHandshakeDuration:[1,e.TYPES.TIMER],webcSocketConnectDuration:[2,e.TYPES.TIMER],webcSocketConnectReason:[3,o("WAWebWamEnumWebcSocketConnectReasonType").WEBC_SOCKET_CONNECT_REASON_TYPE],webcSocketHostname:[4,e.TYPES.STRING]},[1,1,1],"regular"]},{WebcSocketConnect:[]});l.WebcSocketConnectWamEvent=s}),98);
__d("WAWebOpenChatSocket",["Promise","WABase64","WABinary","WAFrameSocket","WAHex","WALogger","WANoiseHandshake","WANullthrows","WAResultOrError","WAWapDict","WAWebCommonSocketPlatformDetails","WAWebCryptoCurve25519","WAWebGetClientPayloadForLogin","WAWebGetClientPayloadForRegistration","WAWebOpenSocket","WAWebPageLoadLogging","WAWebProcessCertificate","WAWebProtobufsWa6.pb","WAWebSocketLogoutJob","WAWebUserPrefsInfoStore","WAWebUserPrefsMultiDevice","WAWebUserPrefsScreenLock","WAWebWamEnumWebcSocketConnectReasonType","WAWebWebcSocketConnectWamEvent","asyncToGeneratorRuntime","cr:4533","decodeProtobuf","encodeProtobuf","err"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I,T,D,x,$,P,N,M,w,A,F=1,O=6,B=new Uint8Array([87,65,O,o("WAWapDict").DICT_VERSION]),W="Noise_XX_25519_AESGCM_SHA256\0\0\0\0",q="Noise_IK_25519_AESGCM_SHA256\0\0\0\0",U="Noise_XXfallback_25519_AESGCM_SHA256";function V(e){return o("WAWebOpenSocket").openWebSocket(e)}function H(e,t,n){return G.apply(this,arguments)}function G(){return G=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,r){o("WALogger").DEV(k||(k=babelHelpers.taggedTemplateLiteralLoose(["[socket] openChatSocketCommon"])));var a=yield o("WAWebUserPrefsMultiDevice").getRoutingInfo(),i=a?a.edgeRouting:null,l=i?o("WABase64").encodeB64UrlSafe(i):null,s=yield o("WAWebCryptoCurve25519").keyPair();return o("WAWebPageLoadLogging").startPageLoadQplMeasure("socket_open"),V(l).then((function(){var a=n("asyncToGeneratorRuntime").asyncToGenerator(function*(n){var a=void 0;if(o("WAWebPageLoadLogging").endPageLoadQplMeasure("socket_open"),t.markWebcSocketConnectDuration(),t.webcSocketConnectReason=o("WAWebPageLoadLogging").wasPageLoadQplLogged()?o("WAWebWamEnumWebcSocketConnectReasonType").WEBC_SOCKET_CONNECT_REASON_TYPE.RECONNECT:o("WAWebWamEnumWebcSocketConnectReasonType").WEBC_SOCKET_CONNECT_REASON_TYPE.PAGE_LOAD,i){var l=new(o("WABinary")).Binary;l.write("ED",0,1),l.writeUint8(i.byteLength>>16),l.writeUint16(i.byteLength&65535),l.writeBuffer(i),a=l.readByteArrayView(),o("WALogger").DEV(I||(I=babelHelpers.taggedTemplateLiteralLoose(["openChatSocket preIntro ",""])),a)}var u=a?o("WABinary").Binary.build(a,B).readByteArrayView():B,c=new(o("WAFrameSocket")).FrameSocket(n,u),d=e?yield te(ee):null;if(o("WAWebPageLoadLogging").startPageLoadQplMeasure("auth_handshake"),t.startWebcAuthHandshakeDuration(),d!=null){var m=yield o("WAWebUserPrefsInfoStore").waNoiseInfo.get();return j(c,r,e,s,m==null?void 0:m.staticKeyPair,d)}return z(c,s,e,r)});return function(e){return a.apply(this,arguments)}})())}),G.apply(this,arguments)}function z(t,n,r,a){var i=new(o("WANoiseHandshake")).NoiseHandshake(t);i.start(W,B),o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[socket] doFullHandshake: openChatSocket send hello"]))).tags("handshake"),i.authenticate(n.pubKey);var l={clientHello:{ephemeral:n.pubKey}};return i.sendAndReceive(o("encodeProtobuf").encodeProtobuf(o("WAWebProtobufsWa6.pb").HandshakeMessageSpec,l).readByteArrayView()).then(function(e){return X(i,e,n,r,a)})}function j(e,t,a,i,l,v){if(l==null)return(A||(A=n("Promise"))).reject("resumeNoiseHandshake authKeyPair is null");var S=new(o("WANoiseHandshake")).NoiseHandshake(e);o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[socket] resumeNoiseHandshake started"]))).tags("handshake"),S.start(q,B),o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[socket] resumeNoiseHandshake authenticate with server static key"]))).tags("handshake"),S.authenticate(v),o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[socket] resumeNoiseHandshake authenticate with client ephemeral key"]))).tags("handshake"),S.authenticate(i.pubKey),o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["[socket] resumeNoiseHandshake EC Agreement 1"]))).tags("handshake"),S.mixIntoKey(o("WAWebCryptoCurve25519").sharedSecret(v,i.privKey)),o("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[socket] resumeNoiseHandshake encrypt client static key"]))).tags("handshake");var R=S.encrypt((A||(A=n("Promise"))).resolve(l.pubKey)).catch(function(e){return o("WALogger").ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["resumeNoiseHandshake failed to encrypt client static key: ",""])),e),(A||(A=n("Promise"))).reject(e)});o("WALogger").LOG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["[socket] resumeNoiseHandshake EC Agreement 2"]))).tags("handshake"),S.mixIntoKey(o("WAWebCryptoCurve25519").sharedSecret(v,l.privKey));var L=a?o("WAWebGetClientPayloadForLogin").getClientPayloadForLogin(t):o("WAWebGetClientPayloadForRegistration").getClientPayloadForRegistration(t),E=S.encrypt(A.resolve(L)).catch(function(e){return o("WALogger").ERROR(f||(f=babelHelpers.taggedTemplateLiteralLoose(["resumeNoiseHandshake failed to encrypt client login props: ",""])),e),(A||(A=n("Promise"))).reject(e)});return A.all([i.pubKey,E,R]).then(function(n){var s=n[0],u=n[1],c=n[2];o("WALogger").LOG(g||(g=babelHelpers.taggedTemplateLiteralLoose(["[socket] resumeNoiseHandshake send hello"]))).tags("handshake");var d={clientHello:{ephemeral:s,payload:u,static:c}};return S.sendAndReceive(o("encodeProtobuf").encodeProtobuf(o("WAWebProtobufsWa6.pb").HandshakeMessageSpec,d).readByteArrayView()).then(function(n){o("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[socket] resumeNoiseHandshake rcv hello"]))).tags("handshake");var s=o("decodeProtobuf").decodeProtobuf(o("WAWebProtobufsWa6.pb").HandshakeMessageSpec,n),u=s.serverHello,c=u||{},d=c.ephemeral,m=c.static,p=c.payload;if(m==null){if(o("WALogger").LOG(y||(y=babelHelpers.taggedTemplateLiteralLoose(["[socket] resumeNoiseHandshake continuing resume handshake"]))).tags("handshake"),!d)throw r("err")("serverHello missing serverEphemeral");if(!p)throw r("err")("serverHello missing certificateCiphertext");return S.authenticate(d),S.mixIntoKey(o("WAWebCryptoCurve25519").sharedSecret(d,i.privKey)),S.mixIntoKey(o("WAWebCryptoCurve25519").sharedSecret(d,l.privKey)),S.decrypt(p).then(function(){return o("WALogger").LOG(C||(C=babelHelpers.taggedTemplateLiteralLoose(["[socket] resumeNoiseHandshake deriving secrets"]))).tags("handshake"),S.finish()})}return o("WALogger").LOG(b||(b=babelHelpers.taggedTemplateLiteralLoose(["[socket] resumeNoiseHandshake failed: serverStaticCiphertext not null"]))),K(e,t,a,i,n)})})}function K(e,t,n,r,o){return Q.apply(this,arguments)}function Q(){return Q=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r,a){var i=new(o("WANoiseHandshake")).NoiseHandshake(e);return i.start(U,B),i.authenticate(r.pubKey),o("WALogger").LOG(T||(T=babelHelpers.taggedTemplateLiteralLoose(["[socket] doFallbackHandshake continuing handshake with given server hello"]))),X(i,a,r,n,t)}),Q.apply(this,arguments)}function X(e,t,a,i,l){o("WALogger").LOG(v||(v=babelHelpers.taggedTemplateLiteralLoose(["[socket] openChatSocket rcv hello"]))),o("WALogger").DEV(S||(S=babelHelpers.taggedTemplateLiteralLoose(["[socket] server hello content: ",""])),o("WAHex").toLowerCaseHex(t));var s=o("decodeProtobuf").decodeProtobuf(o("WAWebProtobufsWa6.pb").HandshakeMessageSpec,t),u=s.serverHello;if(!u)throw r("err")("ServerHello payload error");var c=u.ephemeral,d=u.static,m=u.payload;if(c==null||d==null||m==null)throw r("err")("Missing server Ephemeral");o("WALogger").DEV(R||(R=babelHelpers.taggedTemplateLiteralLoose(["[socket] serverEphemeral: ",""])),o("WAHex").toLowerCaseHex(new Uint8Array(c))),o("WALogger").DEV(L||(L=babelHelpers.taggedTemplateLiteralLoose(["[socket] serverStaticCiphertext: ",""])),o("WAHex").toLowerCaseHex(new Uint8Array(d))),o("WALogger").DEV(E||(E=babelHelpers.taggedTemplateLiteralLoose(["[socket] certificateCiphertext: ",""])),o("WAHex").toLowerCaseHex(new Uint8Array(m))),e.authenticate(c),e.mixIntoKey(o("WAWebCryptoCurve25519").sharedSecret(c,a.privKey));var p=e.decrypt(d),_=p.then(function(e){return o("WAWebCryptoCurve25519").sharedSecret(e,a.privKey)});return e.mixIntoKey(_),(A||(A=n("Promise"))).all([p,e.decrypt(m),c]).then(function(t){var n=t[0],r=t[1],o=t[2];return Y(e,n,r,o,i,l)})}function Y(e,t,n,r,o,a){return J.apply(this,arguments)}function J(){return J=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,a,i,l,s){yield o("WAWebProcessCertificate").verifyAndProcessCertificate({certificate:a,serverStatic:t,isRegistered:l}),yield i;var u=l?o("WAWebGetClientPayloadForLogin").getClientPayloadForLogin(s):o("WAWebGetClientPayloadForRegistration").getClientPayloadForRegistration(s),c=yield o("WAWebUserPrefsInfoStore").waNoiseInfo.get();c==null&&(o("WALogger").LOG(D||(D=babelHelpers.taggedTemplateLiteralLoose(["[socket] Unable to decrypt noise data"]))).tags("launch-socket-chat","handshake"),yield o("WAWebSocketLogoutJob").socketLogout(),r("WANullthrows")(c,"Unexpected null: noiseData"));var d=r("WANullthrows")(c).staticKeyPair;return(A||(A=n("Promise"))).all([Z(d,e,i),e.encrypt(A.resolve(u))]).then(function(t){var n=t[0],r=t[1],a={clientFinish:{static:n,payload:r}};return o("WALogger").LOG(x||(x=babelHelpers.taggedTemplateLiteralLoose(["[socket] continueFullHandshakeCore client finish and deriving secrets"]))),e.send(o("encodeProtobuf").encodeProtobuf(o("WAWebProtobufsWa6.pb").HandshakeMessageSpec,a).readByteArrayView()),e.finish()})}),J.apply(this,arguments)}function Z(e,t,a){var i=(A||(A=n("Promise"))).resolve(e.pubKey),l=t.encrypt(i);if(!a)return(A||(A=n("Promise"))).reject(r("err")("staticAgreement called before serverKeys"));var s=o("WAWebCryptoCurve25519").sharedSecret(a,e.privKey);return t.mixIntoKey(s),l}var ee=0;function te(e){return ne.apply(this,arguments)}function ne(){return ne=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){if(o("WAWebUserPrefsScreenLock").getScreenLockEnabled())return null;if(e>=F)return o("WALogger").LOG($||($=babelHelpers.taggedTemplateLiteralLoose(["[socket][unified] getCertficateChain handshake previously failed "," times. Falling back to full handshake"])),e).tags("handshake"),null;try{var t=yield o("WAWebUserPrefsInfoStore").waNoiseInfo.get();if(t==null)return o("WALogger").LOG(P||(P=babelHelpers.taggedTemplateLiteralLoose(["Unable to decrypt noise data for resume handshake"]))).tags("launch-socket-chat"),null;var n=t.certificateChainBuffer?o("WAWebUserPrefsInfoStore").waNoiseInfo.getCertficateChain(t.certificateChainBuffer):null;return o("WAWebCommonSocketPlatformDetails").makeServerInfoIfKnown(n)}catch(e){return o("WALogger").ERROR(N||(N=babelHelpers.taggedTemplateLiteralLoose(["[socket][unified] getCertficateChain error: ",", msg: ",", stack: ",""])),e.name,e.message,e.stack).tags("handshake"),null}}),ne.apply(this,arguments)}function re(e,t){return oe.apply(this,arguments)}function oe(){return oe=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){try{var n=e||{passive:!1,pull:!0},r=new(o("WAWebWebcSocketConnectWamEvent")).WebcSocketConnectWamEvent,a=yield H(t,r,n);return o("WAWebPageLoadLogging").endPageLoadQplMeasure("auth_handshake"),r.markWebcAuthHandshakeDuration(),r.commit(),ee=0,o("WAResultOrError").makeResult(a)}catch(e){o("WAWebPageLoadLogging").incrementPageLoadQplSocketError();var i=ae();return o("WALogger").LOG(M||(M=babelHelpers.taggedTemplateLiteralLoose(["[socket][unified] handshake failed with ",", msg: ",", network: ",""])),e.name,e.message,i).tags("handshake"),i&&(ee++,o("WALogger").ERROR(w||(w=babelHelpers.taggedTemplateLiteralLoose(["[socket][unified] handshake failed. Retry count: ",""])),ee).tags("handshake").sendLogs("handshake-error",{sampling:.01})),o("WAResultOrError").makeError("disconnected")}}),oe.apply(this,arguments)}function ae(){return self.navigator!=null?self.navigator.onLine:!0}function ie(e){return le.apply(this,arguments)}function le(){return le=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=o("WAWebUserPrefsMultiDevice").isRegistered();return re(e,t)}),le.apply(this,arguments)}l.default=ie}),98);
__d("WAWebStanzaValidation",["WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){u(e)}function u(t){t.tag!=="receipt"||t.attrs.type!=="sender"||t.attrs.recipient==null&&t.attrs.participant==null&&o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[stanza-validation] sender receipt without recipient nor participant"]))).sendLogs("sender-receipt-without-participant-nor-recipient-validation")}l.validateSentStanza=s}),98);
__d("WAWebCommsConfig",["WALogger","WANullthrows","WAWapJid","WAWebABProps","WAWebCmd","WAWebCommsProcessAck","WAWebCommsSendPing","WAWebEnvironment","WAWebNoop","WAWebOfflineResumePreAckHandler","WAWebOpenChatSocket","WAWebSocketConstants","WAWebStanzaValidation","WAWebUserPrefsMultiDevice","cr:7907","gkx"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m=9e5;function p(){return{jitter:.1,max:m,algo:{type:"fibonacci",first:1e3,second:1e3},relativeDelay:!1}}function _(t){var a=t||{passive:!1,pull:!1};return{maxRetries:Number.MAX_SAFE_INTEGER,openChatSocket:function(n,i){return o("WAWebABProps").getABPropConfigValue("web_comms_socket_reconnect_enabled")?a.signal=r("WANullthrows")(i):a.signal=new AbortController().signal,r("WAWebOpenChatSocket")(a).then(function(t){return o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[comms] getCommsConfig:openChatSocket"]))).devConsole(t),n(),a.passive=!1,t})},healthCheckInterval:15,deadSocketTime:2e4,maxSocketLoopWaitTime:m,shouldCloseStaleSocket:!0,socketReconnectBackoffAlgo:p(),shouldBlockReceivingUntilSuccess:!0,handlers:{onConnect:function(){o("WAWebUserPrefsMultiDevice").isRegistered()&&(o("WAWebCmd").Cmd.setSocketState(o("WAWebSocketConstants").SOCKET_STATE.CONNECTED),o("WAWebCmd").Cmd.openSocketStream())},onDisconnect:function(){o("WALogger").DEV(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[comms] getCommsConfig:onDisconnect"]))),o("WAWebCmd").Cmd.socketStreamDisconnected()},onSocketOpen:function(){o("WALogger").DEV(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[comms] getCommsConfig:onSocketOpen"]))),o("WAWebCmd").Cmd.setSocketState(o("WAWebSocketConstants").SOCKET_STATE.PAIRING)},onSocketLoopIteration:function(t){o("WALogger").DEV(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[comms] getCommsConfig:onSocketLoopIteration"]))),o("WAWebCmd").Cmd.setSocketState(o("WAWebSocketConstants").SOCKET_STATE.OPENING)},onConnectionChange:r("WAWebNoop"),onOptimisticConnectionChange:r("WAWebNoop"),onBeforeCastStanzaForE2E:function(t,n){t.tag==="ack"&&!(n!=null&&n.preAck)&&!o("WAWebCmd").Cmd.isOfflineDeliveryEnd&&o("WAWebOfflineResumePreAckHandler").parseAndSerializeOfflinePreAck(t)},onCastStanza:function(t){r("gkx")("26259")&&t.tag==="ack"&&!(t.attrs.to instanceof o("WAWapJid").WapJid)&&o("WALogger").ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["ack.to is a "," not a WapJid: ",""])),typeof t.attrs.to,t).sendLogs("send-string-jid"),r("gkx")("26258")||n("cr:7907")==null||n("cr:7907").sendNewStanzaToDevTool(t,!0),o("WAWebStanzaValidation").validateSentStanza(t)},onHandleAck:function(t){r("WAWebCommsProcessAck")(t)},onHandleStanza:function(t){r("gkx")("26258")||n("cr:7907")==null||n("cr:7907").sendNewStanzaToDevTool(t,!1)},onSendIq:o("WAWebStanzaValidation").validateSentStanza,onClockSkewUpdate:function(t){o("WAWebCommsSendPing").updateClockSkew(t)}},isPauseEnabled:r("WAWebEnvironment").isWindows}}l.getCommsConfig=_}),98);
__d("WAWebCommsHandleStanzaUtils",["WALogger","WAParsableWapNode","WAWeb-dexie","WAWebCreateNackFromStanza","WAWebPostIncomingMessageDropMetric","WAWebPostUnknownStanzaMetric"],(function(t,n,r,o,a,i,l){var e,s,u;function c(t,n){if(n instanceof o("WAParsableWapNode").XmppParsingFailure)return o("WAWebPostUnknownStanzaMetric").postUnknownStanzaMetric(t),o("WAWebPostIncomingMessageDropMetric").postIncomingMessageDropInvalidStanza(t),o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["handleMsg: error while parsing message: ",""])),n).tags("messaging").sendLogs("failedParsingMessageStanza",{sampling:.01}),o("WAWebCreateNackFromStanza").createNackFromStanza(t,o("WAWebCreateNackFromStanza").NackReason.ParsingError);if(n instanceof r("WAWeb-dexie").DexieError){o("WAWebPostIncomingMessageDropMetric").postIncomingMessageDropDBOperationFailed(t),o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["handleMsg: drop incoming message due to an internal error: ",", message: ",", stack: ",""])),n.name,n.message,n.stack).sendLogs("incoming-message-drop-db-operation-failed",{sampling:.01});return}return o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["handleMsg: drop incoming message due to an internal error: ",", message: ",", stack: ",""])),n.name,n.message,n.stack).sendLogs("incoming-message-drop-internal-error",{sampling:.01}),o("WAWebPostIncomingMessageDropMetric").postIncomingMessageDropInternalError(t),o("WAWebCreateNackFromStanza").createNackFromStanza(t,o("WAWebCreateNackFromStanza").NackReason.UnhandledError)}function d(e){if(Array.isArray(e.content)&&e.content.length>0){var t=e.content[0].tag;return t==="offer"||t==="accept"||t==="reject"}return!1}l.handleMessageParsingFailure=c,l.isCallReceipt=d}),98);
__d("WAWebHandlePaymentAmountUtils",["WALogger","err"],(function(t,n,r,o,a,i,l){var e,s=1e3;function u(e){e.assertTag("money");var t=parseFloat(e.attrString("value")),n=e.attrString("currency"),r=e.maybeAttrInt("offset"),o=r!=null&&r!==0?r:s,a=t*s/o;return{currency:n,amount1000:a}}function c(t){if(t.hasChild("amount")){var n=t.child("amount");return u(n.child("money"))}else if(t.hasAttr("amount")){var a=parseFloat(t.attrString("amount"));return{amount1000:a*s,currency:t.attrString("currency")}}throw o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Amount missing in pay or transaction node"]))),r("err")("Amount missing in pay or transaction node")}function d(e){return c(e)}l.getAmount1000AndCurrency=d}),98);
__d("WAWebPaymentStatusUtils",["$InternalEnum","WALogger","WAWebProtobufsWeb.pb"],(function(t,n,r,o,a,i,l){var e,s=n("$InternalEnum")({TYPE_UNSET:0,TYPE_P2P_SENT:1,TYPE_P2P_RCVD:2,TYPE_P2P_GRP:3,TYPE_P2P_NO_INFO:4,TYPE_FUTURE:5,TYPE_P2P_REQ_SENT:10,TYPE_P2P_REQ_RCVD:20,TYPE_P2P_REQ_SCHEDULED_PAYMENT_RCVD:21,TYPE_P2P_REQ_GRP:30,TYPE_P2M_SENT:100,TYPE_P2M_RCVD:200,TYPE_P2M_PAYOUT:300,TYPE_MISSING_DETAILS:400,TYPE_DEPOSIT:500,TYPE_REFUND:600,TYPE_WITHDRAWAL:700}),u=n("$InternalEnum")({STATUS_UNSET:0,REQUEST_PAY_INIT:11,REQUEST_PAY_SUCCESS:12,REQUEST_PAY_FAILED:13,REQUEST_PAY_FAILED_RISK:14,REQUEST_PAY_REJECTED:15,REQUEST_PAY_EXPIRED:16,REQUEST_PAY_FULFILLED:17,REQUEST_PAY_CANCELLED:18,REQUEST_PAY_CANCELLING:19,REQUEST_PAY_SCHEDULED_PAYMENT_SUCCESS:20,RECV_PAY_INIT:101,RECV_PAY_PENDING_SETUP:102,RECV_PAY_PENDING:103,RECV_PAY_RETRY_ON_FAILURE:104,RECV_PAY_FAILURE:105,RECV_PAY_SUCCESS:106,RECV_PAY_EXPIRED:107,RECV_PAY_FAILURE_RISK:108,RECV_PAY_WITHDRAWAL_PROCESSING:109,RECV_PAY_WITHDRAWAL_FAILURE:110,RECV_PAY_WITHDRAWAL_PERMANENT_FAILED:111,RECV_PAY_SENDER_CANCELED:112,SEND_PAY_INIT:401,SEND_PAY_PENDING_RECEIVER:402,SEND_PAY_PENDING:403,SEND_PAY_REFUND_PENDING:404,SEND_PAY_SUCCESS:405,SEND_PAY_FAILURE:406,SEND_PAY_FAILURE_RISK:407,SEND_PAY_REFUNDED:408,SEND_PAY_REFUND_FAILED:409,SEND_PAY_FAILURE_RECEIVER:410,SEND_PAY_REFUND_FAILED_PROCESSING:411,SEND_PAY_PENDING_REFUND:412,SEND_PAY_AUTH_CANCEL_FAILED_PROCESSING:413,SEND_PAY_AUTH_CANCEL_FAILED:414,SEND_PAY_AUTH_CANCELED:415,SEND_PAY_EXPIRED:416,SEND_PAY_AUTH_SUCCESS:417,SEND_PAY_AUTH_SUCCESS_CANCELING:418,SEND_PAY_IN_REVIEW:419,SEND_PAY_PENDING_PROCESSING:420,SEND_PAY_USER_CANCELED:421,WITHDRAWAL_INIT:601,WITHDRAWAL_PENDING:602,WITHDRAWAL_IN_REVIEW:603,WITHDRAWAL_SUCCESS:604,WITHDRAWAL_FAILED:605,WITHDRAWAL_USER_CANCELED:606,WITHDRAWAL_EXPIRED:607,WITHDRAWAL_ACTIVE:608}),c={TYPE_P2P:"p2p",TYPE_P2M:"p2m",TYPE_P2M_PAYOUT:"payout",TYPE_WITHDRAWAL:"withdrawal",TYPE_DEPOSIT:"deposit",TYPE_REFUND:"refund"},d={PENDING_RECEIVER_SETUP:"PENDING_RECEIVER_SETUP",PENDING_SETUP:"PENDING_SETUP",PENDING:"PENDING",INITIAL:"INITIAL",SUCCESS:"SUCCESS",COMPLETED:"COMPLETED",IN_REVIEW:"IN_REVIEW",FAILED:"FAILED",DECLINED:"DECLINED",FAILURE:"FAILURE",FAILED_RISK:"FAILED_RISK",FAILED_PROCESSING:"FAILED_PROCESSING",FAILED_RECEIVER_PROCESSING:"FAILED_RECEIVER_PROCESSING",REFUND_FAILED_PROCESSING:"REFUND_FAILED_PROCESSING",REFUNDED:"REFUNDED",REFUND_FAILED:"REFUND_FAILED",EXPIRED:"EXPIRED",CANCELED:"CANCELLED",AUTH_SUCCESS:"AUTH_SUCCESS",AUTH_CANCELED:"AUTH_CANCELED",AUTH_CANCEL_FAILED_PROCESSING:"AUTH_CANCEL_FAILED_PROCESSING",AUTH_CANCEL_FAILED:"AUTH_CANCEL_FAILED",COLLECT_SUCCESS:"COLLECT_SUCCESS",COLLECT_FAILED:"COLLECT_FAILED",COLLECT_REJECTED:"COLLECT_REJECTED",COLLECT_EXPIRED:"COLLECT_EXPIRED",COLLECT_CANCELED:"COLLECT_CANCELED",FAILED_DA:"FAILED_DA",FAILED_DA_FINAL:"FAILED_DA_FINAL",REFUND_FAILED_DA:"REFUND_FAILED_DA",COLLECT_FAILED_RISK:"COLLECT_FAILED_RISK",WITHDRAWAL_PROCESSING:"WITHDRAWAL_PROCESSING",WITHDRAWAL_FAILURE:"WITHDRAWAL_FAILURE",WITHDRAWAL_PERMANENT_FAILED:"WITHDRAWAL_PERMANENT_FAILED",WITHDRAWAL_ACTIVE:"WITHDRAWAL_ACTIVE"};function m(e,t){if(e==null)return o("WAWebProtobufsWeb.pb").PaymentInfo$Status.UNKNOWN_STATUS;switch(e){case u.SEND_PAY_INIT:case u.SEND_PAY_PENDING:case u.RECV_PAY_INIT:case u.RECV_PAY_PENDING:case u.RECV_PAY_RETRY_ON_FAILURE:case u.REQUEST_PAY_INIT:return o("WAWebProtobufsWeb.pb").PaymentInfo$Status.PROCESSING;case u.SEND_PAY_PENDING_RECEIVER:case u.SEND_PAY_FAILURE_RECEIVER:return o("WAWebProtobufsWeb.pb").PaymentInfo$Status.SENT;case u.REQUEST_PAY_SUCCESS:return t===s.TYPE_P2P_REQ_SENT?o("WAWebProtobufsWeb.pb").PaymentInfo$Status.WAITING_FOR_PAYER:o("WAWebProtobufsWeb.pb").PaymentInfo$Status.WAITING;case u.RECV_PAY_PENDING_SETUP:return o("WAWebProtobufsWeb.pb").PaymentInfo$Status.NEED_TO_ACCEPT;case u.SEND_PAY_SUCCESS:case u.RECV_PAY_SUCCESS:case u.REQUEST_PAY_FULFILLED:return o("WAWebProtobufsWeb.pb").PaymentInfo$Status.COMPLETE;case u.SEND_PAY_FAILURE:case u.SEND_PAY_FAILURE_RISK:case u.SEND_PAY_PENDING_REFUND:case u.SEND_PAY_REFUND_PENDING:case u.SEND_PAY_REFUND_FAILED:case u.SEND_PAY_REFUND_FAILED_PROCESSING:case u.RECV_PAY_FAILURE:case u.REQUEST_PAY_FAILED:case u.REQUEST_PAY_FAILED_RISK:return o("WAWebProtobufsWeb.pb").PaymentInfo$Status.COULD_NOT_COMPLETE;case u.SEND_PAY_REFUNDED:return o("WAWebProtobufsWeb.pb").PaymentInfo$Status.REFUNDED;case u.RECV_PAY_EXPIRED:case u.REQUEST_PAY_EXPIRED:case u.SEND_PAY_AUTH_CANCELED:case u.SEND_PAY_AUTH_CANCEL_FAILED:case u.SEND_PAY_AUTH_CANCEL_FAILED_PROCESSING:return o("WAWebProtobufsWeb.pb").PaymentInfo$Status.EXPIRED;case u.REQUEST_PAY_REJECTED:return o("WAWebProtobufsWeb.pb").PaymentInfo$Status.REJECTED;case u.REQUEST_PAY_CANCELLED:return o("WAWebProtobufsWeb.pb").PaymentInfo$Status.CANCELLED;case u.STATUS_UNSET:return o("WAWebProtobufsWeb.pb").PaymentInfo$Status.UNKNOWN_STATUS;case u.REQUEST_PAY_CANCELLING:return o("WAWebProtobufsWeb.pb").PaymentInfo$Status.UNKNOWN_STATUS;default:return o("WAWebProtobufsWeb.pb").PaymentInfo$Status.UNKNOWN_STATUS}}function p(e,t){if(!t)return u.STATUS_UNSET;var n=t.toUpperCase();switch(e){case s.TYPE_P2P_SENT:case s.TYPE_P2M_SENT:case s.TYPE_DEPOSIT:switch(n){case d.PENDING_RECEIVER_SETUP:return u.SEND_PAY_PENDING_RECEIVER;case d.FAILED_DA:return u.SEND_PAY_PENDING;case d.REFUND_FAILED_DA:return u.SEND_PAY_REFUND_PENDING;case d.FAILED_RISK:return u.SEND_PAY_FAILURE_RISK;case d.INITIAL:return u.SEND_PAY_INIT;case d.SUCCESS:case d.COMPLETED:return u.SEND_PAY_SUCCESS;case d.FAILURE:case d.FAILED:return u.SEND_PAY_FAILURE;case d.REFUNDED:return u.SEND_PAY_REFUNDED;case d.REFUND_FAILED:return u.SEND_PAY_REFUND_FAILED;case d.FAILED_RECEIVER_PROCESSING:return u.SEND_PAY_FAILURE_RECEIVER;case d.REFUND_FAILED_PROCESSING:return u.SEND_PAY_REFUND_FAILED_PROCESSING;case d.FAILED_DA_FINAL:return u.SEND_PAY_PENDING_REFUND;case d.AUTH_CANCEL_FAILED_PROCESSING:return u.SEND_PAY_AUTH_CANCEL_FAILED_PROCESSING;case d.AUTH_CANCEL_FAILED:return u.SEND_PAY_AUTH_CANCEL_FAILED;case d.AUTH_CANCELED:return u.SEND_PAY_AUTH_CANCELED;case d.EXPIRED:return u.SEND_PAY_EXPIRED;case d.IN_REVIEW:return u.SEND_PAY_IN_REVIEW;case d.PENDING:return u.SEND_PAY_PENDING_PROCESSING;case d.CANCELED:return u.SEND_PAY_USER_CANCELED}break;case s.TYPE_P2P_RCVD:case s.TYPE_P2M_RCVD:switch(n){case d.PENDING_SETUP:return u.RECV_PAY_PENDING_SETUP;case d.FAILED_DA:return u.RECV_PAY_PENDING;case d.FAILED_PROCESSING:return u.RECV_PAY_RETRY_ON_FAILURE;case d.SUCCESS:case d.COMPLETED:return u.RECV_PAY_SUCCESS;case d.FAILURE:case d.FAILED:return u.RECV_PAY_FAILURE;case d.EXPIRED:return u.RECV_PAY_EXPIRED;case d.FAILED_RISK:return u.RECV_PAY_FAILURE_RISK;case d.WITHDRAWAL_PROCESSING:return u.RECV_PAY_WITHDRAWAL_PROCESSING;case d.WITHDRAWAL_FAILURE:return u.RECV_PAY_WITHDRAWAL_FAILURE;case d.WITHDRAWAL_PERMANENT_FAILED:return u.RECV_PAY_WITHDRAWAL_PERMANENT_FAILED;case d.CANCELED:return u.RECV_PAY_SENDER_CANCELED}break;case s.TYPE_P2P_REQ_SENT:case s.TYPE_P2P_REQ_RCVD:switch(n){case d.COLLECT_SUCCESS:return u.REQUEST_PAY_SUCCESS;case d.COLLECT_FAILED:return u.REQUEST_PAY_FAILED;case d.COLLECT_FAILED_RISK:return u.REQUEST_PAY_FAILED_RISK;case d.COLLECT_REJECTED:return u.REQUEST_PAY_REJECTED;case d.COLLECT_EXPIRED:return u.REQUEST_PAY_EXPIRED;case d.COLLECT_CANCELED:return u.REQUEST_PAY_CANCELLED}break;case s.TYPE_P2P_REQ_SCHEDULED_PAYMENT_RCVD:switch(n){case d.COLLECT_SUCCESS:return u.REQUEST_PAY_SCHEDULED_PAYMENT_SUCCESS;case d.AUTH_SUCCESS:return u.SEND_PAY_AUTH_SUCCESS}break;case s.TYPE_REFUND:switch(n){case d.SUCCESS:case d.COMPLETED:return u.RECV_PAY_SUCCESS}break;case s.TYPE_WITHDRAWAL:switch(n){case d.PENDING:return u.WITHDRAWAL_PENDING;case d.IN_REVIEW:return u.WITHDRAWAL_IN_REVIEW;case d.SUCCESS:case d.COMPLETED:return u.WITHDRAWAL_SUCCESS;case d.FAILED:case d.DECLINED:return u.WITHDRAWAL_FAILED;case d.CANCELED:return u.WITHDRAWAL_USER_CANCELED;case d.EXPIRED:return u.WITHDRAWAL_EXPIRED;case d.WITHDRAWAL_ACTIVE:return u.WITHDRAWAL_ACTIVE}break;default:return u.STATUS_UNSET}return u.STATUS_UNSET}function _(e){if(e==null)return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.UNKNOWN;switch(e){case u.RECV_PAY_EXPIRED:case u.SEND_PAY_EXPIRED:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.EXPIRED_TXN;case u.RECV_PAY_FAILURE:case u.SEND_PAY_FAILURE:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.FAILED;case u.RECV_PAY_INIT:case u.SEND_PAY_INIT:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.INIT;case u.RECV_PAY_PENDING_SETUP:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.PENDING_SETUP;case u.RECV_PAY_PENDING:case u.SEND_PAY_PENDING:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.FAILED_DA;case u.RECV_PAY_RETRY_ON_FAILURE:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.FAILED_PROCESSING;case u.RECV_PAY_SUCCESS:case u.SEND_PAY_SUCCESS:case u.REQUEST_PAY_FULFILLED:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.SUCCESS;case u.REQUEST_PAY_CANCELLED:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.COLLECT_CANCELED;case u.REQUEST_PAY_CANCELLING:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.COLLECT_CANCELLING;case u.REQUEST_PAY_EXPIRED:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.COLLECT_EXPIRED;case u.REQUEST_PAY_FAILED_RISK:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.COLLECT_FAILED_RISK;case u.REQUEST_PAY_FAILED:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.COLLECT_FAILED;case u.REQUEST_PAY_INIT:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.COLLECT_INIT;case u.REQUEST_PAY_REJECTED:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.COLLECT_REJECTED;case u.REQUEST_PAY_SUCCESS:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.COLLECT_SUCCESS;case u.SEND_PAY_AUTH_CANCELED:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.AUTH_CANCELED;case u.SEND_PAY_AUTH_CANCEL_FAILED_PROCESSING:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.AUTH_CANCEL_FAILED_PROCESSING;case u.SEND_PAY_AUTH_CANCEL_FAILED:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.AUTH_CANCEL_FAILED;case u.SEND_PAY_FAILURE_RECEIVER:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.FAILED_RECEIVER_PROCESSING;case u.SEND_PAY_FAILURE_RISK:case u.RECV_PAY_FAILURE_RISK:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.FAILED_RISK;case u.SEND_PAY_PENDING_RECEIVER:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.PENDING_RECEIVER_SETUP;case u.SEND_PAY_PENDING_REFUND:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.FAILED_DA_FINAL;case u.SEND_PAY_REFUNDED:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.REFUNDED_TXN;case u.SEND_PAY_REFUND_FAILED_PROCESSING:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.REFUND_FAILED_PROCESSING;case u.SEND_PAY_REFUND_FAILED:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.REFUND_FAILED;case u.SEND_PAY_REFUND_PENDING:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.REFUND_FAILED_DA;case u.SEND_PAY_IN_REVIEW:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.IN_REVIEW;case u.STATUS_UNSET:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.UNKNOWN;default:return o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.UNKNOWN}}function f(t,n){if(t){var r=t.toLowerCase();switch(r){case c.TYPE_P2P:return n?s.TYPE_P2P_SENT:s.TYPE_P2P_RCVD;case c.TYPE_P2M:return n?s.TYPE_P2M_SENT:s.TYPE_P2M_RCVD;case c.TYPE_P2M_PAYOUT:return s.TYPE_P2M_PAYOUT;case c.TYPE_DEPOSIT:return s.TYPE_DEPOSIT;case c.TYPE_REFUND:return s.TYPE_REFUND;case c.TYPE_WITHDRAWAL:return s.TYPE_WITHDRAWAL;default:o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["parsePaymentTransactionType payment transaction string=",""])),r)}}return n?s.TYPE_P2P_SENT:s.TYPE_P2P_RCVD}function g(e){return e===o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.COMPLETED||e===o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.SUCCESS}function h(e){return g(e)?e:o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.COLLECT_INIT}l.PaymentTransactionType=s,l.NotificationTransactionStatus=u,l.PaymentTransactionTypeServerString=c,l.PaymentTransactionStatusServerString=d,l.getPaymentWebStatus=m,l.getNotificationTransactionStatus=p,l.getPaymentTxnWebStatus=_,l.getPaymentTransactionType=f,l.determinePaymentRequestFulfilledStatus=h}),98);
__d("WAWebPaymentNotificationParser",["WADeprecatedWapParser","WALogger","WAWebHandlePaymentAmountUtils","WAWebJidToWid","WAWebMsgKey","WAWebPaymentStatusUtils","WAWebUserPrefsMeUser"],(function(t,n,r,o,a,i,l){var e;function s(e){return e&&e.hasAttr("service")?e.attrString("service").toUpperCase()==="NOVI":!1}var u=new(r("WADeprecatedWapParser"))("paymentNotificationParser",function(e){return e.assertTag("notification"),e.assertAttr("type","pay"),{stanzaId:e.attrString("id"),from:e.attrWapJid("from"),transaction:e.hasChild("transaction")?c(e.child("transaction")):null,invite:d(e)}});function c(t){if(s(t))return o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Payment notification from Novi not supported."]))),null;var n=void 0,a=void 0,i=o("WAWebJidToWid").jidWithTypeToWid(t.attrJidWithType("sender")),l=o("WAWebJidToWid").jidWithTypeToWid(t.attrJidWithType("receiver")),u=o("WAWebUserPrefsMeUser").isMeAccount(i);t.hasAttr("group")?(n=o("WAWebJidToWid").jidWithTypeToWid(t.attrJidWithType("group")),a=o("WAWebJidToWid").jidWithTypeToWid(t.attrJidWithType("sender"))):u?n=l:n=i;var c=new(r("WAWebMsgKey"))({id:t.attrString("message-id"),fromMe:u,remote:n,participant:a}),d=o("WAWebPaymentStatusUtils").getPaymentTransactionType(t.attrString("transaction-type"),c.fromMe),m=o("WAWebHandlePaymentAmountUtils").getAmount1000AndCurrency(t),p=m.amount1000,_=m.currency;return{receiver:l,currency:_,amount1000:p,status:o("WAWebPaymentStatusUtils").getNotificationTransactionStatus(d,t.attrString("status")),ts:t.attrInt("ts"),type:d,msgKey:c}}function d(e){if(!e.hasChild("invite"))return null;var t=e.child("invite");return{type:t.maybeAttrString("type"),service:t.maybeAttrString("service"),inviteUsed:t.hasAttr("invite-used")?t.attrString("invite-used")==="1":null,from:o("WAWebJidToWid").chatJidToChatWid(e.attrChatJid("from")),timestamp:e.attrTime("t")}}l.isNoviTransaction=s,l.paymentNotificationParser=u,l.parseTransactionNode=c}),98);
__d("WAWebHandleMsgParser",["WADeprecatedWapParser","WALogger","WAParsableWapNode","WAWebAck","WAWebBackendJobs.flow","WAWebBizCoexGatingUtils","WAWebBotTypes","WAWebCountriesUtils","WAWebCreateNackFromStanza","WAWebCurrentUser","WAWebHandleMsgCommon","WAWebHandleMsgTypes.flow","WAWebHandlePaymentAmountUtils","WAWebJidToWid","WAWebLid1X1MigrationGating","WAWebLidMigrationUtils","WAWebMessagingGatingUtils","WAWebPaymentNotificationParser","WAWebPaymentStatusUtils","WAWebProtobufsWeb.pb","WAWebSimpleSignalPNToFBIDMigration","WAWebStatusGatingUtils","WAWebUserPrefsMeUser","WAWebUserPrefsNotifications","WAWebUsernameGatingUtils","WAWebWidFactory"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g,h,y=new(r("WADeprecatedWapParser"))("incomingMsgParser",function(e){var t,n;e.assertTag("message"),e.hasAttr("to")&&e.assertAttr("to",o("WAWebUserPrefsMeUser").getMeDevicePnOrThrow().toJid());var r=e.maybeChild("plaintext");r!=null&&r.throw("not to be present in e2ee messages");var a=e.mapChildrenWithTag("enc",function(e){var t;return{e2eType:e.attrEnumValues("type",o("WAWebBackendJobs.flow").CiphertextType.members()),encMediaType:o("WAWebBackendJobs.flow").EncMediaType.cast(e.maybeAttrString("mediatype")),ciphertext:e.contentBytes(),retryCount:(t=e.maybeAttrInt("count"))!=null?t:0,hideFail:e.maybeAttrString("decrypt-fail")==="hide"}}),i=e.maybeChild("device-identity"),l=i?i.contentBytes():null,s=v(e),u=b(e,a),c=C(e,a,s,u),d=S(e,c),m=L(e),p=R(e),_=I(e),f=(t=(n=e.maybeChild("rcat"))==null?void 0:n.contentBytes())!=null?t:null;return{encs:a,msgInfo:c,msgMeta:u,bizInfo:d,hsmInfo:p,paymentInfo:m,deviceIdentity:l,rcat:f,msgBotInfo:s,reportingTokenInfo:_}});function C(t,n,r,a){var i,l={externalId:t.attrString("id"),ts:t.attrTime("t"),edit:(i=t.maybeAttrInt("edit"))!=null?i:o("WAWebAck").EDIT_ATTR.NONE,isHsm:t.hasChild("hsm"),count:t.maybeAttrInt("count"),pushname:t.maybeAttrString("notify"),username:t.maybeAttrString("username"),displayName:t.maybeAttrString("display_name"),senderPn:t.hasAttr("sender_pn")?o("WAWebJidToWid").userJidToUserWid(t.attrUserJid("sender_pn")):null,senderLid:t.hasAttr("sender_lid")?o("WAWebJidToWid").userJidToUserWid(t.attrUserJid("sender_lid")):null,recipientLid:t.hasAttr("recipient_lid")?o("WAWebJidToWid").lidUserJidToUserLid(t.attrLidUserJid("recipient_lid")):null,recipientPn:t.hasAttr("recipient_pn")?o("WAWebJidToWid").userJidToUserWid(t.attrUserJid("recipient_pn")):null,peerRecipientPn:t.hasAttr("peer_recipient_pn")?o("WAWebJidToWid").userJidToUserWid(t.attrUserJid("peer_recipient_pn")):null,peerRecipientLid:t.hasAttr("peer_recipient_lid")?o("WAWebJidToWid").lidUserJidToUserLid(t.attrLidUserJid("peer_recipient_lid")):null,peerRecipientUsername:t.hasAttr("peer_recipient_username")?t.attrString("peer_recipient_username"):null,recipientLatestLid:t.hasAttr("recipient_latest_lid")?o("WAWebJidToWid").lidUserJidToUserLid(t.attrLidUserJid("recipient_latest_lid")):null,recipientUsername:t.hasAttr("recipient_username")?t.attrString("recipient_username"):null,participantLid:t.hasAttr("participant_lid")?o("WAWebJidToWid").lidUserJidToUserLid(t.attrLidUserJid("participant_lid")):null,participantPn:t.hasAttr("participant_pn")?o("WAWebJidToWid").userJidToUserWid(t.attrUserJid("participant_pn")):null,participantUsername:t.maybeAttrString("participant_username"),category:t.maybeAttrString("category"),offline:t.maybeAttrString("offline"),senderCountryCode:T(t.maybeChild("meta"))};l.category!=null&&l.category!==o("WAWebHandleMsgCommon").CATEGORY_PEER&&o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["parseMessageInfo: msg category is other than 'peer': ",""])),l.category).sendLogs("msg-category-not-peer");var f=o("WAWebJidToWid").jidWithTypeToWid(t.attrJidWithType("from"));f.isNewsletter()&&t.throw("unexpected `from` attribute with newsletter Jid");var g=t.hasAttr("participant")?o("WAWebJidToWid").deviceJidToDeviceWid(t.attrDeviceJid("participant")):null,h=t.hasAttr("recipient")?o("WAWebJidToWid").userJidToUserWid(t.attrUserJid("recipient")):null;if(o("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()){var y=!!(g!=null&&g.isHosted()&&(f.isStatus()||f.isGroup()||f.isBroadcast()));if(y)throw new(o("WAParsableWapNode")).XmppParsingFailure("incomingMsgParser",""+o("WAWebCreateNackFromStanza").NackReason.InvalidHostedCompanionStanza)}var C=n.every(function(e){return e.e2eType!==o("WAWebBackendJobs.flow").CiphertextType.Skmsg}),b=n.some(function(e){return e.retryCount>0}),v=f.isGroup()||f.isBroadcast()?g:f;if(h!=null&&v!=null&&!o("WAWebUserPrefsMeUser").isMeAccount(v))return t.throw("Invalid recipient from non peer device");var S,R=t.maybeChild("participants");if(R){var L=[];R.forEachChildWithTag("to",function(e){var t=o("WAWebJidToWid").userJidToUserWid(e.attrUserJid("jid")),n=e.maybeAttrString("eph_setting"),r=e.maybeAttrLidUserJid("peer_recipient_lid"),a=e.maybeAttrUserJid("peer_recipient_pn"),i=o("WAWebUsernameGatingUtils").usernameDisplayedEnabled()?e.maybeAttrString("peer_recipient_username"):null,l=e.maybeAttrLidUserJid("recipient_latest_lid"),u={wid:t};n!=null&&(u.ephSetting=n),r!=null&&(u.peerRecipientLid=o("WAWebJidToWid").lidUserJidToUserLid(r)),a!=null&&(u.peerRecipientPn=o("WAWebJidToWid").userJidToUserWid(a)),i!=null&&(u.peerRecipientUsername=i),l!=null&&(r==null&&a==null&&o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[broadcast] Received a recipient_latest_lid without a peer_recipient_lid nor peer_recipient_pn, this should not happen"]))),u.recipientLatestLid=o("WAWebJidToWid").lidUserJidToUserLid(l)),L.push(u)}),S=L}var E=a==null?void 0:a.targetChatJid;if(r&&f.isPnBot()&&E!=null){var k;return babelHelpers.extends({type:o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.CHAT},l,{chat:o("WAWebWidFactory").asUserWidOrThrow((k=a==null?void 0:a.targetChatJidLid)!=null?k:E),author:f,botParticipant:f})}else if(r&&f.isFbidBot()&&E!=null){var I=o("WAWebWidFactory").asUserWidOrThrow(E);return babelHelpers.extends({type:o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.CHAT},l,{chat:o("WAWebLid1X1MigrationGating").Lid1X1MigrationUtils.isLidMigrated()?I:o("WAWebLidMigrationUtils").toPnOrThrow(I),author:f,botParticipant:f})}else if(f.isUser()){var D=f;if(h!=null){if(!o("WAWebUserPrefsMeUser").isMeAccount(f))return t.throw("recipient on non peer chat message");D=h}var x=null,$=o("WAWebSimpleSignalPNToFBIDMigration").getDeprecatedPnChatForFbidThread(D);return $!=null&&(o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["parseMessageInfo: forwarding "," to ",""])),D.toLogString(),$.toLogString()),h!=null&&(x=h),D=$),babelHelpers.extends({type:o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.CHAT},l,{chat:o("WAWebWidFactory").asUserWidOrThrow(D),author:f,originalBotRecipient:x})}else if(f.isGroup()){if(g==null)return t.throw("group message with no participant");var P=t.attrEnumOrDefault("addressing_mode",o("WAWebHandleMsgCommon").STANZA_MSG_ADDRESSING_MODE,o("WAWebHandleMsgCommon").STANZA_MSG_ADDRESSING_MODE.pn);try{!o("WAWebUsernameGatingUtils").usernameDisplayedEnabled()&&g.isLid()&&l.participantPn==null&&l.displayName==null&&!o("WAWebUserPrefsMeUser").isMeAccount(g)&&(o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[lid group] missing participant_pn for Lid message. sw worker: ",""])),o("WAWebUserPrefsNotifications").getGlobalOfflineNotifications().toString()),o("WAWebCurrentUser").isEmployee()?(o("WALogger").ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["[lid group] chat id: "," participant lid: ",""])),f.toString(),g.toString()),o("WALogger").ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[lid group] missing group mapping in message parser for employee"]))).sendLogs("[lid group] missing group mapping in message parser for employee")):o("WALogger").ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["[lid group] missing group mapping in message parser"]))).sendLogs("[lid group] missing group mapping in message parser"))}catch(e){o("WALogger").ERROR(_||(_=babelHelpers.taggedTemplateLiteralLoose(["[lid group] could not report missing lid in group message parser ",""])),e)}return babelHelpers.extends({type:o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.GROUP},l,{chat:f,author:g,isDirect:C,addressingMode:P})}else if(f.isBroadcast()&&!f.isStatus()){if(g==null)return t.throw("broadcast message with no participant");if(o("WAWebUserPrefsMeUser").isMeAccount(g)){if(S==null){if(!b)return t.throw("peer broadcast message with no participants node");S=[]}return babelHelpers.extends({type:o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.PEER_BROADCAST},l,{chat:f,author:g,isDirect:C,bclParticipants:S,bclHashValidated:!1})}return babelHelpers.extends({type:o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.OTHER_BROADCAST},l,{chat:f,author:g,isDirect:C,ephSetting:t.maybeAttrString("eph_setting")})}else if(f.isBroadcast()&&f.isStatus()){var N,M;if(g==null)return t.throw("status message with no participant");var w=(N=(M=t.maybeChild("meta"))==null?void 0:M.maybeAttrString("status_setting"))!=null?N:void 0;if(o("WAWebUserPrefsMeUser").isMeAccount(g)&&C){if(S==null)return babelHelpers.extends({type:o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.DIRECT_PEER_STATUS},l,{chat:f,author:g,isDirect:C,statusSetting:w});var A=S.map(function(e){return e.wid});return babelHelpers.extends({type:o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.DIRECT_PEER_STATUS},l,{chat:f,author:g,directPeerStatusBclParticipants:A,bclHashValidated:!1,statusSetting:w})}return babelHelpers.extends({type:o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.OTHER_STATUS},l,{chat:f,author:g,isDirect:C,statusSetting:w})}return t.throw("Unrecognized message type")}function b(e,t){var n=o("WAWebJidToWid").jidWithTypeToWid(e.attrJidWithType("from")),r=e.hasAttr("participant")?o("WAWebJidToWid").deviceJidToDeviceWid(e.attrDeviceJid("participant")):null,a=n.isGroup()||n.isBroadcast()?r:n;if(a==null)return e.throw("incomingMsgParser: to have a sender");var i=e.hasChild("unavailable");!i&&t.length===0&&e.throw("incomingMsgParser: to have enc node children");var l=!1,s=!1;if(i){var u=e.maybeChild("unavailable");s=(u==null?void 0:u.maybeAttrString("hosted"))==="true",l=(u==null?void 0:u.maybeAttrString("type"))==="view_once"}var c=e.attrEnum("type",o("WAWebHandleMsgCommon").STANZA_MSG_TYPES),d=e.maybeChild("meta"),m=c===o("WAWebHandleMsgCommon").STANZA_MSG_TYPES.poll?d==null?void 0:d.attrEnumOrNullIfUnknown("polltype",o("WAWebHandleMsgCommon").POLL_TYPES):null,p;o("WAWebStatusGatingUtils").isStatusPrivateMentionsReceiveEnabled()&&(p=(d==null?void 0:d.maybeAttrString("status_mentioned"))==="true");var _={isUnavailable:i,isViewOnceUnavailable:l,isHostedMsgUnavailable:s,type:c,pollType:m,origin:d==null?void 0:d.attrEnumOrDefault("origin",o("WAWebHandleMsgCommon").STANZA_MSG_ORIGIN,null),rawTs:e.attrString("t"),urlNumber:e.hasChild("url_number"),urlText:e.hasChild("url_text"),statusMentioned:p,appdata:d==null?void 0:d.attrEnumOrDefault("appdata",o("WAWebHandleMsgCommon").APPDATA,null)};return d&&d.hasAttr(o("WAWebHandleMsgCommon").BIZ_SOURCE_ATTR)&&(_.bizSource=d.attrString(o("WAWebHandleMsgCommon").BIZ_SOURCE_ATTR)),d&&d.hasAttr("thread_msg_id")&&(_.threadMsgId=d.attrString("thread_msg_id")),d&&d.hasAttr("thread_msg_sender_jid")&&(_.threadMsgSenderJid=o("WAWebJidToWid").jidWithTypeToWid(d.attrJidWithType("thread_msg_sender_jid"))),d&&d.hasAttr("target_id")&&(_.targetId=d.attrString("target_id")),d&&d.hasAttr("target_sender_jid")&&(_.targetSenderJid=o("WAWebJidToWid").jidWithTypeToWid(d.attrJidWithType("target_sender_jid"))),d&&d.hasAttr("target_chat_jid")&&(_.targetChatJid=o("WAWebJidToWid").jidWithTypeToWid(d.attrJidWithType("target_chat_jid"))),d&&d.hasAttr("target_chat_jid_lid")&&(_.targetChatJidLid=o("WAWebJidToWid").jidWithTypeToWid(d.attrJidWithType("target_chat_jid_lid"))),d&&d.hasAttr("capi")&&d.attrString("capi")==="true"&&(_.capi=!0),c===o("WAWebHandleMsgCommon").STANZA_MSG_TYPES.event&&d&&d.hasAttr("event_type")&&(_.eventType=d.attrEnum("event_type",o("WAWebHandleMsgCommon").EVENT_TYPES)),d&&d.hasAttr("context_source")&&(_.context_source=d.attrString("context_source")),_}function v(e){var t=e.maybeChild("bot");if(t){var n=t.maybeAttrString("sender_timestamp_ms"),r=t.maybeAttrString("edit_target_id"),a=o("WAWebBotTypes").BotMsgEditType.cast(t.maybeAttrString("edit")),i;t.hasAttr("biz_bot")&&(t.attrString("biz_bot")==="1"?i=o("WAWebBotTypes").BizBotType.BIZ_1P:t.attrString("biz_bot")==="3"&&(i=o("WAWebBotTypes").BizBotType.BIZ_3P));var l=o("WAWebBotTypes").BotMsgBodyType.cast(t.maybeAttrString("type")),s={botSenderTimestampMs:n,botEditTargetId:r,botEditType:a,botMsgBodyType:l,bizBotType:i};return s}}function S(e,t){var n,r,a,i,l=!!(!(t==null||(n=t.author)==null)&&n.isBot()),s=!!(!(t==null||(r=t.chat)==null)&&r.isBot()),u=!s&&l;if(u)return{verifiedNameSerial:null,verifiedLevel:null,verifiedNameCert:null,privacyMode:null,nativeFlowName:null,campaignId:null};var c=e.hasChild("verified_name")?e.child("verified_name").contentBytes():null,d=e.attrEnumOrDefault("verified_level",o("WAWebHandleMsgCommon").MSG_VERIFIED_LEVEL,null),m=e.hasAttr("verified_name")?e.attrInt("verified_name"):-1,p=e.maybeChild("biz"),_=null;if(p!=null){var f=o("WAWebHandleMsgTypes.flow").ActualActorsEnumType.cast(p.maybeAttrInt("actual_actors")),g=o("WAWebHandleMsgTypes.flow").HostStorageEnumType.cast(p.maybeAttrInt("host_storage")),h=p.maybeAttrInt("privacy_mode_ts");f!=null&&g!=null&&h!=null&&!l&&(_={actualActors:f,hostStorage:g,privacyModeTs:h})}var y=(a=p==null||(i=p.maybeChild("interactive"))==null||(i=i.maybeChild("native_flow"))==null?void 0:i.maybeAttrString("name"))!=null?a:p==null?void 0:p.maybeAttrString("native_flow_name"),C=p==null?void 0:p.maybeAttrString("campaign_id");return babelHelpers.extends({verifiedNameCert:c,verifiedLevel:d,verifiedNameSerial:m,privacyMode:_,nativeFlowName:y,campaignId:C},p&&{verifiedButtonsEnvelope:p.hasChild("buttons"),verifiedListEnvelope:p.hasChild("list"),verifiedHsmEnvelope:e.hasChild("hsm")})}function R(e){var t=e.maybeChild("hsm");if(t!=null){var n=t.maybeAttrString("tag"),r=t.maybeAttrString("category");if(n!=null||r!=null)return{tag:n,category:r}}return null}function L(e){var t=null,n=e.hasChild("pay")?e.child("pay"):null,r=e.hasChild("transaction")?e.child("transaction"):null,a=o("WAWebJidToWid").jidWithTypeToWid(e.attrJidWithType("from")).isGroup(),i=e.hasAttr("participant")?o("WAWebJidToWid").jidWithTypeToWid(e.attrJidWithType("participant")):null;if(o("WAWebPaymentNotificationParser").isNoviTransaction(n)||o("WAWebPaymentNotificationParser").isNoviTransaction(r))t={futureproofed:!0};else if(r){var l=o("WAWebPaymentNotificationParser").parseTransactionNode(r);l&&(E(a,i,o("WAWebWidFactory").createWid(l.receiver.toString()))?t={receiverJid:l.receiver.toString(),currency:l.currency,amount1000:l.amount1000,transactionTimestamp:l.ts,txnStatus:o("WAWebPaymentStatusUtils").getPaymentTxnWebStatus(l.status)}:t={receiverJid:l.receiver.toString(),currency:l.currency,amount1000:l.amount1000,transactionTimestamp:l.ts})}else if(n){var s=n.attrEnum("type",o("WAWebHandleMsgCommon").PAY_NODE_TYPES);switch(s){case o("WAWebHandleMsgCommon").PAY_NODE_TYPES.send:{var u=o("WAWebHandlePaymentAmountUtils").getAmount1000AndCurrency(n),c=u.amount1000,d=u.currency,m=n.hasAttr("receiver")?n.attrString("receiver"):e.attrString("recipient");E(a,i,o("WAWebWidFactory").createWid(m))?t={receiverJid:m,currency:d,amount1000:c,transactionTimestamp:e.attrInt("t"),txnStatus:o("WAWebProtobufsWeb.pb").PaymentInfo$TxnStatus.INIT}:t={receiverJid:m,currency:d,amount1000:c,transactionTimestamp:e.attrInt("t")};break}case o("WAWebHandleMsgCommon").PAY_NODE_TYPES.request:break;case o("WAWebHandleMsgCommon").PAY_NODE_TYPES.invite:break;default:break}}return t}function E(e,t,n){return!(e&&t!=null&&n!=null&&!o("WAWebUserPrefsMeUser").isMeAccount(t)&&!o("WAWebUserPrefsMeUser").isMeAccount(n))}var k=new(r("WADeprecatedWapParser"))("incomingMsgParserForAckOnly",function(e){e.assertTag("message");var t=null;try{t=e.attrEnum("type",o("WAWebHandleMsgCommon").STANZA_MSG_TYPES)}catch(e){o("WALogger").WARN(f||(f=babelHelpers.taggedTemplateLiteralLoose(["incomingMsgParserForAckOnly: failed to parse stanza type: ",""])),e)}var n=null;try{n=e.attrString("offline")!==""}catch(e){}var r=null;try{r=C(e,[],v(e))}catch(e){o("WALogger").WARN(g||(g=babelHelpers.taggedTemplateLiteralLoose(["incomingMsgParserForAckOnly: failed to parse msg info: ",""])),e)}return{type:t,externalId:e.attrString("id"),from:o("WAWebJidToWid").jidWithTypeToWid(e.attrJidWithType("from")),participant:e.hasAttr("participant")?o("WAWebJidToWid").deviceJidToDeviceWid(e.attrDeviceJid("participant")):null,msgInfo:r,offline:n}});function I(e){if(!o("WAWebMessagingGatingUtils").isReportingTokenReceivingEnabled())return null;var t=e.maybeChild("reporting");if(t==null)return null;var n={},r=t.maybeChild("reporting_token"),a=t.maybeChild("reporting_tag");return r!=null&&(n.reportingToken=r.contentBytes(),n.version=r.attrInt("v")),a!=null&&(n.reportingTag=a.contentBytes()),n}function T(e){var t=e==null?void 0:e.maybeAttrString("sender_country_code");if(t!=null)try{return o("WAWebCountriesUtils").asISOCountryCode(t)}catch(e){o("WAWebCurrentUser").isEmployee()&&o("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Failed to parse sender country code: ",""])),t).sendLogs("failed-to-parse-sender-country-code",{sampling:.01})}}l.incomingMsgParser=y,l.incomingMsgParserForAckOnly=k}),98);
__d("WAWebHandleCloudApiThreadControlNotification",["WALogger","WAWebBackendApi"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=t.consumerPhoneNumber,r=t.consumerLid,a=t.status;n==null&&r==null||(o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[Biz AI] Received thread control notification, status: ",""])),a),o("WAWebBackendApi").frontendFireAndForget("updateChatCapiThreadControl",{consumerPhoneNumber:n,consumerLid:r,status:a}))}l.default=s}),98);
__d("WAWebIcdcHandlerApi",["Promise","WAJids","WALogger","WALongInt","WATimeUtils","WAWebAdvExpectedTsApi","WAWebApiDeviceList","WAWebApiPendingDeviceSync","WAWebBizCoexGatingUtils","WAWebBizCoexHostedAddVerification","WAWebBizCoexOfflineICDCHandledCache","WAWebCmd","WAWebHandleAdvForUsyncApi","WAWebIdentityUpdateDeviceTableApi","WAWebLastADVCheckTimeApi","WAWebPromiseQueue","WAWebProtobufsAdv.pb","WAWebSyncDeviceAdvDeviceListJob","WAWebUserPrefsMeUser","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_=new(o("WAWebPromiseQueue")).PromiseQueue;function f(e,t,r){return r==null?(p||(p=n("Promise"))).resolve():_.enqueue(function(){return y(e,t,r)})}function g(e,t,n){return h.apply(this,arguments)}function h(){return h=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,r){var a,i,l={hostedBizEncMismatch:!1,senderOrRecipientAccountTypeHosted:!1};if(!o("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()||o("WAWebUserPrefsMeUser").isMeAccount(t)||!t.isUser())return l;var c=r==null?void 0:r.deviceListMetadata;if(c==null)return l;var d=o("WAWebUserPrefsMeUser").isMeAccount(n),m=d?c.receiverAccountType:c.senderAccountType,p=d?t:n;if(m==null)return l;if(m===o("WAWebProtobufsAdv.pb").ADVEncryptionType.E2EE)return o("WAWebBizCoexOfflineICDCHandledCache").removeFromOfflineBizHostedSenderICDCProcessedCache(p),l;if(m!==o("WAWebProtobufsAdv.pb").ADVEncryptionType.HOSTED)return l;if(o("WAWebBizCoexOfflineICDCHandledCache").hasOfflineBizHostedSenderICDCProcessedForSender(p))return o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["handleHostedIcdcMetadataInline: skip processing since already processed for current offline resume session for ",""])),p==null?void 0:p.toLogString()),{hostedBizEncMismatch:!1,senderOrRecipientAccountTypeHosted:!0};o("WAWebBizCoexOfflineICDCHandledCache").addToOfflineBizHostedSenderICDCProcessedCache(p),o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["handleIcdcMetadataInline: add to coex cache for ",""])),p==null?void 0:p.toLogString()),o("WAWebBizCoexHostedAddVerification").addToCoexHostedVerificationCache(p);var _=yield o("WAWebApiDeviceList").getDeviceRecord(p),f=o("WALongInt").numberOrThrowIfTooLarge((a=c.senderTimestamp)!=null?a:0),g=(i=_==null?void 0:_.timestamp)!=null?i:0;if(f>=g){if((_==null?void 0:_.advAccountType)!==o("WAWebProtobufsAdv.pb").ADVEncryptionType.HOSTED){var h;return yield o("WAWebIdentityUpdateDeviceTableApi").clearDeviceRecord(p,(h=_==null?void 0:_.devices)!=null?h:[],!o("WAWebCmd").Cmd.isOfflineDeliveryEnd,o("WAWebProtobufsAdv.pb").ADVEncryptionType.E2EE,o("WAWebProtobufsAdv.pb").ADVEncryptionType.HOSTED),o("WAWebCmd").Cmd.isOfflineDeliveryEnd?o("WAWebSyncDeviceAdvDeviceListJob").syncDeviceListJob([p],null,null):yield o("WAWebApiPendingDeviceSync").addUserToPendingDeviceSync([p.toString()]),o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["handleHostedIcdcMetadataInline: update ADV type for ",""])),p==null?void 0:p.toLogString()),{hostedBizEncMismatch:(_==null?void 0:_.advAccountType)===o("WAWebProtobufsAdv.pb").ADVEncryptionType.E2EE||(_==null?void 0:_.deletedChangedToHost)!==!0,senderOrRecipientAccountTypeHosted:!0}}return{hostedBizEncMismatch:!1,senderOrRecipientAccountTypeHosted:!0}}return l}),h.apply(this,arguments)}function y(e,t,n){return C.apply(this,arguments)}function C(){return C=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=n.deviceListMetadata;if(r==null){o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["get empty device list metadata"]))).tags("handleICDCData");return}if((e.device==null||e.device===o("WAJids").DEFAULT_DEVICE_ID)&&r.senderTimestamp!=null&&r.senderKeyHash==null){var a=o("WALongInt").numberOrThrowIfTooLarge(r.senderTimestamp)+1,i=o("WAWebHandleAdvForUsyncApi").handleADVSyncResult(e,{deviceList:[{id:o("WAJids").DEFAULT_DEVICE_ID,keyIndex:0}],keyIndex:{ts:o("WATimeUtils").castToUnixTime(a),signedKeyIndexBytes:null}},null,null);(i==null?void 0:i.identityUpdatePromise)!=null&&(yield i.identityUpdatePromise);return}var l=[],s=e.user===o("WAWebUserPrefsMeUser").getMePnUserOrThrow().user;l.push({id:e,ts:r.senderTimestamp}),s&&t!=null&&l.push({id:t,ts:r.recipientTimestamp});var u=yield o("WAWebLastADVCheckTimeApi").getLastADVDeviceInfoCheckTime(),p=yield o("WAWebApiDeviceList").bulkGetDeviceRecord(l.map(function(e){return e.id})),_=[];if(p.forEach(function(e,t){var n=l[t].ts;if(!(e==null||e.deleted||n==null)){var r=o("WAWebAdvExpectedTsApi").computeExpectedTsForDeviceRecord(o("WALongInt").numberOrThrowIfTooLarge(n),e,u);(r.expectedTs!==e.expectedTs||r.expectedTsLastDeviceJobTs!==e.expectedTsLastDeviceJobTs||r.expectedTsUpdateTs!==e.expectedTsUpdateTs)&&(o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["handleICDCData: update expectd timestamp for ",""])),e.id),o("WALogger").DEV(m||(m=babelHelpers.taggedTemplateLiteralLoose(["handleICDCData: old values: ",", new expected values record ",""])),JSON.stringify(e),JSON.stringify(r)),_.push(babelHelpers.extends({},e,r)))}}),_.length>0)return o("WAWebApiDeviceList").bulkCreateOrReplaceDeviceRecord(_)}),C.apply(this,arguments)}l.handleICDCData=f,l.handleHostedIcdcMetadataInline=g}),98);
__d("WAWebHandleMsgProcessUtils",["WALogger","WAWebBackendApi","WAWebBizCoexGatingUtils","WAWebDBCreateOrUpdateReactions","WAWebDBPollsUpsertVotes","WAWebDBProcessEditProtocolMsgs","WAWebDBUpdateLastAddOnPreviewChat","WAWebGetMessageCache","WAWebHandleMsgCommon","WAWebHandleMsgError","WAWebHandleMsgValidate","WAWebIcdcHandlerApi","WAWebLastAddOnDBSerialization","WAWebOfflineDeviceCache","WAWebReactionDataUtils","WAWebShouldUpdateLastAddOnPreview","WAWebSyncDeviceAdvDeviceListJob","WAWebWidFactory","asyncToGeneratorRuntime","cr:10197"],(function(t,n,r,o,a,i,l){var e,s,u;function c(t,n){o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["storing offline message for async processing"]))).devConsole({msg:t,msgInfo:n});var r={msg:t,receiptInfo:{externalId:t.id.id,from:t.from,author:n.author}};o("WAWebGetMessageCache").getMessageCache().addMessages([r],!1)}function d(e,t){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){if(e.offline==null&&o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["processDecryptedMessageProto: msgId::",", message decrypted: "])),e.externalId).tags("messaging").devConsole(t),!e.isHsm&&t.highlyStructuredMessage)throw new(o("WAWebHandleMsgCommon")).HsmMismatchError;var n=null;if(!(yield o("WAWebHandleMsgValidate").isFromKnownDevice(e.author))){var r=o("WAWebWidFactory").asUserWidOrThrow(e.author);throw e.offline==null?o("WAWebSyncDeviceAdvDeviceListJob").syncDeviceListJob([r],null,null):o("WAWebOfflineDeviceCache").OfflinePendingDeviceCache.addOfflinePendingDevice(String(r),null),new(o("WAWebHandleMsgError")).UnknownDeviceMessageError("[messaging] msgId::"+e.externalId+", processDecryptedMessageProto: reject message from unknown device")}return t.messageContextInfo&&(o("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&(n=e.chat.isUser()?yield o("WAWebIcdcHandlerApi").handleHostedIcdcMetadataInline(e.chat,e.author,t.messageContextInfo):null),o("WAWebIcdcHandlerApi").handleICDCData(e.author,e.chat.isUser()?e.chat:null,t.messageContextInfo)),n}),m.apply(this,arguments)}function p(e){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.msg,n=e.msgInfo,r=e.reparsing;if(n.offline!=null&&!r)return c(t,n);yield o("WAWebBackendApi").frontendSendAndReceive("processEphemeralSyncResponse",{msg:t})}),_.apply(this,arguments)}function f(e,t,n){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){if(t.offline!=null&&!n)return c(e,t);yield o("WAWebBackendApi").frontendSendAndReceive("processKeepInChatMessage",{keepInChatMessage:e,allowNotification:!0})}),g.apply(this,arguments)}function h(e,t,n){return y.apply(this,arguments)}function y(){return y=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=e;if(t.offline!=null&&!n)return c(r,t);yield o("WAWebDBProcessEditProtocolMsgs").processEditProtocolMsgs([r],n)}),y.apply(this,arguments)}function C(e){return b.apply(this,arguments)}function b(){return b=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield o("WAWebDBPollsUpsertVotes").upsertVotesDb(e);o("WAWebBackendApi").frontendFireAndForget("upsertVotesModelCollection",{votes:t,votesToRemove:null,restoredFromDb:!0}),yield v(t.map(function(e){return o("WAWebLastAddOnDBSerialization").lastAddOnPreviewCandidateFromVoteData(e,!1)}))}),b.apply(this,arguments)}function v(e){return S.apply(this,arguments)}function S(){return S=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield o("WAWebShouldUpdateLastAddOnPreview").filterChatsWithAddOnPreviewUpdates(e);t.size>0&&(yield o("WAWebDBUpdateLastAddOnPreviewChat").updateDatabaseForLastAddOnPreview(t),o("WAWebBackendApi").frontendFireAndForget("updateChatLastAddOnPreview",{chatMap:t}))}),S.apply(this,arguments)}function R(e){return L.apply(this,arguments)}function L(){return L=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.map(function(e){return o("WAWebReactionDataUtils").webMsgInfoReactionTypeToReactionsRow(e)}),n="reaction received: "+t.map(function(e){return e.msgKey.toString()+" to "+e.parentMsgKey}).toString()+";";o("WALogger").DEV(u||(u=babelHelpers.taggedTemplateLiteralLoose(["storeReactionMsgBulk: ",""])),n).tags("messaging");var r=yield o("WAWebDBCreateOrUpdateReactions").createOrUpdateReactions(t);return r&&(yield v(r.map(function(e){return o("WAWebLastAddOnDBSerialization").lastAddOnPreviewCandidateFromReactionRowType(e)}))),r}),L.apply(this,arguments)}l.preProcessMsg=d,l.processEphemeralSyncResponseMsg=p,l.processKeepInChatMsg=f,l.processEditProtocolMsg=h,l.storePollVotesBulk=C,l.storeReactionMsgBulk=R}),98);
__d("WAWebWamEnumMigrationStageEnum",[],(function(t,n,r,o,a,i){var e=Object.freeze({GOT_ABPROP:1,PRIMARY_LOCAL_MIGRATION_STARTED:2,PRIMARY_LOCAL_MIGRATION_ENDED:3,PRIMARY_LOCAL_MIGRATION_FAILED:4,PRIMARY_SENT_PEER_MESSAGE:5,COMPANION_RECEIVED_PEER_MESSAGE:6,COMPANION_LOCAL_MIGRATION_STARTED:7,COMPANION_LOCAL_MIGRATION_ENDED:8,COMPANION_LOCAL_MIGRATION_FAILED:9,COMPANION_MIGRATED_ON_NEW_PAIRING:10,COMPANION_RECEIVED_DEVICE_CAPABILITY:11,COMPANION_EXTRACTED_AND_SAVED_PEER_MESSAGE:12});i.MIGRATION_STAGE_ENUM=e}),66);
__d("WAWebWamEnumStageFailureReasonEnum",[],(function(t,n,r,o,a,i){var e=Object.freeze({MALFORMED_PEER_MESSAGE:1,INITIATED_LOGOUT_BASED_ON_MAPPING:2,DID_NOT_GET_PEER_MESSAGE_ON_TIME:3,DID_NOT_COMPLETE_MIGRATION_ON_TIME:4,COMPANION_UNSUPPORTED_VERSION:5,INTERNAL_ERROR:6,COMPANION_TIMEOUT_BASED_ON_DEVICE_CAPABILITY:7});i.STAGE_FAILURE_REASON_ENUM=e}),66);
__d("WAWebLid11MigrationLifecycleWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumMigrationStageEnum","WAWebWamEnumStageFailureReasonEnum"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({Lid11MigrationLifecycle:[6154,{chatNotInMappingCount:[1,e.TYPES.INTEGER],companionHasADifferentMappingCount:[2,e.TYPES.INTEGER],currentLocalTimeSeconds:[10,e.TYPES.INTEGER],fakeLidCount:[3,e.TYPES.INTEGER],isLocally1x1MigratedFromDb:[14,e.TYPES.BOOLEAN],isStageInOfflineResume:[11,e.TYPES.BOOLEAN],isSyncdLidSession:[4,e.TYPES.BOOLEAN],latestMappingCount:[5,e.TYPES.INTEGER],mappingCount:[6,e.TYPES.INTEGER],migratedThreadCount:[7,e.TYPES.INTEGER],migrationStage:[8,o("WAWebWamEnumMigrationStageEnum").MIGRATION_STAGE_ENUM],peerMappingBytesLength:[12,e.TYPES.INTEGER],primaryMigrationTimeSeconds:[13,e.TYPES.INTEGER],stageFailureReason:[9,o("WAWebWamEnumStageFailureReasonEnum").STAGE_FAILURE_REASON_ENUM],webClientDidPairingStanzaIndicated1x1MigrationThisSession:[15,e.TYPES.BOOLEAN]},[1,1,1],"regular"]},{Lid11MigrationLifecycle:[]});l.Lid11MigrationLifecycleWamEvent=s}),98);
__d("WAWebLid1X1ThreadAccountMigrations.flow",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({WAITING_PROP:1,WAITING_MAPPINGS:2,READY:3,IN_PROGRESS:4,COMPLETE:5});i.LidThreadMigrationStatus=e}),66);
__d("WAWebProtobufLidMigrationSyncPayload.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={};s.name="LIDMigrationMapping",s.internalSpec={pn:[1,(e=o("WAProtoConst")).FLAGS.REQUIRED|e.TYPES.UINT64],assignedLid:[2,e.FLAGS.REQUIRED|e.TYPES.UINT64],latestLid:[3,e.TYPES.UINT64]},u.name="LIDMigrationMappingSyncPayload",u.internalSpec={pnToLidMappings:[1,e.FLAGS.REPEATED|e.TYPES.MESSAGE,s],chatDbMigrationTimestamp:[2,e.TYPES.UINT64]},l.LIDMigrationMappingSpec=s,l.LIDMigrationMappingSyncPayloadSpec=u}),98);
__d("WAWebLid1x1MigrationMsgParser",["WABinary","WAGzip","WALogger","WAWebLogoutReasonConstants","WAWebProtobufLidMigrationSyncPayload.pb","WAWebSocketLogoutJob","WAWebWidFactory","asyncToGeneratorRuntime","decodeProtobuf"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p;function _(e){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){try{o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["parseLidMigrationMappingSyncMsg: start handle peer mapping"])));var n=new(o("WABinary")).Binary(t);o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["parseLidMigrationMappingSyncMsg: after read binary"])));var r=yield o("WAGzip").inflate(n.readByteArrayView());o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["parseLidMigrationMappingSyncMsg: after decompress"])));var a=o("decodeProtobuf").decodeProtobuf(o("WAWebProtobufLidMigrationSyncPayload.pb").LIDMigrationMappingSyncPayloadSpec,r);if(o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["parseLidMigrationMappingSyncMsg: after decode protobuf ("," entries)"])),a.pnToLidMappings.length),a==null||a.pnToLidMappings.length===0)return o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["parseLidMigrationMappingSyncMsg: no mapping in protobuf"]))),{mappings:[],primaryMigrationTsSec:null};var i=a.pnToLidMappings.map(function(e){var t,n=(t=o("WAWebWidFactory")).asUserWidOrThrow(t.createUserWidOrThrow(e.pn.toString())),r=t.asUserWidOrThrow(t.createWid(e.assignedLid.toString()+"@lid")),a=(e==null?void 0:e.latestLid)!=null?o("WAWebWidFactory").asUserWidOrThrow(o("WAWebWidFactory").createWid(e.latestLid.toString()+"@lid")):null;return{pnUser:n,assignedLid:r,latestLid:a}});return o("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["parseLidMigrationMappingSyncMsg: completed successfully"]))),{mappings:i,primaryMigrationTsSec:a.chatDbMigrationTimestamp}}catch(e){o("WALogger").ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["parseLidMigrationMappingSyncMsg: failed to parse lid sync payload"]))).sendLogs("lid-migration-parse-mappings").devConsole(e),yield o("WAWebSocketLogoutJob").socketLogout(o("WAWebLogoutReasonConstants").LogoutReason.LidMigrationFailedToParseMapping)}}),f.apply(this,arguments)}l.parseLidMigrationMappingSyncMsg=_}),98);
__d("WAWebLid1x1MigrationPrimaryCache",["Promise","WALogger","WAWebApiContact","WAWebDBCreateLidPnMappings","WAWebLid1x1MigrationMsgParser","WAWebUserPrefsIndexedDBStorage","WAWebWidFactory","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u=(function(){function t(){this.$1=0,this.$2=new Map,this.$3=new Map,this.$4=null;var t=o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get("WALidThreadAccountMigrationStatus");t==null||t.lidMappingsFromPrimaryMigration==null||(this.$1=t.ts,this.$5(t.lidMappingsFromPrimaryMigration).catch(function(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[LID] Failed to populate lid mappings from primary device"]))).sendLogs(t)}))}var r=t.prototype;return r.getPrimaryMigrationTsSec=function(){return this.$4},r.getLidForPn=function(t){return this.$2.get(t)},r.updateCacheIfEmpty=function(t,r){return this.$2.size!==0?(s||(s=n("Promise"))).resolve():(this.clear(),this.$1=r,this.$5(t))},r.$5=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=this;yield o("WAWebLid1x1MigrationMsgParser").parseLidMigrationMappingSyncMsg(e).then(function(e){var n;t.$4=e==null?void 0:e.primaryMigrationTsSec,e==null||(n=e.mappings)==null||n.forEach(function(e){t.$2.set(e.pnUser,e.assignedLid),e.latestLid!=null&&t.$3.set(e.pnUser,e.latestLid)})})});function t(t){return e.apply(this,arguments)}return t})(),r.getAllPnLidMappings=function(){var e=this;return Array.from(this.$2.entries(),function(t){var n=t[0],r=t[1],o=e.$3.get(n);return{primaryProvidedPn:n,primaryProvidedLid:r,primaryProvidedLatestLid:o}})},r.$6=function(t,n,r){var e=o("WAWebApiContact").lidPnCache.getCurrentLid(o("WAWebWidFactory").asUserWidOrThrow(t)),a=n.equals(e);if(!a){var i="migration-sync-latest",l=[{pn:o("WAWebWidFactory").asUserWidOrThrow(t),lid:o("WAWebWidFactory").asUserLidOrThrow(n)}];if(r==null)return{mappings:l,learningSource:i};var s=r.equals(e);if(s)i="migration-sync-old";else{var u={pn:o("WAWebWidFactory").asUserWidOrThrow(t),lid:o("WAWebWidFactory").asUserLidOrThrow(r)};l.push(u)}return{mappings:l,learningSource:i}}},r.learnMappingsInBulk=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=this,t=this.getAllPnLidMappings(),n=[],r=[];t.forEach(function(t){var o=t.primaryProvidedPn,a=t.primaryProvidedLid,i=t.primaryProvidedLatestLid,l=e.$6(o,a,i);if(l!=null){var s=l.mappings,u=l.learningSource;u==="migration-sync-latest"?r.push.apply(r,s):n.push.apply(n,s)}}),yield o("WAWebDBCreateLidPnMappings").createLidPnMappings({mappings:n,flushImmediately:!0,learningSource:"migration-sync-old"}),yield o("WAWebDBCreateLidPnMappings").createLidPnMappings({mappings:r,flushImmediately:!0,learningSource:"migration-sync-latest"})});function t(){return e.apply(this,arguments)}return t})(),r.clear=function(){this.$1=0,this.$2.clear(),this.$3.clear()},t})(),c=new u;l.lidPnMigrationPrimaryCache=c}),98);
__d("WAWebLid1X1ThreadAccountMigrations",["Promise","WAAsyncSleep","WAJobOrchestratorTypes","WALogger","WALongInt","WANullthrows","WATimeUtils","WAWebABProps","WAWebApiContact","WAWebCommonMsgSubtypeTypes","WAWebCurrentUser","WAWebDBMessageSerialization","WAWebDBMessageUtils","WAWebEphemeralityTypes","WAWebEventsWaitForOfflineDeliveryEnd","WAWebLid11MigrationLifecycleWamEvent","WAWebLid1X1MigrationGating","WAWebLid1X1ThreadAccountMigrations.flow","WAWebLid1x1MigrationPrimaryCache","WAWebLogoutReasonConstants","WAWebModelStorageUtils","WAWebMsgGetters","WAWebMsgType","WAWebOfflineResumeUtils","WAWebOrchestratorNonPersistedJob","WAWebSocketLogoutJob","WAWebUserPrefsIndexedDBStorage","WAWebUserPrefsMultiDevice","WAWebUserPrefsTypes","WAWebUsernameTypes","WAWebWamEnumMigrationStageEnum","WAWebWamEnumStageFailureReasonEnum","WAWebWid","WAWebWidFactory","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I,T,D,x,$,P,N,M,w;function A(){var e=o("WAWebABProps").getABPropConfigValue("lid_one_on_one_migration_enabled"),t=z().state;if(e&&t===o("WAWebLid1X1ThreadAccountMigrations.flow").LidThreadMigrationStatus.WAITING_PROP)return H(o("WAWebLid1X1ThreadAccountMigrations.flow").LidThreadMigrationStatus.WAITING_MAPPINGS)}function F(e){return O.apply(this,arguments)}function O(){return O=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){try{var t;o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["[LID] setLidMigrationMappings: received mappings. size: "," is offline: ",""])),(t=e==null?void 0:e.byteLength)!=null?t:0,o("WAWebEventsWaitForOfflineDeliveryEnd").isOfflineDeliveryEnd());var n=o("WATimeUtils").unixTime();new(o("WAWebLid11MigrationLifecycleWamEvent")).Lid11MigrationLifecycleWamEvent({migrationStage:o("WAWebWamEnumMigrationStageEnum").MIGRATION_STAGE_ENUM.COMPANION_RECEIVED_PEER_MESSAGE}).commit();var r=o("WATimeUtils").unixTime();if(o("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[LID] after sending WAM. is offline: ",". duration: ",""])),o("WAWebEventsWaitForOfflineDeliveryEnd").isOfflineDeliveryEnd(),r-n),e==null)return o("WALogger").LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["[LID] peer mapping is null"]))),yield new(o("WAWebLid11MigrationLifecycleWamEvent")).Lid11MigrationLifecycleWamEvent({migrationStage:o("WAWebWamEnumMigrationStageEnum").MIGRATION_STAGE_ENUM.COMPANION_LOCAL_MIGRATION_FAILED,stageFailureReason:o("WAWebWamEnumStageFailureReasonEnum").STAGE_FAILURE_REASON_ENUM.MALFORMED_PEER_MESSAGE}).commitAndWaitForFlush(!0),o("WALogger").ERROR(_||(_=babelHelpers.taggedTemplateLiteralLoose(["[LID] setLidMigrationMappings: received empty mappings payload"]))).sendLogs("lid-migration-empty-mappings"),o("WAWebSocketLogoutJob").socketLogout(o("WAWebLogoutReasonConstants").LogoutReason.LidMigrationPeerMappingsMalformed);var a=o("WATimeUtils").unixTime();o("WALogger").LOG(f||(f=babelHelpers.taggedTemplateLiteralLoose(["[LID] before update state. is offline: ",""])),o("WAWebEventsWaitForOfflineDeliveryEnd").isOfflineDeliveryEnd()),yield o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set("WALidThreadAccountMigrationStatus",{state:o("WAWebLid1X1ThreadAccountMigrations.flow").LidThreadMigrationStatus.READY,ts:a,lidMappingsFromPrimaryMigration:e});var i=o("WATimeUtils").unixTime();o("WALogger").LOG(g||(g=babelHelpers.taggedTemplateLiteralLoose(["[LID] before update cache. is offline: ",". duration: ",""])),o("WAWebEventsWaitForOfflineDeliveryEnd").isOfflineDeliveryEnd(),i-r),yield o("WAWebLid1x1MigrationPrimaryCache").lidPnMigrationPrimaryCache.updateCacheIfEmpty(e,a),o("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[LID] setLidMigrationMappings: saved updated mapping. is offline: ",""])),o("WAWebEventsWaitForOfflineDeliveryEnd").isOfflineDeliveryEnd()),j()}catch(e){throw o("WALogger").ERROR(y||(y=babelHelpers.taggedTemplateLiteralLoose(["[LID] setLidMigrationMappings: failed to save mappings ",""])),e).sendLogs("lid-migration-failed-to-save-mappings"),e}}),O.apply(this,arguments)}function B(){var e=z().state;return e===o("WAWebLid1X1ThreadAccountMigrations.flow").LidThreadMigrationStatus.READY||e===o("WAWebLid1X1ThreadAccountMigrations.flow").LidThreadMigrationStatus.IN_PROGRESS}function W(){return q.apply(this,arguments)}function q(){return q=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){new(o("WAWebLid11MigrationLifecycleWamEvent")).Lid11MigrationLifecycleWamEvent({migrationStage:o("WAWebWamEnumMigrationStageEnum").MIGRATION_STAGE_ENUM.COMPANION_LOCAL_MIGRATION_STARTED,mappingCount:o("WAWebLid1x1MigrationPrimaryCache").lidPnMigrationPrimaryCache.getAllPnLidMappings().length}).commit();try{if(!B()){o("WALogger").ERROR(C||(C=babelHelpers.taggedTemplateLiteralLoose(["[LID] migrate1x1Chats: migration is not ready"]))).sendLogs("lid-migration-not-ready");return}if(!o("WAWebABProps").getABPropConfigValue("lid_one_on_one_migration_compatible"))return yield new(o("WAWebLid11MigrationLifecycleWamEvent")).Lid11MigrationLifecycleWamEvent({migrationStage:o("WAWebWamEnumMigrationStageEnum").MIGRATION_STAGE_ENUM.COMPANION_LOCAL_MIGRATION_FAILED,stageFailureReason:o("WAWebWamEnumStageFailureReasonEnum").STAGE_FAILURE_REASON_ENUM.COMPANION_UNSUPPORTED_VERSION}).commitAndWaitForFlush(!0),o("WAWebSocketLogoutJob").socketLogout(o("WAWebLogoutReasonConstants").LogoutReason.LidMigrationCompanionIncompatibleKillswitch);o("WALogger").LOG(b||(b=babelHelpers.taggedTemplateLiteralLoose(["[Lid] 1x1ThreadMigration started"]))),H(o("WAWebLid1X1ThreadAccountMigrations.flow").LidThreadMigrationStatus.IN_PROGRESS);var e=z(),t=r("WANullthrows")(e==null?void 0:e.lidMappingsFromPrimaryMigration,"got empty mappings while in lid thread migration"),a=r("WANullthrows")(e==null?void 0:e.ts,"received empty sync timestamp while in lid thread migration");o("WALogger").DEV(v||(v=babelHelpers.taggedTemplateLiteralLoose(["[Lid] 1x1ThreadMigration Step 2: update cache with mappings"]))),yield o("WAWebLid1x1MigrationPrimaryCache").lidPnMigrationPrimaryCache.updateCacheIfEmpty(t,a);var i=[],l=0,s=0;o("WAWebCurrentUser").isEmployee()&&o("WALogger").LOG(S||(S=babelHelpers.taggedTemplateLiteralLoose(["[Lid] 1x1ThreadMigration Primary Mappings: ",""])),o("WAWebLid1x1MigrationPrimaryCache").lidPnMigrationPrimaryCache.getAllPnLidMappings().map(function(e){var t,n;return e.primaryProvidedPn.toString()+":"+e.primaryProvidedLid.toString()+":"+((t=(n=e.primaryProvidedLatestLid)==null?void 0:n.toString())!=null?t:"")}).join(", "));var u=null;if(yield o("WAWebModelStorageUtils").getStorage().lock(["chat","message","user-prefs"],(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e[0],c=e[1];o("WALogger").DEV(R||(R=babelHelpers.taggedTemplateLiteralLoose(["[Lid] 1x1ThreadMigration Step 3: db query to fetch migration candidates"])));var d=(yield t.all()).filter(function(e){var t=e.id,n=o("WAWebWidFactory").createWid(t);return n.isRegularUser()}),m=[],p=[],_=new Set(d.map(function(e){var t=e.id;return o("WAWebWidFactory").asUserWidOrThrow(o("WAWebWidFactory").createWid(t))})),f=d.map((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t;if(u==null){var n=o("WAWebWidFactory").createWid(e.id),d=e.lidOriginType,f=o("WAWebLid1x1MigrationPrimaryCache").lidPnMigrationPrimaryCache.getAllPnLidMappings().some(function(e){var t=e.primaryProvidedLatestLid;return r("WAWebWid").equals(t,n)}),g=d===o("WAWebUsernameTypes").LidOriginType.PNH_CTWA&&f;if(n.isLid()){i.push({id:e.id,accountLid:n.toString(),lidOriginType:g?o("WAWebUsernameTypes").LidOriginType.GENERAL:d});return}var h=o("WAWebApiContact").getCurrentLid(o("WAWebWidFactory").asUserWidOrThrow(n));h==null&&s++;var y=h!=null?_.has(h):!1,C=o("WAWebLid1x1MigrationPrimaryCache").lidPnMigrationPrimaryCache.getLidForPn(n);r("WAWebWid").equals(h,C)||l++;var b=o("WALongInt").maybeNumber(o("WAWebLid1x1MigrationPrimaryCache").lidPnMigrationPrimaryCache.getPrimaryMigrationTsSec());b==null&&o("WALogger").ERROR(L||(L=babelHelpers.taggedTemplateLiteralLoose(["[LID] migrate1x1Chats: primaryMigrationTsSec is a too large number"]))).sendLogs("lid-migration-primary-ts-too-large");var v=yield U({mostRecentMsgTs:(t=e.t)!=null?t:0,isThreadExistsWithChatJid:y,primarySyncTs:b!=null?b:a,primaryProvidedLid:C,latestLocalLid:h,chat:e,MessageTable:c});if(v.deleteChat){m.push(e.id),p.push.apply(p,v.messagesToDelete);return}if(v.logoutReason!=null){u=v.logoutReason;return}i.push({id:e.id,accountLid:v.threadLid.toString(),lidOriginType:e.lidOriginType})}});return function(t){return e.apply(this,arguments)}})());if(yield(w||(w=n("Promise"))).all(f),u!=null){o("WALogger").DEV(E||(E=babelHelpers.taggedTemplateLiteralLoose(["[Lid] 1x1ThreadMigration Step 4: logout reason detected: ",""])),u);return}o("WALogger").DEV(k||(k=babelHelpers.taggedTemplateLiteralLoose(["[Lid] 1x1ThreadMigration Step 5: migrate chat table"]))),yield t.bulkCreateOrMerge(i),yield t.bulkRemove(m),yield c.bulkRemove(p),m.length>0&&o("WALogger").LOG(I||(I=babelHelpers.taggedTemplateLiteralLoose([""," chats deleted on migration instead of logging out"])),m.length).sendLogs("lid-migration-chats-deleted",{sampling:0}),o("WALogger").DEV(T||(T=babelHelpers.taggedTemplateLiteralLoose(["[Lid] 1x1ThreadMigration Step 6: mark migration as completed"]))),H(o("WAWebLid1X1ThreadAccountMigrations.flow").LidThreadMigrationStatus.COMPLETE),o("WAWebLid1X1MigrationGating").Lid1X1MigrationUtils.setIsLidMigrated(!0,o("WAWebUserPrefsTypes").LidMigrationSource.PEER,!1),o("WALogger").LOG(D||(D=babelHelpers.taggedTemplateLiteralLoose(["[Lid] 1x1ThreadMigration completed successfully"])))});return function(t){return e.apply(this,arguments)}})()),u)return yield new(o("WAWebLid11MigrationLifecycleWamEvent")).Lid11MigrationLifecycleWamEvent({migrationStage:o("WAWebWamEnumMigrationStageEnum").MIGRATION_STAGE_ENUM.COMPANION_LOCAL_MIGRATION_FAILED,stageFailureReason:o("WAWebWamEnumStageFailureReasonEnum").STAGE_FAILURE_REASON_ENUM.INITIATED_LOGOUT_BASED_ON_MAPPING}).commitAndWaitForFlush(!0),o("WALogger").ERROR(x||(x=babelHelpers.taggedTemplateLiteralLoose(["[LID] Failed to migrate 1x1 chats with reason: ",". Logging out"])),u).sendLogs("lid-migration-failed"),yield o("WAAsyncSleep").asyncSleep(5e3),o("WAWebSocketLogoutJob").socketLogout(u);yield o("WAWebLid1x1MigrationPrimaryCache").lidPnMigrationPrimaryCache.learnMappingsInBulk();var c=o("WAWebLid1x1MigrationPrimaryCache").lidPnMigrationPrimaryCache.getAllPnLidMappings().reduce(function(e,t){return e+(t.primaryProvidedLatestLid!=null?1:0)},0);new(o("WAWebLid11MigrationLifecycleWamEvent")).Lid11MigrationLifecycleWamEvent({migrationStage:o("WAWebWamEnumMigrationStageEnum").MIGRATION_STAGE_ENUM.COMPANION_LOCAL_MIGRATION_ENDED,mappingCount:o("WAWebLid1x1MigrationPrimaryCache").lidPnMigrationPrimaryCache.getAllPnLidMappings().length,migratedThreadCount:i.length,companionHasADifferentMappingCount:l,chatNotInMappingCount:s,latestMappingCount:c}).commit()}catch(e){return yield new(o("WAWebLid11MigrationLifecycleWamEvent")).Lid11MigrationLifecycleWamEvent({migrationStage:o("WAWebWamEnumMigrationStageEnum").MIGRATION_STAGE_ENUM.COMPANION_LOCAL_MIGRATION_FAILED,stageFailureReason:o("WAWebWamEnumStageFailureReasonEnum").STAGE_FAILURE_REASON_ENUM.INTERNAL_ERROR}).commitAndWaitForFlush(!0),o("WALogger").ERROR($||($=babelHelpers.taggedTemplateLiteralLoose(["[LID] Failed to migrate 1x1 chats: ",""])),e).sendLogs("lid-thread-migration"),o("WAWebSocketLogoutJob").socketLogout(o("WAWebLogoutReasonConstants").LogoutReason.LidMigrationOneOnOneThreadMigrationInternalError)}}),q.apply(this,arguments)}function U(e){return V.apply(this,arguments)}function V(){return V=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.mostRecentMsgTs,n=e.isThreadExistsWithChatJid,r=e.primarySyncTs,a=e.primaryProvidedLid,i=e.latestLocalLid,l=e.chat,s=e.MessageTable;if(a==null){if(i==null){if(l){try{if(l.originalLid!=null)return{threadLid:o("WAWebWidFactory").createUserLidOrThrow(l.originalLid)}}catch(e){o("WALogger").ERROR(P||(P=babelHelpers.taggedTemplateLiteralLoose(["getResolvedThreadAccountLid: failed to get lid for ",", ",", ",""])),l.id,e.message,e.stack).sendLogs("createChat-lid-offline-resume-workaround-failed-migration")}var u=yield K(l,s);if(u.result)return o("WALogger").LOG(N||(N=babelHelpers.taggedTemplateLiteralLoose(["[LID] chat can be deleted, deleting chat ",""])),l.id),{deleteChat:!0,messagesToDelete:u.messages.map(function(e){return e.id})};J(l,r,n,u.messages,u.reason)}return{logoutReason:o("WAWebLogoutReasonConstants").LogoutReason.LidMigrationNoLidAvailiable}}return n?{logoutReason:o("WAWebLogoutReasonConstants").LogoutReason.LidMigrationSplitThreadMismatch}:{threadLid:i}}var c=o("WAWebABProps").getABPropConfigValue("lid_one_on_one_migration_log_out_on_mismatch");return c?i==null||i.equals(a)?(i==null&&o("WALogger").WARN(M||(M=babelHelpers.taggedTemplateLiteralLoose(["[LID] getResolvedThreadAccountLid: latestLocalLid is null"]))),{threadLid:a}):t>=r?{logoutReason:o("WAWebLogoutReasonConstants").LogoutReason.LidMigrationPrimaryMappingsObsolete}:{threadLid:a}:{threadLid:a}}),V.apply(this,arguments)}function H(t){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[LID] setLidThreadMigrationProgress: ",""])),t);var n=o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get("WALidThreadAccountMigrationStatus"),r=babelHelpers.extends({},n,{state:t,ts:o("WATimeUtils").unixTime()});o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set("WALidThreadAccountMigrationStatus",r)}function G(e,t){return e==null?"unknown":t<e?"true":"false"}function z(){var e=o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get("WALidThreadAccountMigrationStatus");if(e==null){var t={state:o("WAWebLid1X1ThreadAccountMigrations.flow").LidThreadMigrationStatus.WAITING_PROP,ts:o("WATimeUtils").unixTime()};return o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set("WALidThreadAccountMigrationStatus",t),t}return e}function j(){if(!B()){o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[LID] scheduleLid1x1ThreadAccountMigrationJob: migration is not ready"])));return}o("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("scheduleLid1x1ThreadAccountMigration",n("asyncToGeneratorRuntime").asyncToGenerator(function*(){o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[LID] refreshing the page to start 1x1 lid thread migration"]))),o("WAWebOfflineResumeUtils").refreshWindow()}),{priority:o("WAJobOrchestratorTypes").JOB_PRIORITY.BEST_EFFORT}).fireAndForget()}function K(e,t){return Q.apply(this,arguments)}function Q(){return Q=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=o("WAWebWidFactory").createWid(e.id),r=yield t.between(["internalId"],o("WAWebDBMessageUtils").beginningOfChat(n),o("WAWebDBMessageUtils").endOfChat(n),{lowerInclusive:!0,upperInclusive:!0,shouldDecrypt:!1}),a=!1;return(ne(r)||re(r))&&G(o("WAWebUserPrefsMultiDevice").getPairingTimestamp(),Z(r).oldestMessageTs)==="false"&&(a=!0),!a&&e.createdLocally!==!0?{result:!1,messages:r,reason:"not created locally"}:(e.ephemeralDuration!=null||e.ephemeralSettingTimestamp!=null)&&!oe(e,r)?{result:!1,messages:r,reason:"ephemeral_duration"}:e.isLocked?{result:!1,messages:r,reason:"locked: "+String(e.isLocked)}:e.archive?{result:!1,messages:r,reason:"archived: "+String(e.archive)}:e.muteExpiration?{result:!1,messages:r,reason:"mute_expiration: "+String(e.muteExpiration)}:r.every(Y)||te(r)||a?{result:!0,messages:r}:{result:!1,messages:r,reason:"has messages"}}),Q.apply(this,arguments)}function X(e){var t=o("WAWebDBMessageSerialization").messageFromDbRow(e);return o("WAWebMsgGetters").getIsDisappearingModeSystemMessage(t)}function Y(e){var t=o("WAWebDBMessageSerialization").messageFromDbRow(e);return o("WAWebMsgGetters").getIsDisappearingModeSystemMessage(t)||o("WAWebMsgGetters").getIsInitialE2ENotification(t)}function J(e,t,n,r,a){var i=o("WAWebUserPrefsMultiDevice").getPairingTimestamp(),l=Z(r),s=l.oldestMessageTs,u=l.newestMessageTs,d=l.count,m=G(i,s),p=e.t,_=ee(p),f=ee(t),g=ee(i),h=e.createdLocally===!0,y=ee(s),C=ee(u),b={reason:a,messagesCount:d,fromHistSync:m,primarySyncT:f,pairingT:g,oldestMessageT:y,newestMessageT:C,chatT:_,threadExist:n};r.length<=4&&(b.messages=r.map(function(e){return{type:e.type,subtype:e.subtype,ack:e.ack}}));var v=ae(h,r,a);o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[LID] no lid available for chat ",", ",""])),e.id,JSON.stringify(b)).sendLogs(v)}function Z(e){var t=Math.min.apply(Math,e.map(function(e){return e.t})),n=Math.max.apply(Math,e.map(function(e){return e.t})),r=e.length;return{oldestMessageTs:t,newestMessageTs:n,count:r}}function ee(e){return e==null?null:o("WATimeUtils").toHttpHeaderDate(o("WATimeUtils").castToUnixTime(e))}function te(e){return e.every(function(e){return Y(e)||e.type===o("WAWebMsgType").MSG_TYPE.CALL_LOG})&&e.some(function(e){return e.type===o("WAWebMsgType").MSG_TYPE.CALL_LOG})}function ne(e){return e.every(function(e){return Y(e)||e.broadcast})&&e.some(function(e){return e.broadcast})}function re(e){return e.every(function(e){return Y(e)||e.subtype===o("WAWebCommonMsgSubtypeTypes").MsgSubtype.ContactInfoCard})&&e.some(function(e){return e.subtype===o("WAWebCommonMsgSubtypeTypes").MsgSubtype.ContactInfoCard})}function oe(e,t){return!!(e.disappearingModeTrigger===o("WAWebEphemeralityTypes").DisappearingModeTrigger.AccountSettings&&t.some(X))}function ae(e,t,n){return ne(t)?"lid-migration-no-lid-available-broadcast-chat":te(t)?"lid-migration-no-lid-available-call-chat":re(t)?"lid-migration-no-lid-available-contact-info-chat":e?n==="has messages"?"lid-migration-no-lid-available-created-locally-has-messages":"lid-migration-no-lid-available-created-locally":"lid-migration-no-lid-available"}l.checkIfMigrationEnabled=A,l.setLidMigrationMappings=F,l.shouldMigrateNow=B,l.migrate1x1Chats=W,l.getResolvedThreadAccountLid=U,l.getLidThreadMigrationStatus=z}),98);
__d("WAWebLogMissingGroupParticipantMappings",["WALogger","WAWebApiContact","WAWebGroupsParticipantsApi","WAWebIsCagGroupCache","WAWebWidFactory","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t,n,r){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,a,i){if(!(!t.isGroup()||r("WAWebIsCagGroupCache").isCag(t)||n.isBot())){var l=o("WAWebWidFactory").asUserWidOrThrow(n);if(o("WAWebApiContact").getAlternateUserWid(l)==null){var s=yield o("WAWebGroupsParticipantsApi").getParticipants(t);s==null||s.participants.includes(l.toString())||o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["participant missing mapping, addressing mode mismatch = ",""])),String(i!==a)).sendLogs("GroupLidInfra/incoming_group_message_unknown",{sampling:.01})}}}),u.apply(this,arguments)}l.logMissingGroupParticipantMappings=s}),98);
__d("WAWebWamEnumChatGatedReason",[],(function(t,n,r,o,a,i){var e=Object.freeze({TOS3:1,COUNTRY:2});i.CHAT_GATED_REASON=e}),66);
__d("WAWebGatedMessageReceivedWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumChatGatedReason"],(function(t,n,r,o,a,i,l){var e=o("WAWebWamCodegenUtils").defineEvents({GatedMessageReceived:[3152,{chatGatedReason:[1,o("WAWebWamEnumChatGatedReason").CHAT_GATED_REASON]},[1,1,1],"regular"]},{GatedMessageReceived:[]});l.GatedMessageReceivedWamEvent=e}),98);
__d("WAWebWamEnumPairedMediaType",[],(function(t,n,r,o,a,i){var e=Object.freeze({SD_PHOTO:0,HD_PHOTO:1,SD_VIDEO:2,HD_VIDEO:3,MOTION_PHOTO_PARENT:4,MOTION_PHOTO_CHILD:5,HEVC_VIDEO_PARENT:6,HEVC_VIDEO_CHILD:7});i.PAIRED_MEDIA_TYPE=e}),66);
__d("WAWebWamEnumPrivateAiFeatureName",[],(function(t,n,r,o,a,i){var e=Object.freeze({SUMMARIZATION:0,WRITE_WITH_AI:1,PSI:2,QUICK_RECAP:3,INCONGNITO:4,SIDE_CHAT:5,GROUP_AI:6,PSI_SEARCH:7});i.PRIVATE_AI_FEATURE_NAME=e}),66);
__d("WAWebWamEnumStickerMakerSourceType",[],(function(t,n,r,o,a,i){var e=Object.freeze({CUTOUT_IMAGE:1,WEB_STICKER_MAKER:2,IOS_STICKER_MAKER:3,ANDROID_STICKER_MAKER:4,TRANSPARENT_IMAGE:5,GIF:6});i.STICKER_MAKER_SOURCE_TYPE=e}),66);
__d("WAWebMessageReceiveWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumAddressingMode","WAWebWamEnumAgentEngagementEnumType","WAWebWamEnumBotType","WAWebWamEnumChatOriginsType","WAWebWamEnumDisappearingChatInitiatorType","WAWebWamEnumEditType","WAWebWamEnumEncryptionTypeCode","WAWebWamEnumEphemeralityInitiatorType","WAWebWamEnumEphemeralityTriggerActionType","WAWebWamEnumInvisibleMessageCategoryType","WAWebWamEnumMediaType","WAWebWamEnumMessageType","WAWebWamEnumOppositeVisibleIdentificationType","WAWebWamEnumPairedMediaType","WAWebWamEnumPrivateAiFeatureName","WAWebWamEnumRevokeType","WAWebWamEnumSizeBucket","WAWebWamEnumStickerMakerSourceType","WAWebWamEnumTypeOfGroupEnum"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({MessageReceive:[450,{agentEngagementType:[28,o("WAWebWamEnumAgentEngagementEnumType").AGENT_ENGAGEMENT_ENUM_TYPE],appContext:[43,e.TYPES.STRING],appContextBitfield:[44,e.TYPES.INTEGER],botType:[37,o("WAWebWamEnumBotType").BOT_TYPE],chatOrigins:[38,o("WAWebWamEnumChatOriginsType").CHAT_ORIGINS_TYPE],deviceCount:[16,e.TYPES.INTEGER],deviceSizeBucket:[10,o("WAWebWamEnumSizeBucket").SIZE_BUCKET],disappearingChatInitiator:[14,o("WAWebWamEnumDisappearingChatInitiatorType").DISAPPEARING_CHAT_INITIATOR_TYPE],editType:[25,o("WAWebWamEnumEditType").EDIT_TYPE],encryptionType:[54,o("WAWebWamEnumEncryptionTypeCode").ENCRYPTION_TYPE_CODE],ephemeralityDuration:[13,e.TYPES.INTEGER],ephemeralityInitiator:[26,o("WAWebWamEnumEphemeralityInitiatorType").EPHEMERALITY_INITIATOR_TYPE],ephemeralityTriggerAction:[27,o("WAWebWamEnumEphemeralityTriggerActionType").EPHEMERALITY_TRIGGER_ACTION_TYPE],hasUsername:[39,e.TYPES.BOOLEAN],hasUsernamePin:[45,e.TYPES.BOOLEAN],invisibleMessageCategory:[41,o("WAWebWamEnumInvisibleMessageCategoryType").INVISIBLE_MESSAGE_CATEGORY_TYPE],isAComment:[36,e.TYPES.BOOLEAN],isAReply:[19,e.TYPES.BOOLEAN],isForwardedForward:[18,e.TYPES.BOOLEAN],isLid:[24,e.TYPES.BOOLEAN],isPq:[55,e.TYPES.BOOLEAN],isViewOnce:[9,e.TYPES.BOOLEAN],localAddressingMode:[33,o("WAWebWamEnumAddressingMode").ADDRESSING_MODE],messageAddressingMode:[34,o("WAWebWamEnumAddressingMode").ADDRESSING_MODE],messageIsInternational:[4,e.TYPES.BOOLEAN],messageIsInvisible:[23,e.TYPES.BOOLEAN],messageIsOffline:[5,e.TYPES.BOOLEAN],messageMediaType:[2,o("WAWebWamEnumMediaType").MEDIA_TYPE],messageQueueTime:[15,e.TYPES.TIMER],messageReceiveT0:[6,e.TYPES.TIMER],messageReceiveT1:[7,e.TYPES.TIMER],messageReceiveT2:[49,e.TYPES.TIMER],messageType:[1,o("WAWebWamEnumMessageType").MESSAGE_TYPE],mutedGroupMessage:[8,e.TYPES.BOOLEAN],numOfWebUrlsInTextMessage:[3,e.TYPES.INTEGER],offlineCount:[30,e.TYPES.INTEGER],oppositeVisibleIdentification:[40,o("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE],paddingBytesSize:[22,e.TYPES.INTEGER],pairedMediaType:[42,o("WAWebWamEnumPairedMediaType").PAIRED_MEDIA_TYPE],participantCount:[17,e.TYPES.INTEGER],privateAiFeatureName:[53,o("WAWebWamEnumPrivateAiFeatureName").PRIVATE_AI_FEATURE_NAME],processingDeferred:[47,e.TYPES.BOOLEAN],receivedPhoneNumberContactSize:[50,e.TYPES.INTEGER],receivedPhoneNumberWithUsernameContactSize:[51,e.TYPES.INTEGER],receivedUsernameContactSize:[52,e.TYPES.INTEGER],receiverDefaultDisappearingDuration:[12,e.TYPES.INTEGER],revokeType:[20,o("WAWebWamEnumRevokeType").REVOKE_TYPE],senderDefaultDisappearingDuration:[11,e.TYPES.INTEGER],serverAddressingMode:[35,o("WAWebWamEnumAddressingMode").ADDRESSING_MODE],stanzaProcessCount:[48,e.TYPES.INTEGER],stickerIsAi:[29,e.TYPES.BOOLEAN],stickerIsFromStickerMaker:[31,e.TYPES.BOOLEAN],stickerMakerSourceType:[32,o("WAWebWamEnumStickerMakerSourceType").STICKER_MAKER_SOURCE_TYPE],typeOfGroup:[21,o("WAWebWamEnumTypeOfGroupEnum").TYPE_OF_GROUP_ENUM]},[1,1,5],"regular"]},{MessageReceive:[]});l.MessageReceiveWamEvent=s}),98);
__d("WAWebLogReceivedMessages",["PaymentLinkWamLogger","Promise","WALogger","WATimeUtils","WAWebABProps","WAWebAddonProcessMsgsUtils","WAWebApiChat","WAWebBackendApi","WAWebChatThreadLogging","WAWebChatThreadLoggingUtils","WAWebDBMsgUtils","WAWebDBProcessReplyMsgs","WAWebEphemeralityResolver","WAWebGalaxyFlowWamLoggerUtils","WAWebGatedMessageReceivedWamEvent","WAWebLidAwareContactsDB","WAWebLidMigrationUtils","WAWebMessageReceiveWamEvent","WAWebMsgGetters","WAWebMsgType","WAWebRuntimeEnvironmentUtils","WAWebUserPrefsMeUser","WAWebUsernameTypes","WAWebWamAddressingModeUtils","WAWebWamEnumChatGatedReason","WAWebWamEnumChatOriginsType","WAWebWamEnumRevokeType","WAWebWamGroupMetadataMetricUtils","WAWebWamGroupMetricCache","WAWebWamMsgUtils","WAWebWidFactory","WAWebWorkerSafeBackendApi","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u,c,d="\uD83D\uDC9A";function m(e){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){yield(c||(c=n("Promise"))).all(e.map((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){o("PaymentLinkWamLogger").shouldLogReceiverEvent(e)&&(yield o("PaymentLinkWamLogger").genLogReceiveEvent({interaction_component:null,msg:e},e.matchedText).catch(function(e){o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["error logging payment link message receive: ",""])),e)}))});return function(t){return e.apply(this,arguments)}})()))}),p.apply(this,arguments)}function _(e,t,n){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,r){var a,i=e.msgs,l=e.offline,s=e.tsMillis,u=e.clientReceivedTsMillis,d=e.msgProcessStartTsMillis,m=e.serverAddressingMode,p=e.localAddressingMode,_=o("WATimeUtils").unixTimeMs(),f=yield(c||(c=n("Promise"))).all([o("WAWebChatThreadLoggingUtils").getMeHasUsername(),o("WAWebChatThreadLoggingUtils").getMeHasUsernamePin()]),g=f[0],h=f[1],y=(a=r.get(o("WAWebUserPrefsMeUser").getMePnUserOrThrow().toJid()))==null?void 0:a.ephemeralDuration;yield c.all(i.map((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,n){var a=e.from;if(a!=null){var i=o("WAWebWamEnumChatOriginsType").CHAT_ORIGINS_TYPE.OTHERS;a.isLid()&&(i=o("WAWebWamEnumChatOriginsType").CHAT_ORIGINS_TYPE.LID_CTWA);var c=t[n];if(c!=null&&c.lidOriginType)switch(c.lidOriginType){case o("WAWebUsernameTypes").LidOriginType.PNH_CTWA:i=o("WAWebWamEnumChatOriginsType").CHAT_ORIGINS_TYPE.LID_CTWA;break;case o("WAWebUsernameTypes").LidOriginType.GENERAL:i=o("WAWebWamEnumChatOriginsType").CHAT_ORIGINS_TYPE.OTHERS;break}var f=yield o("WAWebChatThreadLoggingUtils").getOppositeVisibleIdentification(a),C=a.isGroup()?e.from.isLid():o("WAWebWamMsgUtils").msgIsLid(e,a),b=new(o("WAWebMessageReceiveWamEvent")).MessageReceiveWamEvent({messageType:o("WAWebWamMsgUtils").getWamMessageType(e),messageMediaType:o("WAWebWamMsgUtils").getWamMediaType(e),messageIsInternational:o("WAWebMsgGetters").getIsInternational(e),messageIsOffline:l!=null,isViewOnce:!!e.isViewOnce,isForwardedForward:o("WAWebMsgGetters").getNumTimesForwarded(e)>1,isAReply:o("WAWebMsgGetters").getIsReply(e),editType:o("WAWebMsgGetters").getWamEditType(e),botType:o("WAWebWamMsgUtils").getWamBotType(a,e.bizBotType),isAComment:o("WAWebMsgGetters").getType(e)===o("WAWebMsgType").MSG_TYPE.COMMENT,hasUsername:g,hasUsernamePin:h,chatOrigins:i,oppositeVisibleIdentification:f!=null?f:void 0,isLid:C,messageReceiveT0:0,messageReceiveT1:0,messageReceiveT2:0});if(l!=null&&(b.offlineCount=l),!a.isGroup()&&!a.isStatus()){var v,S=(v=r.get(a.toJid()))==null?void 0:v.ephemeralDuration;S!=null&&(b.senderDefaultDisappearingDuration=S),y!=null&&(b.receiverDefaultDisappearingDuration=y),b.isLid=a.isLid()}o("WAWebMsgGetters").getIsRevoke(e)&&(b.revokeType=e.subtype==="admin_revoke"?o("WAWebWamEnumRevokeType").REVOKE_TYPE.ADMIN:o("WAWebWamEnumRevokeType").REVOKE_TYPE.SENDER),u!=null&&(b.messageReceiveT0=u-s,b.messageReceiveT1=_-u,d!=null&&(b.messageQueueTime=d-u)),e.ephemeralDuration!=null&&e.ephemeralDuration>0&&(b.ephemeralityDuration=e.ephemeralDuration);var R=o("WAWebMsgGetters").getWamDisappearingModeInitiator(e);if(R!=null&&(b.disappearingChatInitiator=R),o("WAWebABProps").getABPropConfigValue("dm_initiator_trigger")){var L=o("WAWebMsgGetters").getWamDisappearingModeTrigger(e);L!=null&&(b.ephemeralityTriggerAction=L);var E=o("WAWebMsgGetters").getWamDisappearingModeInitiatedByMe(e);E!=null&&(b.ephemeralityInitiator=E)}var k=o("WAWebWamMsgUtils").getWamAgentEngagementType(e);k!=null&&(b.agentEngagementType=k);var I=yield o("WAWebWamGroupMetadataMetricUtils").getGroupTypeFromChatWid(a);if(I!=null&&(b.typeOfGroup=I),m!=null&&(b.serverAddressingMode=o("WAWebWamAddressingModeUtils").getWamAddressingModeFromString(m)),p!=null&&(b.localAddressingMode=o("WAWebWamAddressingModeUtils").getWamAddressingModeFromString(p)),a!=null&&a.isGroup()){var T=yield o("WAWebWamGroupMetadataMetricUtils").isCagFromChatWid(a),D=o("WAWebMsgGetters").getIsReaction(e);T!=null&&D!=null&&(b.isLid=T&&D);var x=yield o("WAWebWamGroupMetricCache").getGroupMetrics(a);(x==null?void 0:x.participantCount)!=null&&(b.participantCount=x.participantCount),(x==null?void 0:x.deviceCount)!=null&&(b.deviceCount=x.deviceCount),(x==null?void 0:x.deviceSizeBucket)!=null&&(b.deviceSizeBucket=x.deviceSizeBucket)}b.commit()}});return function(t,n){return e.apply(this,arguments)}})()))}),f.apply(this,arguments)}function g(e){return h.apply(this,arguments)}function h(){return h=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["getContactData"])));var t=new Set(e.filter(function(e){return e.id.remote.isUser()}).map(function(e){return e.id.remote.toJid()}));t.add(o("WAWebUserPrefsMeUser").getMePnUserOrThrow().toJid());var n=Array.from(t),a;return o("WAWebRuntimeEnvironmentUtils").isWorker()?(a=yield r("WAWebLidAwareContactsDB").bulkGet(n),new Map(a.map(function(e,t){return[n[t],{ephemeralDuration:o("WAWebEphemeralityResolver").getEphemeralDurationForUser(e),shouldBlockByCountry:function(){return!1},shouldBlockByTos:function(){return!1}}]}))):o("WAWebWorkerSafeBackendApi").workerSafeSendAndReceive("getContactData",{ids:n.map(o("WAWebWidFactory").createWid)})}),h.apply(this,arguments)}function y(e){return C.apply(this,arguments)}function C(){return C=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){return o("WAWebApiChat").bulkGetChats(e.map(function(e){return e.from}))}),C.apply(this,arguments)}function b(e){return v.apply(this,arguments)}function v(){return v=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield(c||(c=n("Promise"))).all([y(e),g(e)]),r=t[0],o=t[1];return{chatData:r,contactData:o}}),v.apply(this,arguments)}function S(e,t){for(var n of e){var r=t.get(n.id.remote.toJid());r&&!o("WAWebMsgGetters").getIsSentByMe(n)&&(r.shouldBlockByCountry()?new(o("WAWebGatedMessageReceivedWamEvent")).GatedMessageReceivedWamEvent({chatGatedReason:o("WAWebWamEnumChatGatedReason").CHAT_GATED_REASON.COUNTRY}).commit():r.shouldBlockByTos()&&new(o("WAWebGatedMessageReceivedWamEvent")).GatedMessageReceivedWamEvent({chatGatedReason:o("WAWebWamEnumChatGatedReason").CHAT_GATED_REASON.TOS3}).commit())}}function R(e){return o("WAWebMsgGetters").getIsReaction(e)?o("WAWebAddonProcessMsgsUtils").getParentMsgKey(e):o("WAWebDBProcessReplyMsgs").createQuotedMsgKey(e)}function L(e){return E.apply(this,arguments)}function E(){return E=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,n=(t=o("WAWebLidMigrationUtils").getAlternateMsgKey(e))==null?void 0:t.toString();if(n!=null)return o("WAWebDBMsgUtils").getMsgByMsgKey(n)}),E.apply(this,arguments)}function k(e){return I.apply(this,arguments)}function I(){return I=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){if(o("WAWebMsgGetters").getType(e)===o("WAWebMsgType").MSG_TYPE.COMMENT){var t;return{activityType:"commentsReceived",ts:(t=e.t)!=null?t:o("WATimeUtils").unixTimeMs(),chatId:e.id.remote}}if(o("WAWebABProps").getABPropConfigValue("group_status_receiver_enabled")){var n=R(e);if(n!=="missing-stanza-id"){var r=yield o("WAWebDBMsgUtils").getMsgByMsgKey(n);if(o("WAWebMsgGetters").getIsReply(e)&&r==null&&(r=yield L(n)),r!=null&&o("WAWebMsgGetters").getIsGroupStatus(r)){var a=o("WAWebMsgGetters").getIsReply(e),i=o("WAWebMsgGetters").getIsReaction(e)&&e.reactionText===d;if(a||i){var l=o("WAWebMsgGetters").getIsSentByMe(r);return{activityType:"groupStatusMsgReceive",chatId:e.id.remote,ts:e.t,isGroupStatusReplyOthersToOwn:a&&l,isGroupStatusReplyOthersToOthers:a&&!l,isGroupStatusLikeOthersToOwn:i&&l,isGroupStatusLikeOthersToOthers:i&&!l}}}}}return{activityType:e.id.fromMe?"msgSend":"msgReceive",ts:e.t,chatId:e.id.remote,isViewOnce:e.isViewOnce===!0,isReaction:o("WAWebMsgGetters").getIsReaction(e),isForwarded:e.isForwarded===!0,isCommerceMessage:o("WAWebChatThreadLoggingUtils").isCommerceMessage(e),isReply:o("WAWebMsgGetters").getIsReply(e),isEdit:o("WAWebMsgGetters").getIsEditProtocolMsg(e),isBot:o("WAWebMsgGetters").getIsBotQuery(e)||o("WAWebMsgGetters").getIsMetaBotResponse(e),isEventCreation:e.type===o("WAWebMsgType").MSG_TYPE.EVENT_CREATION,isEventResponse:e.type===o("WAWebMsgType").MSG_TYPE.EVENT_RESPONSE}}),I.apply(this,arguments)}function T(e){(c||(c=n("Promise"))).all(e.filter(o("WAWebChatThreadLoggingUtils").shouldIncrementMsgSendAndReceive).map(k)).then(o("WAWebChatThreadLogging").handleActivitiesForChatThreadLogging)}function D(e){e.filter(o("WAWebMsgGetters").getIsAuthenticationMessage).forEach(function(e){o("WAWebBackendApi").frontendFireAndForget("logOTPMessageReceivedActions",{msgData:e})})}function x(t){var r=t.msgs;b(r).then(function(e){return(c||(c=n("Promise"))).all([_(t,e.chatData,e.contactData),S(r,e.contactData),T(r),D(r),m(r),o("WAWebGalaxyFlowWamLoggerUtils").logStructuredMessageReceivedWAMEvent(r)])}).catch(function(t){o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["error logging received messages: ",""])),t)})}l.logReceivedMessagesInWAM=x}),98);
__d("WAWebMessageDestinationChat",["WALogger","WAWebLid1X1MigrationGating","WAWebWidFactory","err"],(function(t,n,r,o,a,i,l){var e;function s(t){var n=t.chat,a=t.msg,i=t.msgInfo;if(n.isRegularUser()){if(o("WAWebLid1X1MigrationGating").Lid1X1MigrationUtils.isLidMigrated()){var l=o("WAWebWidFactory").asUserWidOrThrow(a.id.remote);if(l.isLid())return{chatId:l,accountLid:l};var s=i.accountLid;if(s==null)throw o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["determineDestinationChatForIncomingMessage: accountLid is null for incoming message (LID migrated)"]))).sendLogs("determineDestinationChatForIncomingMessage-account-lid-null"),r("err")("determineDestinationChatForIncomingMessage: accountLid is null for incoming message (LID migrated)");return{chatId:l,accountLid:s}}var u=!o("WAWebLid1X1MigrationGating").Lid1X1MigrationUtils.isLidMigrated()&&n.isLid();if(u)return{chatId:a.id.remote}}return{chatId:n}}l.determineDestinationChatForIncomingMessage=s}),98);
__d("WAWebWamEnumOfflineProcessRunReasons",[],(function(t,n,r,o,a,i){var e=Object.freeze({PUSH_NOTIFICATION:1,PERIODIC_BACKGROUND_SYNC:2});i.OFFLINE_PROCESS_RUN_REASONS=e}),66);
__d("WAWebWamEnumOfflineProcessStages",[],(function(t,n,r,o,a,i){var e=Object.freeze({PAGE_LOAD:1,SOCKET_CONNECT:2,OFFLINE_PREVIEW:3,PROCESSING:4,PROCESS_COMPLETE:5,PROCESS_INTERRUPTED:6});i.OFFLINE_PROCESS_STAGES=e}),66);
__d("WAWebWebcOfflineNotificationProcessWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumOfflineProcessRunReasons","WAWebWamEnumOfflineProcessStages"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({WebcOfflineNotificationProcess:[4222,{currentOfflineProcessStage:[4,o("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES],offlineProcessDecryptErrorCount:[5,e.TYPES.INTEGER],offlineProcessMailboxAge:[6,e.TYPES.INTEGER],offlineProcessMessageCount:[7,e.TYPES.INTEGER],offlineProcessNotificationCount:[8,e.TYPES.INTEGER],offlineProcessSessionId:[9,e.TYPES.STRING],offlineProcessStageTimestampMs:[10,e.TYPES.INTEGER],runReason:[12,o("WAWebWamEnumOfflineProcessRunReasons").OFFLINE_PROCESS_RUN_REASONS],swVersion:[11,e.TYPES.STRING]},[1,1,1],"regular"]},{WebcOfflineNotificationProcess:[]});l.WebcOfflineNotificationProcessWamEvent=s}),98);
__d("WAWebWamWorkerOfflineProcessReporter",["WALogger","WARandomHex","WAShiftTimer","WATimeUtils","WAWebBuildConstants","WAWebRuntimeEnvironmentUtils","WAWebUserPrefsGeneral","WAWebUserPrefsMultiDevice","WAWebWamEnumOfflineProcessRunReasons","WAWebWamEnumOfflineProcessStages","WAWebWamOfflineResumeReporter","WAWebWebcOfflineNotificationProcessWamEvent","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u,c=1e4,d=12e4,m=(function(){function t(){this.$8=null,this.$1=this.$13(),this.$2=o("WAWebWamEnumOfflineProcessRunReasons").OFFLINE_PROCESS_RUN_REASONS.PUSH_NOTIFICATION,this.pageLoadT=self.performance.now(),this.$3=0,this.$4=0,this.$5=0,this.$6=0,this.$7=0,this.$9=0,this.$10=0,this.$11=0}var r=t.prototype;return r.$13=function(){return""+o("WARandomHex").randomHex(4)+o("WATimeUtils").unixTimeWithoutClockSkewCorrection()},r.$14=function(t,n){var e=new(o("WAWebWebcOfflineNotificationProcessWamEvent")).WebcOfflineNotificationProcessWamEvent({offlineProcessSessionId:this.$1,offlineProcessStageTimestampMs:n,currentOfflineProcessStage:t,swVersion:o("WAWebBuildConstants").VERSION_BASE,runReason:this.$2});(t===o("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.PROCESSING||t===o("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.PROCESS_COMPLETE||t===o("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.PROCESS_INTERRUPTED)&&this.$15(e),t===o("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.PROCESS_COMPLETE||t===o("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.PROCESS_INTERRUPTED?e.commitAndWaitForFlush(!0):e.commit()},r.$15=function(t){var e,n,r,a;t.offlineProcessMessageCount=o("WAWebWamOfflineResumeReporter").roundUp((e=this.$10)!=null?e:0,10),t.offlineProcessNotificationCount=o("WAWebWamOfflineResumeReporter").roundUp((n=this.$11)!=null?n:0,10),t.offlineProcessMailboxAge=o("WAWebWamOfflineResumeReporter").countDays((r=this.$7)!=null?r:0),t.offlineProcessDecryptErrorCount=(a=this.$9)!=null?a:0},r.$16=function(){var t=this;this.$8==null&&(this.$8=new(o("WAShiftTimer")).ShiftTimer(function(){if(t.$12===o("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.PROCESSING){var n=Math.floor(self.performance.now()-t.pageLoadT);if(o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][worker] worker offline processing progress updates\n          ======= worker offline processing update ========\n          ProcessedMessage: ","\n          ProcessedNotification: ","\n          currentProcessingT: ","\n          =================================================\n         "])),t.$10,t.$11,n),n>d){o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose([" [offline-resume][worker] worker offline processing takes too long"]))).sendLogs("worker-offline-process-takes-too-long");return}t.$14(o("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.PROCESSING,n),t.$16()}})),this.$8.onOrAfter(c)},r.$17=function(){var e;this.$12=o("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.PROCESSING,(e=this.$8)==null||e.cancel(),this.$16()},r.$18=function(t){t===void 0&&(t=-1),o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][worker] worker offline processing ends\n        ========= worker offline processing perf ==========\n        message: ","\n        receipt: ","\n        notification: ","\n        call: ","\n        ProcessedMessage: ","\n        ProcessedNotification: ","\n        decryptError: ","\n        pageLoadT: 0\n        socketConnectT: ","\n        offlinePreviewT: ","\n        processCompleteT: ","\n        mailboxAge: ","\n        isInterrupted: ","\n        runReason: ","\n        ===================================================\n        "])),this.$3,this.$4,this.$5,this.$6,this.$10,this.$11,this.$9,this.socketConnectT,this.offlinePreviewT,this.processCompleteT,t,this.$12===o("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.PROCESS_INTERRUPTED,this.$2)},r.getCurrentStage=function(){return this.$12},r.updateOldestStanzaTime=function(t){(this.$7==null||this.$7>t)&&(this.$7=t)},r.updateOfflineCount=function(t){this.$3=t.message,this.$4=t.receipt,this.$5=t.notification,this.$6=t.call},r.updateOfflineDecryptionErrorCount=function(t){this.$9=t},r.updateProcessedMessageCount=function(){o("WAWebRuntimeEnvironmentUtils").isWorker()&&(this.$10+=1)},r.updateProcessedNotificationCount=function(){o("WAWebRuntimeEnvironmentUtils").isWorker()&&(this.$11+=1)},r.logWorkerInitialized=function(t){this.$12=o("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.PAGE_LOAD,this.$2=t,this.$14(o("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.PAGE_LOAD,0)},r.logSocketConnect=function(){this.$12=o("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.SOCKET_CONNECT;var e=Math.floor(self.performance.now()-this.pageLoadT);this.socketConnectT=e,this.$14(o("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.SOCKET_CONNECT,e)},r.logOfflinePreview=function(){this.$12=o("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.OFFLINE_PREVIEW;var e=Math.floor(self.performance.now()-this.pageLoadT);this.offlinePreviewT=e,this.$14(o("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.OFFLINE_PREVIEW,e),this.$17()},r.logProcessComplete=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e;if(!(this.$12===o("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.PROCESS_COMPLETE||this.$12===o("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.PROCESS_INTERRUPTED)){this.$12=o("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.PROCESS_COMPLETE,(e=this.$8)==null||e.cancel(),this.$8=null;var t=o("WAWebWamOfflineResumeReporter").countDays(this.$7);yield o("WAWebUserPrefsMultiDevice").setRecentMailboxAgeDays(t);var n=Math.floor(self.performance.now()-this.pageLoadT);this.processCompleteT=n,this.$18(t),this.$14(o("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.PROCESS_COMPLETE,n),o("WAWebUserPrefsGeneral").setLastPushCompleteTimestamp(o("WATimeUtils").unixTimeMs())}});function t(){return e.apply(this,arguments)}return t})(),r.logProcessInterrupted=function(){var e;if(!(this.$12==null||this.$12===o("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.PROCESS_COMPLETE||this.$12===o("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.PROCESS_INTERRUPTED)){this.$12=o("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.PROCESS_INTERRUPTED,(e=this.$8)==null||e.cancel(),this.$8=null;var t=Math.floor(self.performance.now()-this.pageLoadT);this.processCompleteT=t,this.$18(),this.$14(o("WAWebWamEnumOfflineProcessStages").OFFLINE_PROCESS_STAGES.PROCESS_INTERRUPTED,t)}},t})(),p=new m;l.WorkerOfflineResumeReporter=p}),98);
__d("WAWebMessageProcessPlaceholder",["Promise","WALogger","WANullthrows","WAWebAck","WAWebAdvHostedAccountTypeSystemMsg","WAWebApiDeviceList","WAWebBackendApi","WAWebBizCoexGatingUtils","WAWebBizCoexUtils","WAWebCheckChatExistsOrCreate","WAWebCmd","WAWebCurrentUser","WAWebDBProcessMessage","WAWebHandleMsgCommon","WAWebHandleMsgTypes.flow","WAWebMessageDestinationChat","WAWebMessageProcessorCache","WAWebMsgProcessingApiUtils","WAWebMsgType","WAWebProtobufsAdv.pb","WAWebUserPrefsMultiDevice","WAWebWamWorkerOfflineProcessReporter","WAWebWidFactory","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u,c,d;function m(e){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var a=t.msgInfo,i=a.chat;if(a.category===o("WAWebHandleMsgCommon").CATEGORY_PEER){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["processPlaceHolderMessage: msgId:",", skip placeholder for peer message"])),a.externalId).tags("messaging");return}var l=a.offline!=null;try{var m=[];if(o("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&i.isUser()&&(t.placeholderType===o("WAWebHandleMsgTypes.flow").PlaceholderType.E2E||t.placeholderType===o("WAWebHandleMsgTypes.flow").PlaceholderType.FANOUT)){var p,_=o("WAWebUserPrefsMultiDevice").getHaveProcessedCoexAdv()===!0?yield o("WAWebApiDeviceList").getDeviceRecord(a.author):null;if(a.placeholderCreatedWhenAccountIsHosted=(_==null?void 0:_.advAccountType)===o("WAWebProtobufsAdv.pb").ADVEncryptionType.HOSTED,(_==null?void 0:_.advAccountType)===o("WAWebProtobufsAdv.pb").ADVEncryptionType.HOSTED&&(a==null||(p=a.chat)==null?void 0:p.isUser())===!0){var f=yield o("WAWebBizCoexUtils").shouldCreateFallbackHostedAdvSystemMsgOnPlaceholder(o("WAWebWidFactory").asUserWidOrThrow(a==null?void 0:a.author).toString());f&&!o("WAWebBizCoexUtils").shouldDedupInitialHostedSystemMsg(o("WAWebWidFactory").asUserWidOrThrow(a==null?void 0:a.author))&&(m=[r("WANullthrows")(o("WAWebAdvHostedAccountTypeSystemMsg").genAdvAccountTypeInitialSysMsg(o("WAWebWidFactory").asUserWidOrThrow(a==null?void 0:a.author),o("WAWebWidFactory").asUserWidOrThrow(a==null?void 0:a.author)))])}}var g=[];if(t.type===o("WAWebMsgType").MSG_TYPE.CIPHERTEXT){var h=o("WAWebMsgProcessingApiUtils").generatePlaceholder(t);if(h==null||(h.realType!=null&&o("WALogger").DEV(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[message][addon] processPlaceholderMessage: msgId::",""])),a.externalId),a.type===o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.PEER_BROADCAST?(yield o("WAWebDBProcessMessage").storeMessages([h],h.id.remote),a.bclParticipants!=null&&a.edit!==o("WAWebAck").EDIT_ATTR.SENDER_REVOKE&&(g=yield o("WAWebMsgProcessingApiUtils").generateBclMsgs(h,a.bclParticipants))):g=[h],g.length===0))return;o("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&m.length>0&&a.placeholderCreatedWhenAccountIsHosted===!0&&(g=[].concat(m,g))}else g=[o("WAWebMsgProcessingApiUtils").genDebugPlaceholderMsg(a,t.nackReason)];var y=g;if(y.length===0)return;if(t.type===o("WAWebMsgType").MSG_TYPE.CIPHERTEXT){if(i.isUser()){var C=y[0],b=o("WAWebMessageDestinationChat").determineDestinationChatForIncomingMessage({chat:i,msg:C,msgInfo:a});yield o("WAWebCheckChatExistsOrCreate").checkChatExistsOrCreate({destinationChat:b,msgMeta:t.msgMeta,options:{firstIncomingMsg:C},chatOriginType:"createChatOnNewMsg"})}}else t.type;var v=o("WAWebMessageProcessorCache").messageProcessorCache.addMessages(y.map(function(e){return{msg:e}}),!l).then(function(){o("WALogger").DEV(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[unify][message] processing placeholders in cache completed"]))),o("WAWebWamWorkerOfflineProcessReporter").WorkerOfflineResumeReporter.updateProcessedMessageCount()});o("WAWebCmd").Cmd.isMainStreamReadyMd&&(o("WAWebCmd").Cmd.isOfflineDeliveryEnd&&(yield v),yield(d||(d=n("Promise"))).all(y.map((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.kind!==o("WAWebMsgType").MsgKind.PlaceholderAddon&&(!i.isStatus()||o("WAWebCurrentUser").isEmployee());if(t){var n=e.id.remote;yield o("WAWebBackendApi").frontendSendAndReceive("updateMessageUI",{chatId:n,msg:e})}});return function(t){return e.apply(this,arguments)}})())))}catch(e){o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["processPlaceholderMsg: msgId::",", failed with error: ",""])),a.externalId,e).tags("messaging").sendLogs("handle_msg: error storing/processing single message")}}),p.apply(this,arguments)}l.processPlaceholderMessage=m}),98);
__d("WAWebGetPrivacyModeWhenSent",["WAWebApiVerifiedBusinessName","WAWebHandleMsgTypes.flow","WAWebPrivacyModeSystemMsg","WAWebRuntimeEnvironmentUtils","WAWebUserPrefsMeUser","WAWebWorkerSafeBackendApi","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(e,t){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){if(e.type===o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.CHAT){if(!o("WAWebUserPrefsMeUser").isMeAccount(e.author))return t.privacyMode;var n=t.privacyMode,r=o("WAWebRuntimeEnvironmentUtils").isWorker()?yield o("WAWebApiVerifiedBusinessName").getPrivacyMode(e.chat):yield o("WAWebWorkerSafeBackendApi").workerSafeSendAndReceive("getPrivacyMode",{id:e.chat});return o("WAWebPrivacyModeSystemMsg").getLatestPrivacyMode(r,n)}}),s.apply(this,arguments)}l.getPrivacyModeWhenSent=e}),98);
__d("WAWebHandleBizBotMsgs",["Promise","WALogger","WAWebBotSystemMsg","WAWebBotTypes","WAWebModelStorageUtils","WAWebRuntimeEnvironmentUtils","WAWebSchemaChat","WAWebWidFactory","WAWebWorkerSafeBackendApi","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s;function u(e){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var r=new Map;t.forEach(function(e){var t=e.from.toJid();t!=null&&!r.has(t)&&e.bizBotType&&r.set(t,e.bizBotType)});var a=Array.from(r.keys()),i=yield d(a),l=[],u=[];for(var c of r.entries()){var m,p=c[0],_=c[1],f=(m=i.get(p))==null?void 0:m.bizBotSystemMsgType;_===o("WAWebBotTypes").BizBotType.BIZ_1P&&f!==o("WAWebBotTypes").BizBotType.BIZ_1P?(l.push(o("WAWebBotSystemMsg").genBizBot1pDisclosureMessage(o("WAWebWidFactory").createWid(p))),u.push({id:p,bizBotSystemMsgType:o("WAWebBotTypes").BizBotType.BIZ_1P})):_===o("WAWebBotTypes").BizBotType.BIZ_3P&&f!==o("WAWebBotTypes").BizBotType.BIZ_3P&&(l.push(o("WAWebBotSystemMsg").genBizBot3pDisclosureMessage(o("WAWebWidFactory").createWid(p))),u.push({id:p,bizBotSystemMsgType:o("WAWebBotTypes").BizBotType.BIZ_3P}))}return l.length?(o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["handleBizBotMsgs: bulkCreateOrMerge"]))).tags("missing-lid"),yield o("WAWebModelStorageUtils").getStorage().lock(["chat"],(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e[0];yield(s||(s=n("Promise"))).all([t.bulkCreateOrMerge(u)])});return function(t){return e.apply(this,arguments)}})()),l):[]}),c.apply(this,arguments)}function d(e){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){if(!o("WAWebRuntimeEnvironmentUtils").isWorker())return o("WAWebWorkerSafeBackendApi").workerSafeSendAndReceive("getBizBotData",{chatIds:e.map(o("WAWebWidFactory").createWid)});var t=new Map,n=yield o("WAWebSchemaChat").getChatTable().bulkGet(e);return n.map(function(e){e&&t.set(e.id,{bizBotSystemMsgType:e.bizBotSystemMsgType})}),t}),m.apply(this,arguments)}l.handleBizBotMsgs=u}),98);
__d("WAWebHandlePrivacyModeChange",["WALogger","WAWebApiVerifiedBusinessName","WAWebBusinessProfileTypes","WAWebCheckChatExistsOrCreate","WAWebHandlePrivacyModeUpdateMsgAction","WAWebMessageDestinationChat","WAWebMiscGatingUtils","WAWebPrivacyModeSystemMsg","WAWebRuntimeEnvironmentUtils","WAWebWorkerSafeBackendApi","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e;function s(e){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=t.msgs,r=t.chatWid,a=t.bizInfo,i=t.msgMeta,l=t.msgInfo,s=n[0],u=o("WAWebMessageDestinationChat").determineDestinationChatForIncomingMessage({chat:r,msg:s,msgInfo:l}),d=u.chatId,m=yield c(d),p=o("WAWebPrivacyModeSystemMsg").getLatestPrivacyMode(a.privacyMode,m.privacyMode),_=yield o("WAWebCheckChatExistsOrCreate").checkChatExistsOrCreate({destinationChat:u,msgMeta:i,options:{firstIncomingMsg:s,nextPrivacyMode:p},chatOriginType:"createChatOnNewMsg"}),f=_!==!0||o("WAWebMiscGatingUtils").queryVerifiedNameWhenMsgDiffers()&&m.verifiedLevel!==o("WAWebBusinessProfileTypes").convertLevel(a.verifiedLevel);try{return _&&p!=null&&(yield o("WAWebHandlePrivacyModeUpdateMsgAction").handlePrivacyModeTransition(d,p,{shouldRunMATonWid:!1})),{shouldQueryContactInfo:f,latestPrivacyMode:p}}catch(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["handlePrivacyModeChange for ",", failed with error: ",""])),d.toLogString(),t).tags("messaging","non-sad").sendLogs("handlePrivacyModeChange failed",{sampling:.01})}}),u.apply(this,arguments)}function c(e){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){if(!o("WAWebRuntimeEnvironmentUtils").isWorker())return o("WAWebWorkerSafeBackendApi").workerSafeSendAndReceive("getChatPrivacyInfoOnNewMsg",{chatId:e});var t=yield o("WAWebApiVerifiedBusinessName").getVerifiedBusinessNameRecordLidAware(e);return{privacyMode:(t==null?void 0:t.privacyMode)!=null?o("WAWebApiVerifiedBusinessName").convertPrivacyModeFromStorageType(t.privacyMode):null,verifiedLevel:o("WAWebBusinessProfileTypes").convertLevel(t==null?void 0:t.level)}}),d.apply(this,arguments)}l.handlePrivacyModeChangeAndCreateChat=s}),98);
__d("WAWebMaybeUpdateMessageThreadDetails",["WAWebBotUtils","WAWebBuildAiThreadUpdateHelper","WAWebThreadMsgUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield o("WAWebBuildAiThreadUpdateHelper").buildAiThreadUpdateHelpers(e);if(t==null)return e;var n=t.targetMsgThreadMap,r=t.defaultThreadAttributes;return e.map(function(e){var t;if(!o("WAWebBotUtils").isMetaAiBot(e.id.remote)||o("WAWebThreadMsgUtils").msgHasAiThread(e))return e;var a=o("WAWebBotUtils").getBotResponseTargetMsgKey(e),i=a!=null?n.get(a.toString()):null,l=i!=null?i:r,s=l.threadId,u=l.aiThreadInfo,c=(t=e.threadIds)!=null?t:[];return babelHelpers.extends({},e,{threadIds:[].concat(c,[s]),aiThreadInfo:u})})}),s.apply(this,arguments)}l.maybeUpdateMessageThreadDetails=e}),98);
__d("WAWebDBOrphanDbSerialization",["WAWebDBMessageSerialization","WAWebWidFactory"],(function(t,n,r,o,a,i,l){function e(e){return babelHelpers.extends({},e,{sender:e.sender==null?null:o("WAWebWidFactory").createUserWidOrThrow(e.sender),parsedMsgPayload:o("WAWebDBMessageSerialization").messageFromDbRow(e.parsedMsgPayload)})}l.orphanFromDbRow=e}),98);
__d("WAWebDBGetByParentMsgKey",["WAWebDBOrphanDbSerialization","WAWebSchemaMessageOrphans"],(function(t,n,r,o,a,i,l){function e(e){return s([e])}function s(e){return o("WAWebSchemaMessageOrphans").getMessageOrphanTable().anyOf(["parentMsgKey"],e.map(String)).then(function(e){return e.filter(Boolean).map(o("WAWebDBOrphanDbSerialization").orphanFromDbRow)})}l.getMessageOrphansByParentMsgKey=e,l.bulkGetMessageOrphansByParentMsgKey=s}),98);
__d("WAWebDBMapOrphansToProviders",["WAWebDBAddOnProviders"],(function(t,n,r,o,a,i,l){function e(e){var t=new Map;for(var n of e){var r,a=o("WAWebDBAddOnProviders").getProviderForAddOnType(n.type);if(a){var i=(r=t.get(a))!=null?r:[];i.push(n),t.set(a,i)}}return t}l.mapOrphansToProviders=e}),98);
__d("WAWebDBProcessOrphansForNewMsg",["Promise","WALogger","WAWebAddonProcessMsgsUtils","WAWebDBGetByParentMsgKey","WAWebDBMapOrphansToProviders","WAWebDBProcessReactionsMsgs","WAWebLidMigrationUtils","WAWebSchemaMessageOrphans","WAWebStoreMsgs","asyncToGeneratorRuntime","lodash"],(function(t,n,r,o,a,i,l){var e,s;function u(e){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var a=o("WAWebLidMigrationUtils").getAlternateMsgKey(t.id),i=yield o("WAWebDBGetByParentMsgKey").bulkGetMessageOrphansByParentMsgKey([t.id,a].filter(Boolean));i.length&&o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["processOrphansForNewMsg: found orphans"]))).devConsole({orphans:i});var l=o("WAWebAddonProcessMsgsUtils").sortAddonOrphans(i),u=l.unifiedAddons,c=l.otherOrphans,d=l.legacyReactionAddons,m=yield o("WAWebDBMapOrphansToProviders").mapOrphansToProviders(c),p=[o("WAWebStoreMsgs").storeMsgs(u),o("WAWebDBProcessReactionsMsgs").processReactionMsgs(d)];for(var _ of m.entries()){var f=_[0],g=_[1];p.push(f.processOrphansForNewMsg(t,g))}yield(s||(s=n("Promise"))).all(p);var h=r("lodash").flatten(Array.from(m.values())).map(function(e){return e.msgKey});h=h.concat(u.map(function(e){return e.id.toString()})),d.length&&(h=h.concat(d.map(function(e){return e.id.toString()}))),yield o("WAWebSchemaMessageOrphans").getMessageOrphanTable().bulkRemove(h)}),c.apply(this,arguments)}l.processOrphansForNewMsg=u}),98);
__d("WAWebHandleOrphansForNewMsg",["Promise","WAWebDBAssociatedMsgsAttachDetachAPI","WAWebDBProcessOrphansForNewMsg","WAWebMessageAssociationGatingUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e;function s(e){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var r=[o("WAWebDBProcessOrphansForNewMsg").processOrphansForNewMsg(t)];o("WAWebMessageAssociationGatingUtils").isMessageAssociationInfraEnabled()&&r.push(o("WAWebDBAssociatedMsgsAttachDetachAPI").processOrphansFromAssociationsTableForNewMsg([t])),yield(e||(e=n("Promise"))).all(r)}),u.apply(this,arguments)}l.handleOrphansForNewMsg=s}),98);
__d("WAWebMessageProcessDBPipeline",["Promise","WALogger","WAWebHandleOrphansForNewMsg","WAWebMessageProcessorCache","WAWebWamWorkerOfflineProcessReporter","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u,c;function d(t,r){return o("WAWebMessageProcessorCache").messageProcessorCache.addMessages(t.map(function(e){return{msg:e}}),r).then(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[unify][message] processing messages in cache completed"]))),o("WAWebWamWorkerOfflineProcessReporter").WorkerOfflineResumeReporter.updateProcessedMessageCount(),r&&(o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["process msgs orphans ",""])),t.length),yield(c||(c=n("Promise"))).all(t.map(function(e){return o("WAWebHandleOrphansForNewMsg").handleOrphansForNewMsg(e)})))})).catch(function(e){o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["processRenderableMessages write to DB from cache, failed with error: ",""])),e).tags("messaging").sendLogs("processRenderableMessages write to DB from cache, failed")})}l.processMsgDataDBPipeline=d}),98);
__d("WAWebDBChatEphemeralExemptionData",["WALogger","WAWebChatEphemeralExemptionCache","WAWebDBUpdateChatTable","WAWebSchemaChat","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e;function s(e){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.toString();if(r("WAWebChatEphemeralExemptionCache").has(t))return r("WAWebChatEphemeralExemptionCache").get(t);var n=yield o("WAWebSchemaChat").getChatTable().get(e.toString(),!1),a=n==null?null:{id:t,ephemeralDuration:n==null?void 0:n.ephemeralDuration,ephemeralDisplayedExemptions:n==null?void 0:n.ephemeralDisplayedExemptions};return r("WAWebChatEphemeralExemptionCache").add(t,a),a}),u.apply(this,arguments)}function c(t,n,a){var i=t.toString();r("WAWebChatEphemeralExemptionCache").add(i,{id:i,ephemeralDuration:n,ephemeralDisplayedExemptions:a}),o("WAWebDBUpdateChatTable").updateChatTable(t,{ephemeralDisplayedExemptions:a}).catch(function(){o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Failed to update chat.ephemeralDisplayedExemptions: ",""])),o("WAWebDBUpdateChatTable").updateChatTable)})}function d(e,t){var n,o=e.toString(),a=r("WAWebChatEphemeralExemptionCache").get(o),i={id:o,ephemeralDuration:t,ephemeralDisplayedExemptions:(n=a==null?void 0:a.ephemeralDisplayedExemptions)!=null?n:null};r("WAWebChatEphemeralExemptionCache").add(o,i)}l.getChatEphemeralExemptionDataFromChat=s,l.persistsEphemeralDisplayedExemptions=c,l.updateEphemeralDurationCache=d}),98);
__d("WAWebDBEphemeralDisplayedExemptions",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({UNSET:0,ORDERS_AND_PAYMENTS:1});i.EphemeralExemptionType=e}),66);
__d("WAWebOrderEphemeralExemptionUtil",["WAWebBizGatingUtils","WAWebDBEphemeralDisplayedExemptions","WAWebInteractiveMessageType","WAWebInteractiveMessagesNativeFlowName","WAWebMsgType"],(function(t,n,r,o,a,i,l){function e(e,t,n){return o("WAWebBizGatingUtils").inOrderMessagesEphemeralExceptionEnabled()&&e===o("WAWebMsgType").MSG_TYPE.INTERACTIVE&&t===r("WAWebInteractiveMessageType").NATIVE_FLOW&&(n===r("WAWebInteractiveMessagesNativeFlowName").ORDER_DETAILS||n===r("WAWebInteractiveMessagesNativeFlowName").ORDER_STATUS||n===r("WAWebInteractiveMessagesNativeFlowName").PAYMENT_METHOD||n===r("WAWebInteractiveMessagesNativeFlowName").PAYMENT_STATUS||n===r("WAWebInteractiveMessagesNativeFlowName").PAYMENT_INFO)}function s(e){var t=e.id,n=e.ephemeralDuration,r=e.ephemeralDisplayedExemptions;return t!=null&&n!==0&&n!=null&&o("WAWebDBEphemeralDisplayedExemptions").EphemeralExemptionType.ORDERS_AND_PAYMENTS!==r}function u(e){var t=e.id,n=e.ephemeralDuration,r=e.ephemeralDisplayedExemptions;return t!=null&&(n===0||n==null)&&o("WAWebDBEphemeralDisplayedExemptions").EphemeralExemptionType.ORDERS_AND_PAYMENTS===r}l.isMessageTypeExemptedFromDisappearing=e,l.shouldShowOrderExemptionSystemMessage=s,l.shouldUnsetChatEphemeralDisplayedExemption=u}),98);
__d("WAWebOrderSystemMsg",["WAWebContactSystemMsg","WAWebMsgType"],(function(t,n,r,o,a,i,l){function e(e){return o("WAWebContactSystemMsg").genNotificationMsg(e,{type:"notification_template",kind:o("WAWebMsgType").MsgKind.NotificationTemplate,subtype:"order_ephemeral_exemption",templateParams:[]})}l.getOrderEphemeralExemptionSystemMsg=e}),98);
__d("WAWebPreProcessOrderEphemeralExemption",["WAWebBizGatingUtils","WAWebDBChatEphemeralExemptionData","WAWebDBEphemeralDisplayedExemptions","WAWebOrderEphemeralExemptionUtil","WAWebOrderSystemMsg","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(e){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,n;if(!o("WAWebBizGatingUtils").inOrderMessagesEphemeralExceptionEnabled())return e;var r=e.findIndex(function(e){var t=e.nativeFlowName,n=e.interactiveType,r=e.type;return o("WAWebOrderEphemeralExemptionUtil").isMessageTypeExemptedFromDisappearing(r,n,t)});if(r===-1||((t=e.at(r))==null||(t=t.id)==null?void 0:t.remote)==null)return e;var a=(n=e.at(r))==null||(n=n.id)==null?void 0:n.remote;if(a==null)return e;var i=yield o("WAWebDBChatEphemeralExemptionData").getChatEphemeralExemptionDataFromChat(a);if(i!=null&&o("WAWebOrderEphemeralExemptionUtil").shouldShowOrderExemptionSystemMessage(i)){var l;o("WAWebDBChatEphemeralExemptionData").persistsEphemeralDisplayedExemptions(a,(l=i.ephemeralDuration)!=null?l:0,o("WAWebDBEphemeralDisplayedExemptions").EphemeralExemptionType.ORDERS_AND_PAYMENTS);var s=e.slice(0,r),u=o("WAWebOrderSystemMsg").getOrderEphemeralExemptionSystemMsg(a),c=e.slice(r,e.length);return[].concat(s,[u],c)}else if(i!=null&&o("WAWebOrderEphemeralExemptionUtil").shouldUnsetChatEphemeralDisplayedExemption(i)){var d;o("WAWebDBChatEphemeralExemptionData").persistsEphemeralDisplayedExemptions(a,(d=i.ephemeralDuration)!=null?d:0,o("WAWebDBEphemeralDisplayedExemptions").EphemeralExemptionType.UNSET)}return e}),s.apply(this,arguments)}l.preProcessOrderEphemeralExemption=e}),98);
__d("WAWebStatusContactUtils",["WALogger","WAWebBackendApi","WAWebCmd","WAWebLidAwareContactsDB","WAWebWidFactory","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e;function s(){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["UserPrefsStatus: staring to getStatusContacts"]))),o("WAWebCmd").Cmd.isMainStreamReadyMd){var t=yield o("WAWebBackendApi").frontendSendAndReceive("getFilteredContacts",{showMe:!1,showWithoutName:!1});return t.map(function(e){return e.id})}var n=yield r("WAWebLidAwareContactsDB").equals(["isAddressBookContact"],1);return n.map(function(e){return o("WAWebWidFactory").createWid(e.id)}).filter(function(e){return!e.isLid()})}),u.apply(this,arguments)}l.getStatusContacts=s}),98);
__d("WAWebUserPrefsStatusType",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({Contact:"contact",AllowList:"allow-list",DenyList:"deny-list"});i.StatusPrivacySettingType=e}),66);
__d("WAWebUserPrefsStatus",["WALogger","WAWebApiContact","WAWebModelStorageUtils","WAWebSendMsgCommonApi","WAWebStatusContactUtils","WAWebUserPrefsIndexedDBStorage","WAWebUserPrefsKeys","WAWebUserPrefsMeUser","WAWebUserPrefsStatusType","WAWebWidFactory","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s;function u(e){var t=e.setting,n=e.list;if(t===o("WAWebUserPrefsStatusType").StatusPrivacySettingType.Contact)return o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(o("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.STATUS_PRIVACY_SETTING,t);var r=c({setting:t,allowList:t===o("WAWebUserPrefsStatusType").StatusPrivacySettingType.AllowList?n:void 0,denyList:t===o("WAWebUserPrefsStatusType").StatusPrivacySettingType.DenyList?n:void 0});return o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.bulkSetItemsToIndexedDB(r)}function c(e){var t=[],n=e.setting,r=e.allowList,a=e.denyList;return n!=null&&t.push({key:o("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.STATUS_PRIVACY_SETTING,value:n}),r!=null&&t.push({key:o("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.STATUS_ALLOW_LIST,value:Array.from(new Set(r.map(function(e){return String(o("WAWebWidFactory").asUserWidOrThrow(e))})))}),a!=null&&t.push({key:o("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.STATUS_DENY_LIST,value:Array.from(new Set(a.map(function(e){return String(o("WAWebWidFactory").asUserWidOrThrow(e))})))}),t}function d(){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){return o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(o("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.STATUS_PRIVACY_SETTING)||o("WAWebUserPrefsStatusType").StatusPrivacySettingType.Contact}),m.apply(this,arguments)}function p(){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["UserPrefsStatus: staring to getStatusAllowList"])));var t=o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(o("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.STATUS_ALLOW_LIST);return t!=null?t.map(o("WAWebWidFactory").createWid):[]}),_.apply(this,arguments)}function f(){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["UserPrefsStatus: staring to getStatusDenyList"])));var e=o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(o("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.STATUS_DENY_LIST);return e!=null?e.map(o("WAWebWidFactory").createWid):[]}),g.apply(this,arguments)}function h(){return y.apply(this,arguments)}function y(){return y=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){return o("WAWebModelStorageUtils").getStorage().lock(["user-prefs","contact"],n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield d(),t;switch(e){case o("WAWebUserPrefsStatusType").StatusPrivacySettingType.AllowList:return{setting:o("WAWebUserPrefsStatusType").StatusPrivacySettingType.AllowList,list:yield p()};case o("WAWebUserPrefsStatusType").StatusPrivacySettingType.DenyList:return t=new Set((yield f()).map(String)),{setting:o("WAWebUserPrefsStatusType").StatusPrivacySettingType.DenyList,list:(yield o("WAWebStatusContactUtils").getStatusContacts()).filter(function(e){var n=e.isUser()?o("WAWebApiContact").getAlternateUserWid(o("WAWebWidFactory").asUserWidOrThrow(e)):null,r=t.has(e.toString()),a=n==null?!1:t.has(n.toString());return!r&&!a})};case o("WAWebUserPrefsStatusType").StatusPrivacySettingType.Contact:return{setting:o("WAWebUserPrefsStatusType").StatusPrivacySettingType.Contact,list:yield o("WAWebStatusContactUtils").getStatusContacts()}}}))}),y.apply(this,arguments)}function C(){return b.apply(this,arguments)}function b(){return b=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){return o("WAWebModelStorageUtils").getStorage().lock(["user-prefs"],n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield d(),t=yield p(),n=yield f();return{setting:e,allowList:t,denyList:n}}))}),b.apply(this,arguments)}function v(){return S.apply(this,arguments)}function S(){return S=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(o("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.STATUS_SENDER_KEY);return e||{rotateKey:!1,senderKey:new Set}}),S.apply(this,arguments)}function R(e){return L.apply(this,arguments)}function L(){return L=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){return o("WAWebModelStorageUtils").getStorage().lock(["user-prefs"],n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=yield v(),n=t.rotateKey?new Set:t.senderKey;e.forEach(function(e){n.add(String(e))}),yield o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(o("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.STATUS_SENDER_KEY,{rotateKey:!1,senderKey:n})}))}),L.apply(this,arguments)}function E(e){return k.apply(this,arguments)}function k(){return k=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){return o("WAWebModelStorageUtils").getStorage().lock(["user-prefs"],n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=yield v();if(!t.rotateKey){var n=e.some(function(e){return t.senderKey.has(String(e))});n&&(yield o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(o("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.STATUS_SENDER_KEY,{rotateKey:!0,senderKey:new Set}))}}))}),k.apply(this,arguments)}function I(e){return T.apply(this,arguments)}function T(){return T=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){return o("WAWebModelStorageUtils").getStorage().lock(["user-prefs"],n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=yield v();e.forEach(function(e){if(t.senderKey.delete(String(e)),e.isUser()){var n=o("WAWebApiContact").getAlternateUserWid(o("WAWebWidFactory").asUserWidOrThrow(e));n!=null&&t.senderKey.delete(String(n))}}),yield o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(o("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.STATUS_SENDER_KEY,{rotateKey:t.rotateKey,senderKey:t.senderKey})}))}),T.apply(this,arguments)}function D(e){return x.apply(this,arguments)}function x(){return x=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield v();if(t.rotateKey||t.senderKey.size===0)return{rotateKey:t.rotateKey,skDistribList:e,participantList:[]};var n=[],r=[],a=0;return e.forEach(function(e){t.senderKey.has(String(e))?(o("WAWebSendMsgCommonApi").isPrimaryDevice(e)&&n.push(e),a++):o("WAWebUserPrefsMeUser").isMeDevice(e)||r.push(e)}),a<t.senderKey.size?(yield o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.set(o("WAWebUserPrefsKeys").BACKEND_ONLY_KEYS.STATUS_SENDER_KEY,{rotateKey:!0,senderKey:new Set}),{rotateKey:!0,skDistribList:e,participantList:[]}):{rotateKey:t.rotateKey,skDistribList:r,participantList:n}}),x.apply(this,arguments)}var $={setStatusPrivacyConfig:u,calculateStatusPrivacyUpdateEntries:c,getStatusPrivacySetting:d,getStatusAllowList:p,getStatusDenyList:f,getStatusSenderKeyMap:v,getStatusSkDistribList:D,markStatusHasSenderKey:R,getStatusContacts:o("WAWebStatusContactUtils").getStatusContacts,getStatusList:h,getStatusPrivacySettingConfig:C,markForgetStatusSenderKey:I,markStatusSenderKeyRotate:E};l.default=$}),98);
__d("WAWebStatusDBMessageInfo",["Promise","WABatcher","WALogger","WAPromiseMap","WAWebApiMessageInfoStore","WAWebLidStatusMigrationUtils","WAWebUserPrefsStatus","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m={delayMs:5e3},p=o("WABatcher").createSimpleBatcher(m,function(e){return _(e)});function _(e){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["updatePeerStatusReceiptInfoInBatch: staring to process "," records"])),t.length);var a,i,l,c,m=yield o("WAPromiseMap").promiseMap(t,(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.msgKey,o=e.setting;switch(o){case"denylist":return a==null&&(a=r("WAWebUserPrefsStatus").getStatusDenyList().then(function(e){return new Set(e.map(String))})),i==null&&(i=r("WAWebUserPrefsStatus").getStatusContacts()),{msgKey:t,receiverIds:yield(d||(d=n("Promise"))).all([i,a]).then(function(e){var t=e[0],n=e[1];return t.filter(function(e){return!n.has(e.toString())})})};case"allowlist":return l==null&&(l=r("WAWebUserPrefsStatus").getStatusAllowList()),{msgKey:t,receiverIds:yield l};case"contacts":return i==null&&(i=r("WAWebUserPrefsStatus").getStatusContacts()),{msgKey:t,receiverIds:yield i};default:return c==null&&(c=r("WAWebUserPrefsStatus").getStatusList()),{msgKey:t,receiverIds:(yield c).list}}});return function(t){return e.apply(this,arguments)}})()),p=[];return m.forEach(function(e){e.receiverIds.forEach(function(t){p.push({msgKey:e.msgKey,receiverId:o("WAWebLidStatusMigrationUtils").matWidConvert(t)})})}),o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["updatePeerStatusReceiptInfoInBatch: staring to update "," records"])),p.length),yield o("WAWebApiMessageInfoStore").createOrMergeReceiptRecords(p),o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["updatePeerStatusReceiptInfoInBatch: complete to update "," records"])),p.length),t.map(function(){})}),f.apply(this,arguments)}function g(e,t,n){return h.apply(this,arguments)}function h(){return h=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["updatePeerStatusReceiptInfo: adding ",", setting ",", offline ",""])),e.id,n,t);var r=p.accept({msgKey:e,setting:n});return t||p.runActiveBatch(),r}),h.apply(this,arguments)}var y={updatePeerStatusReceiptInfo:g};l.default=y}),98);
__d("WAWebMessageProcessRenderable",["Promise","WALogger","WAWebApiFilterAndReplaceMessages","WAWebBotGating","WAWebBotSystemMsg","WAWebCmd","WAWebCurrentUser","WAWebGetPrivacyModeWhenSent","WAWebHandleBizBotMsgs","WAWebHandleMsgTypes.flow","WAWebHandleMsgValidate","WAWebHandlePrivacyModeChange","WAWebHandleSingleMsg","WAWebMaybeUpdateMessageThreadDetails","WAWebMessageAssociation.flow","WAWebMessagePostprocessRenderable","WAWebMessageProcessDBPipeline","WAWebMessagingGatingUtils","WAWebMsgGetters","WAWebMsgKey","WAWebMsgSyncConfiguratedTunnel","WAWebMsmsgMsgSecretCache","WAWebOfflineHandler","WAWebOfflineResumeMsgProcessReporter","WAWebOfflineResumeTypes.flow","WAWebPreProcessOrderEphemeralExemption","WAWebSagaSystemMsg","WAWebStatusDBMessageInfo","WAWebWamEnumPlaceholderPopulationType","WAWebWid","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u,c,d;function m(t,n){var a=r("WAWebMsgKey").from({fromMe:t.fromMe,id:t.id,participant:t.participant,remote:n});return o("WAWebCurrentUser").isEmployee()&&o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["processRenderableMessagesForLid: override msgKey: "," --> ",""])),t.toString(),a.toString()),a}function p(e,t,n){return e==null||!t.isRegularUser()?n:n.map(function(e){return o("WAWebMessageAssociation.flow").isAssociatedMsg(e)?babelHelpers.extends({},e,{parentMsgKey:m(e.parentMsgKey,t)}):e})}function _(e,t,n,r){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,a){var i=p(t.preMatChat,t.chat,e),l=yield o("WAWebGetPrivacyModeWhenSent").getPrivacyModeWhenSent(t,n),s=y(a);s!=null&&(i=i.map(function(e){return babelHelpers.extends({},e,{placeholderPopulationType:s})})),i=l==null?i:i.map(function(e){return babelHelpers.extends({},e,{privacyModeWhenSent:l})});var u=t.addressingMode;return i=u==null?i:i.map(function(e){return babelHelpers.extends({},e,{groupAddressingMode:u})}),i=yield o("WAWebPreProcessOrderEphemeralExemption").preProcessOrderEphemeralExemption(i),i=i.map(function(e){var t,n=e.messageSecret!=null?(t=e.mentionedJidList)==null?void 0:t.find(function(e){return e&&r("WAWebWid").isWid(e)&&e.isBot()}):null;return n!=null?babelHelpers.extends({},e,{invokedBotWid:n}):e}),i=yield o("WAWebMaybeUpdateMessageThreadDetails").maybeUpdateMessageThreadDetails(i),o("WAWebApiFilterAndReplaceMessages").filterAndReplaceMessages(i)}),f.apply(this,arguments)}function g(e,t,n,r,o,a,i){return h.apply(this,arguments)}function h(){return h=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,a,i,l,m,p){if(e.length===0){o("WALogger").DEV(s||(s=babelHelpers.taggedTemplateLiteralLoose(["processRenderableMessages: skip for empty msg list"])));return}try{var f,g,h,y=o("WAWebOfflineResumeMsgProcessReporter").msgProcessReporter.startMarker(o("WAWebOfflineResumeMsgProcessReporter").msgProcessReporter.stage.PreProcessing),C=t.chat,b=t.offline!=null&&!p,v="online";p?v="reparsing":b&&(v="offline"),o("WALogger").DEV(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[unify][message] processing "," "," message(s)"])),e.length,v);var S=yield _(e,t,i,m),R=S.newMsgs;if(y==null||y(),o("WAWebMessagingGatingUtils").isWebReportingTokenDelayProcessingEnabled()){var L=o("WAWebOfflineResumeMsgProcessReporter").msgProcessReporter.startMarker(o("WAWebOfflineResumeMsgProcessReporter").msgProcessReporter.stage.ProcessReportingTokenInfo);yield o("WAWebHandleMsgValidate").validateAndProcessReportingTokenInfo({renderableMsgs:R}),L==null||L()}var E=o("WAWebOfflineResumeMsgProcessReporter").msgProcessReporter.startMarker(o("WAWebOfflineResumeMsgProcessReporter").msgProcessReporter.stage.Processing);R.forEach(function(e){e.id.fromMe&&o("WAWebMsgGetters").getIsStatus(e)&&r("WAWebStatusDBMessageInfo").updatePeerStatusReceiptInfo(e.id,b,t.statusSetting)});var k=null;if(R.forEach(function(e){var t,n,r,a=e.messageSecret,i=!!(a&&((t=e.id.remote)!=null&&t.isBot())),l=(n=(r=e.invokedBotWid)==null?void 0:r.isBot())!=null?n:!1;a&&(i||l)&&e.isForwarded!==!0&&(l&&(k=e),o("WAWebMsmsgMsgSecretCache").msmsgMsgSecretCache.addMsmsgMsgSecretToCache(e.id.toString(),a))}),k!=null){var I=yield o("WAWebBotSystemMsg").createSysMsgForIncomingBotInvoke(k);I&&R.unshift(I)}if(o("WAWebBotGating").isBotEnabled()){var T=R.filter(function(e){return!!e.bizBotType&&!o("WAWebMsgGetters").getIsCAPISupport(e)});if(T.length){var D=yield o("WAWebHandleBizBotMsgs").handleBizBotMsgs(T);R.unshift.apply(R,D)}}var x;if(C.isUser()&&(x=yield o("WAWebHandlePrivacyModeChange").handlePrivacyModeChangeAndCreateChat({msgs:R,chatWid:C,bizInfo:i,msgMeta:l,msgInfo:t})),r("WAWebWid").isCAPISupportAccount(C)){var $=R.some(function(e){return e.shouldShowSupportAISystemMessage===!0});$===!0&&(yield o("WAWebHandleSingleMsg").handleSingleMsg({chatId:C,newMsg:o("WAWebSagaSystemMsg").genSagaInitSystemMsg(C),handleSingleMsgOrigin:"supportSagaInit"}))}var P={msgInfo:t,messageOverwriteOption:m,msgs:R,isOffline:b,latestPrivacyMode:(f=x)==null?void 0:f.latestPrivacyMode,shouldQueryContactInfo:(g=(h=x)==null?void 0:h.shouldQueryContactInfo)!=null?g:!1},N=o("WAWebMessageProcessDBPipeline").processMsgDataDBPipeline(R,!b);if(o("WAWebCmd").Cmd.isMainStreamReadyMd||p){E==null||E(),o("WAWebCmd").Cmd.isOfflineDeliveryEnd&&(yield N);var M=!o("WAWebCmd").Cmd.isOfflineDeliveryEnd&&o("WAWebMsgSyncConfiguratedTunnel").msgSyncTunnel.isEnabled()?o("WAWebMsgSyncConfiguratedTunnel").msgSyncTunnel.accept(P):o("WAWebMessagePostprocessRenderable").postprocessRenderableMessages(P);if(b&&o("WAWebOfflineHandler").OfflineMessageHandler.getResumeType()===o("WAWebOfflineResumeTypes.flow").ResumeType.NonBlocking)return;yield M;return}}catch(e){o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["processRenderableMessage: msgId:",", failed with error: ",""])),t.externalId,e).tags("messaging").sendLogs("handle_msg: error storing/processing single message")}return(d||(d=n("Promise"))).resolve()}),h.apply(this,arguments)}function y(e){switch(e){case o("WAWebHandleMsgTypes.flow").MessageOverwriteOption.NO_OVERWRITE:case o("WAWebHandleMsgTypes.flow").MessageOverwriteOption.FUTURE_PROOF:case o("WAWebHandleMsgTypes.flow").MessageOverwriteOption.VOIP_CALL_LOG:return null;case o("WAWebHandleMsgTypes.flow").MessageOverwriteOption.RETRY:return o("WAWebWamEnumPlaceholderPopulationType").PLACEHOLDER_POPULATION_TYPE.RETRY;case o("WAWebHandleMsgTypes.flow").MessageOverwriteOption.PEER_RETRY:return o("WAWebWamEnumPlaceholderPopulationType").PLACEHOLDER_POPULATION_TYPE.PEER_MESSAGE}}l.overrideParentKeyForAssociations=p,l.processRenderableMessages=g}),98);
__d("WAWebParsedProtocolMsgType",[],(function(t,n,r,o,a,i){var e=Object.freeze({HISTORY:"history",APP_STATE_SYNC_KEY_SHARE:"appStateSyncKeyShare",APP_STATE_SYNC_KEY_REQUEST:"appStateSyncKeyRequest",PEER_DATA_OPERATION_REQUEST_RESPONSE_MESSAGE:"peerDataOperationRequestResponseMessage",PEER_DATA_OPERATION_REQUEST_MESSAGE:"peerDataOperationRequestMessage"});i.PARSED_PROTOCOL_MESSAGE_TYPE=e}),66);
__d("WAWebHandleMsgProcess",["Promise","WACryptoPkcs7","WALogger","WAWebABProps","WAWebAddonGatingUtils","WAWebAddonProcessMsgsUtils","WAWebApiDeferredMessagesStorage","WAWebBackendApi","WAWebBackendJobs.flow","WAWebBizCoexGatingUtils","WAWebCmd","WAWebCurrentUser","WAWebDBMsgUtils","WAWebGalaxyFlowsUtils","WAWebGetGroupAddressingMode","WAWebGetMessageCache","WAWebHandleCloudApiThreadControlNotification","WAWebHandleMsgError","WAWebHandleMsgProcessUtils","WAWebHandleMsgTypes.flow","WAWebHandleMsgValidate","WAWebHandlePushnameUpdate","WAWebLid1X1ThreadAccountMigrations","WAWebLogMissingGroupParticipantMappings","WAWebLogReceivedMessages","WAWebMessageProcessPlaceholder","WAWebMessageProcessRenderable","WAWebMessageProcessorCache","WAWebMessagingGatingUtils","WAWebMsgProcessingApiUtils","WAWebMsgType","WAWebOfflineResumeMsgProcessReporter","WAWebParsedProtocolMsgType","WAWebProtobufsE2E.pb","WAWebRuntimeEnvironmentUtils","WAWebSignal","WAWebUserPrefsMeUser","WAWebUserPrefsNotifications","WAWebVerifyProtobufMsgObjectKeys","WAWebWamEnumDsmError","WAWebWid","WAWebWidFactory","WAWebWorkerSafeBackendApi","asyncToGeneratorRuntime","cr:10197","decodeProtobuf","isStringNullOrEmpty"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g,h,y,C;function b(e){return v.apply(this,arguments)}function v(){return v=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.decrypted,a=e.info,i=e.paymentInfo,l=e.e2eInfo,s=e.bizInfo,u=e.hsmInfo,c=e.isPadded,d=c===void 0?!0:c,m=e.msgMeta,b=e.reparsing,v=b===void 0?!1:b,R=e.msgBotInfo,L=e.reportingTokenInfo,E=l.e2eType===o("WAWebBackendJobs.flow").CiphertextType.Msmsg?!1:d,k=E?o("WACryptoPkcs7").unpadPkcs7(new Uint8Array(t)):new Uint8Array(t),I=o("decodeProtobuf").decodeProtobuf(o("WAWebProtobufsE2E.pb").MessageSpec,k);o("WAWebVerifyProtobufMsgObjectKeys").verifyProtobufMessageObjectKeys(I);var T=o("WAWebMsgProcessingApiUtils").getFrom(a),$=l.retryCount>0&&o("WAWebMsgProcessingApiUtils").isRevokeInfo(a)||v,P=$?o("WAWebHandleMsgTypes.flow").MessageOverwriteOption.RETRY:o("WAWebHandleMsgTypes.flow").MessageOverwriteOption.NO_OVERWRITE;if(v){o("WALogger").LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Reparsing processDecryptedMessageProto: msgId::",", message decrypted:"])),a.externalId).tags("messaging").devConsole(I);var N=yield o("WAWebMsgProcessingApiUtils").parseMessage({info:a,ciphertextType:l.e2eType,msgProtobuf:I,paymentInfo:i,bizInfo:s,hsmInfo:u,hidePlaceholder:l.hideFail,processDecryptedProtoParams:e,msgBotInfo:R,meta:m,reportingTokenInfo:L,isMessageRetry:l.retryCount>0,isOffline:a.offline!=null,protobufBytes:k});if(N.renderableMsgs==null)o("WALogger").ERROR(_||(_=babelHelpers.taggedTemplateLiteralLoose(["parsed render able msgs not reparsed as expected"])));else{var M=N.renderableMsgs;o("WAWebHandleMsgValidate").renderableMessagesValidation({renderableMsgs:M,msgMeta:m,info:a,proto:I,bizInfo:s}),o("WAWebMessagingGatingUtils").isWebReportingTokenDelayProcessingEnabled()||(yield o("WAWebHandleMsgValidate").validateAndProcessReportingTokenInfo({renderableMsgs:M}));var w=S({renderableMsgs:M,reparsing:v,bizInfo:s,msgMeta:m,paymentInfo:i,info:a,messageOverwriteOption:P}),A=w.tasks,F=w.hasInactiveMsg;return yield(C||(C=n("Promise"))).all(A),o("WALogger").LOG(f||(f=babelHelpers.taggedTemplateLiteralLoose(["Reparsed processDecryptedMessageProto: msgId::",", message decrypted:"])),a.externalId).tags("messaging").devConsole(I),{hasInactiveMsg:F}}}var O=yield o("WAWebHandleMsgProcessUtils").preProcessMsg(a,I);if(o("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&((O==null?void 0:O.senderOrRecipientAccountTypeHosted)===!0&&(a.senderOrRecipientAccountTypeHosted=!0),(O==null?void 0:O.hostedBizEncMismatch)===!0&&(a.hostedBizEncStateMismatch=!0)),a.type===o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.PEER_BROADCAST&&l.retryCount>0){var B=yield o("WAWebDBMsgUtils").getMsgByMsgKey(o("WAWebMsgProcessingApiUtils").messageInfoToKey(a));(B==null?void 0:B.bclParticipants)!=null?a.bclParticipants=B.bclParticipants:(B==null?void 0:B.broadcastParticipants)!=null&&(a.bclParticipants=B.broadcastParticipants.map(function(e){return{wid:o("WAWebWidFactory").asUserWidOrThrow(e)}}))}var W=o("WAWebOfflineResumeMsgProcessReporter").msgProcessReporter.startMarker(o("WAWebOfflineResumeMsgProcessReporter").msgProcessReporter.stage.Parsing),q=yield o("WAWebMsgProcessingApiUtils").parseMessage({info:a,ciphertextType:l.e2eType,msgProtobuf:I,paymentInfo:i,bizInfo:s,hsmInfo:u,hidePlaceholder:l.hideFail,processDecryptedProtoParams:e,msgBotInfo:R,meta:m,reportingTokenInfo:L,isMessageRetry:l.retryCount>0,isOffline:a.offline!=null,protobufBytes:k});if(o("WAWebCurrentUser").isEmployee()&&o("WAWebABProps").getABPropConfigValue("wa_web_debug_color_code_retry_messages")){var U;(U=q.renderableMsgs)==null||U.forEach(function(e){l.retryCount>0&&(e.backgroundColor=16711680)})}W==null||W();var V=null;if(q.history?V=o("WAWebParsedProtocolMsgType").PARSED_PROTOCOL_MESSAGE_TYPE.HISTORY:q.appStateSyncKeyShare?V=o("WAWebParsedProtocolMsgType").PARSED_PROTOCOL_MESSAGE_TYPE.APP_STATE_SYNC_KEY_SHARE:q.appStateSyncKeyRequest?V=o("WAWebParsedProtocolMsgType").PARSED_PROTOCOL_MESSAGE_TYPE.APP_STATE_SYNC_KEY_REQUEST:q.peerDataOperationRequestResponseMessage?V=o("WAWebParsedProtocolMsgType").PARSED_PROTOCOL_MESSAGE_TYPE.PEER_DATA_OPERATION_REQUEST_RESPONSE_MESSAGE:q.peerDataOperationRequestMessage&&(V=o("WAWebParsedProtocolMsgType").PARSED_PROTOCOL_MESSAGE_TYPE.PEER_DATA_OPERATION_REQUEST_MESSAGE),o("WAWebRuntimeEnvironmentUtils").isWorker()&&V)yield r("WAWebApiDeferredMessagesStorage").updateDeferredMessages([{id:a.externalId,type:V,plaintext:k,info:a,paymentInfo:i,bizInfo:s}]);else if(q.history)o("WAWebWorkerSafeBackendApi").workerSafeSendAndReceive("handleHistorySyncNotification",{historySyncMetaData:q.history,from:T,externalId:a.externalId});else if(q.appStateSyncKeyShare)yield o("WAWebWorkerSafeBackendApi").workerSafeSendAndReceive("handleAppStateSyncKeyShare",{keyShare:q.appStateSyncKeyShare,from:T});else if(q.appStateSyncKeyRequest)o("WAWebWorkerSafeBackendApi").workerSafeSendAndReceive("handleAppStateSyncKeyRequest",{keyRequest:q.appStateSyncKeyRequest,from:T});else if(q.peerDataOperationRequestResponseMessage)o("WAWebWorkerSafeBackendApi").workerSafeSendAndReceive("handlePeerDataOperationRequestResponse",{stanzaId:a.externalId,response:q.peerDataOperationRequestResponseMessage});else if(q.peerDataOperationRequestMessage)o("WAWebWorkerSafeBackendApi").workerSafeSendAndReceive("handlePeerDataOperationRequest",{stanzaId:a.externalId,request:q.peerDataOperationRequestMessage});else if(q.securityNotificationEnabled)o("WAWebUserPrefsMeUser").getMaybeMeDevicePn()==null?o("WALogger").ERROR(g||(g=babelHelpers.taggedTemplateLiteralLoose(["Me wid is empty during security notification parsing"]))).sendLogs("Me wid is empty during security notification parsing"):T==null||!(T instanceof r("WAWebWid"))?o("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Handle security notification empty wid error"]))).sendLogs("Handle security notification empty wid error"):o("WAWebUserPrefsMeUser").isMePrimaryNonLid(T)?o("WAWebUserPrefsNotifications").setGlobalSecurityNotifications(q.securityNotificationEnabled.isEnabled):o("WALogger").ERROR(y||(y=babelHelpers.taggedTemplateLiteralLoose(["Handle security notification payload wid error"]))).sendLogs("Handle security notification payload wid error");else if(q.cloudApiThreadControlNotification)r("WAWebHandleCloudApiThreadControlNotification")(q.cloudApiThreadControlNotification);else if(q.lidMigrationSyncMessage!=null){var H;yield o("WAWebLid1X1ThreadAccountMigrations").setLidMigrationMappings((H=q.lidMigrationSyncMessage)==null?void 0:H.encodedMappingPayload)}else{var G=!1;if(q.deviceSent==null?G=!0:q.deviceSent.phash?G=yield o("WAWebHandleMsgValidate").validateBclHash(q.deviceSent.phash,q.deviceSent.info):q.deviceSent.destination&&(G=yield o("WAWebHandleMsgValidate").validateMsgDestination(q.deviceSent.destination,a)),!G)throw new(o("WAWebHandleMsgError")).DeviceSentMessageError(o("WAWebMsgProcessingApiUtils").getDeviceType(a.author),o("WAWebWamEnumDsmError").DSM_ERROR.INVALID_DSM);var z=q.renderableMsgs;if(o("WAWebHandleMsgValidate").renderableMessagesValidation({renderableMsgs:z,msgMeta:m,info:a,proto:I,bizInfo:s}),!o("WAWebMessagingGatingUtils").isWebReportingTokenDelayProcessingEnabled()){var j=o("WAWebOfflineResumeMsgProcessReporter").msgProcessReporter.startMarker(o("WAWebOfflineResumeMsgProcessReporter").msgProcessReporter.stage.ProcessReportingTokenInfo);yield o("WAWebHandleMsgValidate").validateAndProcessReportingTokenInfo({renderableMsgs:z}),j==null||j()}var K=yield o("WAWebGalaxyFlowsUtils").maybeAddGalaxyFlowMessageIds(z),Q=S({renderableMsgs:K,reparsing:v,bizInfo:s,msgMeta:m,paymentInfo:i,info:a,messageOverwriteOption:P}),X=Q.tasks,Y=Q.hasInactiveMsg;q.storeMsg!=null&&o("WAWebMessageProcessorCache").messageProcessorCache.addMessages([{msg:q.storeMsg}],!1);var J=q.senderKey;J!=null&&X.push(o("WAWebSignal").Session.createGroupSignalSession(a.author,J.groupId,J.key)),r("isStringNullOrEmpty")(a.pushname)||o("WAWebHandlePushnameUpdate").updatePushname(a.author,a.pushname,a.offline!=null);var Z=D(a.chat);yield(C||(C=n("Promise"))).all(X);var ee=yield Z;return o("WAWebLogMissingGroupParticipantMappings").logMissingGroupParticipantMappings(a.chat,a.author,a.addressingMode,ee),o("WAWebLogReceivedMessages").logReceivedMessagesInWAM({msgs:K,offline:x(a.offline),tsMillis:a.ts*1e3,clientReceivedTsMillis:a.clientReceivedTsMillis,msgProcessStartTsMillis:a.msgProcessStartTsMillis,serverAddressingMode:a.addressingMode,localAddressingMode:ee}),{hasInactiveMsg:Y}}return{hasInactiveMsg:!1}}),v.apply(this,arguments)}function S(t){var n,r,a,i,l,p=t.renderableMsgs,_=t.reparsing,f=t.bizInfo,g=t.msgMeta,h=t.paymentInfo,y=t.info,C=t.messageOverwriteOption,b=[],v=!1,S=p[0],L=o("WAWebAddonGatingUtils").isUnifiedInfraEnabledForType(S==null?void 0:S.type)?o("WAWebAddonProcessMsgsUtils").castToAddonMsgData(S):null;return L!=null?(o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["processMsgs: addon"]))),v=!0,b.push(I(L,y,_,C))):S!=null&&S.kind===o("WAWebMsgType").MsgKind.PollVoteEncrypted?(o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["processMsgs: pollVote"]))),b.push(E(S,y,_))):((n=p[0])==null?void 0:n.type)===o("WAWebMsgType").MSG_TYPE.KEEP_IN_CHAT?(o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["processMsgs: keepInChat"]))),v=!0,b.push(o("WAWebHandleMsgProcessUtils").processKeepInChatMsg(p[0],y,_))):((r=p[0])==null?void 0:r.type)===o("WAWebMsgType").MSG_TYPE.PROTOCOL&&((a=p[0])==null?void 0:a.subtype)==="message_edit"?(o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["processMsgs: messageEdit"]))),b.push(o("WAWebHandleMsgProcessUtils").processEditProtocolMsg(p[0],y,_))):((i=p[0])==null?void 0:i.type)===o("WAWebMsgType").MSG_TYPE.PROTOCOL&&((l=p[0])==null?void 0:l.subtype)==="ephemeral_sync_response"?(o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["processMsgs: ephemeralSyncResponse"]))),b.push(o("WAWebHandleMsgProcessUtils").processEphemeralSyncResponseMsg({msg:p[0],msgInfo:y,reparsing:_}))):p.length>0&&(o("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["processMsgs: renderableMsgs"]))),b.push(R(p,y,h,f,g,C,_))),{tasks:b,hasInactiveMsg:v}}function R(e,t,n,r,a,i,l){return o("WAWebMessageProcessRenderable").processRenderableMessages(e,t,n,r,a,i,l)}function L(e){return o("WAWebMessageProcessPlaceholder").processPlaceholderMessage(e)}function E(e,t,n){return k.apply(this,arguments)}function k(){return k=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r=t.offline!=null&&!n,a=e,i=o("WAWebGetMessageCache").getMessageCache().addMessages([{msg:a}],!r);(n||o("WAWebCmd").Cmd.isMainStreamReadyMd&&o("WAWebCmd").Cmd.isOfflineDeliveryEnd)&&(yield i)}),k.apply(this,arguments)}function I(e,t,n,r){return T.apply(this,arguments)}function T(){return T=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r){var a=t.offline!=null&&!n,i=e,l=o("WAWebGetMessageCache").getMessageCache().addMessages([{msg:i}],!a);(n||o("WAWebCmd").Cmd.isMainStreamReadyMd&&o("WAWebCmd").Cmd.isOfflineDeliveryEnd)&&(yield l),r===o("WAWebHandleMsgTypes.flow").MessageOverwriteOption.RETRY&&o("WAWebBackendApi").frontendFireAndForget("removePlaceholder",{msg:e})}),T.apply(this,arguments)}function D(e){return o("WAWebGetGroupAddressingMode").getGroupAddressingMode(e)}function x(e){var t=parseInt(e,10);return Number.isNaN(t)?null:t}l.processDecryptedMessageProto=b,l.processMsgs=S,l.processRenderableMsg=R,l.processPlaceholderMsg=L}),98);
__d("WAWebMessageHighRetryCountWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumE2eDeviceType","WAWebWamEnumInvisibleMessageCategoryType","WAWebWamEnumMediaType","WAWebWamEnumMessageType","WAWebWamEnumSizeBucket"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({MessageHighRetryCount:[3132,{deviceSizeBucket:[5,o("WAWebWamEnumSizeBucket").SIZE_BUCKET],e2eSenderType:[3,o("WAWebWamEnumE2eDeviceType").E2E_DEVICE_TYPE],invisibleMessageCategory:[6,o("WAWebWamEnumInvisibleMessageCategoryType").INVISIBLE_MESSAGE_CATEGORY_TYPE],isPq:[9,e.TYPES.BOOLEAN],isReceiverLidBased:[7,e.TYPES.BOOLEAN],isSenderLidBased:[8,e.TYPES.BOOLEAN],mediaType:[1,o("WAWebWamEnumMediaType").MEDIA_TYPE],messageType:[4,o("WAWebWamEnumMessageType").MESSAGE_TYPE],retryCount:[2,e.TYPES.INTEGER]},[1,20,20],"regular"]},{MessageHighRetryCount:[]});l.MessageHighRetryCountWamEvent=s}),98);
__d("WAWebPostMessageHighRetryCountMetric",["WAWebMessageHighRetryCountWamEvent","WAWebMessagingGatingUtils","WAWebWamGroupMetricCache","WAWebWamMsgUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e=5;function s(e,t){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){if(!(t<e)){var r=new(o("WAWebMessageHighRetryCountWamEvent")).MessageHighRetryCountWamEvent({retryCount:t,messageType:o("WAWebWamMsgUtils").getMessageTypeFromMsgInfoType(n.type)}),a=o("WAWebWamMsgUtils").getWamE2eSenderType(n.author);a!=null&&(r.e2eSenderType=a);var i=n.chat;if(i!=null&&i.isGroup()){var l=yield o("WAWebWamGroupMetricCache").getGroupMetrics(i);(l==null?void 0:l.deviceSizeBucket)!=null&&(r.deviceSizeBucket=l.deviceSizeBucket),(l==null?void 0:l.participantCount)!=null&&l.participantCount>o("WAWebMessagingGatingUtils").getGroupSizeBypassingSampling()&&(r.weight=0)}r.commit()}}),u.apply(this,arguments)}l.MAX_RETRY=e,l.maybePostMessageHighRetryCountMetric=s}),98);
__d("WAWebSendDeliveryReceiptJob",["WADeprecatedSendIq","WAJids","WAWap","WAWebCommsWapMd","WAWebOnlineDanglingReceipts","WAWebSendReceiptJobCommon","WAWebUserPrefsMeUser","WAWebWidToJid","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(e,t,n,r,o,a){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r,a,i){var l=t.isUser()&&o("WAWebUserPrefsMeUser").isMeAccount(t)||r!=null&&o("WAWebUserPrefsMeUser").isMeAccount(r),s=i.hasInactiveMsg===!0&&!l,c=!s;u(e,t,n,r,c,l,a)}),s.apply(this,arguments)}function u(e,t,n,r,o,a,i){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r,a,i,l){var s=o("WAWap").DROP_ATTR;l?s=o("WAWebSendReceiptJobCommon").RECEIPT_TYPE.PEER_MSG:i?(s=o("WAWebSendReceiptJobCommon").RECEIPT_TYPE.SENDER,n&&o("WAWebSendReceiptJobCommon").logMixedSenderReceipt(n,t)):a||(s=o("WAWebSendReceiptJobCommon").RECEIPT_TYPE.INACTIVE);var u=o("WAJids").extractJidFromJidWithType(o("WAWebWidToJid").widToJidWithType(t)),c=o("WAWap").wap("receipt",{id:o("WAWap").CUSTOM_STRING(e),to:o("WAWap").JID(u),participant:(t.isGroup()||t.isBroadcast())&&r?o("WAWebCommsWapMd").DEVICE_JID(r):o("WAWap").DROP_ATTR,recipient:!l&&i&&n?o("WAWebCommsWapMd").USER_JID(n):o("WAWap").DROP_ATTR,type:s});o("WAWebOnlineDanglingReceipts").addOnlineDanglingReceipts(t,r||t,e),o("WADeprecatedSendIq").deprecatedCastStanza(c)}),c.apply(this,arguments)}l.sendDeliveryReceiptsAfterDecryption=e}),98);
__d("WAWebSendRetryReceiptJob",["$InternalEnum","Promise","WADeprecatedSendIq","WALogger","WAWap","WAWebAdvSignatureApi","WAWebCommsAckParser","WAWebCommsWapMd","WAWebConstantsDeprecated","WAWebCryptoCurve25519","WAWebEphemeralDecodeBroadcastSetting","WAWebHandleMsgError","WAWebSignalCommonErrors","WAWebSignalKeyApi","WAWebSignalProtocolStore","WAWebSignalStoreApi","WAWebSignalUtilsApi","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime","cr:10198","cr:4533","err","gkx"],(function(t,n,r,o,a,i,l){var e,s,u,c,d=2,m=n("$InternalEnum")({UnknownError:0,SignalErrorNoSession:1,SignalErrorInvalidKey:2,SignalErrorInvalidKeyId:3,SignalErrorInvalidMessage:4,SignalErrorInvalidSignature:5,SignalErrorFutureMessage:6,SignalErrorBadMac:7,SignalErrorInvalidSession:8,SignalErrorInvalidMsgKey:9,BadBroadcastEphemeralSetting:10,UnknownCompanionNoPrekey:11,AdvFailure:12,StatusRevokeDelay:13});function p(e){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var a=t.retryCount,i=t.to,l=t.participant,u=t.recipient,d=t.externalId,m=t.rawTs,p=t.isPeer,_=p===void 0?!1:p,g=t.retryReason;if(r("gkx")("26258")||n("cr:10198")==null||n("cr:10198").injectDebug(i,"RetryReceiptSent","externalId:"+d),!r("gkx")("26258")){var h=n("cr:4533")==null?void 0:n("cr:4533").getDebugDoNotSendRetryReceipt();if(h!=null&&h>0)return n("cr:4533")==null||n("cr:4533").setDebugDoNotSendRetryReceipt(h-1),(c||(c=n("Promise"))).resolve()}try{var y=o("WAWebSignalProtocolStore").getSignalProtocolStore(),C=yield(c||(c=n("Promise"))).all([y.getLocalRegistrationId(),y.getIdentityKeyPair()]),b=C[0],v=C[1];if(b==null||v==null)throw r("err")("No registration info found");var S;try{S=yield f(a,o("WAWebCryptoCurve25519").toCurveKeyPair(v))}catch(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["error: ",""])),t).sendLogs("sendRetryReceipt: error while creating key section in retry receipt")}var R=!i.isBot()&&!!(l!=null&&l.isBot());if(R)return;var L=o("WAWap").DROP_ATTR,E=o("WAWap").DROP_ATTR,k=o("WAWap").DROP_ATTR,I;if(i.isUser()){if(I=o("WAWebCommsWapMd").DEVICE_JID(i),o("WAWebUserPrefsMeUser").isMeAccount(o("WAWebWidFactory").asUserWidOrThrow(i)))if(_)L="peer";else if(u)E=o("WAWebCommsWapMd").USER_JID(u);else return(c||(c=n("Promise"))).reject(r("err")("sendRetryReceipt: send retry to peer device without recipient"))}else I=o("WAWebCommsWapMd").CHAT_JID(i),k=l?o("WAWebCommsWapMd").DEVICE_JID(l):o("WAWap").DROP_ATTR;var T=o("WAWap").wap("receipt",{id:o("WAWap").CUSTOM_STRING(d),to:I,participant:k,recipient:E,type:"retry",category:L},o("WAWap").wap("retry",{v:"1",count:o("WAWap").INT(a),id:o("WAWap").CUSTOM_STRING(d),t:o("WAWap").CUSTOM_STRING(m),error:g!=null?o("WAWap").INT(g):o("WAWap").DROP_ATTR}),o("WAWap").wap("registration",null,o("WAWap").BIG_ENDIAN_CONTENT(b)),S);return o("WADeprecatedSendIq").deprecatedSendStanzaAndWaitForAck(T,o("WAWebCommsAckParser").toCoreAckTemplate({id:d,class:"receipt",from:i,participant:l,type:"retry"}))}catch(e){o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["error: ",""])),e).sendLogs("sendRetryReceipt: error while creating or sending the retry message")}}),_.apply(this,arguments)}function f(e,t){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield h(e,t),r=n[0],a=n[1];return a&&(yield o("WAWebSignalStoreApi").waSignalStore.markKeyAsUploaded(a.keyId),yield o("WAWebSignalStoreApi").waSignalStore.markPreKeyAsDirectDistribution(a.keyId)),r}),g.apply(this,arguments)}function h(e,t){return y.apply(this,arguments)}function y(){return y=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){if(e<d)return(c||(c=n("Promise"))).resolve([null,null]);try{var a=yield(c||(c=n("Promise"))).all([o("WAWebSignalStoreApi").waSignalStore.getSignedPreKey(),o("WAWebSignalStoreApi").waSignalStore.getOrGenSinglePreKey(o("WAWebSignalKeyApi").generatePreKeyPair),o("WAWebAdvSignatureApi").getADVEncodedIdentity().then(function(e){return(e==null||e.byteLength===0)&&o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["getADVEncodedIdentity: sending empty device-identity"]))).sendLogs("sending-retry-response-with-empty-device-identity",{sampling:r("gkx")("26259")?1:.1}),o("WAWap").wap("device-identity",null,e)})]),i=a[0],l=a[1],s=a[2];if(!i)throw r("err")("Signed pre key is not available");var m=o("WAWap").wap("keys",null,o("WAWap").wap("type",null,r("WAWebConstantsDeprecated").KEY_BUNDLE_TYPE),o("WAWap").wap("identity",null,t.pubKey),o("WAWebSignalUtilsApi").xmppPreKey(l),o("WAWebSignalUtilsApi").xmppSignedPreKey(i),s);return[m,l]}catch(e){throw r("err")("Could not create keys section for retry")}}),y.apply(this,arguments)}function C(e){if(e instanceof o("WAWebHandleMsgError").UnknownDeviceMessageError)return m.UnknownCompanionNoPrekey;if(e instanceof o("WAWebSignalCommonErrors").SignalDecryptionError)switch(e.message){case"errSignalNoSession":case"errLoadSenderKeySession":return m.SignalErrorNoSession;case"errSignalInvalidMsg":return m.SignalErrorInvalidMessage;case"errSignalInvalidKey":return m.SignalErrorInvalidKey;case"errSignalTooManyMessagesInFuture":case"errSignalGrpTooManyMessagesInFuture":return m.SignalErrorFutureMessage;case"errInvalidMacWithDecryptedPlaintext":case"errInvalidMacInvalidCipherKey":case"errInvalidMacInvalidCipherKeyNewChain":return m.SignalErrorBadMac}else if(e instanceof o("WAWebEphemeralDecodeBroadcastSetting").BroadcastEphSettingsError)return m.BadBroadcastEphemeralSetting}l.RetryReason=m,l.sendRetryReceipt=p,l.getRetryReasonFromError=C}),98);
__d("WAWebHandleMsgSendReceipt",["WALogger","WAWebBizCoexGatingUtils","WAWebCreateNackFromStanza","WAWebHandleMsgCommon","WAWebHandleMsgSendAck","WAWebHandleMsgTypes.flow","WAWebMsgProcessingApiUtils","WAWebPostMessageHighRetryCountMetric","WAWebSendDeliveryReceiptJob","WAWebSendReceiptJobCommon","WAWebSendRetryReceiptJob","WAWebUserPrefsMeUser","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u,c;function d(e,t,n){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,r){var a;o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["sendReceipt"])));var i=t.externalId,l=n.rawTs,d=n.type,m=o("WAWebMsgProcessingApiUtils").getFrom(t),p=null;if(t.type===o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.CHAT&&o("WAWebUserPrefsMeUser").isMeAccount(t.author))if(t.originalBotRecipient!=null)p=t.originalBotRecipient;else{var _;p=(_=t.preMatChat)!=null?_:t.chat}var f=t.type===o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.CHAT?null:(a=t.preMatChat)!=null?a:t.author,g=t.category===o("WAWebHandleMsgCommon").CATEGORY_PEER,h=!t.chat.isBot()&&t.author.isBot();switch(r.result){case o("WAWebHandleMsgTypes.flow").E2EProcessResult.SUCCESS:case o("WAWebHandleMsgTypes.flow").E2EProcessResult.SIGNAL_OLD_COUNTER_ERROR:if(h){var y,C,b;return t.type===o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.CHAT?(y=t.author,C=t.chat):(y=t.chat,b=t.author),o("WAWebSendReceiptJobCommon").sendBotInvokeResponseAcks([i],y,C,b)}else if(n.type===o("WAWebHandleMsgCommon").STANZA_MSG_TYPES.medianotify)return o("WAWebHandleMsgSendAck").sendAck(i,m,d,f);return o("WAWebSendDeliveryReceiptJob").sendDeliveryReceiptsAfterDecryption(i,m,p,f,g,r);case o("WAWebHandleMsgTypes.flow").E2EProcessResult.HSM_MISMATCH:o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(['sendReceipt: HSM mismatch, no receipt sent for "','"'])),i).sendLogs("send-receipt-skipping-hsm-mismatch-result");return;case o("WAWebHandleMsgTypes.flow").E2EProcessResult.RETRY:{if(m!=null&&m.isHosted()&&!o("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled())return o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Drop retry for coex when feature is disabled"]))),o("WAWebHandleMsgSendAck").sendAck(i,m,d,f);var v=r.retryCount==null?1:r.retryCount+1;yield o("WAWebSendRetryReceiptJob").sendRetryReceipt({retryCount:v,to:m,participant:f,recipient:p,externalId:i,rawTs:l,isPeer:g,retryReason:r.retryReason}),o("WAWebPostMessageHighRetryCountMetric").maybePostMessageHighRetryCountMetric(v,t);return}case o("WAWebHandleMsgTypes.flow").E2EProcessResult.BACKFILL:return o("WAWebHandleMsgSendAck").sendAck(i,m,d,f);case o("WAWebHandleMsgTypes.flow").E2EProcessResult.PARSE_VALIDATION_ERROR:return o("WAWebHandleMsgSendAck").sendNack(i,m,d,f,o("WAWebCreateNackFromStanza").NackReason.InvalidProtobuf,r.e2eFailureReason);case o("WAWebHandleMsgTypes.flow").E2EProcessResult.PARSE_ERROR:return o("WAWebHandleMsgSendAck").sendNack(i,m,d,f,o("WAWebCreateNackFromStanza").NackReason.ParsingError)}return o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(['sendReceipt: invalid e2eProcessResult "','"'])),r.result).sendLogs("send-receipt-missing-e2e-process-result"),o("WAWebHandleMsgSendAck").sendAck(i,m,d,f)}),m.apply(this,arguments)}l.sendReceipt=d}),98);
__d("WAWebWamEnumCallStanzaType",[],(function(t,n,r,o,a,i){var e=Object.freeze({OFFER:0,ACCEPT:1,REJECT:2,VIDEO:3,TERMINATE:4,ENC_REKEY:5,RELAYLATENCY:6,TRANSPORT:7,PREACCEPT:8,GROUP_UPDATE:9,MUTE_V2:10,INTERRUPTION:11,FLOWCONTROL:12,NOTIFY:13,OFFER_NOTICE:14,CALL_RELAY:15,MUTE:16,SCREEN_SHARE:17,UNKNOWN:18});i.CALL_STANZA_TYPE=e}),66);
__d("WAWebWamEnumStanzaType",[],(function(t,n,r,o,a,i){var e=Object.freeze({MESSAGE:1,RECEIPT:2,CALL:3,NOTIFICATION:4,APPDATA:5});i.STANZA_TYPE=e}),66);
__d("WAWebOfflineCountTooHighWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumCallStanzaType","WAWebWamEnumEncryptionTypeCode","WAWebWamEnumInvisibleMessageCategoryType","WAWebWamEnumMediaType","WAWebWamEnumMessageType","WAWebWamEnumStanzaType"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({OfflineCountTooHigh:[2638,{callStanzaType:[7,o("WAWebWamEnumCallStanzaType").CALL_STANZA_TYPE],encryptionType:[9,o("WAWebWamEnumEncryptionTypeCode").ENCRYPTION_TYPE_CODE],invisibleMessageCategory:[8,o("WAWebWamEnumInvisibleMessageCategoryType").INVISIBLE_MESSAGE_CATEGORY_TYPE],mediaType:[3,o("WAWebWamEnumMediaType").MEDIA_TYPE],messageType:[4,o("WAWebWamEnumMessageType").MESSAGE_TYPE],notificationStanzaType:[6,e.TYPES.STRING],offlineCount:[2,e.TYPES.INTEGER],receiptStanzaType:[5,e.TYPES.STRING],stanzaType:[1,o("WAWebWamEnumStanzaType").STANZA_TYPE]},[1,1,1],"regular"]},{OfflineCountTooHigh:[]});l.OfflineCountTooHighWamEvent=s}),98);
__d("WAWebMaybePostOfflineCountTooHighMetric",["WALogger","WAWebBackendJobsCommon","WAWebOfflineCountTooHighWamEvent","WAWebWamEnumStanzaType","WAWebWamMsgUtils"],(function(t,n,r,o,a,i,l){var e,s=11;function u(t){var n,r=t.msgInfo,a=t.msgMeta,i=t.encs,l=parseInt(r.offline,10);if(!(Number.isNaN(l)||l<s)){var u=new(o("WAWebOfflineCountTooHighWamEvent")).OfflineCountTooHighWamEvent({offlineCount:l,stanzaType:o("WAWebWamEnumStanzaType").STANZA_TYPE.MESSAGE,mediaType:o("WAWebBackendJobsCommon").getMetricMediaType({encMediaType:(n=i.find(function(e){return e.encMediaType!=null}))==null?void 0:n.encMediaType,msgType:a.type,msgPollType:a.pollType})}),c=o("WAWebWamMsgUtils").getMessageTypeFromMsgInfoType(r.type);c!=null&&(u.messageType=c),u.commitAndWaitForFlush().catch(function(t){o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Failed to post OfflineCountTooHigh metric: ",""])),t).tags("messaging")})}}l.OFFLINE_COUNT_TOO_HIGH_THRESHOLD=s,l.maybePostOfflineCountTooHigh=u}),98);
__d("WAWebMsgProcessingDecryptEnc",["Promise","WAWebBackendJobs.flow","WAWebBotMessageSecret","WAWebMsgProcessingApiUtils","WAWebSignal","err"],(function(t,n,r,o,a,i,l){var e;function s(t,a,i,l){var s=t.e2eType,u=t.ciphertext;switch(s){case o("WAWebBackendJobs.flow").CiphertextType.Skmsg:return a.isGroup()||a.isBroadcast()?i?o("WAWebSignal").Cipher.decryptGroupSignalProto(a,i,u):(e||(e=n("Promise"))).reject(r("err")("['messaging'] decryptEnc: receive msg from "+a.toString()+" without participant")):(e||(e=n("Promise"))).reject(r("err")("['messaging'] decryptEnc: Can not do skmsg for non group "+a.toString()));case o("WAWebBackendJobs.flow").CiphertextType.Pkmsg:case o("WAWebBackendJobs.flow").CiphertextType.Msg:{var c=a.isUser()?a:i;if(!c)return(e||(e=n("Promise"))).reject(r("err")("['messaging'] decryptEnc: receive msg from "+a.toString()+" without participant"));var d=o("WAWebMsgProcessingApiUtils").shouldOmitSessionPersistence(s,l);return o("WAWebSignal").Cipher.decryptSignalProto(c,s,u,d)}case o("WAWebBackendJobs.flow").CiphertextType.Msmsg:return o("WAWebBotMessageSecret").decryptMsmsgBotMessage(u,l)}}l.decryptEnc=s}),98);
__d("WAWebIsOfficialClient",["WALogger","WAWebUA","WAWebWamGlobals","gkx"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m=function(){var e=typeof self!="undefined"?self.navigator:null;return!!e.webdriver},p=function(){return!(m()||o("WAWebUA").UA.isChrome&&/HeadlessChrome/.test(window.navigator.userAgent))},_=function(){try{var t=new Error,n=t.stack,a=n.split("\n").filter(function(e){return!!e.trim()}).pop();if(a==null)return o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["A caller is not found ",""])),n).tags("uc"),!0;if(!a.includes(".whatsapp.com"))return r("gkx")("26258")?o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Caller ",""])),a).tags("uc"):o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Caller ",""])),a).tags("uc").sendLogs("Unexpectedly detected UC"),!1}catch(e){o("WALogger").WARN(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Cannot analyze UC ",""])),e.stack).tags("uc")}return!0},f="webpackChunkwhatsapp_web_client";f in window||(window[f]=[]);var g=window[f];g!=null&&Object.defineProperty(window,f,{get:function(){if(!_())try{o("WAWebWamGlobals").Global.set({ocVersion:0})}catch(e){o("WALogger").WARN(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Cannot set ocVersion ",""])),e.stack).tags("uc")}return g}});var h=p(),y=function(t){return!!t.startsWith("BA")};l.isOfficialClient=h,l.isUnofficialStanzaId=y}),98);
__d("WAWebWamEnumGroupEncryptionType",[],(function(t,n,r,o,a,i){var e=Object.freeze({E2EE:1,HOSTED:2});i.GROUP_ENCRYPTION_TYPE=e}),66);
__d("WAWebWamEnumMessageDistributionEnumType",[],(function(t,n,r,o,a,i){var e=Object.freeze({REGULAR_MESSAGE:0,DIRECT_MESSAGE:1,SENDER_KEY_DISTRIBUTION_MESSAGE:2});i.MESSAGE_DISTRIBUTION_ENUM_TYPE=e}),66);
__d("WAWebE2eMessageRecvWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumAddressingMode","WAWebWamEnumAgentEngagementEnumType","WAWebWamEnumBotType","WAWebWamEnumE2eCiphertextType","WAWebWamEnumE2eDestination","WAWebWamEnumE2eDeviceType","WAWebWamEnumE2eFailureReason","WAWebWamEnumEditType","WAWebWamEnumEncryptionTypeCode","WAWebWamEnumGroupEncryptionType","WAWebWamEnumInvisibleMessageCategoryType","WAWebWamEnumMediaType","WAWebWamEnumMessageDistributionEnumType","WAWebWamEnumRevokeType","WAWebWamEnumStanzaType","WAWebWamEnumTypeOfGroupEnum"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({E2eMessageRecv:[478,{agentEngagementType:[15,o("WAWebWamEnumAgentEngagementEnumType").AGENT_ENGAGEMENT_ENUM_TYPE],botType:[19,o("WAWebWamEnumBotType").BOT_TYPE],e2eCiphertextType:[5,o("WAWebWamEnumE2eCiphertextType").E2E_CIPHERTEXT_TYPE],e2eCiphertextVersion:[6,e.TYPES.INTEGER],e2eDestination:[4,o("WAWebWamEnumE2eDestination").E2E_DESTINATION],e2eFailureReason:[2,o("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON],e2eSenderType:[8,o("WAWebWamEnumE2eDeviceType").E2E_DEVICE_TYPE],e2eSuccessful:[1,e.TYPES.BOOLEAN],editType:[13,o("WAWebWamEnumEditType").EDIT_TYPE],encryptionType:[25,o("WAWebWamEnumEncryptionTypeCode").ENCRYPTION_TYPE_CODE],groupEncryptionState:[23,o("WAWebWamEnumGroupEncryptionType").GROUP_ENCRYPTION_TYPE],invisibleMessageCategory:[22,o("WAWebWamEnumInvisibleMessageCategoryType").INVISIBLE_MESSAGE_CATEGORY_TYPE],isHostedChat:[20,e.TYPES.BOOLEAN],isLid:[11,e.TYPES.BOOLEAN],isPq:[27,e.TYPES.BOOLEAN],isSimpleSignal:[26,e.TYPES.BOOLEAN],localAddressingMode:[16,o("WAWebWamEnumAddressingMode").ADDRESSING_MODE],messageAddressingMode:[17,o("WAWebWamEnumAddressingMode").ADDRESSING_MODE],messageDistributionType:[21,o("WAWebWamEnumMessageDistributionEnumType").MESSAGE_DISTRIBUTION_ENUM_TYPE],messageMediaType:[7,o("WAWebWamEnumMediaType").MEDIA_TYPE],offline:[9,e.TYPES.BOOLEAN],retryCount:[3,e.TYPES.INTEGER],revokeType:[10,o("WAWebWamEnumRevokeType").REVOKE_TYPE],serverAddressingMode:[18,o("WAWebWamEnumAddressingMode").ADDRESSING_MODE],stanzaType:[14,o("WAWebWamEnumStanzaType").STANZA_TYPE],typeOfGroup:[12,o("WAWebWamEnumTypeOfGroupEnum").TYPE_OF_GROUP_ENUM]},[1,1,20],"regular"]},{E2eMessageRecv:[]});l.E2eMessageRecvWamEvent=s}),98);
__d("WAWebPostE2eMessageRecvMetric",["WAWebBackendApi","WAWebBackendJobsCommon","WAWebE2eMessageRecvWamEvent","WAWebGroupType","WAWebHandleMsgCommon","WAWebWamAddressingModeUtils","WAWebWamEnumAgentEngagementEnumType","WAWebWamMsgUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(e){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.enc,n=e.from,r=e.msgMeta,a=e.msgInfo,i=e.msgBotInfo,l=e.error,s=r.type===o("WAWebHandleMsgCommon").STANZA_MSG_TYPES.reaction,u=a.chat,c=new(o("WAWebE2eMessageRecvWamEvent")).E2eMessageRecvWamEvent({e2eCiphertextType:o("WAWebBackendJobsCommon").getMetricE2eCiphertextType(t.e2eType),e2eCiphertextVersion:o("WAWebBackendJobsCommon").CIPHERTEXT_VERSION,e2eFailureReason:l==null?void 0:l.e2eFailureReason,e2eSuccessful:!1,messageMediaType:o("WAWebBackendJobsCommon").getMetricMediaType({encMediaType:t.encMediaType,msgType:r.type,msgPollType:r.pollType}),retryCount:t.retryCount,editType:o("WAWebBackendJobsCommon").getMetricEditType(a.edit),botType:o("WAWebWamMsgUtils").getWamBotType(u,i==null?void 0:i.bizBotType)}),d=o("WAWebBackendJobsCommon").getMetricE2eDestination(n);if(d!=null&&(c.e2eDestination=d),a.addressingMode!=null&&(c.serverAddressingMode=o("WAWebWamAddressingModeUtils").getWamAddressingModeFromString(a.addressingMode)),u.isGroup()){var m=yield o("WAWebBackendApi").frontendSendAndReceive("getGroupMetadata",{groupWid:u});if(m!=null){c.isLid=m.isCag&&s||!!m.isLidAddressingMode;var p=o("WAWebGroupType").groupTypeToWamEnum(o("WAWebGroupType").getGroupTypeFromGroupMetadata(m));c.typeOfGroup=p;var _=o("WAWebWamAddressingModeUtils").getAddressingModeMetricsFromGroupMetadata(m);_!=null&&(c.localAddressingMode=_)}}else u.isBroadcast()?c.isLid=a.author.isLid():c.isLid=u.isLid();return a.author.isBot()&&(a.chat.isBot()?c.agentEngagementType=o("WAWebWamEnumAgentEngagementEnumType").AGENT_ENGAGEMENT_ENUM_TYPE.DIRECT_CHAT:c.agentEngagementType=o("WAWebWamEnumAgentEngagementEnumType").AGENT_ENGAGEMENT_ENUM_TYPE.INVOKED),c}),s.apply(this,arguments)}function u(e){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=yield e(t);n.e2eSuccessful=!0,n.weight=1e3,n.commit()}),c.apply(this,arguments)}function d(e){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=yield e(t);n.e2eSuccessful=!1,n.weight=1,n.commit()}),m.apply(this,arguments)}l.postSuccessE2eMessageRecvMetric=u,l.postFailureE2eMessageRecvMetric=d}),98);
__d("WAWebMsgProcessingDecryptionHandler",["$InternalEnum","WALogger","WATimeUtils","WAWebABProps","WAWebBackendJobs.flow","WAWebBackendJobsCommon","WAWebCreateNackFromStanza","WAWebEphemeralDecodeBroadcastSetting","WAWebHandleMsgCommon","WAWebHandleMsgError","WAWebHandleMsgProcess","WAWebHandleMsgTypes.flow","WAWebIsOfficialClient","WAWebMessagingGatingUtils","WAWebMsgProcessingApiUtils","WAWebMsgType","WAWebPostE2eMessageRecvMetric","WAWebPostIncomingMessageDropMetric","WAWebSendRetryReceiptJob","WAWebSignalCommonErrors","WAWebWamEnumE2eFailureReason","asyncToGeneratorRuntime","cr:4122","gkx"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g,h,y,C=n("$InternalEnum").Mirrored(["SignalRetryable","SignalDuplicateMessage","UnknownDevice","DeviceSentMessage","InvalidProtobuf","HsmMismatch","BroadcastEphSettings","Unknown"]),b=new Set([C.SignalRetryable]);function v(e){return e.message==="errDuplicateMsg"?C.SignalDuplicateMessage:C.SignalRetryable}function S(e){return e instanceof o("WAWebHandleMsgError").UnknownDeviceMessageError?C.UnknownDevice:e instanceof o("WAWebSignalCommonErrors").SignalDecryptionError?v(e):e instanceof o("WAWebSignalCommonErrors").SignalMessageCounterError?C.SignalDuplicateMessage:e instanceof o("WAWebHandleMsgError").DeviceSentMessageError?C.DeviceSentMessage:e instanceof o("WAWebHandleMsgError").MessageValidationError?C.InvalidProtobuf:e instanceof o("WAWebHandleMsgCommon").HsmMismatchError?C.HsmMismatch:e instanceof o("WAWebEphemeralDecodeBroadcastSetting").BroadcastEphSettingsError?C.BroadcastEphSettings:C.Unknown}function R(e){var t={accessedEncs:new Set,pkOrMsgFailedEnc:null,skMsgFailedEnc:null};return{handleError:function(r,a){var n=S(a);r.e2eType===o("WAWebBackendJobs.flow").CiphertextType.Skmsg?t.skMsgFailedEnc={enc:r,error:a,errorType:n}:t.pkOrMsgFailedEnc={enc:r,error:a,errorType:n},D(e,{enc:r,error:a,errorType:n})},canDecryptNext:function(n){var e;r("gkx")("26258")||$();var o=(e=t.pkOrMsgFailedEnc)==null?void 0:e.errorType;return o!=null&&b.has(o)?!1:(t.accessedEncs.add(n.e2eType),!0)},getResult:function(r){return k(e,t,r)}}}function L(e){var t=e.ciphertext.byteLength;return t===0?"empty":t<100?"small":"large"}function E(t,n,r){var a=t.msgInfo,i=t.encs;r===void 0&&(r=!1);var l=a.chat,s=a.ts;if(l.isStatus()){var u=o("WATimeUtils").unixTimeWithoutClockSkewCorrection()-(s+o("WATimeUtils").DAY_SECONDS),c=u>0;if(c&&r&&i.length===2){var d=o("WATimeUtils").unixTime()-(s+o("WATimeUtils").DAY_SECONDS);o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["decryptE2EPayload: expired status has 2 encs, expired for ","s client time or for ","s with a clock skew, enc is "," and is ",""])),u,d,n.enc.e2eType,L(n.enc)).tags("messaging").sendLogs("handleMsg: expired status multiple encs",{sampling:.01})}return c}return!1}function k(e,t,n){return I.apply(this,arguments)}function I(){return I=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var r,a=(r=t.skMsgFailedEnc)!=null?r:t.pkOrMsgFailedEnc,i=a!=null&&t.accessedEncs.has(o("WAWebBackendJobs.flow").CiphertextType.Skmsg)&&t.skMsgFailedEnc==null;if(a==null||i||E(e,a,!0)&&o("WAWebABProps").getABPropConfigValue("web_skip_expired_status_error"))return{result:o("WAWebHandleMsgTypes.flow").E2EProcessResult.SUCCESS,hasInactiveMsg:n};T(e,t),x(e,t);var l=a.enc,s=a.error,u=a.errorType,c;switch((s instanceof o("WAWebSignalCommonErrors").SignalDecryptionError||s instanceof o("WAWebHandleMsgError").UnknownDeviceMessageError||s instanceof o("WAWebEphemeralDecodeBroadcastSetting").BroadcastEphSettingsError)&&(c=o("WAWebSendRetryReceiptJob").getRetryReasonFromError(s),u!==C.SignalDuplicateMessage&&(l.hideFail||(yield o("WAWebHandleMsgProcess").processPlaceholderMsg({type:o("WAWebMsgType").MSG_TYPE.CIPHERTEXT,msgMeta:e.msgMeta,msgInfo:e.msgInfo,placeholderType:o("WAWebHandleMsgTypes.flow").PlaceholderType.E2E,placeholderAddReason:o("WAWebBackendJobsCommon").getPlaceholderAddReason(s,e)})))),u){case C.SignalRetryable:case C.UnknownDevice:return{result:o("WAWebHandleMsgTypes.flow").E2EProcessResult.RETRY,retryCount:l.retryCount,retryReason:c};case C.SignalDuplicateMessage:return{result:o("WAWebHandleMsgTypes.flow").E2EProcessResult.SIGNAL_OLD_COUNTER_ERROR,failedEnc:l};case C.DeviceSentMessage:return{result:o("WAWebHandleMsgTypes.flow").E2EProcessResult.PARSE_VALIDATION_ERROR};case C.InvalidProtobuf:return{result:o("WAWebHandleMsgTypes.flow").E2EProcessResult.PARSE_VALIDATION_ERROR,e2eFailureReason:s instanceof o("WAWebHandleMsgError").MessageValidationError?s.e2eFailureReason:void 0};case C.HsmMismatch:return{result:o("WAWebHandleMsgTypes.flow").E2EProcessResult.HSM_MISMATCH};case C.BroadcastEphSettings:return{result:o("WAWebHandleMsgTypes.flow").E2EProcessResult.RETRY,retryCount:l.retryCount,retryReason:c,e2eFailureReason:o("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_BROADCAST_STANZA_ATTRIBUTE};case C.Unknown:return{result:o("WAWebHandleMsgTypes.flow").E2EProcessResult.PARSE_ERROR}}}),I.apply(this,arguments)}function T(e,t){var n=t.skMsgFailedEnc,r=t.pkOrMsgFailedEnc,a=e.msgInfo,i=e.msgMeta,l=n!=null?n:r;if(l!=null){var s=l.enc,u=l.errorType,c=l.error;if(E(e,l)){o("WAWebABProps").getABPropConfigValue("web_skip_expired_status_error")||o("WAWebPostIncomingMessageDropMetric").postIncomingMessageDropExpired({msgInfo:a,msgMeta:i,enc:s,error:c instanceof o("WAWebHandleMsgError").MessageValidationError?c:void 0});return}switch(u){case C.SignalRetryable:case C.UnknownDevice:case C.HsmMismatch:case C.BroadcastEphSettings:case C.SignalDuplicateMessage:break;case C.InvalidProtobuf:case C.DeviceSentMessage:{o("WAWebPostIncomingMessageDropMetric").postIncomingMessageDropInvalidProtobuf({msgInfo:a,msgMeta:i,enc:s,error:c instanceof o("WAWebHandleMsgError").MessageValidationError?c:void 0});break}case C.Unknown:o("WAWebPostIncomingMessageDropMetric").postIncomingMessageDropInvalidStanzaFromDecryptedMessageInfo({msgInfo:a,msgMeta:i,enc:s})}}}function D(e,t){var n=e.msgInfo,a=e.msgMeta,i=e.msgBotInfo,l=t.enc,h=t.error,y=t.errorType,b=o("WAWebMsgProcessingApiUtils").getFrom(n);switch(o("WAWebPostE2eMessageRecvMetric").postFailureE2eMessageRecvMetric({enc:l,from:b,msgMeta:a,msgInfo:n,msgBotInfo:i,error:h instanceof o("WAWebHandleMsgError").MessageValidationError?h:null}),o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["decryptE2EPayload: msgId::"," e2eType:"," error:",""])),n.externalId,l.e2eType,h.stack).tags("messaging"),y){case C.SignalDuplicateMessage:break;case C.SignalRetryable:case C.UnknownDevice:{r("gkx")("26258")||o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["decryptE2EPayload: e2eType:"," error:",""])),l.e2eType,h).tags("messaging").sendLogs("handleMsg: decryption error");break}case C.InvalidProtobuf:{h instanceof o("WAWebHandleMsgError").MessageValidationError&&(o("WAWebIsOfficialClient").isUnofficialStanzaId(n.externalId)?o("WALogger").WARN(c||(c=babelHelpers.taggedTemplateLiteralLoose(["decryptE2EPayload: e2eType:"," error:",""])),l.e2eType,h).tags("messaging").sendLogs("handleMsg from UC: "+h.name,{sampling:h.sendLogs===!0?.01:h.sendLogs}):r("gkx")("26259")&&h instanceof o("WAWebHandleMsgError").MessageProtobufInvalidMessageTypes?o("WALogger").WARN(d||(d=babelHelpers.taggedTemplateLiteralLoose(["decryptE2EPayload: e2eType:"," error:",""])),l.e2eType,h).tags("messaging").sendLogs("(intern) handleMsg: "+h.name):o("WALogger").WARN(m||(m=babelHelpers.taggedTemplateLiteralLoose(["decryptE2EPayload: e2eType:"," error:",""])),l.e2eType,h).tags("messaging").sendLogs("handleMsg: "+h.name,h.sendLogs===!0?void 0:{sampling:h.sendLogs}));break}case C.DeviceSentMessage:{o("WALogger").WARN(p||(p=babelHelpers.taggedTemplateLiteralLoose(["decryptE2EPayload: e2eType:"," infoType:"," isDirect:"," error:",""])),l.e2eType,n.type,n.isDirect,h).tags("messaging").sendLogs("handleMsg: parse device sent message error");break}case C.HsmMismatch:{o("WALogger").WARN(_||(_=babelHelpers.taggedTemplateLiteralLoose(["decryptE2EPayload: e2eType:"," error:",""])),l.e2eType,h).tags("messaging").sendLogs("handleMsg: hsm mismatch error");break}case C.BroadcastEphSettings:{o("WALogger").WARN(f||(f=babelHelpers.taggedTemplateLiteralLoose(["decryptE2EPayload: e2eType:"," error:",""])),l.e2eType,h).tags("messaging").sendLogs("handleMsg: failed to decrypt broadcast ephemeral settings");break}case C.Unknown:{o("WALogger").WARN(g||(g=babelHelpers.taggedTemplateLiteralLoose(["decryptE2EPayload: e2eType:"," error:",""])),l.e2eType,h).tags("messaging").sendLogs("handleMsg: parse decrypted message error");break}}}function x(e,t){var n=t.skMsgFailedEnc,r=t.pkOrMsgFailedEnc,a=n!=null?n:r;if(a!=null&&o("WAWebMessagingGatingUtils").isMessageDropPlaceholderEnabled()){var i=e.msgInfo.chat;if((i.isUser()||i.isGroup())&&!E(e,a)){var l=null;switch(a.errorType){case C.SignalRetryable:case C.SignalDuplicateMessage:case C.BroadcastEphSettings:case C.UnknownDevice:break;case C.DeviceSentMessage:case C.InvalidProtobuf:{l=o("WAWebCreateNackFromStanza").NackReason.InvalidProtobuf;break}case C.HsmMismatch:case C.Unknown:{l=o("WAWebCreateNackFromStanza").NackReason.ParsingError;break}}if(l!=null){var s=e.msgInfo.externalId;o("WALogger").WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["messageDrop: insert a debug placeholder for ",", reason: ",""])),s,a.errorType).tags("messaging"),o("WAWebHandleMsgProcess").processPlaceholderMsg({type:o("WAWebMsgType").MSG_TYPE.DEBUG_PLACEHOLDER,msgInfo:e.msgInfo,nackReason:l})}}}}function $(){if(!r("gkx")("26258")){var e,t=(e=n("cr:4122")==null?void 0:n("cr:4122").isNextMessageDropped())!=null?e:null;if(t==null)return;switch(o("WALogger").LOG(y||(y=babelHelpers.taggedTemplateLiteralLoose(["Dropping incoming message with "," error"])),t),t){case C.SignalRetryable:throw new(o("WAWebSignalCommonErrors")).SignalDecryptionError("errSignalErr");case C.SignalDuplicateMessage:throw new(o("WAWebSignalCommonErrors")).SignalDecryptionError("errDuplicateMsg");case C.InvalidProtobuf:throw new(o("WAWebHandleMsgError")).MessageValidationError("test",o("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON.INVALID_MESSAGE);case C.DeviceSentMessage:throw new(o("WAWebHandleMsgError")).DeviceSentMessageError(1,1);default:return}}}l.DecryptionErrorType=C,l.createDecryptionHandler=R}),98);
__d("WAWebMsgProcessingDecryptApi",["WALogger","WAWebAdvSignatureApi","WAWebBackendJobs.flow","WAWebHandleMsgTypes.flow","WAWebMsgProcessingApiUtils","WAWebMsgProcessingDecryptEnc","WAWebMsgProcessingDecryptionHandler","WAWebOfflineResumeMsgProcessReporter","WAWebPostE2eMessageRecvMetric","WAWebSendRetryReceiptJob","WAWebSignalProtocolStore","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u,c;function d(e,t){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=e.bizInfo,r=e.msgInfo,a=e.paymentInfo,i=e.deviceIdentity,l=e.encs,d=e.msgMeta,m=e.rcat,_=e.hsmInfo,f=e.msgBotInfo,g=e.reportingTokenInfo,h=o("WAWebMsgProcessingApiUtils").getFrom(r);if(p(l,r),r.author.device!=null&&r.author.device!==0){var y=yield o("WAWebAdvSignatureApi").validateADVwithEncs(r.author,i,l,!!r.offline);if(!y)return o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["decryptE2EPayload: msgId::",", validateADVIdentity failed"])),r.externalId).tags("messaging"),{result:o("WAWebHandleMsgTypes.flow").E2EProcessResult.RETRY,retryCount:l[0].retryCount,retryReason:o("WAWebSendRetryReceiptJob").RetryReason.AdvFailure}}var C=!1,b=o("WAWebMsgProcessingDecryptionHandler").createDecryptionHandler(e);for(var v of l)try{if(!b.canDecryptNext(v))continue;var S=o("WAWebOfflineResumeMsgProcessReporter").msgProcessReporter.startMarker(o("WAWebOfflineResumeMsgProcessReporter").msgProcessReporter.stage.Decryption),R=yield o("WAWebMsgProcessingDecryptEnc").decryptEnc(v,h,r.author,e);S==null||S(),o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["decryptE2EPayload: msgId::"," e2eType:"," done"])),r.externalId,v.e2eType).tags("messaging"),o("WAWebPostE2eMessageRecvMetric").postSuccessE2eMessageRecvMetric({enc:v,from:h,msgMeta:d,msgInfo:r,msgBotInfo:f,error:null});var L={retryCount:v.retryCount,e2eType:v.e2eType,encMediaType:v.encMediaType,hideFail:v.hideFail},E=yield t({decrypted:R,info:r,paymentInfo:a,e2eInfo:L,bizInfo:n,hsmInfo:_,msgMeta:d,rcat:m,msgBotInfo:f,reportingTokenInfo:g});E.hasInactiveMsg&&(C=!0),o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["processDecryptedProto: msgId::"," e2eType:"," done"])),r.externalId,v.e2eType).tags("messaging")}catch(e){b.handleError(v,e)}return yield o("WAWebSignalProtocolStore").getSignalProtocolStore().flushBufferToDiskIfNotMemOnlyMode(),b.getResult(C)}),m.apply(this,arguments)}function p(t,n){t.length===2&&t[0].e2eType===o("WAWebBackendJobs.flow").CiphertextType.Skmsg&&o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["decryptE2EPayload: msgId::"," skMsg is out of order"])),n.externalId).tags("messaging").sendLogs("handleMsg: invalid encs order",{sampling:.01})}l.decryptE2EPayload=d}),98);
__d("WAWebMessageProcessUtils",["WALogger","WANullthrows","WAWebApiChat","WAWebApiContact","WAWebCurrentUser","WAWebLid1X1MigrationGating","WAWebLidMigrationUtils","WAWebWidFactory","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g;function h(e){return y.apply(this,arguments)}function y(){return y=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.lid,n=e.lidOrigin;if(o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["selectChatForOneOnOneMessage input: ",", ",""])),t.toLogString(),n),o("WAWebLid1X1MigrationGating").Lid1X1MigrationUtils.isLidMigrated()){var r=yield b(t);return o("WAWebCurrentUser").isEmployee()&&o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["selectChatForOneOnOneMessage migrated output: ",", ",""])),r.accountLid,r.chatId),r}var a=C(t,n);return o("WAWebCurrentUser").isEmployee()&&o("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["selectChatForOneOnOneMessage pre-migrated output: ",", ",""])),a.accountLid,a.chatId),a}),y.apply(this,arguments)}function C(t,n){if(o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["select chat (unmigrated): select for ",""])),t.toLogString()),n==null){o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["select chat (unmigrated): this is a general Lid chat, return phone number"])));var a=r("WANullthrows")(o("WAWebApiContact").getPhoneNumber(t),"cannot select chat for incoming general Lid chat: no PN for Lid");return{chatId:a}}return o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["select chat (unmigrated): this is a non-general Lid chat, return Lid"]))),{chatId:t}}function b(e){return v.apply(this,arguments)}function v(){return v=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){o("WALogger").LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["select chat (migrated): select for lid ",""])),e.toLogString());var t=yield o("WAWebApiChat").getChatRecordByAccountLid(e);if(t.length>1)throw o("WALogger").LOG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["select chat (migrated): error: multiple chats for account_lid."]))),r("err")("selectChatForOneOnOneMessageAfterMigration: found multiple chats for unique index account_lid");if(t.length===1){var n=r("WANullthrows")(t[0].id,"chat id should never be null");return o("WALogger").LOG(f||(f=babelHelpers.taggedTemplateLiteralLoose(["select chat (migrated): found by account_lid. chat id: ",", lid ",""])),n.toString(),e.toLogString()),{accountLid:e,chatId:o("WAWebWidFactory").asUserWidOrThrow(o("WAWebWidFactory").createWid(n))}}return o("WALogger").LOG(g||(g=babelHelpers.taggedTemplateLiteralLoose(["select chat (migrated): assigning lid for new chat"]))),{accountLid:e,chatId:e}}),v.apply(this,arguments)}l.selectChatForOneOnOneMessage=h}),98);
__d("WAWebProcessPhoneNumberMapping",["Promise","WAArrayUtils","WALogger","WAWebApiContact","WAWebDBCreateLidPnMappings","WAWebHandleMsgTypes.flow","WAWebUpdateLidMetadataJob","WAWebUserPrefsMeUser","WAWebUsernameGatingUtils","WAWebWidFactory","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u;function c(e){var t=e.lid,n=e.data,r=e.shouldWaitForJob,o=e.processingResult;o.push({jobArgs:{lid:t,data:n},shouldWaitForJob:r})}function d(t){return t.preMatChat!=null?(o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[extractMapping] using preMatChat"]))),t.preMatChat):t.chat}function m(e,t){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n,r=[],a=e.recipientPn,i=e.author,l=e.peerRecipientPn,s=e.recipientLatestLid,u=d(e),m=o("WAWebWidFactory").asUserLidOrThrow(i);if(o("WAWebUserPrefsMeUser").isMeAccount(i)){var p=t==null?void 0:t.origin;if(a!=null)n={lid:o("WAWebWidFactory").asUserLidOrThrow(u),pn:o("WAWebWidFactory").asUserWidOrThrow(a),learningSource:"other"},c({lid:o("WAWebWidFactory").asUserLidOrThrow(u),data:{shareOwnPn:!1},shouldWaitForJob:!0,processingResult:r});else if(l!=null)s!=null?n={lid:o("WAWebWidFactory").asUserLidOrThrow(u),pn:l,latestLid:s,learningSource:"recipient-latest-lid"}:n={lid:o("WAWebWidFactory").asUserLidOrThrow(u),pn:l,learningSource:"peer-lid-message"};else{var _=yield o("WAWebApiContact").getContactRecord(u);(_==null||(_==null?void 0:_.shareOwnPn)!==!0)&&c({lid:o("WAWebWidFactory").asUserLidOrThrow(u),data:{shareOwnPn:!0},shouldWaitForJob:!1,processingResult:r})}if(p!=="ctwa"){var f=o("WAWebUsernameGatingUtils").usernameDisplayedEnabled()&&e.author.isLid()&&e.chat.isLid();l==null&&!f&&(n="missing-peer-recipient-pn")}return{mapping:n,lidMetadataUpdates:r}}var g=e.displayName;g!=null&&c({lid:m,data:{displayNameLID:g},shouldWaitForJob:!0,processingResult:r});var h=e.senderPn;return h!=null&&(n={lid:m,pn:o("WAWebWidFactory").asUserWidOrThrow(h),learningSource:"other"}),h==null&&c({lid:m,data:{shareOwnPn:!0},shouldWaitForJob:!0,processingResult:r}),{mapping:n,lidMetadataUpdates:r}}),p.apply(this,arguments)}function _(e){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,n=e.recipientLid,r=e.author,a=e.peerRecipientLid,i=e.recipientLatestLid,l=d(e);if(o("WAWebUserPrefsMeUser").isMeAccount(r)){var s=o("WAWebWidFactory").asUserWidOrThrow(l);n!=null?t={lid:n,pn:s,learningSource:"other"}:a!=null?i!=null?t={pn:s,lid:a,latestLid:i,learningSource:"recipient-latest-lid"}:t={lid:a,pn:s,learningSource:"peer-pn-message"}:t="missing-peer-recipient-lid"}var u=e.senderLid;return u!=null&&(t={lid:o("WAWebWidFactory").asUserLidOrThrow(u),pn:o("WAWebWidFactory").asUserWidOrThrow(r),learningSource:"other"}),{mapping:t,lidMetadataUpdates:[]}}),f.apply(this,arguments)}function g(e){return h.apply(this,arguments)}function h(){return h=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.msgInfo,n=e.msgMeta,r=t.author;return r.isLid()?m(t,n):_(t)}),h.apply(this,arguments)}function y(e){return C.apply(this,arguments)}function C(){return C=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.msgInfo,n=o("WAWebUsernameGatingUtils").usernameDisplayedEnabled()&&t.participantUsername!=null;if(!n&&t.chat.isGroup()&&t.author.isLid()&&!o("WAWebUserPrefsMeUser").isMeAccount(t.author)&&t.participantPn==null&&t.displayName==null&&o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[extractMappingsForGroupOrStatusBroadcastMessage] participantPn is missing for group message from LID author"]))),e.bclParticipant){e.msgInfo;var r=b(e.bclParticipant);return r==null?{lidMetadataUpdates:[]}:{mapping:r,lidMetadataUpdates:[]}}var a,i=[],l=t.participantPn,u=t.participantLid,d=t.author;l!=null?a={lid:o("WAWebWidFactory").asUserLidOrThrow(d),pn:l,learningSource:"other"}:u!=null&&!n&&(a={lid:u,pn:o("WAWebWidFactory").asUserWidOrThrow(d),learningSource:"other"});var m=t.displayName;return!o("WAWebUserPrefsMeUser").isMeAccount(d)&&m!=null&&c({lid:o("WAWebWidFactory").asUserLidOrThrow(d),data:{displayNameLID:m},shouldWaitForJob:!0,processingResult:i}),{mapping:a,lidMetadataUpdates:i}}),C.apply(this,arguments)}function b(e){var t=e.wid,n=e.recipientLatestLid;if(t.isLid()){var r=t,a=e.peerRecipientPn;if(a==null){var i=o("WAWebUsernameGatingUtils").usernameDisplayedEnabled();return i?null:"missing-peer-recipient-pn"}return n?{lid:r,latestLid:n,pn:a,learningSource:"recipient-latest-lid"}:{lid:r,pn:a,learningSource:"peer-lid-message"}}var l=e.peerRecipientLid,s=t;return l==null?"missing-peer-recipient-lid":n?{lid:l,latestLid:n,pn:s,learningSource:"recipient-latest-lid"}:{lid:l,pn:s,learningSource:"peer-pn-message"}}function v(e){var t=e.mapping,n=e.flushImmediately;return t.learningSource==="recipient-latest-lid"?o("WAWebDBCreateLidPnMappings").createLidPnMappings({mappings:[{lid:t.lid,pn:t.pn},{lid:t.latestLid,pn:t.pn}],flushImmediately:n,learningSource:"recipient-latest-lid"}):o("WAWebDBCreateLidPnMappings").createLidPnMappings({mappings:[{lid:t.lid,pn:t.pn}],flushImmediately:n,learningSource:t.learningSource})}function S(e){return R.apply(this,arguments)}function R(){return R=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.msgInfo.chat;return t.isUser()?g(e):t.isGroup()||t.isBroadcast()?y(e):{lidMetadataUpdates:[]}}),R.apply(this,arguments)}function L(e,t,n){return E.apply(this,arguments)}function E(){return E=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,r){if(e.type===o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.PEER_BROADCAST){var a=e.bclParticipants.map(function(n){return k({msgInfo:e,msgMeta:t,bclParticipant:n},r)}),i=yield(u||(u=n("Promise"))).all(a);return{type:"peer-broadcast",mappings:i}}return{type:"not-peer-broadcast",mapping:yield k({msgInfo:e,msgMeta:t},r)}}),E.apply(this,arguments)}function k(e,t){return I.apply(this,arguments)}function I(){return I=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n,r,a=yield S(e),i=a.mapping,l=a.lidMetadataUpdates,s=o("WAArrayUtils").groupByAndMap(l,function(e){return e.shouldWaitForJob?"waitForJob":"fireAndForget"},function(e){return e.jobArgs}),u=(n=s.get("waitForJob"))!=null?n:[],c=(r=s.get("fireAndForget"))!=null?r:[];return c.length>0&&o("WAWebUpdateLidMetadataJob").updateLidMetadataJob(c),u.length>0&&(yield o("WAWebUpdateLidMetadataJob").updateLidMetadataJob(u)),i!=null&&typeof i=="object"&&(yield v({mapping:i,flushImmediately:t})),i}),I.apply(this,arguments)}l.processPhoneNumberMappings=L}),98);
__d("WAWebProcessMsgInfoForLid",["Promise","WAJids","WALogger","WAWebApiContact","WAWebGetPlatformFromStanzaId","WAWebHandleMsgCommon","WAWebHandleMsgTypes.flow","WAWebLid1X1MigrationGating","WAWebLidMigrationUtils","WAWebLidStatusMigrationGating","WAWebLidStatusMigrationUtils","WAWebMessageProcessUtils","WAWebProcessPhoneNumberMapping","WAWebUsernameGatingUtils","WAWebWidFactory","WAWebWorkerSafeBackendApi","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m;function p(e){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=t.mapping,a=t.chatWid,i=t.msgMeta,l=t.msgInfo,d=null,m=i==null?void 0:i.origin,p=m==="ctwa";if(p){if(!a.isLid())throw r("err")("received ctwa message but remote id is not Lid");d=a}else if((i==null?void 0:i.targetSenderJid)!=null)d=o("WAWebLidMigrationUtils").toUserLidOrThrow(o("WAWebWidFactory").asUserWidOrThrow(l.chat));else if(n==null){var _=o("WAWebUsernameGatingUtils").usernameDisplayedEnabled(),f=_&&l.type===o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.CHAT&&l.author.isLid()&&a.isLid(),g=f&&l.username!=null,h=f&&l.username==null;if(g||h)d=o("WAWebLidMigrationUtils").toUserLidOrThrow(a);else if(_&&l.type===o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.PEER_BROADCAST&&a.isLid())d=o("WAWebLidMigrationUtils").toUserLidOrThrow(a);else throw o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["findDestinationChatForSingleMapping: missing pn-lid mapping in 1-1 message, sender: ",""])),o("WAWebGetPlatformFromStanzaId").getPlatformFromStanzaId(l.externalId)).sendLogs("misssing-pn-lid-mapping-in-1-1-message"),r("err")("findDestinationChatForSingleMapping: missing pn-lid mapping in 1-1 message")}else if(n==="missing-peer-recipient-pn"){var y;if(o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["findDestinationChatForSingleMapping: missing peer recipient pn in 1-1 message from device ",""])),(y=l.author.device)!=null?y:0).sendLogs("misssing-peer-recipient-pn-in-1-1-message"),a.isLid()&&o("WAWebApiContact").lidPnCache.getPhoneNumber(a)!=null&&(d=a),d==null){o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["findDestinationChatForSingleMapping: missing peer recipient pn and local mapping, processing message anyway"])));return}}else if(n==="missing-peer-recipient-lid"){if(o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["findDestinationChatForSingleMapping: missing peer recipient lid in 1-1 message"]))).sendLogs("misssing-peer-recipient-lid-in-1-1-message"),o("WAWebWorkerSafeBackendApi").workerSafeFireAndForget("syncContactListJob",{contactIds:[a],shouldSyncDevice:!1,mode:"query"}),d=o("WAWebApiContact").lidPnCache.getCurrentLid(a),d==null)throw r("err")("findDestinationChatForSingleMapping: missing peer recipient lid in 1-1 message")}else d=n.lid;var C=yield o("WAWebMessageProcessUtils").selectChatForOneOnOneMessage({lid:d,lidOrigin:m}),b=C.chatId;return b.isSameAccountAndAddressingMode(a)?{accountLid:C.accountLid}:{newRemote:b,accountLid:C.accountLid}}),_.apply(this,arguments)}function f(e){return g.apply(this,arguments)}function g(){return g=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.msgInfo,a=e.msgMeta,i=yield o("WAWebProcessPhoneNumberMapping").processPhoneNumberMappings(t,a,t.offline==null);if(t.category!==o("WAWebHandleMsgCommon").CATEGORY_PEER){if(t.type===o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.OTHER_STATUS){var l=o("WAWebWidFactory").asUserWidOrThrow(t.author),s=o("WAWebWidFactory").asUserWidOrThrow(o("WAWebLidStatusMigrationUtils").matWidConvert(l));if(!l.equals(s)){var u;o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["maybeProcesMsgInfoForLid: converting status message from "," to "," based on migration stage ",""])),t.author.toLogString(),s.toLogString(),o("WAWebLidStatusMigrationGating").getLidStatusMigrationStage()),t.author=o("WAWebWidFactory").createDeviceWidFromUserAndDevice(s.user,s.server,(u=t.author.device)!=null?u:o("WAJids").DEFAULT_DEVICE_ID)}return}var c=o("WAWebLid1X1MigrationGating").Lid1X1MigrationUtils.isLidMigrated()||t.author.isLid()||t.chat.isLid();if(c)if(t.type===o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.PEER_BROADCAST){if(i.type!=="peer-broadcast")throw r("err")("maybeProcesMsgInfoForLid: mappings type is not the expected peer-broadcast");i.type;var _=i.mappings.map((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,n){var r=t.bclParticipants[n],i=yield p({msgInfo:t,msgMeta:a,mapping:e,chatWid:r.wid});(i==null?void 0:i.newRemote)!=null&&(r.preMatWid=r.wid,r.wid=o("WAWebWidFactory").asUserWidOrThrow(i.newRemote))});return function(t,n){return e.apply(this,arguments)}})());yield(m||(m=n("Promise"))).all(_)}else{if(i.type!=="not-peer-broadcast")throw r("err")("maybeProcesMsgInfoForLid: mappings type is not the expected not-peer-broadcast");i.type;var f=t.type===o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.OTHER_BROADCAST,g=f?t.author:t.chat;if(!g.isRegularUser())return;var h=yield p({msgInfo:t,msgMeta:a,mapping:i.mapping,chatWid:g});if(h==null)return;var y=h.accountLid,C=h.newRemote;if(y!=null&&(t.accountLid=y),C==null)return;f?(t.preMatChat=t.author,t.author=C):(t.preMatChat=g,t.chat=C)}}}),g.apply(this,arguments)}l.maybeProcesMsgInfoForLid=f}),98);
__d("WAWebHandleMsg",["Promise","WALogger","WAParsableWapNode","WATimeUtils","WAWebCreateNackFromStanza","WAWebDBReportingTokenUtils","WAWebGetMessageCache","WAWebHandleMsgCommon","WAWebHandleMsgMetaUtils","WAWebHandleMsgParser","WAWebHandleMsgProcess","WAWebHandleMsgSendReceipt","WAWebHandleMsgTypes.flow","WAWebMaybePostOfflineCountTooHighMetric","WAWebMessageDedupUtils","WAWebMessageInsertDebugPlaceholder","WAWebMessageQueue","WAWebMsgProcessingApiUtils","WAWebMsgProcessingDecryptApi","WAWebMsgType","WAWebOfflineHandler","WAWebPostIncomingMessageDropMetric","WAWebPostUnknownStanzaMetric","WAWebProcessMsgInfoForLid","WAWebSetUsernameJob","WAWebUsernameGatingUtils","WAWebWidFactory","asyncToGeneratorRuntime","cr:4122","gkx"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g,h,y;function C(e){return b.apply(this,arguments)}function b(){return b=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var a=o("WAWebHandleMsgParser").incomingMsgParser.parse(t);if(a.error){var i;r("gkx")("26258")?o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["handleMsg: error while parsing message stanza"]))).tags("messaging"):o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["handleMsg: error while parsing message stanza: ",", node: ",""])),a.error,t.toString()).tags("messaging"),o("WAWebPostUnknownStanzaMetric").postUnknownStanzaMetric(t);var l=o("WAWebHandleMsgParser").incomingMsgParserForAckOnly.parse(t);if(l.error)return l.error instanceof o("WAParsableWapNode").XmppParsingFailure?o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["failedParsingMessage: ",""])),l.error).tags("messaging").sendLogs("failedParsing: ack not parsed XMPP",{sampling:.01}):o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["failedParsingMessage:"]))).tags("messaging").sendLogs("failedParsing: ack not parsed",{sampling:.01}),o("WAWebPostIncomingMessageDropMetric").postIncomingMessageDropInvalidStanza(t),(y||(y=n("Promise"))).resolve(o("WAWebCreateNackFromStanza").createNackFromStanza(t,o("WAWebCreateNackFromStanza").NackReason.ParsingError));var b=l.success,S=b.type,R=b.externalId,L=b.msgInfo,E=b.offline,k=o("WAWebCreateNackFromStanza").NackReason.ParsingError;return S==null?(k=o("WAWebCreateNackFromStanza").NackReason.UnrecognizedStanzaType,o("WAWebPostIncomingMessageDropMetric").postIncomingMessageDropUnknownMessageType(t)):a.error instanceof o("WAParsableWapNode").XmppParsingFailure&&((i=a.error)==null?void 0:i.reason)===""+o("WAWebCreateNackFromStanza").NackReason.InvalidHostedCompanionStanza?(k=o("WAWebCreateNackFromStanza").NackReason.InvalidHostedCompanionStanza,o("WAWebPostIncomingMessageDropMetric").postIncomingMessageDropInvalidHostedCompanionStanza(t)):o("WAWebPostIncomingMessageDropMetric").postIncomingMessageDropInvalidStanza(t),o("WAWebMessageInsertDebugPlaceholder").maybeInsertDebugPlaceholder({externalId:R,nackReason:k,msgInfo:L,offline:E}),a.error instanceof o("WAParsableWapNode").XmppParsingFailure?o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["failedParsingMessage: "," ",""])),R,a.error).tags("messaging").sendLogs("failedParsing: ack parsed XMPP",{sampling:.01}):o("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["failedParsingMessage: ",""])),R).tags("messaging").sendLogs("failedParsing: ack parsed",{sampling:.01}),(y||(y=n("Promise"))).resolve(o("WAWebCreateNackFromStanza").createNackFromStanza(t,k))}var I=a.success;o("WAWebMaybePostOfflineCountTooHighMetric").maybePostOfflineCountTooHigh(I);var T=I.msgMeta,D=I.msgInfo,x=I.msgBotInfo,$=I.encs,P=o("WAWebMsgProcessingApiUtils").messageInfoToKey(D);D.clientReceivedTsMillis=o("WATimeUtils").unixTimeMs(),D.offline!=null&&(o("WAWebOfflineHandler").OfflineMessageHandler.addOfflinePendingMessage(),o("WAWebOfflineHandler").OfflineMessageHandler.offlineStanzaReceivedAfterComplete());var N=1;return o("WAWebMessageDedupUtils").isPengingMessageCacheEnabled()&&(N=o("WAWebMessageDedupUtils").addPendingMessage(P,D.ts,$)),o("WAWebOfflineHandler").OfflineMessageHandler.isResumeFromRestartComplete()&&delete I.msgInfo.offline,n("cr:4122")!=null&&n("cr:4122").isNextMessagePostponed(t,C)?(o("WAWebHandleMsgSendReceipt").sendReceipt(I.msgInfo,I.msgMeta,{result:o("WAWebHandleMsgTypes.flow").E2EProcessResult.SUCCESS}),null):o("WAWebMessageQueue").onMessageQueue({chatWid:D.chat,isOffline:!!I.msgInfo.offline,msgCategory:D.category,action:(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e;if(o("WALogger").LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["handleMessage: chat::"," msgId::",', start processing message, offline="','"'])),D.chat.toLogString(),D.externalId,(e=D.offline)!=null?e:"").tags("messaging"),D.msgProcessStartTsMillis=o("WATimeUtils").unixTimeMs(),yield o("WAWebProcessMsgInfoForLid").maybeProcesMsgInfoForLid({msgInfo:D,msgMeta:T}),o("WAWebUsernameGatingUtils").usernameDisplayedEnabled()){var t=[];if(D.type===o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.GROUP){var n=o("WAWebSetUsernameJob").maybeCreateSetUsernameInfoJobArg({userId:o("WAWebWidFactory").asUserWidOrThrow(D.author),username:D.participantUsername});n&&t.push(n)}else if(D.type===o("WAWebHandleMsgTypes.flow").MESSAGE_TYPE.PEER_BROADCAST)D.bclParticipants.forEach(function(e){var n,r=o("WAWebSetUsernameJob").maybeCreateSetUsernameInfoJobArg({userId:o("WAWebWidFactory").asUserWidOrThrow((n=e.peerRecipientLid)!=null?n:e.wid),username:e.peerRecipientUsername});r&&t.push(r)});else{var r=o("WAWebSetUsernameJob").maybeCreateSetUsernameInfoJobArg({userId:o("WAWebWidFactory").asUserWidOrThrow(D.author),username:D.username,usernameCountryCode:D.senderCountryCode});r&&t.push(r);var a;D.peerRecipientLid?a=o("WAWebWidFactory").asUserWidOrThrow(D.peerRecipientLid):D.chat.isLid()&&(a=o("WAWebWidFactory").asUserWidOrThrow(D.chat));var i=o("WAWebSetUsernameJob").maybeCreateSetUsernameInfoJobArg({userId:a,username:D.peerRecipientUsername});i&&t.push(i)}t.length>0&&(yield o("WAWebSetUsernameJob").setUsernamesJob(t))}var l=o("WAWebMsgProcessingApiUtils").messageInfoToKey(D);if(T.isUnavailable){o("WAWebDBReportingTokenUtils").maybeStoreReportingTag({msgKey:l,stanzaId:D.externalId,msgTs:D.ts,incomingMsgReportingTokenInfo:I.reportingTokenInfo}),o("WALogger").LOG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["handleMessage: msgId::",", get fanout placeholder"])),D.externalId).tags("messaging");var s=o("WAWebHandleMsgTypes.flow").PlaceholderType.FANOUT;return x!=null?(o("WALogger").DEV(f||(f=babelHelpers.taggedTemplateLiteralLoose(["setting fanout placeholder type to bot fanout future proofing"]))),s=o("WAWebHandleMsgTypes.flow").PlaceholderType.BOT_UNAVAILABLE_FANOUT):T.isHostedMsgUnavailable===!0?(o("WALogger").DEV(g||(g=babelHelpers.taggedTemplateLiteralLoose(["setting fanout placeholder type to hosted fanout"]))),s=o("WAWebHandleMsgTypes.flow").PlaceholderType.HOSTED_UNAVAILABLE_FANOUT):T.isViewOnceUnavailable===!0&&(o("WALogger").DEV(h||(h=babelHelpers.taggedTemplateLiteralLoose(["setting fanout placeholder type to view once"]))),s=o("WAWebHandleMsgTypes.flow").PlaceholderType.VIEW_ONCE_UNAVAILABLE_FANOUT),yield o("WAWebHandleMsgProcess").processPlaceholderMsg({type:o("WAWebMsgType").MSG_TYPE.CIPHERTEXT,msgMeta:T,msgInfo:D,placeholderType:s}),o("WAWebHandleMsgSendReceipt").sendReceipt(D,T,{result:o("WAWebHandleMsgTypes.flow").E2EProcessResult.BACKFILL}),null}var u=yield o("WAWebMsgProcessingDecryptApi").decryptE2EPayload(I,o("WAWebHandleMsgProcess").processDecryptedMessageProto);return D.offline!=null&&o("WAWebOfflineHandler").OfflineMessageHandler.processMessageDecryptResult(u.result),u.result!==o("WAWebHandleMsgTypes.flow").E2EProcessResult.SUCCESS&&o("WAWebDBReportingTokenUtils").maybeStoreReportingTag({msgKey:l,stanzaId:D.externalId,msgTs:D.ts,incomingMsgReportingTokenInfo:I.reportingTokenInfo}),u.result===o("WAWebHandleMsgTypes.flow").E2EProcessResult.SIGNAL_OLD_COUNTER_ERROR&&v(I)?o("WAWebGetMessageCache").getMessageCache().addMessages([{duplicateMsgReceiptInfo:{externalId:D.externalId,from:o("WAWebMsgProcessingApiUtils").getFrom(D),author:D.author,msgInfo:D,msgMeta:T,enc:u.failedEnc||$[0],hasHideFailEnc:$.some(function(e){return e.hideFail}),msgReceivedTimes:N}}],D.offline==null):D.offline==null||D.category===o("WAWebHandleMsgCommon").CATEGORY_PEER||T.type===o("WAWebHandleMsgCommon").STANZA_MSG_TYPES.medianotify||u.result!==o("WAWebHandleMsgTypes.flow").E2EProcessResult.SUCCESS&&u.result!==o("WAWebHandleMsgTypes.flow").E2EProcessResult.SIGNAL_OLD_COUNTER_ERROR?o("WAWebHandleMsgSendReceipt").sendReceipt(D,T,u):o("WAWebGetMessageCache").getMessageCache().addMessages([{receiptInfo:{externalId:D.externalId,from:o("WAWebMsgProcessingApiUtils").getFrom(D),author:D.author}}],!1),null});function t(){return e.apply(this,arguments)}return t})()})}),b.apply(this,arguments)}function v(e){var t=e.msgMeta,n=e.encs,r=n.some(function(e){return e.hideFail});return r?o("WAWebHandleMsgMetaUtils").isReactionMsgMeta(t)||o("WAWebHandleMsgMetaUtils").isPollVoteMsgMeta(t):t.type===o("WAWebHandleMsgCommon").STANZA_MSG_TYPES.text||t.type===o("WAWebHandleMsgCommon").STANZA_MSG_TYPES.media||t.type===o("WAWebHandleMsgCommon").STANZA_MSG_TYPES.medianotify||t.type===o("WAWebHandleMsgCommon").STANZA_MSG_TYPES.poll}l.default=C}),98);
__d("WAWebHandleMsgReceiptParser",["WADeprecatedWapParser","WALogger","WAWebAck","WAWebHandleMsgTypes.flow","WAWebJidToWid","WAWebUserPrefsMeUser"],(function(t,n,r,o,a,i,l){var e,s,u={delivery:(s=o("WAWebAck")).ACK.RECEIVED,read:s.ACK.READ,played:s.ACK.PLAYED,inactive:s.ACK.INACTIVE,"server-error":s.ACK.CONTENT_GONE,sender:s.ACK.RECEIVED,"read-self":s.ACK.READ,"played-self":s.ACK.PLAYED,peer_msg:s.ACK.PEER},c=new(r("WADeprecatedWapParser"))("incomingMsgReceiptParser",function(e){e.assertTag("receipt"),e.hasAttr("to")&&e.assertAttr("to",o("WAWebUserPrefsMeUser").getMeDevicePnOrThrow().toJid());var t=e.hasAttr("type")?e.attrEnumOrNullIfUnknown("type",u):o("WAWebAck").ACK.RECEIVED,n={stanzaId:e.attrString("id"),from:o("WAWebJidToWid").jidWithTypeToWid(e.attrJidWithType("from")),offline:e.maybeAttrString("offline")},r=babelHelpers.extends({},n,{ack:t!=null?t:o("WAWebAck").ACK.RECEIVED,ackString:e.maybeAttrString("type")}),a=e.maybeChild("error");a!=null&&a.hasAttr("reason")&&a.attrString("reason")==="lid"&&a.attrString("type")==="feature-incapable"&&(r.ack=o("WAWebAck").ACK.SENT);var i=e.maybeChild("participants");if(i==null)return p(r,e);var l=i.hasAttr("message_id");return l?m(n,i):d(r,i)});function d(e,t){var n=t.mapChildrenWithTag("user",function(e){try{var t=o("WAWebJidToWid").deviceJidToDeviceWid(e.attrDeviceJid("jid")),n=e.attrTime("t");return{participant:t,ts:n}}catch(e){return null}}),r=n.filter(Boolean);return babelHelpers.extends({},e,{type:"aggregated_by_type",externalId:t.attrString("key"),receipts:r})}function m(t,n){var r=[];return n.forEachChildWithTag("user",function(t){try{var n=o("WAWebJidToWid").deviceJidToDeviceWid(t.attrDeviceJid("jid")),a=t.attrTime("t"),i=t.maybeAttrString("type"),l=t.attrEnumOrDefault("type",u,o("WAWebAck").ACK.RECEIVED);r.push({participant:n,ack:l,ackString:i,ts:a})}catch(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["parseAggregateByMessageReceipt: failed: ",""])),t).sendLogs("failed-to-parse-aggregeated-by-message-receipt",{sampling:.001})}}),babelHelpers.extends({},t,{type:"aggregated_by_message",externalId:n.attrString("message_id"),receipts:r})}function p(e,t){var n=t.hasAttr("participant")?o("WAWebJidToWid").deviceJidToDeviceWid(t.attrDeviceJid("participant")):null,r=t.hasAttr("recipient")?o("WAWebJidToWid").userJidToUserWid(t.attrUserJid("recipient")):null,a=t.maybeAttrString("type")==="view",i;t.hasChild("list")?i=t.child("list").mapChildrenWithTag("item",function(e){return a?e.attrString("server_id"):e.attrString("id")}):i=[];var l;if(t.hasChild("biz")){var s=t.child("biz"),u=o("WAWebHandleMsgTypes.flow").ActualActorsEnumType.cast(s.maybeAttrInt("actual_actors")),c=o("WAWebHandleMsgTypes.flow").HostStorageEnumType.cast(s.maybeAttrInt("host_storage")),d=s.maybeAttrInt("privacy_mode_ts");u!=null&&c!=null&&d!=null&&(l={actualActors:u,hostStorage:c,privacyModeTs:d})}a||i.push(e.stanzaId);var m=!1;return n!=null&&n.isBot()&&t.hasAttr("is_lid")&&(m=t.attrString("is_lid")==="true"),babelHelpers.extends({},e,{type:"simple",externalIds:i,participant:n,recipient:r,ts:t.attrTime("t"),biz:l,isLidBot:m})}l.RECEIPT_TYPES_TO_ACK=u,l.msgReceiptParser=c}),98);
__d("WAWebWamEnumReceiptAggregationType",[],(function(t,n,r,o,a,i){var e=Object.freeze({NONE:0,MULTI_MESSAGES:1,MULTI_PARTICIPANTS:2,AGGREGATE_BY_ID:3});i.RECEIPT_AGGREGATION_TYPE=e}),66);
__d("WAWebWamEnumReceiptStanzaStage",[],(function(t,n,r,o,a,i){var e=Object.freeze({OVERALL:0,WAITING_IN_E2E_QUEUE:6,WAITING_IN_UNORDERED_QUEUE:7,PARSE:1,WAITING_TO_PROCESS:2,PROCESS:3,WAITING_TO_ACK:5,ACK:4});i.RECEIPT_STANZA_STAGE=e}),66);
__d("WAWebReceiptStanzaReceiveWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumMediaType","WAWebWamEnumMessageType","WAWebWamEnumReceiptAggregationType","WAWebWamEnumReceiptStanzaStage"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({ReceiptStanzaReceive:[2496,{dbReadsCount:[12,e.TYPES.INTEGER],dbWritesCount:[13,e.TYPES.INTEGER],mediaType:[2,o("WAWebWamEnumMediaType").MEDIA_TYPE],messageType:[10,o("WAWebWamEnumMessageType").MESSAGE_TYPE],processingDeferred:[14,e.TYPES.BOOLEAN],receiptAggregation:[11,o("WAWebWamEnumReceiptAggregationType").RECEIPT_AGGREGATION_TYPE],receiptStanzaDuration:[1,e.TYPES.TIMER],receiptStanzaHasOrphaned:[6,e.TYPES.BOOLEAN],receiptStanzaOfflineCount:[3,e.TYPES.INTEGER],receiptStanzaProcessedCount:[8,e.TYPES.INTEGER],receiptStanzaRetryVer:[5,e.TYPES.INTEGER],receiptStanzaStage:[9,o("WAWebWamEnumReceiptStanzaStage").RECEIPT_STANZA_STAGE],receiptStanzaTotalCount:[7,e.TYPES.INTEGER],receiptStanzaType:[4,e.TYPES.STRING],stanzaBatchSize:[15,e.TYPES.INTEGER],stanzaProcessCount:[16,e.TYPES.INTEGER]},[1,1e3,2e3],"regular"]},{ReceiptStanzaReceive:[]});l.ReceiptStanzaReceiveWamEvent=s}),98);
__d("WAWebCreateReceiptStanzaReceiveMetric",["WAWebAck","WAWebHandleMsgReceiptParser","WAWebReceiptStanzaReceiveWamEvent","WAWebWamEnumMessageType","WAWebWamEnumReceiptStanzaStage","WAWebWid"],(function(t,n,r,o,a,i,l){function e(){var e=new(o("WAWebReceiptStanzaReceiveWamEvent")).ReceiptStanzaReceiveWamEvent({receiptStanzaStage:o("WAWebWamEnumReceiptStanzaStage").RECEIPT_STANZA_STAGE.OVERALL,receiptStanzaTotalCount:1});return function(t){var n=t.ackString,r=t.from,a=t.offline,i=t.receipts;if(e.messageType=s(r),a!=null){var l=parseInt(a,10);Number.isNaN(l)||(e.receiptStanzaOfflineCount=l)}n==null?e.receiptStanzaType=o("WAWebAck").ACK_STRING.DELIVERY:o("WAWebHandleMsgReceiptParser").RECEIPT_TYPES_TO_ACK[n]!=null&&(e.receiptStanzaType=n),(i==null?void 0:i.length)!=null&&(e.receiptStanzaTotalCount=i.length),e.markReceiptStanzaDuration(),e.commit()}}function s(e){return r("WAWebWid").isStatus(e)?o("WAWebWamEnumMessageType").MESSAGE_TYPE.STATUS:r("WAWebWid").isGroup(e)?o("WAWebWamEnumMessageType").MESSAGE_TYPE.GROUP:r("WAWebWid").isBroadcast(e)?o("WAWebWamEnumMessageType").MESSAGE_TYPE.BROADCAST:r("WAWebWid").isNewsletter(e)?o("WAWebWamEnumMessageType").MESSAGE_TYPE.CHANNEL:o("WAWebWamEnumMessageType").MESSAGE_TYPE.INDIVIDUAL}l.createReceiptStanzaReceiveMetric=e}),98);
__d("WAWebHandleAckPeerSimpleReceipt",["WAWebApiPeerMessageStore","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(e){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){yield o("WAWebApiPeerMessageStore").deletePeerMessage(e.stanzaId)}),s.apply(this,arguments)}l.handleAckPeerSimpleReceipt=e}),98);
__d("WAWebHandleBotInvokeMsgReceipt",["WALogger","WAWebAck","WAWebMessageReceiptBatcher","WAWebMsgKey","WAWebOfflineHandler","WAWebOrchestratorNonPersistedJob","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){var e;function s(e){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=t.ack,a=t.from,i=t.externalIds,l=t.ts,s=t.ackString,u=t.recipient,c=t.offline,d=c!=null&&!o("WAWebOfflineHandler").OfflineMessageHandler.isResumeFromRestartComplete();if(s!==o("WAWebAck").ACK_STRING.READ||u==null||!a.isBot())throw r("err")("handleBotOneToOneInvokeSimpleReadReceipt: unexpected receipt");var m=i.map(function(e){return new(r("WAWebMsgKey"))({id:e,remote:u,fromMe:!0})}),p=m.map(function(e){return e.toString()});o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[unify][batcher] adding receipt ",""])),p.join(","));var _=o("WAWebMessageReceiptBatcher").receiptBatcher.acceptOtherReceipt({ack:n,ts:l,receiverId:a,msgKeys:p,isBotInvoke:!0});return d||(yield o("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("receiptBatcherRunActiveBatches",function(){return o("WAWebMessageReceiptBatcher").receiptBatcher.runActiveBatches()}).waitUntilCompleted()),_}),u.apply(this,arguments)}l.handleBotOneToOneInvokeSimpleReadReceipt=s}),98);
__d("WAWebHandleMsgReceiptUtils",["WAWebAck"],(function(t,n,r,o,a,i,l){function e(e){return e===o("WAWebAck").ACK_STRING.READ||e===o("WAWebAck").ACK_STRING.READ_SELF||e===o("WAWebAck").ACK_STRING.PLAYED||e===o("WAWebAck").ACK_STRING.PLAYED_SELF}function s(e){return e.receipts.map(function(t){return{type:"simple",stanzaId:e.externalId,externalIds:[e.externalId],from:e.from,participant:t.participant,recipient:null,ts:t.ts,ack:e.ack,ackString:e.ackString,offline:e.offline,biz:null,isLidBot:!1}})}function u(e){return e.receipts.map(function(t){return{type:"simple",stanzaId:e.externalId,externalIds:[e.externalId],from:e.from,participant:t.participant,recipient:null,ts:t.ts,ack:t.ack,ackString:t.ackString,offline:e.offline,biz:null,isLidBot:!1}})}l.isReadOrPlayedReceipt=e,l.deaggregateGroupedByTypeReceipt=s,l.deaggregateGroupedByMessageReceipt=u}),98);
__d("WAWebHandleDirectChatReceipt",["Promise","WAJids","WALogger","WAWebAck","WAWebHandleMsgReceiptCommon","WAWebHandleMsgReceiptUtils","WAWebMessageReceiptBatcher","WAWebMsgKey","WAWebOfflineHandler","WAWebSimpleSignalPNToFBIDMigration","WAWebUserPrefsIndexedDBStorage","WAWebUserPrefsKeys","WAWebUserPrefsMeUser","WAWebWid","WAWebWidFactory","asyncToGeneratorRuntime","err","gkx"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m;function p(e){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var a=t.from,i=t.externalIds,l=t.ts,p=t.recipient,_=t.ackString,f=t.offline,g=t.biz,h=t.ack,y=_===o("WAWebAck").ACK_STRING.SENDER,C=!y&&o("WAWebUserPrefsMeUser").isMeAccount(a),b;if(C||y){if(!p)throw r("gkx")("26258")?o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["error: invalid sender/peer receipt without recipient"]))):o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["error: invalid sender/peer receipt without recipient"]))).sendLogs("handleChatSimpleReceipt: failed"),r("err")("handleChatSimpleReceipt: invalid sender/peer receipt without recipient");b=p}else{var v;b=o("WAWebWidFactory").asUserWidOrThrow(a);var S=((v=o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(o("WAWebUserPrefsKeys").HASHED_KEYS.USER_PRIVACY_SETTINGS))==null?void 0:v.readReceipts)==="none";S&&(h===o("WAWebAck").ACK.READ||h===o("WAWebAck").ACK.PLAYED)&&(h=o("WAWebAck").ACK.RECEIVED)}var R=o("WAWebSimpleSignalPNToFBIDMigration").getDeprecatedPnChatForFbidThread(b);R!=null&&(o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["handleChatSimpleReceipt: forwarding "," to ",""])),b.toLogString(),R.toLogString()),b=o("WAWebWidFactory").asUserWidOrThrow(R));var L;b!=null&&r("WAWebWid").isWid(b)&&b===o("WAWebWidFactory").createWid(o("WAJids").PSA_JID)&&(L=o("WAWebWidFactory").createWid(o("WAJids").PSA_JID));var E=i.map(function(e){return new(r("WAWebMsgKey"))({id:e,remote:b,fromMe:!C,participant:L})});C&&h===o("WAWebAck").ACK.PLAYED&&o("WAWebHandleMsgReceiptCommon").handleViewOnceOpenedIfNecessary(E);var k=E.map(function(e){return e.toString()});f!=null&&o("WAWebOfflineHandler").OfflineMessageHandler.offlineStanzaReceivedAfterComplete();var I=f!=null&&!o("WAWebOfflineHandler").OfflineMessageHandler.isResumeFromRestartComplete(),T=(m||(m=n("Promise"))).resolve();return C?p!=null&&o("WAWebHandleMsgReceiptUtils").isReadOrPlayedReceipt(_)&&i.length>0&&(o("WALogger").DEV(d||(d=babelHelpers.taggedTemplateLiteralLoose(["[unify][batcher] adding peer receipt ",""])),k.join(",")),T=o("WAWebMessageReceiptBatcher").receiptBatcher.acceptPeerReceipt({ack:h,ts:l,msgKeys:k,isOffline:I,remote:b})):(o("WALogger").DEV(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[unify][batcher] adding receipt ",""])),k.join(",")),T=o("WAWebMessageReceiptBatcher").receiptBatcher.acceptOtherReceipt({ack:h,ts:l,receiverId:a,msgKeys:k,privacyMode:g,isSender:y})),I||o("WAWebMessageReceiptBatcher").receiptBatcher.runActiveBatches(),T}),_.apply(this,arguments)}l.handleChatSimpleReceipt=p}),98);
__d("WAWebHandleGroupChatReceipt",["WALogger","WAWebAck","WAWebHandleMsgReceiptCommon","WAWebHandleMsgReceiptUtils","WAWebMessageReceiptBatcher","WAWebMsgKey","WAWebOfflineHandler","WAWebOrchestratorNonPersistedJob","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime","err","gkx"],(function(t,n,r,o,a,i,l){var e,s,u,c,d;function m(e){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=t.ack,a=t.from,i=t.externalIds,l=t.ts,m=t.ackString,p=t.participant,_=t.recipient,f=t.offline,g=t.isLidBot;if(!p)throw o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["error: got group ack without participant."]))).sendLogs("handleGroupSimpleReceipt: failed"),r("err")("handleGroupSimpleReceipt: got group ack without participant.");var h=o("WAWebWidFactory").asUserWidOrThrow(p),y=m===o("WAWebAck").ACK_STRING.SENDER,C=!y&&o("WAWebUserPrefsMeUser").isMeAccount(h),b;if(C){if(!_)throw r("gkx")("26258")?o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["error: invalid sender/peer receipt without recipient"]))):o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["error: invalid sender/peer receipt without recipient"]))).sendLogs("handleGroupSimpleReceipt: failed"),r("err")("handleGroupSimpleReceipt: invalid sender/peer receipt without recipient");b=_}else b=h.isLid()||g?o("WAWebUserPrefsMeUser").getMeLidUserOrThrow():o("WAWebUserPrefsMeUser").getMePnUserOrThrow();var v=i.map(function(e){return new(r("WAWebMsgKey"))({id:e,remote:a,fromMe:!C,participant:b})});C&&n===o("WAWebAck").ACK.PLAYED&&o("WAWebHandleMsgReceiptCommon").handleViewOnceOpenedIfNecessary(v);var S=v.map(function(e){return e.toString()});f!=null&&o("WAWebOfflineHandler").OfflineMessageHandler.offlineStanzaReceivedAfterComplete();var R=f!=null&&!o("WAWebOfflineHandler").OfflineMessageHandler.isResumeFromRestartComplete(),L;return C?_!=null&&o("WAWebHandleMsgReceiptUtils").isReadOrPlayedReceipt(m)&&i.length>0&&(o("WALogger").DEV(d||(d=babelHelpers.taggedTemplateLiteralLoose(["[unify][batcher] adding peer receipt ",""])),S.join(",")),L=o("WAWebMessageReceiptBatcher").receiptBatcher.acceptPeerReceipt({isOffline:R,ack:n,ts:l,msgKeys:S,remote:a})):(o("WALogger").DEV(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[unify][batcher] adding receipt ",""])),S.join(",")),L=o("WAWebMessageReceiptBatcher").receiptBatcher.acceptOtherReceipt({ack:n,ts:l,receiverId:p,msgKeys:S})),R||(yield o("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("receiptBatcherRunActiveBatches",function(){return o("WAWebMessageReceiptBatcher").receiptBatcher.runActiveBatches()}).waitUntilCompleted()),L}),p.apply(this,arguments)}l.handleGroupSimpleReceipt=m}),98);
__d("WAWebHandleNewsletterReceipt",["WAAckLevel","WALogger","WAWebAck","WAWebHandleMsgReceiptCommon","WAWebMessageReceiptBatcher","WAWebMsgKey","WAWebOfflineHandler","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){var e,s,u,c;function d(e){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=t.ack,a=t.from,i=t.externalIds,l=t.ts,d=t.ackString,m=t.participant,p=t.offline,_=t.stanzaId,f="[receipt][newsletter]["+_+"]";if(o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose([""," handling newsletter receipt"])),f).devConsole(t),d==="view")return o("WAWebHandleMsgReceiptCommon").updateMsgViewed(i.map(function(e){return parseInt(e,10)}),a);if(n!==o("WAAckLevel").ACK.READ&&n!==o("WAAckLevel").ACK.PLAYED)throw o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose([""," ACK should be READ or PLAYED, "," received instead"])),f,n),r("err")("handleNewsletterSimpleReceipt: only READ/PLAYED ack for newsletters");var g=(d===o("WAWebAck").ACK_STRING.READ_SELF||d===o("WAWebAck").ACK_STRING.PLAYED_SELF)&&m!=null&&o("WAWebWidFactory").asUserWidOrThrow(m).equals(o("WAWebUserPrefsMeUser").getMePnUserOrThrow());if(!g)throw o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose([""," only peer receipts are accepted"])),f).devConsole(m),r("err")("handleNewsletterSimpleReceipt: only peer receipts for newsletters");var h=i.map(function(e){return new(r("WAWebMsgKey"))({id:e,remote:a,fromMe:!1})}),y=h.map(function(e){return e.toString()});p!=null&&o("WAWebOfflineHandler").OfflineMessageHandler.offlineStanzaReceivedAfterComplete();var C=p!=null&&!o("WAWebOfflineHandler").OfflineMessageHandler.isResumeFromRestartComplete(),b=o("WAWebMessageReceiptBatcher").receiptBatcher.acceptPeerReceipt({isOffline:C,ack:n,ts:l,remote:a,msgKeys:y});return C||(o("WALogger").DEV(c||(c=babelHelpers.taggedTemplateLiteralLoose(["","  online, updating the UI"])),f),yield o("WAWebMessageReceiptBatcher").receiptBatcher.runActiveBatches()),b}),m.apply(this,arguments)}l.handleNewsletterSimpleReceipt=d}),98);
__d("WAWebHandleStatusReceipt",["Promise","WAJids","WALogger","WAWebAck","WAWebMessageReceiptBatcher","WAWebMsgKey","WAWebOfflineHandler","WAWebUserPrefsIndexedDBStorage","WAWebUserPrefsKeys","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u,c;function d(e){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var a,i=t.externalIds,l=t.ts,d=t.ackString,m=t.ack,p=t.participant,_=t.recipient,f=t.offline,g=i[0];if(!p){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["error: got status ack without participant"]))).sendLogs("handleStatusSimpleReceipt: failed");return}var h=o("WAWebUserPrefsMeUser").getMePnUserOrThrow(),y=o("WAWebWidFactory").asUserWidOrThrow(p),C=o("WAWebUserPrefsMeUser").isMeAccount(y),b=((a=o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.get(o("WAWebUserPrefsKeys").HASHED_KEYS.USER_PRIVACY_SETTINGS))==null?void 0:a.readReceipts)==="none";if(!(!C&&(b||d!==o("WAWebAck").ACK_STRING.READ))){var v=o("WAWebWidFactory").createWid(o("WAJids").STATUS_JID),S=new(r("WAWebMsgKey"))({id:g,remote:v,fromMe:!C,participant:_!=null?_:h}),R=[S.toString()],L=f!=null&&!o("WAWebOfflineHandler").OfflineMessageHandler.isResumeFromRestartComplete(),E=(c||(c=n("Promise"))).resolve();return C?(o("WALogger").DEV(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[unify][batcher] adding (",") status peer receipt ",""])),L?"offline":"online",R.join(",")),E=o("WAWebMessageReceiptBatcher").receiptBatcher.acceptPeerReceipt({ts:l,msgKeys:R,ack:m,isOffline:L,remote:v})):(o("WALogger").DEV(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[unify][batcher] adding (",") receipt ",""])),L?"offline":"online",R.join(",")),E=o("WAWebMessageReceiptBatcher").receiptBatcher.acceptOtherReceipt({ack:m,ts:l,receiverId:y,msgKeys:R})),L||o("WAWebMessageReceiptBatcher").receiptBatcher.runActiveBatches(),E}}),m.apply(this,arguments)}l.handleStatusSimpleReceipt=d}),98);
__d("WAWebReceiptAck",["WAWap","WAWebCommsWapMd"],(function(t,n,r,o,a,i,l){function e(e,t,n,r){return o("WAWap").wap("ack",{to:o("WAWebCommsWapMd").JID(e),id:o("WAWap").CUSTOM_STRING(t),class:"receipt",type:o("WAWap").MAYBE_CUSTOM_STRING(n),participant:r&&r!==e?o("WAWebCommsWapMd").DEVICE_JID(r):o("WAWap").DROP_ATTR})}l.buildReceiptAck=e}),98);
__d("WAWebHandleMsgReceipt",["Promise","WALogger","WAWebAck","WAWebCreateReceiptStanzaReceiveMetric","WAWebHandleAckPeerSimpleReceipt","WAWebHandleBotInvokeMsgReceipt","WAWebHandleDirectChatReceipt","WAWebHandleGroupChatReceipt","WAWebHandleMsgReceiptParser","WAWebHandleMsgReceiptUtils","WAWebHandleNewsletterReceipt","WAWebHandleStatusReceipt","WAWebNewsletterGatingUtils","WAWebReceiptAck","asyncToGeneratorRuntime","err","gkx"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g,h,y;function C(e){return b.apply(this,arguments)}function b(){return b=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=o("WAWebCreateReceiptStanzaReceiveMetric").createReceiptStanzaReceiveMetric(),n=o("WAWebHandleMsgReceiptParser").msgReceiptParser.parse(e);if(n.error)throw o("WALogger").DEV(d||(d=babelHelpers.taggedTemplateLiteralLoose(["error while parsing: ",""])),e.toString()),o("WALogger").ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Parsing Error: ",""])),n.error.toString()),n.error;var a=n.success,i=a.ack,l=a.ackString,s=a.from,u=a.stanzaId,c=a.offline,y;if(a.type==="simple")if(i===o("WAWebAck").ACK.CONTENT_GONE)y=o("WAWebReceiptAck").buildReceiptAck(s,u,l,null);else{try{o("WALogger").LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(['handleSimpleReceipt: receipt "','" for msg: ',""])),i,r("gkx")("26258")?"...":u),yield v(a)}catch(e){o("WALogger").WARN(_||(_=babelHelpers.taggedTemplateLiteralLoose(['handleSimpleReceipt: receipt "','" for msg: '," failed: ",""])),i,r("gkx")("26258")?"...":u,r("gkx")("26258")?"...":e).tags("messaging")}y=o("WAWebReceiptAck").buildReceiptAck(s,u,l,a.participant)}else if(a.type==="aggregated_by_type"){try{o("WALogger").LOG(f||(f=babelHelpers.taggedTemplateLiteralLoose(["handleAggregateReceipt: ",' receipt(s) "','" for msg: ',""])),a.receipts.length,i,r("gkx")("26258")?"...":a.externalId),yield S(a)}catch(e){}y=o("WAWebReceiptAck").buildReceiptAck(s,u,l,null)}else if(a.type==="aggregated_by_message"){try{o("WALogger").LOG(g||(g=babelHelpers.taggedTemplateLiteralLoose(["handleAggregateByMessageReceipt: "," receipt(s) for msg: ",""])),a.receipts.length,r("gkx")("26258")?"...":a.externalId),yield R(a)}catch(e){o("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["handleAggregateByMessageReceipt: failed: ",""])),e).sendLogs("handle-aggregate-by-message-receipt-failed",{sampling:.001})}y=o("WAWebReceiptAck").buildReceiptAck(s,u,l,null)}else a.type;return c==null&&t(a),y}),b.apply(this,arguments)}function v(t){var a=t.from,i=t.ack,l=t.recipient,u=t.ackString;if(i===o("WAWebAck").ACK.PEER)return o("WAWebHandleAckPeerSimpleReceipt").handleAckPeerSimpleReceipt(t);if(a.isNewsletter())return o("WAWebNewsletterGatingUtils").isNewsletterEnabled()?o("WAWebHandleNewsletterReceipt").handleNewsletterSimpleReceipt(t):(y||(y=n("Promise"))).resolve();if(a.isBot()&&l!=null&&u===o("WAWebAck").ACK_STRING.READ)return o("WAWebHandleBotInvokeMsgReceipt").handleBotOneToOneInvokeSimpleReadReceipt(t);if(a.isStatus())return o("WAWebHandleStatusReceipt").handleStatusSimpleReceipt(t);if(a.isUser())return o("WAWebHandleDirectChatReceipt").handleChatSimpleReceipt(t);if(a.isGroup())return o("WAWebHandleGroupChatReceipt").handleGroupSimpleReceipt(t);if(a.isBroadcast()){if(!t.participant)return o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["error: missing participant for broadcast receipt ",""])),a.toString()).sendLogs("handleSimpleReceipt: failed"),(y||(y=n("Promise"))).reject(r("err")("handleSimpleReceipt: missing participant for broadcast receipt "+a.toString()));var c=babelHelpers.extends({},t,{from:t.participant,participant:null});return o("WAWebHandleDirectChatReceipt").handleChatSimpleReceipt(c)}return o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["error: unsupported type for ",""])),a.toString()).sendLogs("handleSimpleReceipt: failed"),(y||(y=n("Promise"))).reject(r("err")("handleSimpleReceipt: unsupported type for "+a.toString()))}function S(e){var t=e.ack,a=e.from;return t===o("WAWebAck").ACK.CONTENT_GONE?(o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["error: reupload receipts cannot be aggregated"]))).sendLogs("handleAggregateReceipt: failed"),(y||(y=n("Promise"))).reject(r("err")("handleAggregateReceipt: failed"))):!a.isGroup()&&!a.isBroadcast()?(o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["handleAggregateReceipt: aggregate receipts should come only from group, broadcast"]))).sendLogs("handleAggregateReceipt: failed"),(y||(y=n("Promise"))).reject(r("err")("handleAggregateReceipt: failed"))):(y||(y=n("Promise"))).all(o("WAWebHandleMsgReceiptUtils").deaggregateGroupedByTypeReceipt(e).map(v))}function R(e){return(y||(y=n("Promise"))).all(o("WAWebHandleMsgReceiptUtils").deaggregateGroupedByMessageReceipt(e).map(v))}l.default=C}),98);
__d("WAWebCommsHandleMessagingStanza",["WAParsableWapNode","WAWebCommsHandleStanzaUtils","WAWebCreateNackFromStanza","WAWebHandleMsg","WAWebHandleMsgReceipt","WAWebPostUnknownStanzaMetric","WAWebWid"],(function(t,n,r,o,a,i,l){function e(e){var t=e.attrs;switch(e.tag){case"message":{var n=e.attrs.from;if(!r("WAWebWid").isNewsletter(n==null?void 0:n.toString()))return r("WAWebHandleMsg")(e).catch(function(t){return o("WAWebCommsHandleStanzaUtils").handleMessageParsingFailure(e,t)})}break;case"receipt":try{if(!o("WAWebCommsHandleStanzaUtils").isCallReceipt(e)&&t.type!=="retry")return r("WAWebHandleMsgReceipt")(e)}catch(t){return t instanceof o("WAParsableWapNode").XmppParsingFailure?(o("WAWebPostUnknownStanzaMetric").postUnknownStanzaMetric(e),o("WAWebCreateNackFromStanza").createNackFromStanza(e,o("WAWebCreateNackFromStanza").NackReason.ParsingError)):o("WAWebCreateNackFromStanza").createNackFromStanza(e,o("WAWebCreateNackFromStanza").NackReason.UnhandledError)}}}l.handleMessagingStanza=e}),98);
__d("WAWebCompatibility",["WAWebModernizr"],(function(t,n,r,o,a,i,l){var e="animation",s="transition";function u(t,n){var r,a=o("WAWebModernizr").getModernizr();if(t.indexOf(e)===0){r=t.substring(e.length);var i=a?a.prefixed(e):e;return c(i,e,r)}else if(t.indexOf(s)===0){r=t.substring(s.length);var l=a?a.prefixed(s):s;return c(l,s,r)}return a.prefixed(t,n,!1)||t}function c(e,t,n){var r=e.toLowerCase().indexOf(t),o=e.slice(0,r).toLowerCase();return e.indexOf(t)===0?o+e.slice(r)+n.toLowerCase():o+e.slice(r)+n}l.compatPrefix=u}),98);
__d("WAWebCookieManager",[],(function(t,n,r,o,a,i){function e(e,t){var n=["name","value","domain","path","secure","session","expirationDate"];e.session===!0&&delete e.expirationDate;var r=[];n.forEach(function(t){var n=e[t];if(!(n===void 0||t==="value"))switch(t){case"expirationDate":{var o=e.expirationDate!=null?new Date(e.expirationDate):new Date;r.push("expires="+o.toUTCString());break}case"secure":r.push("secure");break;case"name":{var a=e.value||"";r.push(String(n)+"="+a);break}default:r.push(t+"="+String(n))}}),document.cookie=r.join(";")}function l(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));if(t)return t[2]}i.setCookie=e,i.getCookie=l}),66);
__d("WAWebDomAttrToData",["WACamelCase"],(function(t,n,r,o,a,i,l){function e(e){return r("WACamelCase")(e.replace(/^data-/,""))}l.default=e}),98);
__d("WAWebDomElementMatches",[],(function(t,n,r,o,a,i){var e=Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;function l(t,n){return t instanceof HTMLElement?e.call(t,n):!1}i.default=l}),66);
__d("WAWebCopyPasteCopyable.react",["WAWebClassnames","WAWebDomAttrToData","WAWebDomElementMatches","WAWebExternalLink.react","WAWebURLUtils","isStringNullOrEmpty","react","stylex"],(function(t,n,r,o,a,i,l){var e=["ref","forwardedRef"],s=["element","ref"],u=["plainText","prePlainText","appTextTemplate","xstyle"],c,d,m=c||(c=r("react")),p="copyable-text",_="."+p,f="data-plain-text",g=r("WAWebDomAttrToData")(f),h="data-pre-plain-text",y=r("WAWebDomAttrToData")(h),C="data-app-text-template",b=r("WAWebDomAttrToData")(C);function v(e){return e instanceof HTMLElement&&r("WAWebDomElementMatches")(e,_)}function S(e){return e.dataset[y]}function R(e){return e.dataset[g]}function L(e){return e.dataset[b]}function E(e){var t=Array.from(e.querySelectorAll(_));return t.filter(function(e){return!t.some(function(t){return t!==e&&t.contains(e)})})}function k(e){return m.jsx("code",babelHelpers.extends({},F(e)))}k.displayName=k.name+" [from "+i.id+"]";function I(e){return m.jsx("del",babelHelpers.extends({},F(e)))}I.displayName=I.name+" [from "+i.id+"]";function T(e){return m.jsx("div",babelHelpers.extends({},F(e)))}T.displayName=T.name+" [from "+i.id+"]";function D(e){return m.jsx("em",babelHelpers.extends({},F(e)))}D.displayName=D.name+" [from "+i.id+"]";function x(t){var n,r=t.ref,o=t.forwardedRef,a=babelHelpers.objectWithoutPropertiesLoose(t,e),i=F(a);return m.jsx("img",babelHelpers.extends({ref:o!=null?o:r},i,{tabIndex:i.onClick?0:-1,alt:(n=i.alt)!=null?n:""}))}x.displayName=x.name+" [from "+i.id+"]";function $(e){var t=F(e),n=t.href;return!r("isStringNullOrEmpty")(n)&&!r("WAWebURLUtils").hasValidUrlScheme(n)?m.jsx("span",{}):m.jsx(o("WAWebExternalLink.react").ExternalLinkEl,babelHelpers.extends({},t))}$.displayName=$.name+" [from "+i.id+"]";function P(e){return m.jsx("span",babelHelpers.extends({},F(e)))}P.displayName=P.name+" [from "+i.id+"]";function N(e){return m.jsx("strong",babelHelpers.extends({},F(e)))}N.displayName=N.name+" [from "+i.id+"]";function M(e){return m.jsx("blockquote",babelHelpers.extends({},F(e)))}M.displayName=M.name+" [from "+i.id+"]";function w(e){var t=e.element,n=e.ref,r=babelHelpers.objectWithoutPropertiesLoose(e,s);return m.jsx(t,babelHelpers.extends({},F(r),{ref:n}))}w.displayName=w.name+" [from "+i.id+"]";var A=w;function F(e){var t=e.plainText,n=e.prePlainText,a=e.appTextTemplate,i=e.xstyle,l=babelHelpers.objectWithoutPropertiesLoose(e,u),s=babelHelpers.extends({},l);return s.className=o("WAWebClassnames").classnamesConvertMeToStylexPlease(l.className,p),t!=null&&(s[f]=t),n!=null&&(s[h]=n),a!=null&&(s[C]=a),i!=null&&(s.className=o("WAWebClassnames").classnamesConvertMeToStylexPlease(s.className,(d||(d=r("stylex")))(i))),s}l.COPYABLE_CSS_CLASS=p,l.PLAIN_TEXT_DATA_ATTR=g,l.APP_TEXT_TEMPLATE_DATA_ATTR=b,l.isCopyable=v,l.getPrePlainTextData=S,l.getPlainTextData=R,l.getAppTextTemplateData=L,l.findCopyableChildren=E,l.CopyableCode=k,l.CopyableDel=I,l.CopyableDiv=T,l.CopyableEm=D,l.CopyableImg=x,l.CopyableLink=$,l.CopyableSpan=P,l.CopyableStrong=N,l.CopyableBlockQuote=M,l.Copyable=A}),98);
__d("WAWebCopyPasteSelectable.react",["cx","WAWebClassnames","WAWebCopyPasteCopyable.react","WAWebDomElementMatches","WAWebExternalLink.react","WAWebURLUtils","react"],(function(t,n,r,o,a,i,l,s){var e=["ref","forwardedRef"],u=["element","ref"],c=["className","plainText","prePlainText","appTextTemplate","selectable","selectAll"],d,m=d||(d=r("react")),p="_aupe",_=o("WAWebCopyPasteCopyable.react").COPYABLE_CSS_CLASS+" "+p,f="."+p,g=_,h="_aupf",y="."+h;function C(e){if(!e)return!1;if(!(e instanceof HTMLElement)){var t=e.parentElement;return C(t)}return r("WAWebDomElementMatches")(e,f)||r("WAWebDomElementMatches")(e,f+" *")}function b(e){return e?e instanceof HTMLElement?r("WAWebDomElementMatches")(e,y):b(e.parentElement):!1}function v(e){if(!(e instanceof HTMLElement))return[];var t=C(e);if(t)return Array.from(e.childNodes);var n=Array.from(e.querySelectorAll(f));return n.filter(function(e){return!n.some(function(t){return t!==e&&t.contains(e)})})}function S(e){return e instanceof HTMLElement?!!e.querySelector(f):!1}function R(e){return e?e instanceof HTMLElement?r("WAWebDomElementMatches")(e,y+" *"):R(e.parentElement):!1}function L(e){if(!R(e))return null;for(var t=e,n=0,r=5,o;t&&n<r;){if(b(t)&&t instanceof HTMLElement){o=t;break}t=t.parentElement,n++}return o}function E(e){var t=A(e);return e.selectable?m.jsx(o("WAWebCopyPasteCopyable.react").CopyableCode,babelHelpers.extends({},t)):m.jsx("code",babelHelpers.extends({},t))}E.displayName=E.name+" [from "+i.id+"]";function k(e){var t=A(e);return e.selectable?m.jsx(o("WAWebCopyPasteCopyable.react").CopyableDel,babelHelpers.extends({},t)):m.jsx("del",babelHelpers.extends({},t))}k.displayName=k.name+" [from "+i.id+"]";function I(e){var t=A(e);return e.selectable?m.jsx(o("WAWebCopyPasteCopyable.react").CopyableDiv,babelHelpers.extends({},t)):m.jsx("div",babelHelpers.extends({},t))}I.displayName=I.name+" [from "+i.id+"]";function T(e){var t=A(e);return e.selectable?m.jsx(o("WAWebCopyPasteCopyable.react").CopyableEm,babelHelpers.extends({},t)):m.jsx("em",babelHelpers.extends({},t))}T.displayName=T.name+" [from "+i.id+"]";function D(t){var n,r=t.ref,a=t.forwardedRef,i=babelHelpers.objectWithoutPropertiesLoose(t,e),l=A(i);return i.selectable?m.jsx(o("WAWebCopyPasteCopyable.react").CopyableImg,babelHelpers.extends({forwardedRef:r},l)):m.jsx("img",babelHelpers.extends({ref:r},l,{tabIndex:l.onClick?0:-1,alt:(n=i.alt)!=null?n:""}))}D.displayName=D.name+" [from "+i.id+"]";function x(e){var t=A(e),n=e.href;return n!=null&&n!==""&&!r("WAWebURLUtils").hasValidUrlScheme(n)?m.jsx("span",{}):e.selectable?m.jsx(o("WAWebCopyPasteCopyable.react").CopyableLink,babelHelpers.extends({dir:"ltr",dataTab:e.dataTab},t)):m.jsx(o("WAWebExternalLink.react").ExternalLinkEl,babelHelpers.extends({dataTab:e.dataTab},t))}x.displayName=x.name+" [from "+i.id+"]";function $(e){var t=A(e);return e.selectable?m.jsx(o("WAWebCopyPasteCopyable.react").CopyableSpan,babelHelpers.extends({},t)):m.jsx("span",babelHelpers.extends({},t))}$.displayName=$.name+" [from "+i.id+"]";function P(e){var t=A(e);return e.selectable?m.jsx(o("WAWebCopyPasteCopyable.react").CopyableStrong,babelHelpers.extends({},t)):m.jsx("strong",babelHelpers.extends({},t))}P.displayName=P.name+" [from "+i.id+"]";function N(e){var t=A(e);return e.selectable?m.jsx(o("WAWebCopyPasteCopyable.react").CopyableBlockQuote,babelHelpers.extends({},t)):m.jsx("blockquote",babelHelpers.extends({},t))}N.displayName=N.name+" [from "+i.id+"]";function M(e){var t=e.element,n=e.ref,r=babelHelpers.objectWithoutPropertiesLoose(e,u),a=A(r);return r.selectable?m.jsx(o("WAWebCopyPasteCopyable.react").Copyable,babelHelpers.extends({element:t},a,{ref:n})):m.jsx(t,babelHelpers.extends({},a,{ref:n}))}M.displayName=M.name+" [from "+i.id+"]";var w=M;function A(e){var t,n=e.className,r=e.plainText,a=e.prePlainText,i=e.appTextTemplate,l=e.selectable,s=e.selectAll,u=babelHelpers.objectWithoutPropertiesLoose(e,c),d=u;if(l&&(d.plainText=r,d.prePlainText=a,d.appTextTemplate=i),d.className=o("WAWebClassnames").classnamesConvertMeToStylexPlease(n,"_ao3e",(t={},t[p]=l,t[h]=l&&s,t)),l){var m=u["data-testid"],_=s===!0?"select-all selectable-text":"selectable-text";d["data-testid"]=m!=null?m+" "+_:_}return d}l.SELECTABLE_INPUT_CSS_CLASS=g,l.isSelectable=C,l.isSelectAll=b,l.findSelectableChildren=v,l.hasSelectableChildren=S,l.findSelectAllParent=L,l.SelectableCode=E,l.SelectableDel=k,l.SelectableDiv=I,l.SelectableEm=T,l.SelectableImg=D,l.SelectableLink=x,l.SelectableSpan=$,l.SelectableStrong=P,l.SelectableBlockQuote=N,l.Selectable=w}),98);
__d("WAWebCryptoEncryptionSaltHelper",["Promise","WALogger","WAWebLogoutReasonConstants","WAWebSocketLogoutJob","WAWebUserPrefsMeUser","WAWebUserPrefsMultiDevice","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s;function u(){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=128,r=!!o("WAWebUserPrefsMeUser").getMaybeMePnUser(),a=null;return r||(a=new Uint8Array(t),self.crypto.getRandomValues(a),a=btoa(String.fromCharCode.apply(String,Array.from(new Uint8Array(a)))),yield o("WAWebUserPrefsMultiDevice").setWebEncSalt(a)),a=o("WAWebUserPrefsMultiDevice").getWebEncSalt(),a==null&&(o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[DB ENC CRITICAL ERROR] null returned for local enc salt"]))),o("WAWebSocketLogoutJob").socketLogout(o("WAWebLogoutReasonConstants").LogoutReason.MissingEncSalt)),a=Uint8Array.from(atob(a),function(e){return e.charCodeAt(0)}),(s||(s=n("Promise"))).resolve(a)}),c.apply(this,arguments)}function d(){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield o("WAWebUserPrefsMultiDevice").setWebEncSalt(null)}),m.apply(this,arguments)}l.getOrGenSalt=u,l.deleteSalt=d}),98);
__d("WAWebInvocationInterface",["WANullthrows"],(function(t,n,r,o,a,i,l){var e;function s(t){e=t}function u(){return r("WANullthrows")(e,"InvocationInterface was not inited")}function c(e,t){return u().sendLogs(e,t)}l.set=s,l.get=u,l.sendLogs=c}),98);
__d("WAWebCryptoEncKeyHelper",["Promise","WAWebCmd","WAWebCryptoEncryptionSaltHelper","WAWebDbEncryptionKey","WAWebInvocationInterface","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s=null;function u(){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){s==null&&(s=o("WAWebCryptoEncryptionSaltHelper").getOrGenSalt());var e=yield s;if(!(!e||e.constructor!==Uint8Array))return o("WAWebDbEncryptionKey").DbEncKeyStore.init(e)}),c.apply(this,arguments)}function d(){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){s==null&&(s=o("WAWebCryptoEncryptionSaltHelper").getOrGenSalt());var e=yield s;!e||e.constructor!==Uint8Array||o("WAWebInvocationInterface").get().initDatabaseEncnKey(e)}),m.apply(this,arguments)}function p(e){return o("WAWebInvocationInterface").get().generateFinalDbEncryptionAndFtsKey(e)}function _(){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield(e||(e=n("Promise"))).all([o("WAWebDbEncryptionKey").DbEncKeyStore.deleteKeys(),o("WAWebInvocationInterface").get().deleteDbEncKeyCache()])}),f.apply(this,arguments)}o("WAWebCmd").Cmd.on("logout",function(){s=(e||(e=n("Promise"))).resolve(null)}),l.initEncSalt=u,l.initEncSaltForInvoker=d,l.generateFinalDbEncryptionAndFtsKeyForInvoker=p,l.deleteEncKeysAndCache=_}),98);
__d("WAWebDBDeviceListFanout",["WALogger","WAWebApiDeviceList","WAWebBizCoexGatingUtils","WAWebUserPrefsMeUser","WAWebWidFactory","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e;function s(e){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=t.wids,r=t.chatWidSetToIncludeHostedInFanoutOneToOneChatOnly,a=t.shouldMergeAltDevices,i=a===void 0?!1:a,l=yield o("WAWebApiDeviceList").getDeviceIds(n,i),s=new Map;return l.forEach(function(t,a){if(t){var i=t.devices;i.forEach(function(e){var n=e.id===99||e.isHosted===!0,a=!1;if(o("WAWebBizCoexGatingUtils").bizHostedDevicesEnabled()&&r!=null&&(a=(r==null?void 0:r.isUser())===!0),!(n&&!a)){var i=o("WAWebWidFactory").createDeviceWidFromDeviceListPk(t.id,e.id,e.isHosted);o("WAWebUserPrefsMeUser").isMeDevice(i)||s.set(i.toString(),i)}})}else{var l=o("WAWebWidFactory").asUserWidOrThrow(n[a]);o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["getFanOutList: no device is found for ",", just send to the primary device"])),l.toString()).tags("messaging"),o("WAWebUserPrefsMeUser").isMeAccount(l)||s.set(l.toString(),l)}}),Array.from(s.values())}),u.apply(this,arguments)}l.getFanOutList=s}),98);
__d("WAWebDeleteAllCacheStorage",["Promise","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i){var e;function l(){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=window.caches;if(t!=null){var r=yield t.keys();yield(e||(e=n("Promise"))).all(r.map(function(e){return t.delete(e)}))}}),s.apply(this,arguments)}i.default=l}),66);
__d("WAWebDexieBootstrap",["WAWeb-dexie","WAWebNoop"],(function(t,n,r,o,a,i,l){"use strict";function e(){r("WAWeb-dexie").Promise.PSD.onunhandled=r("WAWebNoop"),r("WAWeb-dexie").Promise.PSD.txRelaxedDurabilityEnabled=!0}l.patchDexie=e}),98);
__d("WAWebDisplayType",[],(function(t,n,r,o,a,i){var e={CONVERSATION:"CONVERSATION",MSG_INFO:"MSG_INFO",STARRED_MSGS:"STARRED_MSGS",KEPT_MSGS:"KEPT_MSGS",GALLERY:"GALLERY",GALLERY_LINKS:"GALLERY_LINKS",REPLY_STAGE:"REPLY_STAGE",QUOTED_MSG:"QUOTED_MSG",CONTACT_CARD:"CONTACT_CARD",ORDER:"ORDER",STATUS:"STATUS",EDITING:"EDITING",ANNOUNCEMENT:"ANNOUNCEMENT",NEWSLETTER:"NEWSLETTER",NEWSLETTER_PREVIEW:"NEWSLETTER_PREVIEW",CHANNEL_ALERTS_MSGS:"CHANNEL_ALERTS_MSGS",REPORTED_MSG:"REPORTED_MSG",BOT_INVOKE_RESPONSE:"BOT_INVOKE_RESPONSE",ALL_REPLIES:"ALL_REPLIES",BOT_REELS_PLUGIN:"BOT_REELS_PLUGIN",COMMENT:"COMMENT",MESSAGE_HISTORY_BUNDLE:"MESSAGE_HISTORY_BUNDLE"};function l(t){return t===e.ANNOUNCEMENT||t===e.NEWSLETTER}var s=[e.CONVERSATION,e.ANNOUNCEMENT,e.NEWSLETTER,e.BOT_INVOKE_RESPONSE,e.ALL_REPLIES];function u(e){return c.includes(e)}var c=[e.STARRED_MSGS,e.REPORTED_MSG,e.CONTACT_CARD,e.GALLERY,e.GALLERY_LINKS];function d(e){return s.includes(e)}i.DISPLAY_TYPE=e,i.isWideDisplay=l,i.isMsgGalleryDisplay=u,i.isConversationDisplay=d}),66);
__d("WAWebE2eMessageSendWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumAddressingMode","WAWebWamEnumAgentEngagementEnumType","WAWebWamEnumBotType","WAWebWamEnumDeviceType","WAWebWamEnumE2eCiphertextType","WAWebWamEnumE2eDestination","WAWebWamEnumE2eDeviceType","WAWebWamEnumE2eFailureReason","WAWebWamEnumEditType","WAWebWamEnumEncryptionTypeCode","WAWebWamEnumGroupEncryptionType","WAWebWamEnumInvisibleMessageCategoryType","WAWebWamEnumMediaType","WAWebWamEnumMessageDistributionEnumType","WAWebWamEnumRevokeType","WAWebWamEnumTypeOfGroupEnum"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({E2eMessageSend:[476,{agentEngagementType:[15,o("WAWebWamEnumAgentEngagementEnumType").AGENT_ENGAGEMENT_ENUM_TYPE],botType:[17,o("WAWebWamEnumBotType").BOT_TYPE],e2eBackfill:[18,e.TYPES.BOOLEAN],e2eCiphertextType:[5,o("WAWebWamEnumE2eCiphertextType").E2E_CIPHERTEXT_TYPE],e2eCiphertextVersion:[6,e.TYPES.INTEGER],e2eDestination:[4,o("WAWebWamEnumE2eDestination").E2E_DESTINATION],e2eFailureReason:[2,o("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON],e2eReceiverDeviceType:[19,o("WAWebWamEnumE2eDeviceType").E2E_DEVICE_TYPE],e2eReceiverType:[8,o("WAWebWamEnumDeviceType").DEVICE_TYPE],e2eSuccessful:[1,e.TYPES.BOOLEAN],editType:[14,o("WAWebWamEnumEditType").EDIT_TYPE],encRetryCount:[9,e.TYPES.INTEGER],encryptionType:[23,o("WAWebWamEnumEncryptionTypeCode").ENCRYPTION_TYPE_CODE],groupEncryptionState:[22,o("WAWebWamEnumGroupEncryptionType").GROUP_ENCRYPTION_TYPE],invisibleMessageCategory:[21,o("WAWebWamEnumInvisibleMessageCategoryType").INVISIBLE_MESSAGE_CATEGORY_TYPE],isLid:[12,e.TYPES.BOOLEAN],isPq:[25,e.TYPES.BOOLEAN],isSimpleSignal:[24,e.TYPES.BOOLEAN],localAddressingMode:[16,o("WAWebWamEnumAddressingMode").ADDRESSING_MODE],messageDistributionType:[20,o("WAWebWamEnumMessageDistributionEnumType").MESSAGE_DISTRIBUTION_ENUM_TYPE],messageIsInvisible:[10,e.TYPES.BOOLEAN],messageMediaType:[7,o("WAWebWamEnumMediaType").MEDIA_TYPE],retryCount:[3,e.TYPES.INTEGER],revokeType:[11,o("WAWebWamEnumRevokeType").REVOKE_TYPE],typeOfGroup:[13,o("WAWebWamEnumTypeOfGroupEnum").TYPE_OF_GROUP_ENUM]},[1,20,20],"regular"]},{E2eMessageSend:[]});l.E2eMessageSendWamEvent=s}),98);
__d("WAWebEditMessageSendWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumEditType","WAWebWamEnumMediaType","WAWebWamEnumMessageType","WAWebWamEnumTypeOfGroupEnum"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({EditMessageSend:[3990,{editDuration:[1,e.TYPES.INTEGER],editType:[2,o("WAWebWamEnumEditType").EDIT_TYPE],mediaType:[8,o("WAWebWamEnumMediaType").MEDIA_TYPE],messageSendResultIsTerminal:[3,e.TYPES.BOOLEAN],messageType:[4,o("WAWebWamEnumMessageType").MESSAGE_TYPE],resendCount:[5,e.TYPES.INTEGER],retryCount:[6,e.TYPES.INTEGER],typeOfGroup:[9,o("WAWebWamEnumTypeOfGroupEnum").TYPE_OF_GROUP_ENUM]},[1,1,1],"regular"]},{EditMessageSend:[]});l.EditMessageSendWamEvent=s}),98);
__d("WAWebFbtCommon",["fbt"],(function(t,n,r,o,a,i,l,s){var e={WhatsApp:function(){return s._(/*BTDS*/"\u0648\u0627\u062a\u0633\u0627\u0628")},"WhatsApp Business":function(){return s._(/*BTDS*/"\u0648\u0627\u062a\u0633\u0627\u0628 \u0644\u0644\u0623\u0639\u0645\u0627\u0644")},"WhatsApp Web":function(){return s._(/*BTDS*/"\u0648\u0627\u062a\u0633\u0627\u0628 \u0648\u064a\u0628")},"WhatsApp for Desktop":function(){return s._(/*BTDS*/"\u0648\u0627\u062a\u0633\u0627\u0628 \u0644\u0644\u0643\u0645\u0628\u064a\u0648\u062a\u0631")},"WhatsApp for Windows":function(){return s._(/*BTDS*/"\u0648\u0627\u062a\u0633\u0627\u0628 \u0644\u0623\u0646\u0638\u0645\u0629 Windows")},"WhatsApp Business on Web":function(){return s._(/*BTDS*/"\u0648\u0627\u062a\u0633\u0627\u0628 \u0644\u0644\u0623\u0639\u0645\u0627\u0644 \u0639\u0644\u0649 \u0627\u0644\u0648\u064a\u0628")},BETA:function(){return s._(/*BTDS*/"\u0625\u0635\u062f\u0627\u0631 \u062a\u062c\u0631\u064a\u0628\u064a")},Message:function(){return s._(/*BTDS*/"\u0645\u0631\u0627\u0633\u0644\u0629")},Block:function(){return s._(/*BTDS*/"\u062d\u0638\u0631")},Report:function(){return s._(/*BTDS*/"\u0625\u0628\u0644\u0627\u063a")},Next:function(){return s._(/*BTDS*/"\u0627\u0644\u062a\u0627\u0644\u064a")},Cancel:function(){return s._(/*BTDS*/"\u0625\u0644\u063a\u0627\u0621")},Close:function(){return s._(/*BTDS*/"\u0625\u063a\u0644\u0627\u0642")},Continue:function(){return s._(/*BTDS*/"\u0645\u062a\u0627\u0628\u0639\u0629")},Unblock:function(){return s._(/*BTDS*/"\u0631\u0641\u0639 \u0627\u0644\u062d\u0638\u0631")},"Learn more":function(){return s._(/*BTDS*/"\u0645\u0639\u0631\u0641\u0629 \u0627\u0644\u0645\u0632\u064a\u062f")},"Archive instead":function(){return s._(/*BTDS*/"\u0627\u0644\u0623\u0631\u0634\u0641\u0629 \u0628\u062f\u0644\u0627\u064b \u0645\u0646 \u0630\u0644\u0643")},Submit:function(){return s._(/*BTDS*/"\u0625\u0631\u0633\u0627\u0644")},"Try again":function(){return s._(/*BTDS*/"\u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629")},Search:function(){return s._(/*BTDS*/"\u0628\u062d\u062b")},Undo:function(){return s._(/*BTDS*/"\u062a\u0631\u0627\u062c\u0639")},OK:function(){return s._(/*BTDS*/"\u0645\u0648\u0627\u0641\u0642")},"GOT IT":function(){return s._(/*BTDS*/"\u062d\u0633\u0646\u064b\u0627")},Unfollow:function(){return s._(/*BTDS*/"\u0625\u0644\u063a\u0627\u0621 \u0627\u0644\u0645\u062a\u0627\u0628\u0639\u0629")},"Untitled Channel":function(){return s._(/*BTDS*/"\u0642\u0646\u0627\u0629 \u0628\u0644\u0627 \u0639\u0646\u0648\u0627\u0646")},Admin:function(){return s._(/*BTDS*/"\u0645\u0634\u0631\u0641")},"In Your Contacts":function(){return s._(/*BTDS*/"\u0645\u0646 \u062c\u0647\u0627\u062a \u0627\u062a\u0635\u0627\u0644\u0643")},"In your contacts":function(){return s._(/*BTDS*/"\u0641\u064a \u062c\u0647\u0627\u062a \u0627\u062a\u0635\u0627\u0644\u0643")},"Search name or number":function(){return s._(/*BTDS*/"\u0627\u0628\u062d\u062b \u0639\u0646 \u0627\u0633\u0645 \u0623\u0648 \u0631\u0642\u0645")},"Search name, number or username":function(){return s._(/*BTDS*/"\u0627\u0628\u062d\u062b \u0639\u0646 \u0627\u0633\u0645 \u0623\u0648 \u0631\u0642\u0645 \u0623\u0648 \u0627\u0633\u0645 \u0645\u0633\u062a\u062e\u062f\u0645")},"Not in your contacts":function(){return s._(/*BTDS*/"\u0644\u064a\u0633 \u0636\u0645\u0646 \u062c\u0647\u0627\u062a \u0627\u062a\u0635\u0627\u0644\u0643")},"No results found":function(){return s._(/*BTDS*/"\u0644\u0645 \u064a\u062a\u0645 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u0649 \u0623\u064a \u0646\u062a\u0627\u0626\u062c")},"Request review":function(){return s._(/*BTDS*/"\u0637\u0644\u0628 \u0645\u0631\u0627\u062c\u0639\u0629")},Followers:function(){return s._(/*BTDS*/"\u0627\u0644\u0645\u062a\u0627\u0628\u0639\u0648\u0646")},"Try Again":function(){return s._(/*BTDS*/"\u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629")},"End-to-end encrypted":function(){return s._(/*BTDS*/"\u0645\u0634\u0641\u0631\u0629 \u062a\u0645\u0627\u0645\u064b\u0627 \u0628\u064a\u0646 \u0627\u0644\u0637\u0631\u0641\u064a\u0646")},"Leave Group":function(){return s._(/*BTDS*/"\u0645\u063a\u0627\u062f\u0631\u0629 \u0627\u0644\u0645\u062c\u0645\u0648\u0639\u0629")},"Exit Group":function(){return s._(/*BTDS*/"\u0627\u0644\u062e\u0631\u0648\u062c \u0645\u0646 \u0627\u0644\u0645\u062c\u0645\u0648\u0639\u0629")},"Exit Community":function(){return s._(/*BTDS*/"\u0627\u0644\u062e\u0631\u0648\u062c \u0645\u0646 \u0627\u0644\u0645\u062c\u062a\u0645\u0639")},"Report to WhatsApp":function(){return s._(/*BTDS*/"\u0625\u0628\u0644\u0627\u063a \u0648\u0627\u062a\u0633\u0627\u0628")},Archive:function(){return s._(/*BTDS*/"\u0623\u0631\u0634\u0641\u0629")},Add:function(){return s._(/*BTDS*/"\u0625\u0636\u0627\u0641\u0629")},"Context menu":function(){return s._(/*BTDS*/"\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0633\u064a\u0627\u0642")}};function u(t){var n=e[t];return n()}l.default=u}),226);
__d("WAWebSWBusActions",[],(function(t,n,r,o,a,i){var e={REQUEST_STREAMING_INFO:"GET_STREAMING_INFO",REQUEST_RMR:"REQUEST_RMR",SEND_STREAMING_CHUNK:"SEND_STREAMING_CHUNK",EXP_BACKOFF:"EXP_BACKOFF",LOG:"LOG",UPLOAD_LOGS:"UPLOAD_LOGS",SET_L10N:"SET_L10N",STREAMING_SUPPORTED:"STREAMING_SUPPORTED",REMOVE_PP:"REMOVE_PP",LOGOUT:"LOGOUT",CLEAN_ASSETS:"CLEAN_ASSETS",ACTIVE_TAB:"ACTIVE_TAB",STOP_COMMS:"STOP_COMMS",HEARTBEAT:"HEARTBEAT",WAM_UPLOAD:"WAM_UPLOAD"},l=e;i.default=l}),66);
__d("WAWebSWBus",["Promise","WALogger","WAWebBuildConstants","WAWebNoop","WAWebSWBusActions","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){var e,s,u,c=[r("WAWebSWBusActions").HEARTBEAT],d=(function(){function e(t){var o=this;this.$1=function(t){if(!(!t.data||!t.data.action)){var a=t.data;if(!(!t.ports||t.ports.length===0)){var i=t.ports;if(!(!e.isSW()&&window.navigator.serviceWorker&&t.source!==window.navigator.serviceWorker.controller)){var l;typeof t.waitUntil=="function"?l=function(n){return t.waitUntil(n)}:l=r("WAWebNoop"),l((u||(u=n("Promise"))).resolve(o.requestHandler(a)).then(function(e){i[0].postMessage(e)}).catch(function(e){i[0].postMessage({error:e&&e.toString()})}))}}}},this.requestHandler=t}var t=e.prototype;return t.init=function(){var t=e.isSW()?self:window.navigator.serviceWorker;try{if(!t)return;t.addEventListener("message",this.$1)}catch(e){}},e.isSW=function(){return typeof window=="undefined"},e.getRequestor=function(r){if(e.isSW()){if(typeof r=="string")return self.clients.get(r)}else return window.navigator.serviceWorker?window.navigator.serviceWorker.ready.then(function(){return window.navigator.serviceWorker?window.navigator.serviceWorker.controller:null}):(u||(u=n("Promise"))).resolve(null);return(u||(u=n("Promise"))).resolve(r)},e.broadcast=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,o){if(!e.isSW())throw r("err")("Broadcast called from non-serviceworker.");var a=yield self.clients.matchAll();return a.length===0?(u||(u=n("Promise"))).reject(r("err")("No clients available.")):(u||(u=n("Promise"))).all(a.map(function(n){return e.request(n,t,o)}))});function o(e,n){return t.apply(this,arguments)}return o})(),e.request=function(a,i,l){var t,s=o("WAWebBuildConstants").VERSION_STR,c=new MessageChannel,d=new(u||(u=n("Promise")))(function(t,n){return c.port1.onmessage=function(e){var r;(r=e.data)!=null&&r.error?n(e.data.error):t(e.data)},e.getRequestor(a).then(function(e){if(!e)return n(r("err")("No ServiceWorker controlling this client."));e.postMessage({action:i,message:l,version:s},[c.port2])})});return d},e})();l.default=d}),98);
__d("WAWebFeatureDetectionSwSupport",["WAPromiseTimeout","WAWebEventEmitter","WAWebModernizr","WAWebSWBus","WAWebSWBusActions","WAWebUA"],(function(t,n,r,o,a,i,l){var e="Modernizr"in window,s=o("WAWebModernizr").getModernizr(),u=(function(t){function n(){var n;n=t.call(this)||this,n.supported=e?s.serviceworker:"serviceWorker"in navigator,n._checkAlive=function(){var e,t=(e=navigator.serviceWorker)==null?void 0:e.controller;return!!t},n._checkStreamingSupport=function(){var e;if(!n.supported||!n.alive||o("WAWebUA").UA.isSafari){n._streamingSupported=!1;return}if(n._streamingSupportedPromise)return n._streamingSupported;var t=(e=navigator.serviceWorker)==null?void 0:e.controller;t&&(n._streamingSupportedPromise=o("WAPromiseTimeout").promiseTimeout(r("WAWebSWBus").request(t,r("WAWebSWBusActions").STREAMING_SUPPORTED),100).catch(function(){return!1}).then(function(e){return delete n._streamingSupportedPromise,n.streamingSupported=e,e}))},n._setSupported=function(e){n.supported=e},e&&s.on("serviceworker",n._setSupported);var a=n;return Object.defineProperty(n,"streamingSupported",{get:function(){return a._checkStreamingSupport(),a._streamingSupported},set:function(t){t!==a._streamingSupported&&a.trigger("change:streamingSupported",t),a._streamingSupported=t}}),Object.defineProperty(n,"alive",{get:function(){return a._checkAlive()}}),n}return babelHelpers.inheritsLoose(n,t),n})(r("WAWebEventEmitter")),c=new u;l.default=c}),98);
__d("WAWebProcessKeyBundle",["Promise","WAJids","WALogger","WAWebSignal","WAWebSignalCommonUtils","WAWebSignalProtocolStore","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){var e,s,u,c,d;function m(e){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var a=null,i=0,l=0,m=[],p=[];if(t.forEach(function(t){t instanceof Error?(o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["establishE2ESession: error: ",""])),t),a=t):(t.wid.device!=null&&t.wid.device!==o("WAJids").DEFAULT_DEVICE_ID?p.push(t):m.push(t),!t.key&&!t.wid.isBot()&&i++)}),m.length===0&&p.length===0)throw r("err")("establishE2ESession: no keys in the response");try{var _=[].concat(m,p).map(function(e){return o("WAWebSignalCommonUtils").createSignalAddress(e.wid).toString()});yield o("WAWebSignalProtocolStore").getPersistSignalProtocolStore().bulkLoadIdentityKey(_),o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["establishE2ESession: warmed up identity cache: "," records"])),_.length)}catch(e){o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["establishE2ESession: failed to warm up identity cache: ",""])),e).devConsole(e)}var f=function(t){return o("WAWebSignal").Session.createSignalSession(t).then(function(){l++}).catch(function(e){o("WALogger").WARN(c||(c=babelHelpers.taggedTemplateLiteralLoose(["createSignalSession: failed for device "," with error ",""])),t.wid,e).sendLogs("createSignalSession-fail")})};if(yield(d||(d=n("Promise"))).all(m.map(f)),yield d.all(p.map(f)),a!=null)throw a;return{depletedPrekeyCount:i,processedPrekeyCount:l}}),p.apply(this,arguments)}l.processKeyBundles=m}),98);
__d("WAWebFetchPrekeysJob",["WAJids","WALogger","WAParsableXmlNode","WASmaxPreKeysFetchKeyBundlesRPC","WAWebBackendErrors","WAWebProcessKeyBundle","WAWebWidFactory","WAWebWidToJid","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){var e;function s(e,t){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n){n===void 0&&(n=!1);var r=yield c(t,n),a=yield o("WAWebProcessKeyBundle").processKeyBundles(r),i=a.depletedPrekeyCount,l=a.processedPrekeyCount;return o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["fetchPrekeys: successfully established "," E2E sessions out of "," requested"])),l,t.length),{depletedPrekeyCount:i}}),u.apply(this,arguments)}function c(e,t){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){t===void 0&&(t=!1);var n=yield o("WASmaxPreKeysFetchKeyBundlesRPC").sendFetchKeyBundlesRPC({userArgs:e.map(function(e){return{userJid:o("WAWebWidToJid").widToDeviceJid(e),hasUserReasonIdentity:t}})});if(n.name==="FetchKeyBundlesResponseServerError"){var a=n.value.errorServerErrors.value;throw new(o("WAWebBackendErrors")).ServerStatusCodeError(Number(a.code),"fetchPrekeys: server error: "+a.code+" "+a.text)}else if(n.name==="FetchKeyBundlesResponseRequestError"){var i=n.value.errorRequestErrorsFetch.value;throw new(o("WAWebBackendErrors")).ServerStatusCodeError(Number(i.code),"fetchPrekeys: request error: "+i.code+" "+i.text)}var l=n.value.listUser.map(function(e){var t=e.userFetchKeyBundlesSuccessOrFetchKeyBundlesErrorOrFetchKeyBundlesErrorFallbackMixinGroup;switch(t.name){case"FetchKeyBundlesUserSuccess":{var n,a,i=t.value,l=i.preKeyMixin,s=i.elementValue,u=i.deviceIdentityMixin,c=i.skeyIdKeyIDMixin,d=i.skeyValueKeyDataMixin,m=i.skeySignatureElementValue,p=i.registrationElementValue;return{deviceIdentity:(n=u==null?void 0:u.deviceIdentityElementValue)!=null?n:null,identity:s,skey:{id:o("WAParsableXmlNode").convertBytesToUint(c.elementValue,3),pubkey:d.elementValue,signature:m},key:l?{id:o("WAParsableXmlNode").convertBytesToUint(l.keyIdKeyIDMixin.elementValue,3),pubkey:(a=l.keyValueKeyDataMixin)==null?void 0:a.elementValue}:null,regId:o("WAParsableXmlNode").convertBytesToUint(p,4),wid:o("WAWebWidFactory").createWid(e.jid)}}case"FetchKeyBundlesUserErrorFallback":case"FetchKeyBundlesUserError":{var _=t.value,f=_.errorCode,g=_.errorText;return r("err")("fetchPrekeys: list item error: "+f+" "+g)}}});if(l.length===0)throw r("err")("fetchPrekeys: empty key info");return l}),d.apply(this,arguments)}function m(e){var t=[],n=[],r=[];return e.forEach(function(e){e instanceof Error?r.push(e):e.wid.device!=null&&e.wid.device!==o("WAJids").DEFAULT_DEVICE_ID?n.push(e):t.push(e)}),[].concat(t,n,r)}l.fetchPrekeys=s,l.fetchPrekeyBundles=c,l.sortPrekeyBundles=m}),98);
__d("WAWebFrontendL10nHelpers",["WALogger","WATimeUtils","WAWebAlarm","WAWebCookieDomain","WAWebCookieManager","WAWebL10nGetRenderedLocale","WAWebRuntimeEnvironmentUtils","WAWebURLUtils"],(function(t,n,r,o,a,i,l){var e,s="wa_web_lang_pref",u=null,c="\uD83C\uDF10",d="%F0%9F%8C%90";function m(t){if(!o("WAWebRuntimeEnvironmentUtils").isWorker()){u!=null&&r("WAWebAlarm").clearTimeout(u);var n=Date.now()+4*o("WATimeUtils").WEEK_MILLISECONDS;o("WAWebCookieManager").setCookie({name:s,value:t,path:"/",domain:o("WAWebCookieDomain").COOKIE_DOMAIN,secure:!0,expirationDate:n}),u=r("WAWebAlarm").setLocalTimeout(function(){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["l10n: renewing lang pref cookie TTL to: ",""])),t),m(t)},o("WATimeUtils").castUnixTimeToMillisTime(o("WATimeUtils").futureUnixTime(2*o("WATimeUtils").WEEK_SECONDS)))}}function p(){if(!o("WAWebRuntimeEnvironmentUtils").isWorker()){var e=o("WAWebCookieManager").getCookie(s);e==null?m(o("WAWebL10nGetRenderedLocale").WAWebL10nGetRenderedLocale()):m(e)}}function _(){if(!(o("WAWebRuntimeEnvironmentUtils").isWorker()||!r("WAWebURLUtils").canMuckHistory())){var e=self.location.href;(e.includes("/"+d+"/")||e.includes("/"+c+"/"))&&window.history.replaceState({},"","/");var t=new URL(e);t.searchParams.get("locale")!=null&&(t.searchParams.delete("locale"),window.history.replaceState({},"",t.href))}}l.setWAWebLocalePrefCookie=m,l.extendWAWebLocalePrefCookieTtl=p,l.mungeWAWebLocaleOverrideFromUrlIfNecessary=_}),98);
__d("WAWebProfilePicPrivacyTokenGating",["WAWebABProps"],(function(t,n,r,o,a,i,l){function e(){return o("WAWebABProps").getABPropConfigValue("profile_scraping_privacy_token_in_photo_iq")}l.isProfilePicIQPrivacyTokenEnabled=e}),98);
__d("WAWebGetProfilePicJob",["Promise","WAJids","WALogger","WASmaxProfilePictureGetRPC","WAWebBackendErrors","WAWebProfilePicPrivacyTokenGating","WAWebWidToJid","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u,c;function d(e,t){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r){if(t.isStatus()||t.isBroadcast())return o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["getProfilePic failed with an invalid WID: ",""])),t.toString()).verbose(),(c||(c=n("Promise"))).reject(new(o("WAWebBackendErrors")).ServerStatusCodeError(401,"getProfilePic failed with an invalid WID: "+t.toString()));var a=r.preview,i=a===void 0?!0:a,l=r.invite,d=r.photoId,m=r.tcToken,f=r.commonGid,g=yield o("WASmaxProfilePictureGetRPC").sendGetRPC({iqTarget:o("WAWebWidToJid").widToChatJid(t),pictureType:i?"preview":"image",pictureId:d!=null?String(d):void 0,pictureQuery:"url",pictureInvite:l,tCTokenMixinArgs:p(m),pictureCommonGid:_(f)});switch(g.name){case"GetResponseSuccessPictureURL":{var h=g.value,y=h.pictureId,C=h.pictureType,b=h.pictureUrl,v=h.pictureDirectPath,S=h.pictureHash;return o("WALogger").DEV(s||(s=babelHelpers.taggedTemplateLiteralLoose(["getProfilePic: "," ",", ",", ",""])),t.toString(),y,C,b),{tag:y,type:C,eurl:b,directPath:v,filehash:S}}case"GetResponseError":{var R=g.value.errorProfilePictureGetErrors.value;return o("WALogger").DEV(u||(u=babelHelpers.taggedTemplateLiteralLoose(["getProfilePic failed: ",":",""])),R.code,R.text),(c||(c=n("Promise"))).reject(new(o("WAWebBackendErrors")).ServerStatusCodeError(Number(R.code),R.text))}case"GetResponseSuccessAvatarURLs":case"GetResponseSuccessNoData":case"GetResponseSuccessPictureBlob":return(c||(c=n("Promise"))).reject(g.value.type)}}),m.apply(this,arguments)}function p(e){var t;return o("WAWebProfilePicPrivacyTokenGating").isProfilePicIQPrivacyTokenEnabled()&&e!=null&&(t={privacyTokenContentsMixinArgs:{anyElementValue:new Uint8Array(e)}}),t}function _(e){return o("WAWebProfilePicPrivacyTokenGating").isProfilePicIQPrivacyTokenEnabled()&&e!=null?o("WAJids").toGroupJid(e.toString()):null}l.getProfilePic=d}),98);
__d("WAWebGetPushServerSettingsJob",["WADeprecatedSendIq","WADeprecatedWapParser","WALogger","WAWap","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u,c=new(r("WADeprecatedWapParser"))("getPushServerSettings",function(t){if(!t.hasChild("error")){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["getPushServerSettings: success"]))).tags("push-notification");var n=t.child("settings"),r=n.attrString("webserverkey");return r}var a=t.child("error"),i=a.attrInt("code"),l=a.attrString("text");return o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["getPushServerSettingsRequest: server response with ",", ",""])),i,l).tags("push-notification"),{errorCode:i,errorText:l}}),d=(u=o("WAWap")).wap("iq",{to:u.S_WHATSAPP_NET,type:"get",xmlns:"urn:xmpp:whatsapp:push",id:u.generateId()},u.wap("settings",null));function m(){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield o("WADeprecatedSendIq").deprecatedSendIq(d,c);if(!e.success){var t=e.errorCode,n=e.errorText;return{errorCode:t,errorText:n}}return e.result}),p.apply(this,arguments)}l.getPushServerSettings=m}),98);
__d("WAWebGuestCommonUtils",["WAWebMiscBrowserUtils","WAWebUA"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e;return(navigator.userAgent.includes("WhatsApp-AppClip")&&typeof window!="undefined"&&((e=window.webkit)==null||(e=e.messageHandlers)==null||(e=e.WAAppClipHandler)==null?void 0:e.postMessage)!==void 0)===!0}function s(){var t=r("WAWebMiscBrowserUtils").info(),n=o("WAWebUA").UA.parser.getResult();return{browserName:e()?"WhatsApp-AppClip":t.name,browserVersion:n.browser.version,osName:t.os,osVersion:t.version}}l.isAppClipWebView=e,l.getBrowserAndOsDetails=s}),98);
__d("WAWebWamEnumGuestUpsellActionType",[],(function(t,n,r,o,a,i){var e=Object.freeze({VIEW:1,CLICK:2,DISMISS:3,DOWNLOAD_CTA_CLICK:4});i.GUEST_UPSELL_ACTION_TYPE=e}),66);
__d("WAWebWamEnumGuestUpsellEntryPointType",[],(function(t,n,r,o,a,i){var e=Object.freeze({BANNER_DOWNLOAD_CTA:1,AUDIO_CALL:2,VIDEO_CALL:3,ATTACHMENT:4,NEW_INVITE:5,LANDING_SCREEN_DOWNLOAD_CTA:6,SESSION_REOPEN:7});i.GUEST_UPSELL_ENTRY_POINT_TYPE=e}),66);
__d("WAWebGuestUpsellInteractionWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumGuestUpsellActionType","WAWebWamEnumGuestUpsellEntryPointType"],(function(t,n,r,o,a,i,l){var e=o("WAWebWamCodegenUtils").defineEvents({GuestUpsellInteraction:[7146,{guestUpsellAction:[1,o("WAWebWamEnumGuestUpsellActionType").GUEST_UPSELL_ACTION_TYPE],guestUpsellEntryPoint:[2,o("WAWebWamEnumGuestUpsellEntryPointType").GUEST_UPSELL_ENTRY_POINT_TYPE]},[1,1,1],"regular"]},{GuestUpsellInteraction:[]});l.GuestUpsellInteractionWamEvent=e}),98);
__d("WAWebGuestUserPrefs",["WAWebUserPrefsKeys","WAWebUserPrefsStore"],(function(t,n,r,o,a,i,l){function e(){var e=r("WAWebUserPrefsStore").get(o("WAWebUserPrefsKeys").UserPrefs.GuestActiveInviteCode);return typeof e=="string"?e:""}function s(e){r("WAWebUserPrefsStore").set(o("WAWebUserPrefsKeys").UserPrefs.GuestActiveInviteCode,e)}function u(){var e=r("WAWebUserPrefsStore").get(o("WAWebUserPrefsKeys").UserPrefs.GuestDeviceId);return typeof e=="string"?e:""}function c(e){r("WAWebUserPrefsStore").set(o("WAWebUserPrefsKeys").UserPrefs.GuestDeviceId,e)}function d(){var e=r("WAWebUserPrefsStore").get(o("WAWebUserPrefsKeys").UserPrefs.GuestSessionId);return typeof e=="string"?e:""}function m(e){r("WAWebUserPrefsStore").set(o("WAWebUserPrefsKeys").UserPrefs.GuestSessionId,e)}function p(){var e=r("WAWebUserPrefsStore").get(o("WAWebUserPrefsKeys").UserPrefs.GuestLastPageLoadTs);return typeof e=="number"?e:0}function _(e){r("WAWebUserPrefsStore").set(o("WAWebUserPrefsKeys").UserPrefs.GuestLastPageLoadTs,e)}l.getActiveGuestInviteCode=e,l.setActiveGuestInviteCode=s,l.getGuestDeviceId=u,l.setGuestDeviceId=c,l.getGuestSessionId=d,l.setGuestSessionId=m,l.getGuestLastPageLoadTs=p,l.setGuestLastPageLoadTs=_}),98);
__d("WAWebGuestWamConstants",[],(function(t,n,r,o,a,i){var e=1,l=2,s="guest";i.WAM_IN_MEMORY_BUFFERING_DURATION_IN_SECS_FOR_GUEST=e,i.WAM_BUFFER_ROTATE_INTERVAL_IN_SECS_FOR_GUEST=l,i.WAM_GUEST_TAB_ID=s}),66);
__d("WAWebGuestWamUtils",["WALogger","WAWebGuestCommonUtils","WAWebGuestUpsellInteractionWamEvent","WAWebGuestWamConstants","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e;function s(e,t,n){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,n,r){r===void 0&&(r=!1),o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Guest upsell action: "," for entrypoint: ",", flushWamBuffers: ",""])),n,t,r);var a=new(o("WAWebGuestUpsellInteractionWamEvent")).GuestUpsellInteractionWamEvent({guestUpsellAction:n,guestUpsellEntryPoint:t});return r?a.commitAndWaitForFlush(r):a.commit()}),u.apply(this,arguments)}function c(){var e=o("WAWebGuestCommonUtils").getBrowserAndOsDetails();return{browser:e.browserName,browserVersion:e.browserVersion,deviceName:e.osName,deviceVersion:e.osVersion,webcTabId:o("WAWebGuestWamConstants").WAM_GUEST_TAB_ID}}l.logUpsellAction=s,l.getGuestWamOverrides=c}),98);
__d("WAWebIdentityApiUtils",["WABinary","WAWebSignalCommonUtils","WAWebSignalProtocolStore","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){function e(e,t){for(var n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return e[n]-t[n];return e.length-t.length}function s(e){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield c(e);return t.map(function(t,n){if(t==null)throw r("err")("getAllIdentityKeys: missing identity key for device "+String(e[n]));return t})}),u.apply(this,arguments)}function c(e){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield o("WAWebSignalProtocolStore").getPersistSignalProtocolStore().bulkLoadIdentityKey(e.map(function(e){return o("WAWebSignalCommonUtils").createSignalAddress(e)}));return t.map(function(e){return e==null?null:new Uint8Array(o("WAWebSignalCommonUtils").strToBuffer(e))})}),d.apply(this,arguments)}function m(t){var n=new(o("WABinary")).Binary;return t.sort(e).forEach(function(e){n.writeByteArray(e)}),n.readByteArrayView()}l.getAllIdentityKeysBytesOrThrow=s,l.getAllIdentityKeysBytes=c,l.identityKeysToBinary=m}),98);
__d("WAWebInitWaitForEvents",["WAWebEventsWaitForOfflineDeliveryEnd","WAWebEventsWaitForReadyForOffline"],(function(t,n,r,o,a,i,l){function e(){o("WAWebEventsWaitForReadyForOffline").initWaitForOfflineProcessReady(),o("WAWebEventsWaitForOfflineDeliveryEnd").initWaitForOfflineDeliveryEnd()}l.initOfflineResumeWaitForEvents=e}),98);
__d("WAWebWamEnumProjectCode",[],(function(t,n,r,o,a,i){var e=Object.freeze({DIT:1,DIRECTORY_SEARCH:2});i.PROJECT_CODE=e}),66);
__d("WAWebWamEnumSignCredentialResult",[],(function(t,n,r,o,a,i){var e=Object.freeze({SUCCESS:1,ERROR_BAD_REQUEST:2,ERROR_SERVER:3,ERROR_OTHER:4,ERROR_CLIENT_NETWORK:5});i.SIGN_CREDENTIAL_RESULT=e}),66);
__d("WAWebSignCredentialWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumApplicationState","WAWebWamEnumProjectCode","WAWebWamEnumSignCredentialResult"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({SignCredential:[2242,{applicationState:[6,o("WAWebWamEnumApplicationState").APPLICATION_STATE],isFromWameta:[8,e.TYPES.BOOLEAN],overallT:[4,e.TYPES.TIMER],projectCode:[7,o("WAWebWamEnumProjectCode").PROJECT_CODE],retryCount:[2,e.TYPES.INTEGER],signCredentialResult:[1,o("WAWebWamEnumSignCredentialResult").SIGN_CREDENTIAL_RESULT],signCredentialT:[3,e.TYPES.TIMER],waConnectedToChatd:[5,e.TYPES.BOOLEAN]},[1,1,1],"regular"]},{SignCredential:[]});l.SignCredentialWamEvent=s}),98);
__d("privateStatsToken",["Promise","WAACSTokenUtils","WADeprecatedSendIq","WADeprecatedWapParser","WAErrors","WALogger","WAPromiseRetryLoop","WATimeUtils","WAWamPrivateStatsToken","WAWamStorage","WAWap"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=3,m=new(r("WADeprecatedWapParser"))("issuePrivateStatsToken",function(e){var t=e.child("sign_credential"),n=t.child("signed_credential"),r=n.contentBytes(),o=t.child("acs_public_key"),a=o.contentBytes();return{signedCredential:r,acsPublicKey:a}});function p(e){switch(e.errorCode){case 400:return"bad-request";case 500:return"internal-server-error";case 501:return"feature-not-implemented";case 503:return"service-unavailable";default:return"unknown"}}function _(t){var r=o("WATimeUtils").monotonicTime(),a={overallStartTime:r,retryStartTime:r,retryAttemptsLeft:d},i=o("WAACSTokenUtils").getBlindedToken(),l=i.token,_=i.blindedToken,f=i.blindingFactor,g=function(i){a.retryAttemptsLeft<d&&(a.retryStartTime=o("WATimeUtils").monotonicTime());var r=o("WAWap").wap("iq",{id:o("WAWap").generateId(),to:o("WAWap").S_WHATSAPP_NET,type:"get",xmlns:"privatestats"},o("WAWap").wap("sign_credential",{version:"1"},o("WAWap").wap("blinded_credential",null,_))),g=t||o("WADeprecatedSendIq").deprecatedSendIqWithoutRetry;return g(r,m).then(function(t){if(!t.success){var n=p(t);o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["issuePrivateStatsToken: failed ",""])),n),n!=="internal-server-error"||a.retryAttemptsLeft<=0?i({result:null,metric:babelHelpers.extends({},a,{result:n})}):a.retryAttemptsLeft--;return}var r=t.result,u=r.signedCredential,c=r.acsPublicKey,d=o("WAWamPrivateStatsToken").unblindToken(u,f,c);if(d==null){o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["issuePrivateStatsToken: failed to unblind the signed token"]))),i({result:null,metric:babelHelpers.extends({},a,{result:"decryption-error"})});return}i({result:{token:l,sharedSecret:o("WAACSTokenUtils").getSharedSecret({token:l,unblindedSignedToken:d})},metric:babelHelpers.extends({},a,{result:"success"})})}).catch(function(e){if(e instanceof o("WAErrors").Disconnected)o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["issuePrivateStatsToken: Disconnected"]))),a.retryAttemptsLeft<=0?i({result:null,metric:babelHelpers.extends({},a,{result:"disconnected"})}):a.retryAttemptsLeft--;else return(c||(c=n("Promise"))).reject(e)})},h=new(o("WAPromiseRetryLoop")).PromiseRetryLoop({name:"issuePrivateStatsToken",timer:{algo:{type:"exponential",first:250},max:1e3},code:g});return h.start(),h.promise()}function f(e){return o("WAWamStorage").redeemPrivateStatsToken().then(function(t){return t?{result:t}:_(e).then(function(e){var t=babelHelpers.extends({},e),n=e.result;return n?o("WAWamStorage").savePrivateStatsToken(n).then(function(){return t}):t})})}l.issuePrivateStatsToken=_,l.getToken=f}),98);
__d("WAWebIssuePrivateStatsToken",["WADeprecatedSendIq","WALogger","WASemaphore","WATimeUtils","WAWebSignCredentialWamEvent","WAWebWamEnumApplicationState","WAWebWamEnumSignCredentialResult","asyncToGeneratorRuntime","privateStatsToken"],(function(t,n,r,o,a,i,l){var e,s=3;function u(e){switch(e){case"success":return o("WAWebWamEnumSignCredentialResult").SIGN_CREDENTIAL_RESULT.SUCCESS;case"bad-request":return o("WAWebWamEnumSignCredentialResult").SIGN_CREDENTIAL_RESULT.ERROR_BAD_REQUEST;case"internal-server-error":return o("WAWebWamEnumSignCredentialResult").SIGN_CREDENTIAL_RESULT.ERROR_SERVER;case"disconnected":return o("WAWebWamEnumSignCredentialResult").SIGN_CREDENTIAL_RESULT.ERROR_CLIENT_NETWORK;default:return o("WAWebWamEnumSignCredentialResult").SIGN_CREDENTIAL_RESULT.ERROR_OTHER}}function c(e){var t=e.result,n=e.overallStartTime,r=e.retryStartTime,a=e.retryAttemptsLeft,i=u(t);new(o("WAWebSignCredentialWamEvent")).SignCredentialWamEvent({signCredentialResult:i,overallT:o("WATimeUtils").monotonicTimeSince(n),signCredentialT:o("WATimeUtils").monotonicTimeSince(r),retryCount:s-a,waConnectedToChatd:t!=="disconnected",applicationState:document.visibilityState==="visible"?o("WAWebWamEnumApplicationState").APPLICATION_STATE.FOREGROUND:o("WAWebWamEnumApplicationState").APPLICATION_STATE.BACKGROUND}).commit()}var d=new(o("WASemaphore")).Semaphore(1);function m(){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=yield d.acquire();try{var n=yield o("privateStatsToken").getToken(o("WADeprecatedSendIq").deprecatedSendIqWithoutRetry),r=n.result,a=n.metric;return a!=null&&c(a),r||o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Couldn't get a private stats token"]))),r}finally{t.release()}}),p.apply(this,arguments)}l.getToken=m}),98);
__d("WAWebKeyboardContext",["react"],(function(t,n,r,o,a,i,l){var e,s=(e||(e=o("react"))).createContext,u=s({isKeyboardUser:!1,setIsKeyboardUser:function(){}});l.default=u}),98);
__d("WAWebLazyLoadedRetriable",["Promise","WALogger","WANullthrows","WAPromiseDelays","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){var e,s,u,c;function d(t){return function(n,r){o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Loadable error: ",""])),n.stack);var a=r>1?"s":"",i="loadable:"+t+" failed to load after ["+r+"] attempt"+a;o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Failed to load a component"]))).sendLogs(i)}}var m=10;function p(e,t){var a=d(t),i="INIT",l,s=0;return function d(){switch(i){case"INIT":case"FAILURE":return i="INFLIGHT",l=e().then(function(e){return e||a(r("err")("Lazyload response is empty"),s),i="SUCCESS",e}).catch((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){if(o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Lazyload failure for component ",""])),t).devConsole(e),i="FAILURE",s++,s<=m)return yield o("WAPromiseDelays").delayMs(s*1e3),d();throw a(e,s),e});return function(t){return e.apply(this,arguments)}})()),l;case"INFLIGHT":case"SUCCESS":return r("WANullthrows")(l);default:return(c||(c=n("Promise"))).reject(r("err")("retriable_promise_hoc:promiseStatus is invalid"))}}}l.default=p}),98);
__d("WAWebLinkDeviceEvents",["WAWebEventEmitter"],(function(t,n,r,o,a,i,l){var e=(function(e){function t(){return e.apply(this,arguments)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.triggerRefreshAltLinkingCode=function(){this.trigger("link_device_events:refresh_alt_linking_code")},n.triggerErrorAltLinking=function(){this.trigger("link_device_events:error_alt_linking")},n.triggerPrimaryHelloReceived=function(){this.trigger("link_device_events:primary_hello_received")},t})(r("WAWebEventEmitter")),s=new e;l.WAWebLinkDeviceEvents=s}),98);
__d("WAWebLinkDeviceAction",["WALogger","WASmaxMdGetCountryCodeRPC","WAWebAltDeviceLinkingApi","WAWebCmd","WAWebLinkDeviceEvents","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e;function s(){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var t=yield o("WASmaxMdGetCountryCodeRPC").sendGetCountryCodeRPC();return t.value.countryCodeIso}catch(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["alt device linking: sendGetCountryCodeRPC failed with error: ",""])),t).sendLogs("alt device linking: sendGetCountryCodeRPC failed")}}),u.apply(this,arguments)}function c(e){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){o("WAWebCmd").Cmd.refreshQR(),e.linkDeviceMethod===o("WAWebAltDeviceLinkingApi").PairingType.ALT_DEVICE_LINKING?(yield o("WAWebAltDeviceLinkingApi").initializeAltDeviceLinking(),o("WAWebAltDeviceLinkingApi").setPairingType(o("WAWebAltDeviceLinkingApi").PairingType.ALT_DEVICE_LINKING)):(yield o("WAWebAltDeviceLinkingApi").initializeQRLinking(),o("WAWebAltDeviceLinkingApi").setPairingType(o("WAWebAltDeviceLinkingApi").PairingType.QR_CODE))}),d.apply(this,arguments)}function m(e,t){return o("WAWebAltDeviceLinkingApi").startAltLinkingFlow(e,t)}function p(e){o("WAWebLinkDeviceEvents").WAWebLinkDeviceEvents.trigger("link_device_events:refresh_alt_linking_code")}function _(e){o("WAWebLinkDeviceEvents").WAWebLinkDeviceEvents.trigger("link_device_events:force_manual_refresh")}function f(){o("WAWebLinkDeviceEvents").WAWebLinkDeviceEvents.trigger("link_device_events:error_alt_linking")}function g(){o("WAWebLinkDeviceEvents").WAWebLinkDeviceEvents.trigger("link_device_events:primary_hello_received")}l.getPreselectedCountryCodeIso=s,l.resetLinkDeviceState=c,l.genLinkDeviceCodeForPhoneNumber=m,l.refreshAltLinkingCode=p,l.forceManualRefresh=_,l.errorAltLinking=f,l.primaryHelloReceivedAltLinking=g}),98);
__d("fbjs/lib/emptyFunction",["emptyFunction"],(function(t,n,r,o,a,i){"use strict";a.exports=n("emptyFunction")}),null);
__d("fbjs/lib/invariant",["invariant"],(function(t,n,r,o,a,i){"use strict";a.exports=n("invariant")}),null);
__d("fbjs/lib/warning",["warning"],(function(t,n,r,o,a,i){"use strict";a.exports=n("warning")}),null);
__d("prop-types/lib/ReactPropTypesSecret",[],(function(t,n,r,o,a,i){"use strict";var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";a.exports=e}),null);
__d("prop-types/checkPropTypes",["fbjs/lib/invariant","fbjs/lib/warning","prop-types/lib/ReactPropTypesSecret"],(function(t,n,r,o,a,i){"use strict";var e;function l(e,t,n,r,o){}a.exports=l}),null);
__d("prop-types/prop-types",["fbjs/lib/emptyFunction","fbjs/lib/invariant","fbjs/lib/warning","prop-types/checkPropTypes","prop-types/lib/ReactPropTypesSecret"],(function(t,n,r,o,a,i){var e=function(){n("fbjs/lib/invariant")(0,1492)},l=function(){return e},s;e.isRequired=e;var u={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:l,element:e,instanceOf:l,node:e,objectOf:l,oneOf:l,oneOfType:l,shape:l};u.checkPropTypes=n("fbjs/lib/emptyFunction"),u.PropTypes=u,a.exports=u}),null);
__d("prop-types",["ReactFbPropTypes","prop-types/prop-types"],(function(t,n,r,o,a,i){a.exports=n("prop-types/prop-types")}),null);
/**
 * License: https://www.facebook.com/legal/license/l6Md91cKJ3N/
 */
__d("react-loadable-5.5.0",["Promise","prop-types","react"],(function(t,n,r,o,a,i){"use strict";var e,l,s=typeof Symbol=="function"&&typeof(typeof Symbol=="function"?Symbol.iterator:"@@iterator")=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==(typeof Symbol=="function"?Symbol.prototype:"@@prototype")?"symbol":typeof e};function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function d(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=e||(e=n("react")),p=[],_=[];function f(e){return(typeof __webpack_modules__=="undefined"?"undefined":s(__webpack_modules__))!=="object"?!1:e().every(function(e){return typeof e!="undefined"&&typeof __webpack_modules__[e]!="undefined"})}function g(e){var t=e(),n={loading:!0,loaded:null,error:null};return n.promise=t.then(function(e){return n.loading=!1,n.loaded=e,e}).catch(function(e){throw n.loading=!1,n.error=e,e}),n}function h(e){var t={loading:!1,loaded:{},error:null},r=[];try{Object.keys(e).forEach(function(n){var o=g(e[n]);o.loading?t.loading=!0:(t.loaded[n]=o.loaded,t.error=o.error),r.push(o.promise),o.promise.then(function(e){t.loaded[n]=e}).catch(function(e){t.error=e})})}catch(e){t.error=e}return t.promise=(l||(l=n("Promise"))).all(r).then(function(e){return t.loading=!1,e}).catch(function(e){throw t.loading=!1,e}),t}function y(e){return e&&e.__esModule?e.default:e}function C(e,t){return m.createElement(y(e),t)}function b(e,t){var r,o;if(!t.loading)throw new Error("react-loadable requires a `loading` component");var a=Object.assign({loader:null,loading:null,delay:200,timeout:null,render:C,webpack:null,modules:null},t),i=null;function l(){return i||(i=e(a.loader)),i.promise}return p.push(l),typeof a.webpack=="function"&&_.push(function(){if(f(a.webpack))return l()}),o=r=(function(t){d(n,t);function n(r){u(this,n);var o=c(this,t.call(this,r));return o.retry=function(){o.setState({error:null,loading:!0,timedOut:!1}),i=e(a.loader),o._loadModule()},l(),o.state={error:i.error,pastDelay:!1,timedOut:!1,loading:i.loading,loaded:i.loaded},o}return n.preload=function(){return l()},n.prototype.componentWillMount=function(){this._mounted=!0,this._loadModule()},n.prototype._loadModule=function(){var e=this;if(this.context.loadable&&Array.isArray(a.modules)&&a.modules.forEach(function(t){e.context.loadable.report(t)}),!!i.loading){typeof a.delay=="number"&&(a.delay===0?this.setState({pastDelay:!0}):this._delay=setTimeout(function(){e.setState({pastDelay:!0})},a.delay)),typeof a.timeout=="number"&&(this._timeout=setTimeout(function(){e.setState({timedOut:!0})},a.timeout));var t=function(){e._mounted&&(e.setState({error:i.error,loaded:i.loaded,loading:i.loading}),e._clearTimeouts())};i.promise.then(function(){t()}).catch(function(e){t()})}},n.prototype.componentWillUnmount=function(){this._mounted=!1,this._clearTimeouts()},n.prototype._clearTimeouts=function(){clearTimeout(this._delay),clearTimeout(this._timeout)},n.prototype.render=function(){return this.state.loading||this.state.error?m.createElement(a.loading,{isLoading:this.state.loading,pastDelay:this.state.pastDelay,timedOut:this.state.timedOut,error:this.state.error,retry:this.retry}):this.state.loaded?a.render(this.state.loaded,this.props):null},n})(m.Component),r.contextTypes={loadable:n("prop-types").shape({report:n("prop-types").func.isRequired})},o}function v(e){return b(g,e)}function S(e){if(typeof e.render!="function")throw new Error("LoadableMap requires a `render(loaded, props)` function");return b(h,e)}v.Map=S;var R=(function(e){d(t,e);function t(){return u(this,t),c(this,e.apply(this,arguments))}return t.prototype.getChildContext=function(){return{loadable:{report:this.props.report}}},t.prototype.render=function(){return m.Children.only(this.props.children)},t})(m.Component);R.propTypes={report:n("prop-types").func.isRequired},R.childContextTypes={loadable:n("prop-types").shape({report:n("prop-types").func.isRequired}).isRequired},v.Capture=R;function L(e){for(var t=[];e.length;){var r=e.pop();t.push(r())}return(l||(l=n("Promise"))).all(t).then(function(){if(e.length)return L(e)})}v.preloadAll=function(){return new(l||(l=n("Promise")))(function(e,t){L(p).then(e,t)})},v.preloadReady=function(){return new(l||(l=n("Promise")))(function(e,t){L(_).then(e,e)})},a.exports=v}),null);
__d("react-loadable",["react-loadable-5.5.0"],(function(t,n,r,o,a,i){a.exports=n("react-loadable-5.5.0")}),null);
__d("WAWebLoadable",["react","react-loadable"],(function(t,n,r,o,a,i,l){var e=["forwardedRefDoNotUse"],s=["ref"],u,c=u||(u=r("react"));function d(t){var n=t.loader,o=t.loading,a=r("react-loadable")({loader:n,loading:function(t){return t.pastDelay?o(t):null},render:function(n,r){var t=r.forwardedRefDoNotUse,o=babelHelpers.objectWithoutPropertiesLoose(r,e);return c.jsx(n,babelHelpers.extends({ref:t},o))}});function l(e){var t=e.ref,n=babelHelpers.objectWithoutPropertiesLoose(e,s);return c.jsx(a,babelHelpers.extends({forwardedRefDoNotUse:t},n))}return l.displayName=l.name+" [from "+i.id+"]",l}l.default=d}),98);
__d("WAWebLockOutlineIcon.react",["WAWebSvgComponentBase","react","stylex"],(function(t,n,r,o,a,i,l){var e=["iconXstyle","height","width","name","viewBox"],s,u,c=s||(s=r("react")),d="lock-outline";function m(t){var n=t.iconXstyle,a=t.height,i=t.width,l=t.name,s=t.viewBox,m=babelHelpers.objectWithoutPropertiesLoose(t,e),p;if(s){var _=s.x,f=_===void 0?0:_,g=s.y,h=g===void 0?0:g,y=s.width,C=y===void 0?0:y,b=s.height,v=b===void 0?0:b;p=[f,h,C,v].join(" ")}var S=24,R=24;return(a!=null||i!=null)&&(S=a,R=i),c.jsx(o("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers.extends({name:l!=null?l:d},m,{children:c.jsxs("svg",{viewBox:p!=null?p:"0 0 24 24",height:S,width:R,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(n),fill:"none",children:[c.jsx("title",{children:l!=null?l:d}),c.jsx("path",{d:"M6.793 22.4C6.29767 22.4 5.875 22.2237 5.525 21.8712C5.175 21.5187 5 21.095 5 20.6V11C5 10.505 5.17625 10.0813 5.52875 9.72875C5.88125 9.37625 6.305 9.2 6.8 9.2H7.4V6.8C7.4 5.472 7.86858 4.34 8.80575 3.404C9.74275 2.468 10.8761 2 12.2057 2C13.5352 2 14.6667 2.468 15.6 3.404C16.5333 4.34 17 5.472 17 6.8V9.2H17.6C18.095 9.2 18.5187 9.37625 18.8712 9.72875C19.2237 10.0813 19.4 10.505 19.4 11V20.6C19.4 21.095 19.2237 21.5187 18.871 21.8712C18.5183 22.2237 18.0943 22.4 17.599 22.4H6.793ZM6.8 20.6H17.6V11H6.8V20.6ZM12.2052 17.6C12.7017 17.6 13.125 17.4233 13.475 17.0698C13.825 16.7163 14 16.2913 14 15.7948C14 15.2983 13.8232 14.875 13.4697 14.525C13.1162 14.175 12.6912 14 12.1947 14C11.6982 14 11.275 14.1767 10.925 14.5302C10.575 14.8837 10.4 15.3087 10.4 15.8052C10.4 16.3017 10.5767 16.725 10.9302 17.075C11.2837 17.425 11.7087 17.6 12.2052 17.6ZM9.2 9.2H15.2V6.8C15.2 5.96667 14.9083 5.25833 14.325 4.675C13.7417 4.09167 13.0333 3.8 12.2 3.8C11.3667 3.8 10.6583 4.09167 10.075 4.675C9.49167 5.25833 9.2 5.96667 9.2 6.8V9.2Z",fill:"currentColor"})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.LockOutlineIcon=m}),98);
__d("WAWebLockRefreshedIcon.react",["WAWebSvgComponentBase","react","stylex"],(function(t,n,r,o,a,i,l){var e=["iconXstyle","height","width","name","viewBox"],s,u,c=s||(s=r("react")),d="lock-refreshed";function m(t){var n=t.iconXstyle,a=t.height,i=t.width,l=t.name,s=t.viewBox,m=babelHelpers.objectWithoutPropertiesLoose(t,e),p;if(s){var _=s.x,f=_===void 0?0:_,g=s.y,h=g===void 0?0:g,y=s.width,C=y===void 0?0:y,b=s.height,v=b===void 0?0:b;p=[f,h,C,v].join(" ")}var S=24,R=24;return(a!=null||i!=null)&&(S=a,R=i),c.jsx(o("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers.extends({name:l!=null?l:d},m,{children:c.jsxs("svg",{viewBox:p!=null?p:"0 0 24 24",height:S,width:R,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(n),fill:"none",children:[c.jsx("title",{children:l!=null?l:d}),c.jsx("path",{d:"M6 22C5.45 22 4.97917 21.8042 4.5875 21.4125C4.19583 21.0208 4 20.55 4 20V10C4 9.45 4.19583 8.97917 4.5875 8.5875C4.97917 8.19583 5.45 8 6 8H7V6C7 4.61667 7.4875 3.4375 8.4625 2.4625C9.4375 1.4875 10.6167 1 12 1C13.3833 1 14.5625 1.4875 15.5375 2.4625C16.5125 3.4375 17 4.61667 17 6V8H18C18.55 8 19.0208 8.19583 19.4125 8.5875C19.8042 8.97917 20 9.45 20 10V20C20 20.55 19.8042 21.0208 19.4125 21.4125C19.0208 21.8042 18.55 22 18 22H6ZM6 20H18V10H6V20ZM12 17C12.55 17 13.0208 16.8042 13.4125 16.4125C13.8042 16.0208 14 15.55 14 15C14 14.45 13.8042 13.9792 13.4125 13.5875C13.0208 13.1958 12.55 13 12 13C11.45 13 10.9792 13.1958 10.5875 13.5875C10.1958 13.9792 10 14.45 10 15C10 15.55 10.1958 16.0208 10.5875 16.4125C10.9792 16.8042 11.45 17 12 17ZM9 8H15V6C15 5.16667 14.7083 4.45833 14.125 3.875C13.5417 3.29167 12.8333 3 12 3C11.1667 3 10.4583 3.29167 9.875 3.875C9.29167 4.45833 9 5.16667 9 6V8Z",fill:"currentColor"})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.LockRefreshedIcon=m}),98);
__d("WAWebLogoutReason",["WAWebLogoutReasonConstants"],(function(t,n,r,o,a,i,l){var e=null,s=null;function u(e){switch(e){case o("WAWebLogoutReasonConstants").LogoutReason.WebFailAddChat:case o("WAWebLogoutReasonConstants").LogoutReason.WebFailEncSalt:case o("WAWebLogoutReasonConstants").LogoutReason.WebFailOfflineResume:case o("WAWebLogoutReasonConstants").LogoutReason.WebFailStorageInitialization:return o("WAWebLogoutReasonConstants").LOGOUT_REASON_CODE.CLIENT_FATAL;case o("WAWebLogoutReasonConstants").LogoutReason.SyncdFailure:case o("WAWebLogoutReasonConstants").LogoutReason.SyncdErrorDuringBootstrap:case o("WAWebLogoutReasonConstants").LogoutReason.AccountSyncError:case o("WAWebLogoutReasonConstants").LogoutReason.SyncdTimeout:case o("WAWebLogoutReasonConstants").LogoutReason.CriticalSyncTimeout:return o("WAWebLogoutReasonConstants").LOGOUT_REASON_CODE.SYNC_FAIL;case o("WAWebLogoutReasonConstants").LogoutReason.HistorySyncTimeout:return o("WAWebLogoutReasonConstants").LOGOUT_REASON_CODE.INITIAL_HISTORY_SYNC_TIMEOUT;case o("WAWebLogoutReasonConstants").LogoutReason.AccountLocked:return o("WAWebLogoutReasonConstants").LOGOUT_REASON_CODE.ACCOUNT_LOCKED;default:return null}}function c(t){e=t}function d(e){s=e}function m(){return e}function p(){return s}l.getErrorCodeFromLogoutReason=u,l.setPrevLogoutReasonCode=c,l.setPrevCustomLogoutMessage=d,l.getPrevLogoutReasonCode=m,l.getPrevCustomLogoutMessage=p}),98);
__d("WAWebLruMediaStorageUtils",["invariant","WAWebIdb","WAWebStorage","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l,s){var e="lru-media-storage-idb",u=null;function c(){var t=new(r("WAWebIdb"))(e);u=new(o("WAWebStorage")).Storage(t)}function d(){return u!=null||s(0,56300),u}function m(){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(u==null)throw r("err")("[lru-media-storage-idb] Storage should be created first before being destroyed");try{yield u.purge()}finally{u=null}}),p.apply(this,arguments)}c(),l.getStorage=d,l.destroyStorage=m}),98);
__d("WAWebManagePhoneNumberMappingJob",["WALogger","WAWebApiContact","WAWebWidFactory","WAWebWorkerSafeBackendApi","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u;function c(e){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=new Set;o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["ensurePhoneNumberToLidMapping: ",""])),t.length),t.forEach(function(e){if(e.isUser()&&!(e.isBot()||e.isHosted()||e.isLid()||e.isPSA())){var t=o("WAWebApiContact").getCurrentLid(o("WAWebWidFactory").asUserWidOrThrow(e));t==null&&n.add(e.user)}});var r=Array.from(n).map(function(e){return o("WAWebWidFactory").createUserWidOrThrow(e)});if(o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["ensurePhoneNumberToLidMapping: "," wids: ",""])),r.length,r.map(function(e){return e.toString()}).join()),r.length!==0){var a=!1;yield o("WAWebWorkerSafeBackendApi").workerSafeSendAndReceive("syncContactListJob",{contactIds:r,shouldSyncDevice:a,mode:"query"})}}),d.apply(this,arguments)}l.ensurePhoneNumberToLidMapping=c}),98);
__d("WAWebManageE2ESessionsJob",["Promise","WALogger","WAResolvable","WAWebABProps","WAWebAppTracker","WAWebEventsWaitForOfflineDeliveryEnd","WAWebFetchPrekeysJob","WAWebManagePhoneNumberMappingJob","WAWebProcessKeyBundle","WAWebRunInBatches","WAWebSignal","WAWebWid","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g=new Map,h=new Set,y=new Set,C={SESSION_CHECK:50,PROCESS_KEY_BUNDLES:1};function b(e,t,n){return v.apply(this,arguments)}function v(){return v=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a,i){a===void 0&&(a=!1),i===void 0&&(i=!1);var l=o("WAWebABProps").getABPropConfigValue("web_anr_throttle_message_send_prekeys_processing")||i;yield o("WAWebEventsWaitForOfflineDeliveryEnd").waitForOfflineDeliveryEnd(),o("WAWebAppTracker").AppTracker.start(o("WAWebAppTracker").AppTrackerType.PreKeyProcessing),o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["ensureE2ESessions: "," wids, background:",": ",""])),t.length,l,t.map(function(e){return e.toString()}).join());try{yield o("WAWebManagePhoneNumberMappingJob").ensurePhoneNumberToLidMapping(t)}catch(e){o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["ensureE2ESessions: "," wids, background:",": ensurePhoneNumberToLidMapping call have failed: ",""])),t.length,l,e).sendLogs("ensureE2ESessions",{sampling:.01})}var b=new(o("WAResolvable")).Resolvable,v=[],S=[];l||(y.forEach(function(e){return e.abort()}),h.forEach(function(e){S.push(e),g.set(e,b.promise)}),h.clear()),t.forEach(function(e){if(!e.isUserNotPSA()){o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["ensureE2ESessions: "," wids, background:",": can only estabilish session with user wid"])),t.length,l);return}var n=g.get(e);n?v.push(n):(S.push(e),g.set(e,b.promise))});var R=0,L=0,E=null;try{if(S.length>0){var k=[];l?(E=new AbortController,y.add(E),S.forEach(function(e){h.add(e)}),yield o("WAWebRunInBatches").runInBatches(S,(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,n=yield o("WAWebSignal").Session.hasSignalSessions(e);(t=k).push.apply(t,n)});return function(t){return e.apply(this,arguments)}})(),{batchSize:C.SESSION_CHECK,abortController:E})):k=yield o("WAWebSignal").Session.hasSignalSessions(S);var I=[];if(S.forEach(function(e,t){k[t]?h.delete(e):I.push(e)}),I.length>0){if(o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["ensureE2ESessions: "," wids, background:",": fetch prekeys for "," wids"])),t.length,l,I.length),l){var T=yield o("WAWebFetchPrekeysJob").fetchPrekeyBundles(I,a),D=o("WAWebFetchPrekeysJob").sortPrekeyBundles(T),x=0;yield o("WAWebRunInBatches").runInBatches(D,(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,n;e.forEach(function(e){(e==null?void 0:e.wid)instanceof r("WAWebWid")&&h.delete(e.wid)});var a=yield o("WAWebProcessKeyBundle").processKeyBundles([].concat(e));L+=(t=a.depletedPrekeyCount)!=null?t:0,x+=(n=a.processedPrekeyCount)!=null?n:0});return function(t){return e.apply(this,arguments)}})(),{batchSize:C.PROCESS_KEY_BUNDLES,abortController:E}),o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["ensureE2ESessions: "," wids, background:",": successfully established "," E2E sessions out of "," requested"])),t.length,l,x,t.length)}else{var $,P=yield o("WAWebFetchPrekeysJob").fetchPrekeys(I,a);L=($=P.depletedPrekeyCount)!=null?$:0}R=I.length}}b.resolve()}catch(e){throw o("WALogger").WARN(m||(m=babelHelpers.taggedTemplateLiteralLoose(["ensureE2ESessions: "," wids, background:",": request failed: ",""])),t.length,l,e),b.resolve(e),o("WAWebAppTracker").AppTracker.stop(o("WAWebAppTracker").AppTrackerType.PreKeyProcessing),e}finally{S.forEach(function(e){g.delete(e),h.delete(e)}),E&&y.delete(E)}try{var N=(yield(f||(f=n("Promise"))).all(v)).find(Boolean);if(N)throw N}catch(e){throw o("WALogger").WARN(p||(p=babelHelpers.taggedTemplateLiteralLoose(["ensureE2ESessions: "," wids, background:",": deduped requests failed: ",""])),t.length,l,e),o("WAWebAppTracker").AppTracker.stop(o("WAWebAppTracker").AppTrackerType.PreKeyProcessing),e}finally{o("WAWebAppTracker").AppTracker.stop(o("WAWebAppTracker").AppTrackerType.PreKeyProcessing)}return o("WALogger").LOG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["ensureE2ESessions: "," wids, background:",": "," existing sessions, "," requested, "," requests deduplicated"])),t.length,l,S.length-R,R,v.length),{missedPrekeyCount:R,depletedPrekeyCount:L}}),v.apply(this,arguments)}l.ensureE2ESessions=b}),98);
__d("WAWebMessageSendPerfReporter",["WAWebAndroidMessageSendPerfWamEvent","WAWebMessagingGatingUtils","WAWebWamEnumClientMessageSendStage","WAWebWamEnumMessageType","WAWebWamEnumSizeBucket","gkx"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e){var t=e.chatWid,n=e.mediaType,r=e.messageType;this.$7=!1,this.$8=!1,this.$9=null,this.$11=!1,this.$12=!1,this.$1=Date.now(),this.$2=new Map,this.$5=n,this.$6=r,this.$10=t}var t=e.prototype;return t.setFetchedPrekeyCount=function(t){this.$3=t},t.setSenderKeyDistributionCount=function(t){this.$4=t},t.setMessageIsInvisible=function(t){this.$11=t},t.setMessageIsFirstUserMessage=function(t){this.$12=t},t.setIsRevokeMessage=function(t){this.$7=t},t.setIsDirectedMessage=function(t){this.$8=t},t.setGroupData=function(t){this.$9=t},t.startRenderedStage=function(){this.$13(o("WAWebWamEnumClientMessageSendStage").CLIENT_MESSAGE_SEND_STAGE.CLIENT_RENDERED)},t.postRenderedStage=function(){this.$14(o("WAWebWamEnumClientMessageSendStage").CLIENT_MESSAGE_SEND_STAGE.CLIENT_RENDERED)},t.startSavedStage=function(){this.$13(o("WAWebWamEnumClientMessageSendStage").CLIENT_MESSAGE_SEND_STAGE.CLIENT_SAVED)},t.postSavedStage=function(){this.$14(o("WAWebWamEnumClientMessageSendStage").CLIENT_MESSAGE_SEND_STAGE.CLIENT_SAVED)},t.startPrekeysFetchStage=function(){this.$13(o("WAWebWamEnumClientMessageSendStage").CLIENT_MESSAGE_SEND_STAGE.CLIENT_PREKEYS_FETCH)},t.postPrekeysFetchStage=function(){this.$14(o("WAWebWamEnumClientMessageSendStage").CLIENT_MESSAGE_SEND_STAGE.CLIENT_PREKEYS_FETCH)},t.startWrittenWireStage=function(){this.$13(o("WAWebWamEnumClientMessageSendStage").CLIENT_MESSAGE_SEND_STAGE.CLIENT_WRITTEN_WIRE)},t.postWrittenWireStage=function(){this.$14(o("WAWebWamEnumClientMessageSendStage").CLIENT_MESSAGE_SEND_STAGE.CLIENT_WRITTEN_WIRE)},t.startWaitingToEncryptStage=function(){this.$13(o("WAWebWamEnumClientMessageSendStage").CLIENT_MESSAGE_SEND_STAGE.CLIENT_WAITING_TO_ENCRYPT)},t.postWaitingToEncryptStage=function(){this.$14(o("WAWebWamEnumClientMessageSendStage").CLIENT_MESSAGE_SEND_STAGE.CLIENT_WAITING_TO_ENCRYPT)},t.startReadyToSendStage=function(){this.$13(o("WAWebWamEnumClientMessageSendStage").CLIENT_MESSAGE_SEND_STAGE.CLIENT_READY_TO_SEND)},t.postReadyToSendStage=function(){this.$14(o("WAWebWamEnumClientMessageSendStage").CLIENT_MESSAGE_SEND_STAGE.CLIENT_READY_TO_SEND)},t.startClientEncryptStage=function(){this.$13(o("WAWebWamEnumClientMessageSendStage").CLIENT_MESSAGE_SEND_STAGE.CLIENT_ENCRYPT)},t.postClientEncryptStage=function(){this.$14(o("WAWebWamEnumClientMessageSendStage").CLIENT_MESSAGE_SEND_STAGE.CLIENT_ENCRYPT)},t.$13=function(t){var e=new(o("WAWebAndroidMessageSendPerfWamEvent")).AndroidMessageSendPerfWamEvent({sendStage:t});return this.$2.set(t,e),e},t.$14=function(t){var e,n,a,i,l,s=this.$2.get(t)||this.$13(t);if(s.mediaType=this.$5,s.messageType=this.$6,s.messageIsInvisible=this.$11,s.messageIsFirstUserMessage=this.$12,s.durationRelative=Date.now()-this.$1,s.fetchPrekeys=this.$3!=null&&this.$3>0,s.isRevokeMessage=this.$7,s.isDirectedMessage=this.$8,((e=this.$9)==null?void 0:e.isLid)!=null?s.isLid=this.$9.isLid:this.$6===o("WAWebWamEnumMessageType").MESSAGE_TYPE.INDIVIDUAL&&(s.isLid=this.$10.isLid()),((n=this.$9)==null?void 0:n.wamTypeOfGroup)!=null&&(s.typeOfGroup=this.$9.wamTypeOfGroup),((a=this.$9)==null?void 0:a.participantCount)!=null&&(s.participantCount=this.$9.participantCount),((i=this.$9)==null?void 0:i.deviceSizeBucket)!=null&&(s.deviceSizeBucket=this.$9.deviceSizeBucket),((l=this.$9)==null?void 0:l.deviceCount)!=null){var u=this.$9.deviceCount;s.deviceCount=u,this.$3!=null&&u>0&&(s.fetchPrekeysPercentage=Math.round(this.$3/u*100)),this.$4!=null&&u>0&&(s.senderKeyDistributionCountPercentage=Math.round(this.$4/u*100))}s.participantCount!=null&&s.participantCount>o("WAWebMessagingGatingUtils").getGroupSizeBypassingSampling()||s.fetchPrekeysPercentage!=null&&s.fetchPrekeysPercentage>=50||s.messageIsFirstUserMessage?s.weight=0:s.senderKeyDistributionCountPercentage!=null&&s.senderKeyDistributionCountPercentage>=50?r("gkx")("26258")?s.weight=20:s.weight=1:(s.deviceSizeBucket===o("WAWebWamEnumSizeBucket").SIZE_BUCKET.LT5000||s.deviceSizeBucket===o("WAWebWamEnumSizeBucket").SIZE_BUCKET.LARGEST_BUCKET)&&(r("gkx")("26258")?s.weight=100:s.weight=1),s.markDurationAbs(),s.commit()},e})();l.MessageSendPerfReporter=e}),98);
__d("WAWebWamEnumLogoutReasonType",[],(function(t,n,r,o,a,i){var e=Object.freeze({NETWORK_BLOCKED:1,WRITING_STANZA_ERROR:2,READING_STANZA_ERROR_IO:3,READING_STANZA_READING_IS_OVER:4,READING_STANZA_ERROR_CORRUPT_STREAM:5,PUSH_WITH_SAME_SESSION_ID:6,SCHEDULED_LOGOUT:7,CLIENT_PING_TIMEOUT:8,RECEIPT_TIMEOUT:9,ACTIVE_CONNECTION_TIMEOUT:10,NETWORK_CHANGED:11,SWITCH_ACCOUNT:12,DELETE_ACCOUNT:13,CHANGE_NUMBER:14,MBS_MIGRATION:15,REGISTRATION_RELATED:16,ROADBLOCKED_DETAIL:17,SERVER_ACK_KICK:18,SERVER_PING_KICK:19,CONNECTION_RESET:20});i.LOGOUT_REASON_TYPE=e}),66);
__d("WAWebWamEnumMediaUploadResultType",[],(function(t,n,r,o,a,i){var e=Object.freeze({OK:1,DUPLICATE:3,ERROR_UNKNOWN:2,ERROR_REQUEST:4,ERROR_UPLOAD:5,ERROR_OOM:6,ERROR_IO:7,ERROR_NO_PERMISSIONS:8,ERROR_BAD_MEDIA:9,ERROR_INSUFFICIENT_SPACE:10,ERROR_FNF:11,ERROR_CANCEL:12,ERROR_SERVER:13,ERROR_REQUEST_TIMEOUT:14,ERROR_NOT_FINALIZED:15,ERROR_OPTIMISTIC_HASH:16,ERROR_MEDIA_CONN:17,ERROR_DNS:18,ERROR_THROTTLE:19,ERROR_SSL:20,ERROR_NO_CLIENT_NETWORK:21,SKIPPED_EP_NOT_ONLINE:22,SKIPPED_EP_NOT_1TO1CHAT:23,SKIPPED_EP_UPLOAD_FAILED:24,SKIPPED_EP_MULTI_CHAT:25,SKIPPED_EP_NO_PRIMARY_HOST:26,ERROR_CRONET:27,ERROR_INCOMPLETE_SERVER_RESPONSE:28,ERROR_TRANSCODING:29,ERROR_CANCEL_PROGRAMMATIC:30,ERROR_NO_ROUTE:31,ERROR_TOO_LARGE:32,ERROR_CANNOT_TRANSCODE:33,ERROR_UNKNOWN_MIMETYPE:34,ERROR_UNSUPPORTED_MIMETYPE:35,ERROR_SERVER_REJECTED_MEDIA:36,ERROR_IO_ENCRYPTION:37,ERROR_NO_ENCRYPTION_ALGORITHM:38,ERROR_HOST_SWITCH_REQUIRED:39,ERROR_WAMSYS:40,ERROR_INVALID_URL:41,INTEGRITY_CHECK_FAILURE:42});i.MEDIA_UPLOAD_RESULT_TYPE=e}),66);
__d("WAWebWamEnumMessageSendResultType",[],(function(t,n,r,o,a,i){var e=Object.freeze({OK:1,ERROR_UNKNOWN:3,ERROR_NETWORK:4,ERROR_EXPIRED:5,ERROR_CANCELLED:6,ERROR_UPLOAD:7,ERROR_BACKFILL_USYNC_FAILED:8,ERROR_PAYLOAD_TOO_BIG:9,ERROR_LOCATION:10,ERROR_INVALID_MESSAGE:11,ERROR_E2EE:12,ERROR_INVALID_PROTOBUF:13,SERVER_ERROR:14,EPHEMERALLY_EXPIRED:15,MEDIA_UPLOAD_FAILED:16,ERROR_CLIENT_OUT_OF_MEMORY:17,ERROR_UPLOAD_CANCELLED_MANUALLY:18,ERROR_UPLOAD_CANCELLED_AUTOMATIC:19});i.MESSAGE_SEND_RESULT_TYPE=e}),66);
__d("WAWebWamEnumMessageSendSource",[],(function(t,n,r,o,a,i){var e=Object.freeze({NONE:1,UNANSWERED_CALL_UPSELL:2,UNANSWERED_CALL_UPSELL_REST:3,VIEW_ALL_REPLIES:4});i.MESSAGE_SEND_SOURCE=e}),66);
__d("WAWebMessageSendWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumAddressingMode","WAWebWamEnumAgentEngagementEnumType","WAWebWamEnumBotType","WAWebWamEnumChatOriginsType","WAWebWamEnumDisappearingChatInitiatorType","WAWebWamEnumE2eCiphertextType","WAWebWamEnumE2eFailureReason","WAWebWamEnumEditType","WAWebWamEnumEncryptionTypeCode","WAWebWamEnumEphemeralityInitiatorType","WAWebWamEnumEphemeralityTriggerActionType","WAWebWamEnumInvisibleMessageCategoryType","WAWebWamEnumLogoutReasonType","WAWebWamEnumMediaType","WAWebWamEnumMediaUploadResultType","WAWebWamEnumMessageDistributionEnumType","WAWebWamEnumMessageSendResultType","WAWebWamEnumMessageSendSource","WAWebWamEnumMessageType","WAWebWamEnumOppositeVisibleIdentificationType","WAWebWamEnumPairedMediaType","WAWebWamEnumPrivateAiFeatureName","WAWebWamEnumRevokeType","WAWebWamEnumSizeBucket","WAWebWamEnumStickerMakerSourceType","WAWebWamEnumTypeOfGroupEnum"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({MessageSend:[854,{agentEngagementType:[49,o("WAWebWamEnumAgentEngagementEnumType").AGENT_ENGAGEMENT_ENUM_TYPE],appContext:[72,e.TYPES.STRING],appContextBitfield:[73,e.TYPES.INTEGER],botType:[55,o("WAWebWamEnumBotType").BOT_TYPE],chatOrigins:[58,o("WAWebWamEnumChatOriginsType").CHAT_ORIGINS_TYPE],chatSessionId:[67,e.TYPES.STRING],deviceCount:[31,e.TYPES.INTEGER],deviceSizeBucket:[25,o("WAWebWamEnumSizeBucket").SIZE_BUCKET],disappearingChatInitiator:[30,o("WAWebWamEnumDisappearingChatInitiatorType").DISAPPEARING_CHAT_INITIATOR_TYPE],e2eBackfill:[23,e.TYPES.BOOLEAN],e2eCiphertextType:[10,o("WAWebWamEnumE2eCiphertextType").E2E_CIPHERTEXT_TYPE],e2eCiphertextVersion:[9,e.TYPES.INTEGER],e2eFailureReason:[46,o("WAWebWamEnumE2eFailureReason").E2E_FAILURE_REASON],editDuration:[43,e.TYPES.INTEGER],editType:[44,o("WAWebWamEnumEditType").EDIT_TYPE],encryptionType:[76,o("WAWebWamEnumEncryptionTypeCode").ENCRYPTION_TYPE_CODE],ephemeralityDuration:[21,e.TYPES.INTEGER],ephemeralityInitiator:[47,o("WAWebWamEnumEphemeralityInitiatorType").EPHEMERALITY_INITIATOR_TYPE],ephemeralityTriggerAction:[48,o("WAWebWamEnumEphemeralityTriggerActionType").EPHEMERALITY_TRIGGER_ACTION_TYPE],excessPayloadKbSize:[40,e.TYPES.INTEGER],fastForwardEnabled:[15,e.TYPES.BOOLEAN],hasUsername:[59,e.TYPES.BOOLEAN],hasUsernamePin:[74,e.TYPES.BOOLEAN],invisibleMessageCategory:[64,o("WAWebWamEnumInvisibleMessageCategoryType").INVISIBLE_MESSAGE_CATEGORY_TYPE],isAComment:[54,e.TYPES.BOOLEAN],isAReply:[35,e.TYPES.BOOLEAN],isFromWamsys:[19,e.TYPES.BOOLEAN],isLid:[39,e.TYPES.BOOLEAN],isPq:[82,e.TYPES.BOOLEAN],isPremium:[69,e.TYPES.BOOLEAN],isViewOnce:[22,e.TYPES.BOOLEAN],isWhatsapiBuild:[75,e.TYPES.BOOLEAN],localAddressingMode:[53,o("WAWebWamEnumAddressingMode").ADDRESSING_MODE],logoutReason:[70,o("WAWebWamEnumLogoutReasonType").LOGOUT_REASON_TYPE],mediaCaptionPresent:[8,e.TYPES.BOOLEAN],mediaUploadError:[61,o("WAWebWamEnumMediaUploadResultType").MEDIA_UPLOAD_RESULT_TYPE],mediaUploadRetryCount:[62,e.TYPES.INTEGER],messageDistributionType:[41,o("WAWebWamEnumMessageDistributionEnumType").MESSAGE_DISTRIBUTION_ENUM_TYPE],messageForwardAgeT:[14,e.TYPES.TIMER],messageIsFanout:[5,e.TYPES.BOOLEAN],messageIsFastForward:[13,e.TYPES.BOOLEAN],messageIsFirstUserMessage:[26,e.TYPES.BOOLEAN],messageIsForward:[4,e.TYPES.BOOLEAN],messageIsInternational:[7,e.TYPES.BOOLEAN],messageIsInvisible:[29,e.TYPES.BOOLEAN],messageIsRevoke:[24,e.TYPES.BOOLEAN],messageKeyHash:[57,e.TYPES.STRING],messageMediaType:[3,o("WAWebWamEnumMediaType").MEDIA_TYPE],messageSendOptUploadEnabled:[12,e.TYPES.BOOLEAN],messageSendResult:[1,o("WAWebWamEnumMessageSendResultType").MESSAGE_SEND_RESULT_TYPE],messageSendResultIsTerminal:[17,e.TYPES.BOOLEAN],messageSendSource:[66,o("WAWebWamEnumMessageSendSource").MESSAGE_SEND_SOURCE],messageSendT:[11,e.TYPES.TIMER],messageType:[2,o("WAWebWamEnumMessageType").MESSAGE_TYPE],networkWasDisconnected:[37,e.TYPES.BOOLEAN],oppositeVisibleIdentification:[60,o("WAWebWamEnumOppositeVisibleIdentificationType").OPPOSITE_VISIBLE_IDENTIFICATION_TYPE],overallMediaSize:[42,e.TYPES.NUMBER],pairedMediaType:[71,o("WAWebWamEnumPairedMediaType").PAIRED_MEDIA_TYPE],participantCount:[32,e.TYPES.INTEGER],privateAiFeatureName:[81,o("WAWebWamEnumPrivateAiFeatureName").PRIVATE_AI_FEATURE_NAME],receiverDefaultDisappearingDuration:[28,e.TYPES.INTEGER],resendCount:[16,e.TYPES.INTEGER],retryCount:[6,e.TYPES.INTEGER],revokeDuration:[33,e.TYPES.INTEGER],revokeType:[34,o("WAWebWamEnumRevokeType").REVOKE_TYPE],runningTasks:[63,e.TYPES.STRING],sendButtonPressT:[45,e.TYPES.INTEGER],senderDefaultDisappearingDuration:[27,e.TYPES.INTEGER],serverErrorCode:[56,e.TYPES.INTEGER],sharedPhoneNumberContactSize:[77,e.TYPES.INTEGER],sharedPhoneNumberWithUsernameContactSize:[78,e.TYPES.INTEGER],sharedUsernameContactSize:[79,e.TYPES.INTEGER],stickerIsAi:[50,e.TYPES.BOOLEAN],stickerIsAvatar:[38,e.TYPES.BOOLEAN],stickerIsFirstParty:[18,e.TYPES.BOOLEAN],stickerIsFromStickerMaker:[51,e.TYPES.BOOLEAN],stickerMakerSourceType:[52,o("WAWebWamEnumStickerMakerSourceType").STICKER_MAKER_SOURCE_TYPE],thumbSize:[20,e.TYPES.NUMBER],typeOfGroup:[36,o("WAWebWamEnumTypeOfGroupEnum").TYPE_OF_GROUP_ENUM],unifiedSessionId:[68,e.TYPES.STRING],userToDeviceSizeBucket:[65,e.TYPES.STRING]},[1,1,1],"regular"]},{MessageSend:[]});l.MessageSendWamEvent=s}),98);
__d("WAWebRevokeMessageSendWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumMessageType","WAWebWamEnumRevokeType"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({RevokeMessageSend:[3656,{messageSendResultIsTerminal:[1,e.TYPES.BOOLEAN],messageType:[2,o("WAWebWamEnumMessageType").MESSAGE_TYPE],resendCount:[3,e.TYPES.INTEGER],retryCount:[4,e.TYPES.INTEGER],revokeDuration:[5,e.TYPES.INTEGER],revokeType:[6,o("WAWebWamEnumRevokeType").REVOKE_TYPE]},[1,1,1],"regular"]},{RevokeMessageSend:[]});l.RevokeMessageSendWamEvent=s}),98);
__d("WAWebMessageSendReporter",["WALogger","WANullthrows","WAWebABProps","WAWebAppTracker","WAWebEditMessageSendWamEvent","WAWebEphemeralityResolver","WAWebFrontendContactGetters","WAWebLidStatusMigrationGating","WAWebMessageSendWamEvent","WAWebMsgGetters","WAWebMsgType","WAWebNewsletterGatingUtils","WAWebRevokeMessageSendWamEvent","WAWebUsernameTypes","WAWebWamAddressingModeUtils","WAWebWamEnumChatOriginsType","WAWebWamEnumEditType","WAWebWamEnumMediaType","WAWebWamEnumMessageDistributionEnumType","WAWebWamEnumMessageSendResultType","WAWebWamEnumMessageType","WAWebWamEnumRevokeType","WAWebWamGroupMetricUtils","WAWebWamMsgUtils","WAWebWamNumberToSizeBucket","cr:17143","cr:17144"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f=(e=n("cr:17143"))!=null?e:{},g=f.ContactCollection,h=(s=n("cr:17144"))!=null?s:{},y=h.ChatCollection,C=(function(){function e(e,t){var n;this.$3=!1,this.$4=o("WAWebWamEnumMediaType").MEDIA_TYPE.NONE,this.$1=e.to;var a=!!e.caption;e.type===o("WAWebMsgType").MSG_TYPE.DOCUMENT&&(a=o("WAWebMsgGetters").getIsCaptionByUser(e)),this.$2=new(o("WAWebMessageSendWamEvent")).MessageSendWamEvent({messageType:o("WAWebWamMsgUtils").getWamMessageType(e),messageMediaType:o("WAWebWamMsgUtils").getWamMediaType(e),mediaCaptionPresent:a,fastForwardEnabled:!0,messageIsFanout:!0,messageIsForward:!!e.isForwarded,messageIsRevoke:!!o("WAWebMsgGetters").getIsRevoke(e),isViewOnce:!!e.isViewOnce,isAReply:o("WAWebMsgGetters").getIsReply(e),e2eBackfill:!!(t!=null&&t.isResend),messageDistributionType:o("WAWebWamEnumMessageDistributionEnumType").MESSAGE_DISTRIBUTION_ENUM_TYPE.REGULAR_MESSAGE,editType:o("WAWebMsgGetters").getWamEditType(e),botType:o("WAWebWamMsgUtils").getWamBotType(this.$1,e.bizBotType),isAComment:o("WAWebMsgGetters").getType(e)===o("WAWebMsgType").MSG_TYPE.COMMENT});var i=o("WAWebMsgGetters").getIsGroupMsg(e),l=o("WAWebMsgGetters").getIsNewsletterMsg(e),s=e.to.isStatus(),_=g==null?void 0:g.getMeContact();this.$2.hasUsername=(_==null?void 0:_.username)!=null&&_.username!=="",this.$2.hasUsernamePin=(_==null?void 0:_.usernameKey)!=null;var f,h=(n=y==null?void 0:y.get(this.$1))!=null?n:{lidOriginType:o("WAWebUsernameTypes").LidOriginType.GENERAL};if(h!=null&&h.lidOriginType)switch(h==null?void 0:h.lidOriginType){case o("WAWebUsernameTypes").LidOriginType.PNH_CTWA:f=o("WAWebWamEnumChatOriginsType").CHAT_ORIGINS_TYPE.LID_CTWA;break;case o("WAWebUsernameTypes").LidOriginType.GENERAL:f=o("WAWebWamEnumChatOriginsType").CHAT_ORIGINS_TYPE.OTHERS;break}else this.$1.isLid()?f=o("WAWebWamEnumChatOriginsType").CHAT_ORIGINS_TYPE.LID_CTWA:f=o("WAWebWamEnumChatOriginsType").CHAT_ORIGINS_TYPE.OTHERS;if(f&&(this.$2.chatOrigins=f),_){var C=o("WAWebFrontendContactGetters").getDisplayNameAndType(_).type;C&&(this.$2.oppositeVisibleIdentification=C)}if(e.ephemeralDuration!=null&&(this.$2.ephemeralityDuration=e.ephemeralDuration),!i&&o("WAWebABProps").getABPropConfigValue("dm_initiator_trigger")||i&&o("WAWebABProps").getABPropConfigValue("dm_initiator_trigger_groups")){var b=o("WAWebMsgGetters").getWamDisappearingModeTrigger(e);b!=null&&(this.$2.ephemeralityTriggerAction=b);var v=o("WAWebMsgGetters").getWamDisappearingModeInitiatedByMe(e);v!=null&&(this.$2.ephemeralityInitiator=v)}if(!i&&!l&&!s){this.$2.isLid=this.$1.isLid(),o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["MessageSendReporter constructor before get ephemeral for me"])));var S=o("WAWebEphemeralityResolver").getEphemeralDurationForUser(g==null?void 0:g.getMeContact());o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["MessageSendReporter constructor after get ephemeral for me"]))),S!=null&&(this.$2.senderDefaultDisappearingDuration=S),o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["MessageSendReporter constructor before get ephemeral for wid"])));var R=o("WAWebEphemeralityResolver").getEphemeralDurationForUser(g==null?void 0:g.get(this.$1));o("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["MessageSendReporter constructor after get ephemeral for wid"]))),R!=null&&(this.$2.receiverDefaultDisappearingDuration=R)}if(o("WAWebMsgGetters").getIsRevoke(e)){this.$2.revokeType=e.subtype==="admin_revoke"?o("WAWebWamEnumRevokeType").REVOKE_TYPE.ADMIN:o("WAWebWamEnumRevokeType").REVOKE_TYPE.SENDER;var L=o("WAWebMsgGetters").getRevokeDuration(e);L!=null&&(this.$2.revokeDuration=L)}if(o("WAWebMsgGetters").getIsEditProtocolMsg(e)){var E=r("WANullthrows")(t==null?void 0:t.originalMessage);this.$2.editDuration=o("WAWebMsgGetters").getT(e)-o("WAWebMsgGetters").getT(E),this.$4=E.getWamMediaType()}var k=o("WAWebMsgGetters").getWamDisappearingModeInitiator(e);k!=null&&(this.$2.disappearingChatInitiator=k);var I=o("WAWebWamMsgUtils").getWamAgentEngagementType(e);if(I!=null&&(this.$2.agentEngagementType=I),i){var T;this.$2.isLid=!!(!(t==null||(T=t.groupData)==null)&&T.isLidAddressingMode),(t==null?void 0:t.groupData)!=null&&this.setGroupData(t.groupData)}s&&(this.$2.isLid=o("WAWebLidStatusMigrationGating").getLidStatusSendEnabled()),l&&o("WAWebNewsletterGatingUtils").isWamoSubLoggingEnabled()&&(this.$2.isPremium=!!e.isWamoSub),o("WALogger").LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["MessageSendReporter constructor done"])))}var t=e.prototype;return t.setDeviceCount=function(t){this.$2.deviceCount=o("WAWebWamGroupMetricUtils").capCount(t),this.$2.deviceSizeBucket=r("WAWebWamNumberToSizeBucket")(t)},t.setGroupData=function(t){var e=o("WAWebWamAddressingModeUtils").getAddressingModeMetricsFromGroupMetadata(t);e!=null&&(this.$2.localAddressingMode=e),t.wamTypeOfGroup!=null&&(this.$2.typeOfGroup=t.wamTypeOfGroup),t.participantCount!=null&&(this.$2.participantCount=t.participantCount),t.deviceCount!=null&&(this.$2.deviceCount=t.deviceCount),t.deviceSizeBucket!=null&&(this.$2.deviceSizeBucket=t.deviceSizeBucket)},t.setMessageDistributionType=function(t){this.$2.messageDistributionType=t},t.setMessageIsFirstUserMessage=function(t){this.$2.messageIsFirstUserMessage=t},t.postSuccess=function(){o("WAWebAppTracker").AppTracker.stop(o("WAWebAppTracker").AppTrackerType.SendMessage),this.$2.messageSendResult=o("WAWebWamEnumMessageSendResultType").MESSAGE_SEND_RESULT_TYPE.OK,this.$2.messageSendResultIsTerminal=!1,this.$5()},t.postFailure=function(t){var e=t.result,n=t.isTerminal;o("WAWebAppTracker").AppTracker.stop(o("WAWebAppTracker").AppTrackerType.SendMessage),this.$2.messageSendResult=e,this.$2.messageSendResultIsTerminal=n,this.$2.weight=0,this.$5()},t.$6=function(){new(o("WAWebRevokeMessageSendWamEvent")).RevokeMessageSendWamEvent({messageSendResultIsTerminal:this.$2.messageSendResultIsTerminal,messageType:this.$2.messageType,resendCount:this.$2.resendCount,retryCount:this.$2.retryCount,revokeDuration:this.$2.revokeDuration,revokeType:this.$2.revokeType}).commit()},t.$7=function(){new(o("WAWebEditMessageSendWamEvent")).EditMessageSendWamEvent({messageSendResultIsTerminal:this.$2.messageSendResultIsTerminal,messageType:this.$2.messageType,resendCount:this.$2.resendCount,retryCount:this.$2.retryCount,editType:this.$2.editType,editDuration:this.$2.editDuration,typeOfGroup:this.$2.typeOfGroup,mediaType:this.$4}).commit()},t.$5=function(){if(this.$3){o("WALogger").WARN(_||(_=babelHelpers.taggedTemplateLiteralLoose(["MessageSendReporter: skip posting, metric has already been posted"])));return}this.$3=!0,this.$2.markMessageSendT(),this.$2.messageSendT!=null&&o("WAWebAppTracker").attachWAMAppContext(this.$2,this.$2.messageSendT),this.$2.commit(),this.$2.messageIsRevoke&&this.$2.messageType!==o("WAWebWamEnumMessageType").MESSAGE_TYPE.STATUS&&this.$6(),this.$2.editType!==o("WAWebWamEnumEditType").EDIT_TYPE.NOT_EDITED&&this.$7()},e})();function b(e){var t=e.messageIsInvisible,n=new(o("WAWebMessageSendWamEvent")).MessageSendWamEvent({messageIsInvisible:t});return{setGroupData:function(t){t.wamTypeOfGroup!=null&&(n.typeOfGroup=t.wamTypeOfGroup),t.participantCount!=null&&(n.participantCount=t.participantCount),t.deviceCount!=null&&(n.deviceCount=t.deviceCount),t.deviceSizeBucket!=null&&(n.deviceSizeBucket=t.deviceSizeBucket)},post:function(){n.markMessageSendT(),n.commit()}}}l.MessageSendReporter=C,l.createMessageSendMetricReporter=b}),98);
__d("WAWebStorageHooksGatingUtils",["WAWebABProps"],(function(t,n,r,o,a,i,l){function e(){return o("WAWebABProps").getABPropConfigValue("web_dexie_hooks_support_enabled")}l.dexieHooksSupportEnabled=e}),98);
__d("WAWebStorageChatHookExpectAccountLid",["WALogger","WAWebCurrentUser","WAWebLid1X1MigrationGating","WAWebLidMigrationUtils","WAWebSchemaChat","WAWebWid","WAWebWidFactory","err"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m={type:"creating",callback:function(n,a){if(r("WAWebWid").isRegularUserNoImply(a.id)&&(o("WAWebLidMigrationUtils").toLid(o("WAWebWidFactory").createWid(a.id))==null&&(o("WAWebLidMigrationUtils").logLidMetadata(),o("WAWebCurrentUser").isEmployee()&&(o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["lid mapping is missing for ",""])),a.id),o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Lid mapping is missing during creation"]))).sendLogs("lid-mapping-missing-during-chat-creation")),o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Lid mapping is missing for chat creation"])))),o("WAWebLid1X1MigrationGating").Lid1X1MigrationUtils.isLidMigrated()&&a.accountLid==null)){o("WAWebLidMigrationUtils").logLidMetadata();var t=o("WAWebWidFactory").createWid(a.id);throw o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["cannot insert chat row for "," because accountLid is missing (migrated). isEmployee? ",". keys: ",""])),t.toLogString(),o("WAWebCurrentUser").isEmployee(),Object.keys(a)),o("WAWebCurrentUser").isEmployee()&&o("WALogger").ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Lid is missing in chat table"]))).sendLogs("lid-missing-migrated-client"),r("err")("Lid is missing in chat table")}}};function p(){o("WAWebSchemaChat").getChatTable().addHook(m)}l.initializeHook=p}),98);
__d("WAWebStorageChatHookExpectLidOriginType",["WAWebSchemaChat","WAWebWid","err"],(function(t,n,r,o,a,i,l){var e={type:"creating",callback:function(t,n){if(r("WAWebWid").isStringLid(n.id)&&n.lidOriginType==null)throw r("err")("Lid origin type is missing in chat table")}};function s(){o("WAWebSchemaChat").getChatTable().addHook(e)}l.initializeHook=s}),98);
__d("WAWebStorageInitializeHooks",["WAWebStorageChatHookExpectAccountLid","WAWebStorageChatHookExpectLidOriginType"],(function(t,n,r,o,a,i,l){function e(){o("WAWebStorageChatHookExpectAccountLid").initializeHook(),o("WAWebStorageChatHookExpectLidOriginType").initializeHook()}l.initializeHooks=e}),98);
__d("WAWebModelStorage",["WAWebABPropsCache","WAWebModelStorageInitialize","WAWebStorageHooksGatingUtils","WAWebStorageInitializeHooks","WAWebUserPrefsIndexedDBStorage","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(e){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){yield o("WAWebModelStorageInitialize").initializeWithoutGKs(e),yield o("WAWebUserPrefsIndexedDBStorage").userPrefsIdb.init(),o("WAWebABPropsCache").waitForABPropConfigsReady().then(function(){o("WAWebStorageHooksGatingUtils").dexieHooksSupportEnabled()&&o("WAWebStorageInitializeHooks").initializeHooks()})}),s.apply(this,arguments)}Object.keys(o("WAWebModelStorageInitialize")).forEach(function(e){e==="default"||e==="__esModule"||(l[e]=o("WAWebModelStorageInitialize")[e])}),l.initialize=e}),98);
__d("WAWebMsgFanoutTypes",[],(function(t,n,r,o,a,i){var e=Object.freeze({CHAT:"chat",GROUP_DIRECT:"groupDirect"});i.FANOUT_TYPE=e}),66);
__d("WAWebMsgSyncTunnelTimeoutUtils",[],(function(t,n,r,o,a,i){function e(e){var t=[],n=null;function r(){n=self.performance.now()}function o(){if(n==null)return t[t.length-1];var r=self.performance.now(),o=Math.floor(r-n);return n=null,t.length>=e&&t.shift(),t.push(o),o}function a(){if(t.length===0)return 0;var e=t.reduce(function(e,t){return e+t},0);return e/t.length}function i(e){var t=a();return Math.floor(t*(1+e/100))}return{perfStart:r,perfEnd:o,getAverage:a,getAveragePlusNPercent:i,at:function(n){var e;return(e=t.at(n))!=null?e:0}}}i.createPerformanceCache=e}),66);
__d("WAWebMsgSyncTunnelJobThrottler",["WALogger","WAWebMsgSyncTunnelTimeoutUtils","asyncToGeneratorRuntime","lodash"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m;function p(t,a,i){var l=[],c=a.defaultTimeoutMs,m=o("WAWebMsgSyncTunnelTimeoutUtils").createPerformanceCache(3),p=!1;function _(e){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){if(e===void 0&&(e=!1),l.length!==0&&!(p&&!e)){p=!0;var n=l;l=[],m.perfStart();try{yield i(n)}catch(e){l=n.concat(l),o("WALogger").WARN(d||(d=babelHelpers.taggedTemplateLiteralLoose(["[msg-tunnel] "," failed ",", cache "," items preserved, error ",""])),t,m.perfEnd(),n.length,e).sendLogs("msg-tunnel-"+t+"-failed",{sampling:.01})}p=!1;var r=m.perfEnd();if(r!=null&&a.defaultTimeoutMs<r){var s=15;if(c>r){var u=m.getAveragePlusNPercent(s);if(u<r)return;h(u);return}var _=m.getAveragePlusNPercent(s);if(c+100>=_)return;h(_)}}}),f.apply(this,arguments)}var g=r("lodash").throttle(_,c,{leading:!1,trailing:!0,maxWait:a.maxWait});function h(n){var i,l=c;if(c=Math.min(n,(i=a.debounceThreshold)!=null?i:15e3),c===a.debounceThreshold){if(l===c)return;g.cancel(),g=r("lodash").debounce(_,c,{leading:!1,trailing:!0,maxWait:a.maxWait}),o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[msg-tunnel] switch "," to debounce"])),t)}else g.cancel(),g=r("lodash").throttle(_,c,{leading:!1,trailing:!0,maxWait:a.maxWait});o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[msg-tunnel] set "," delayMs to ","ms"])),t,c),c>12e3&&o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[msg-tunnel] "," delayMs is ","ms, config: ","ms"])),t,c,a.defaultTimeoutMs).sendLogs("msg-tunnel-"+t+"-exceeds-12s",{sampling:.01})}return{take:function(t){l.push(t),g()},forceDrain:(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield _(!0),h(a.defaultTimeoutMs)});function t(){return e.apply(this,arguments)}return t})()}}l.createJobThrottler=p}),98);
__d("WAWebMsgSyncTunnelBatcher",["Promise","WALogger","WAWebABProps","WAWebAddonLogUtils","WAWebCmd","WAWebMessagePostprocessRenderable","WAWebMessageProcessDBPipeline","WAWebMsgSyncTunnelJobThrottler","WAWebOfflineHandler","WAWebOfflineResumeTypes.flow","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u;function c(){var t,r,a=o("WAWebMsgSyncTunnelJobThrottler").createJobThrottler("write-db",{defaultTimeoutMs:(t=o("WAWebABProps").getABPropConfigValue("web_msg_sync_update_tunnel_timeout_ms"))!=null?t:500,debounceThreshold:5e3},(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){try{var n=t.reduce(function(e,t){return e.concat(t.msgs)},[]);yield o("WAWebMessageProcessDBPipeline").processMsgDataDBPipeline(n,!0)}catch(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["failed storing messages ",""])),t).tags("messaging").sendLogs("msg-tunnel-storing-failure")}});return function(e){return t.apply(this,arguments)}})()),i=o("WAWebMsgSyncTunnelJobThrottler").createJobThrottler("update-ui",{defaultTimeoutMs:(r=o("WAWebABProps").getABPropConfigValue("web_msg_sync_update_tunnel_timeout_ms"))!=null?r:500,maxWait:5e3},(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield(u||(u=n("Promise"))).allSettled(e.map(o("WAWebMessagePostprocessRenderable").postprocessRenderableMessages));o("WAWebAddonLogUtils").hasSettledWithError(t)&&o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["failed incoming addons processing"]))).tags("messaging").sendLogs("msg-tunnel-renderable-msgs-processing")});return function(t){return e.apply(this,arguments)}})()),l=function(t){i.take(t),a.take(t)},c=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield a.forceDrain(),yield i.forceDrain()});return function(){return e.apply(this,arguments)}})(),d=function(){var e=o("WAWebOfflineHandler").OfflineMessageHandler.getResumeType();return e===o("WAWebOfflineResumeTypes.flow").ResumeType.NonBlocking?o("WAWebABProps").getABPropConfigValue("web_msg_sync_update_tunnel"):!1};return{isEnabled:d,isActive:function(){return o("WAWebCmd").Cmd.isOfflineDeliveryEnd?!1:d()},accept:function(t){l(t)},drain:(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield c()});function t(){return e.apply(this,arguments)}return t})()}}var d=c();l.nonBlockingMsgsSyncTunnel=d}),98);
__d("WAWebNonBlockingOfflineResumeManager",["WALogger","WAShiftTimer","WAWebApiPendingDeviceSync","WAWebBackendApi","WAWebBrokerGlobalAppState","WAWebChatThreadLogging","WAWebCmd","WAWebHandleMsgTypes.flow","WAWebHandleOfflineAbProps","WAWebJSHaltDetector","WAWebMessageQueue","WAWebMsgSyncConfiguratedTunnel","WAWebMsgSyncTunnelBatcher","WAWebOffdStorageUpdateOfflinePeerReceipts","WAWebOfflineResumeConst","WAWebOfflineResumeMsgProcessReporter","WAWebOfflineResumeTypes.flow","WAWebOfflineResumeUtils","WAWebSignalProtocolStore","WAWebThreadMetadata","WAWebUserPrefsGeneral","WAWebWamEnumWebcScenarioType","WAWebWamMemoryStat","WAWebWamOfflineResumeReporter","WAWebWorkerSafeBackendApi","asyncToGeneratorRuntime","gkx"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g,h,y,C,b=100,v;function S(e){return v!=null&&v.updateOptions(e),v==null&&(v=new L(e)),v}function R(){v=null}var L=(function(){function t(e){var t=this;this.$9=null,this.$11=new(o("WAShiftTimer")).ShiftTimer(function(){o("WAWebCmd").Cmd.handleOfflineProgressUpdate(),t.$11.onOrAfter(o("WAWebOfflineResumeConst").UI_UPDATE_TIME_MS)}),this.$12=95,this.resumeType=o("WAWebOfflineResumeTypes.flow").ResumeType.NonBlocking,e!=null&&e.mainScreenLoaded&&(this.$6=!0),this.$13()}var a=t.prototype;return a.updateOptions=function(t){var e;this.$6=(e=t==null?void 0:t.mainScreenLoaded)!=null?e:!1},a.$13=function(){this.offlineMessagePreviewCounter=-1,this.$2=0,this.$3=0,this.$4=!1,this.$5=null,this.$1=o("WAWebOfflineResumeConst").ResumeStatus.INIT},a.$14=function(n){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][non-blocking] offline resume stage: "," -> ",""])),this.$1,n),this.$1=n},a.processOfflinePreview=function(t){if(o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logOfflinePreviewT(),this.$6&&(o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[resume-from-open-tab] reset offline delivery end to false"]))),o("WAWebCmd").Cmd.resetOfflineDeliveryState()),this.isResumeFromRestartComplete())o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][non-blocking] Offline session is complete when receiving offline preview ib."]))),o("WAWebOfflineResumeUtils").exceedResumeWithOpenTabLimit(t.message,t.receipt)&&(o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][non-blocking] restart client due to exceed the LIMIT, message: ",", receipt: ",""])),t.message,t.receipt),o("WAWebOfflineResumeUtils").refreshWindow()),o("WAWebJSHaltDetector").jsHaltDetector.restartDetection(),this.$14(o("WAWebOfflineResumeConst").ResumeStatus.RESUME_WITH_OPEN_TAB),this.$15(t.message,t.receipt),o("WAWebBackendApi").frontendFireAndForget("updateChatSortListener",{enable:!1}),self.setTimeout(function(){o("WAWebBackendApi").frontendFireAndForget("updateChatSortListener",{enable:!0})},7e3);else if(this.$1===o("WAWebOfflineResumeConst").ResumeStatus.INIT)r("WAWebBrokerGlobalAppState").initOrUpdateTracking(o("WAWebWamEnumWebcScenarioType").WEBC_SCENARIO_TYPE.OFFLINE_RESUME),o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logOfflineCount(t),o("WAWebOfflineResumeMsgProcessReporter").msgProcessReporter.activate(t),this.offlineMessagePreviewCounter=t.message,this.$5=!1,this.$4=!0,this.$2=0,this.$10=Date.now(),o("WAWebSignalProtocolStore").enableMemSignalStore(),o("WAWebCmd").Cmd.handleOfflineProgressUpdate(),o("WAWebJSHaltDetector").jsHaltDetector.restartDetection(),this.$11.onOrAfter(o("WAWebOfflineResumeConst").UI_UPDATE_TIME_MS),this.$14(o("WAWebOfflineResumeConst").ResumeStatus.RESUME_ON_RESTART),this.$15(t.message,t.receipt),this.$6?o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["[resume-from-open-tab] Main screen is loaded"]))):this.$7=o("WAWebOfflineResumeUtils").loadMainScreen({});else{var e=this.$10;if(e!=null){var n=Date.now()-e;n<o("WAWebOfflineResumeConst").OFFLINE_PREVIEW_PERIOD_MS?(o("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][non-blocking] Accept multiple offline preview ibs during offline resume, delay ","."])),n),this.offlineMessagePreviewCounter+=t.message,this.$5=!1,this.$4=!0,o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logOfflineCount(t)):r("gkx")("26258")?o("WALogger").LOG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][non-blocking] Reject multiple offline preview ib during offline resume, delay ","."])),n):o("WALogger").ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][non-blocking] Reject multiple offline preview ibs during offline resume, delay ",""])),n).sendLogs("offline-multiple-preview")}this.$16()}},a.getOfflineDeliveryProgress=function(){return this.offlineMessagePreviewCounter===0?this.$12:Math.min(Math.ceil(100*this.$2/this.offlineMessagePreviewCounter),this.$12)},a.processOfflineSessionComplete=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,n=this;if(self.setTimeout(function(){o("WAWebBackendApi").frontendFireAndForget("updateChatSortListener",{enable:!0})},3e3),(t=this.$9)==null||t.cancel(),this.$9=null,this.$1===o("WAWebOfflineResumeConst").ResumeStatus.COMPLETE){o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logLastStanzaT(),o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.commit();return}else if(this.$1===o("WAWebOfflineResumeConst").ResumeStatus.RESUME_WITH_OPEN_TAB){yield o("WAWebMessageQueue").waitForOnlineMessageQueue(),yield o("WAWebApiPendingDeviceSync").doPendingDeviceSync(),this.$14(o("WAWebOfflineResumeConst").ResumeStatus.COMPLETE),o("WAWebCmd").Cmd.offlineDeliveryEnd();return}else this.$1===o("WAWebOfflineResumeConst").ResumeStatus.INIT&&(this.$5=!1,this.$4=!0,o("WAWebCmd").Cmd.handleOfflineProgressUpdate(),!this.$6&&!this.$7&&(this.$7=o("WAWebOfflineResumeUtils").loadMainScreen({})));return yield this.$7,this.$8=0,self.setTimeout(function(){n.$8>o("WAWebOfflineResumeConst").OFFLINE_STANZA_COUNT_LIMIT&&(o("WALogger").WARN(f||(f=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][non-blocking] "," received after offline completion marker. Refreshing window due to potential server issue."])),n.$8),o("WAWebOfflineResumeUtils").refreshWindow())},o("WAWebOfflineResumeConst").OFFLINE_STANZA_COUNT_CHECK_TIMEOUT_MS),this.$14(o("WAWebOfflineResumeConst").ResumeStatus.COMPLETE),this.$17()});function t(t){return e.apply(this,arguments)}return t})(),a.isResumeFromRestartComplete=function(){return this.$1!==o("WAWebOfflineResumeConst").ResumeStatus.RESUME_ON_RESTART&&this.$1!==o("WAWebOfflineResumeConst").ResumeStatus.INIT},a.isResumeFromRestartInProgress=function(){return this.$1!==o("WAWebOfflineResumeConst").ResumeStatus.INIT&&!o("WAWebCmd").Cmd.isOfflineDeliveryEnd},a.isResumeOnSocketDisconnectInProgress=function(){return this.$1===o("WAWebOfflineResumeConst").ResumeStatus.RESUME_WITH_OPEN_TAB},a.isResumeComplete=function(){return this.$1===o("WAWebOfflineResumeConst").ResumeStatus.COMPLETE},a.getHasMessagesToDownload=function(){return this.$5},a.getFinishedDownloading=function(){return this.getOfflineDeliveryProgress()===100},a.shouldUseOfflineResumeScreen=function(){return this.offlineMessagePreviewCounter>this.$2},a.processDecryptResult=function(t){this.$16(),this.$2+=1,t===o("WAWebHandleMsgTypes.flow").E2EProcessResult.RETRY&&(this.$3+=1)},a.offlineStanzaReceivedAfterComplete=function(){this.isResumeFromRestartComplete()&&(this.$8+=1)},a.newOfflineStanza=function(t,n){o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logAddOfflineSizeBytes(n),o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logOldestStanzaTime(t),this.$16()},a.getResumeUIProgressBarType=function(){return!o("WAWebCmd").Cmd.isOfflineDeliveryEnd&&this.offlineMessagePreviewCounter>=b?o("WAWebOfflineResumeTypes.flow").ResumeUIProgressBarType.Toastbar:o("WAWebOfflineResumeTypes.flow").ResumeUIProgressBarType.None},a.$16=function(){this.$9&&this.$9.onOrAfter(o("WAWebOfflineResumeConst").OFFLINE_STANZA_TIMEOUT_MS)},a.$15=function(t,n){var e,r=this;(e=this.$9)==null||e.cancel(),this.$9=new(o("WAShiftTimer")).ShiftTimer(function(){if(r.$1!==o("WAWebOfflineResumeConst").ResumeStatus.COMPLETE){o("WALogger").LOG(g||(g=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][non-blocking]: offline session completed by timeout"])));var e=o("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][non-blocking] offline resume finished by timeout"])));o("WAWebHandleOfflineAbProps").isNonBlockingOfflineResumeExpEnabled()&&(e=e.tags("offline-resume-experimental")),e.sendLogs("non-blocking-offline-resume-timeout",{sampling:.01}),r.processOfflineSessionComplete(t+n),r.$9=null,o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logMissedOfflineComplete()}}),this.$9.onOrAfter(o("WAWebOfflineResumeConst").OFFLINE_STANZA_TIMEOUT_MS)},a.$17=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield o("WAWebMessageQueue").waitForOfflineMessageQueue(),o("WAWebMsgSyncTunnelBatcher").nonBlockingMsgsSyncTunnel.isEnabled()&&(yield o("WAWebMsgSyncTunnelBatcher").nonBlockingMsgsSyncTunnel.drain()),o("WAWebMsgSyncConfiguratedTunnel").isMsgSyncTunnelActive()&&o("WAWebMsgSyncConfiguratedTunnel").msgSyncTunnel.completeUIUpdate(),o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logOfflineDecryptionErrorCount(this.$3),o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.logLastStanzaT(),o("WAWebThreadMetadata").resetThreadMeta(),o("WALogger").LOG(y||(y=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][non-blocking] _onOfflineComplete: waitForOfflineMsgThread done, total decryption error: ",""])),this.$3),this.$3=0,yield o("WAWebOfflineResumeUtils").clearOfflineSnapShot(),this.$12=97,yield this.$7,yield o("WAWebOffdStorageUpdateOfflinePeerReceipts").updatePeerReceipts(),this.$12=99,o("WALogger").LOG(C||(C=babelHelpers.taggedTemplateLiteralLoose(["[offline-resume][non-blocking] _onOfflineComplete: clearOfflineSnapShot done."]))),o("WAWebCmd").Cmd.offlineDeliveryEnd(),o("WAWebUserPrefsGeneral").setOfflinePushCount(0),this.$11.forceRunNow(),this.$11.cancel(),o("WAWebWamOfflineResumeReporter").OfflineResumeReporter.commit(),o("WAWebSignalProtocolStore").enablePersistSignalStore(),o("WAWebOfflineResumeUtils").runReceiptCleanUpLoop(),o("WAWebWorkerSafeBackendApi").workerSafeFireAndForget("processAllOrphanPaymentNotifications"),o("WAWebChatThreadLogging").uploadChatThreadLoggingEvents(),r("WAWebBrokerGlobalAppState").initOrUpdateTracking(o("WAWebWamEnumWebcScenarioType").WEBC_SCENARIO_TYPE.IDLE),o("WAWebWamMemoryStat").setCurrentMemoryScenario(o("WAWebWamEnumWebcScenarioType").WEBC_SCENARIO_TYPE.IDLE),self.setTimeout(function(){o("WAWebApiPendingDeviceSync").doPendingDeviceSync()},o("WAWebOfflineResumeConst").OFFLINE_DEVICE_SYNC_DELAY)});function t(){return e.apply(this,arguments)}return t})(),t})();l.getOrCreateInstance=S,l.clearInstance=R,l.OfflineNonBlockingResumeStageManager=L}),98);
__d("WAWebSchemaReadReceipt",["WAWebOffdStorageUtils","WAWebStorageMutationBuilder"],(function(t,n,r,o,a,i,l){var e=o("WAWebStorageMutationBuilder").columnBuilder(),s=e.addColumn,u=e.addUserDefinedPrimaryKey;function c(){o("WAWebOffdStorageUtils").getStorage().add("read-receipt").version(o("WAWebOffdStorageUtils").getStorage().versions.version(0),[u("id"),s("externalIds")]).delete(o("WAWebOffdStorageUtils").getStorage().versions.version(3)).view(function(e){return e})}l.addTable=c}),98);
__d("WAWebOffdStorage",["WALogger","WAWeb-dexie","WAWebDbRolloutUtil","WAWebDexieCastTypes","WAWebOffdStorageUtils","WAWebSchemaDanglingReceipt","WAWebSchemaPeerReadReceipt","WAWebSchemaPendingDeviceSync","WAWebSchemaReadReceipt","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s;function u(){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){return s==null&&(yield o("WAWebDbRolloutUtil").loadSchemaVersions(),o("WAWebOffdStorageUtils").createStorage(),o("WAWebSchemaReadReceipt").addTable(),o("WAWebSchemaDanglingReceipt").addTable(),o("WAWebSchemaPeerReadReceipt").addTable(),o("WAWebSchemaPendingDeviceSync").addTable(),s=o("WAWebOffdStorageUtils").getStorage().initialize().catch(function(t){throw o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed!"]))).verbose().devConsole(t).sendLogs("Failed to initialize offd storage",{sendLogsType:o("WALogger").SendLogsType.CRASH_OR_UNRECOVERABLE_ERROR_SAD}),t})),s}),c.apply(this,arguments)}function d(){return o("WAWebOffdStorageUtils").destroyStorage().catch(function(){return o("WAWebDexieCastTypes").dexieCastToPromise(new(r("WAWeb-dexie"))(o("WAWebOffdStorageUtils").DATABASE_NAME).delete())}).finally(function(){s=null})}l.initialize=u,l.destroy=d}),98);
__d("WAWebOfflineResumeMainThread",["WAWebABProps","WAWebBlockingOfflineResumeManager","WAWebNonBlockingOfflineResumeManager"],(function(t,n,r,o,a,i,l){function e(e){e.initState({getBlockingStageManager:function(){return o("WAWebABProps").getABPropConfigValue("web_offline_stage_manager_singleton_enabled")?(o("WAWebNonBlockingOfflineResumeManager").clearInstance(),o("WAWebBlockingOfflineResumeManager").getOrCreateInstance()):new(o("WAWebBlockingOfflineResumeManager")).OfflineBlockingResumeStageManager},getNonblockingStageManager:function(t){return o("WAWebABProps").getABPropConfigValue("web_offline_stage_manager_singleton_enabled")?(o("WAWebBlockingOfflineResumeManager").clearInstance(),o("WAWebNonBlockingOfflineResumeManager").getOrCreateInstance(t)):new(o("WAWebNonBlockingOfflineResumeManager")).OfflineNonBlockingResumeStageManager(t)}})}l.setupMainThreadResume=e}),98);
__d("WAWebUserPrefsIsLoggedIn",["WAWebUserPrefsMultiDevice"],(function(t,n,r,o,a,i,l){var e=!1;function s(){return o("WAWebUserPrefsMultiDevice").isRegistered()&&u()}function u(){return e}function c(t){e=t}l.isLoggedIn=s,l.setIsConnectedAsRegistered=c}),98);
__d("WAWebSetWorkerLocalStorage",["WANullthrows","WAWebApiLocalStorage","WAWebEnvironment","WAWebGuestUserPrefs","WAWebUserPrefsKeys","WAWebUserPrefsMeUser","WAWebWidToJid","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){function e(){return s.apply(this,arguments)}function s(){return s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=r("WANullthrows")(o("WAWebUserPrefsMeUser").getMaybeMeDeviceLid()),t=o("WAWebUserPrefsMeUser").getMeDisplayNameOrThrow(),n=[{key:"deviceJid",value:o("WAWebWidToJid").widToDeviceJid(o("WAWebUserPrefsMeUser").getMeDevicePnOrThrow())},{key:"lidDeviceJid",value:e.toString()},{key:o("WAWebUserPrefsKeys").KEYS.ME_DISPLAY_NAME,value:t}];r("WAWebEnvironment").isGuest&&n.push({key:o("WAWebUserPrefsKeys").KEYS.GUEST_ACTIVE_INVITE_CODE,value:o("WAWebGuestUserPrefs").getActiveGuestInviteCode()}),yield o("WAWebApiLocalStorage").updateLocalStorage(n)}),s.apply(this,arguments)}function u(){return o("WAWebApiLocalStorage").clearLocalStorage()}l.setWorkerLocalStorage=e,l.clearWorkerLocalStorage=u}),98);
__d("WAWebSetPushConfigJob",["WABase64","WADeprecatedSendIq","WADeprecatedWapParser","WALogger","WANullthrows","WAWap","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u=new(r("WADeprecatedWapParser"))("setPushConfig",function(t){if(!t.hasChild("error")){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["setPushConfig: success"]))).tags("push-notification");return}var n=t.child("error"),r=n.attrInt("code"),a=n.attrString("text");return o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["setPushConfig: server response with ",", ",""])),r,a).tags("push-notification"),{errorCode:r,errorText:a}});function c(e){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t,n=(t=o("WAWap")).wap("iq",{to:t.S_WHATSAPP_NET,type:"set",xmlns:"urn:xmpp:whatsapp:push",id:t.generateId()},t.wap("config",{platform:"web",endpoint:t.CUSTOM_STRING(e.endpoint),auth:t.CUSTOM_STRING(o("WABase64").encodeB64(r("WANullthrows")(e.getKey("auth")))),p256dh:t.CUSTOM_STRING(o("WABase64").encodeB64(r("WANullthrows")(e.getKey("p256dh"))))})),a=yield o("WADeprecatedSendIq").deprecatedSendIq(n,u);if(!a.success){var i=a.errorCode,l=a.errorText;return{errorCode:i,errorText:l}}return a.result}),d.apply(this,arguments)}l.setPushConfig=c}),98);
__d("WAWebSubscribePushManagerAction",["WABase64","WALogger","WAWebGetPushServerSettingsJob","WAWebL10N","WAWebMiscErrors","WAWebPushNotificationsGatingUtils","WAWebSetPushConfigJob","WAWebSetWorkerLocalStorage","asyncToGeneratorRuntime","cr:9685"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E;function k(){return I.apply(this,arguments)}function I(){return I=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(o("WAWebPushNotificationsGatingUtils").canSupportOfflineNotifications()&&(o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[push-notification] attempt to update push manager started"]))),"serviceWorker"in navigator)){var t,a,i,l=n("cr:9685").isOfflineNotificationsEnabled(),m=(t=yield n("cr:9685").shouldSubscribePushManager(l))!=null?t:!1,p=yield(a=window.navigator.serviceWorker)==null?void 0:a.ready;if(p==null){o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[push-notification] failed to check and update push manager due to no service worker registration"])));return}var _=p==null||(i=p.pushManager)==null||i.getSubscription==null?void 0:i.getSubscription();if(_==null){o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[push-notification] failed to get push manager"])));return}if(p.scope!==window.location.origin+window.location.pathname){o("WALogger").DEV(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[push-notification] the current service worker scope is invalid, service worker scope: ",", current scope: ",""])),p.scope,window.location.origin+window.location.pathname);return}var f=(yield _)!=null;o("WALogger").DEV(d||(d=babelHelpers.taggedTemplateLiteralLoose(["[push-notification] hasPushSubscription: ",", shouldSubscribePushManager: ",""])),f,m),m?f?(n("cr:9685").updateOfflineNotificationL10nStrings(),r("WAWebL10N").on("locale_change",function(){n("cr:9685").updateOfflineNotificationL10nStrings()})):D():f&&$()}}),I.apply(this,arguments)}function T(e){e?D():$()}function D(){return x.apply(this,arguments)}function x(){return x=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(o("WAWebPushNotificationsGatingUtils").canEnableOfflineNotifications()){o("WALogger").DEV(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[push-notification] attempt to subscribe push manager started"])));try{var e;if(!("serviceWorker"in navigator)){o("WALogger").DEV(p||(p=babelHelpers.taggedTemplateLiteralLoose(["[push-notification] failed to subscribe push manager due to service worker does not exist"])));return}var t=yield(e=window.navigator.serviceWorker)==null?void 0:e.ready;if(t==null){o("WALogger").DEV(_||(_=babelHelpers.taggedTemplateLiteralLoose(["[push-notification] failed to subscribe push manager due to service worker is not ready yet"])));return}var r=yield t.pushManager.getSubscription();if(r!=null){o("WALogger").DEV(f||(f=babelHelpers.taggedTemplateLiteralLoose(["[push-notification] failed to subscribe push manager due to push manager is already subscribed"])));return}var a=yield o("WAWebGetPushServerSettingsJob").getPushServerSettings();if(a.errorCode!=null){o("WALogger").WARN(g||(g=babelHelpers.taggedTemplateLiteralLoose(["[push-notification] failed to subscribe push manager due to unable to get push server settings with error code ",""])),a.errorCode);return}var i=new Uint8Array(o("WABase64").decodeB64UrlSafe(String(a))),l={userVisibleOnly:!0,applicationServerKey:i},s=yield t.pushManager.subscribe(l),u=yield o("WAWebSetPushConfigJob").setPushConfig(s);if((u==null?void 0:u.errorCode)!=null){o("WALogger").WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[push-notification] failed to subscribe push manager due to send client push subscription data to server failure with error ",""])),u.errorText);return}yield o("WAWebSetWorkerLocalStorage").setWorkerLocalStorage(),yield n("cr:9685").updateOfflineNotificationL10nStrings(),o("WALogger").DEV(y||(y=babelHelpers.taggedTemplateLiteralLoose(["[push-notification] successfully subscribed push manager"])))}catch(e){o("WALogger").WARN(C||(C=babelHelpers.taggedTemplateLiteralLoose(["[push-notification] failed to subscribe push manager due to error: ",""])),e)}}}),x.apply(this,arguments)}function $(){return P.apply(this,arguments)}function P(){return P=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(!o("WAWebPushNotificationsGatingUtils").canSupportOfflineNotifications())return!1;o("WALogger").DEV(b||(b=babelHelpers.taggedTemplateLiteralLoose(["[push-notification] attempt to unsubscribe push manager started"])));try{var e;if(!("serviceWorker"in navigator))return o("WALogger").DEV(v||(v=babelHelpers.taggedTemplateLiteralLoose(["[push-notification] failed to unsubscribe push manager due to service worker does not exist"]))),!1;var t=yield(e=window.navigator.serviceWorker)==null?void 0:e.ready;if(t==null)return o("WALogger").DEV(S||(S=babelHelpers.taggedTemplateLiteralLoose(["[push-notification] failed to unsubscribe push manager due to no service worker registration"]))),!1;var n=yield t.pushManager.getSubscription();if(n==null)return o("WALogger").DEV(R||(R=babelHelpers.taggedTemplateLiteralLoose(["[push-notification] failed to unsubscribe push manager due to no active push subscription"]))),!1;var r=yield n.unsubscribe();return yield o("WAWebSetWorkerLocalStorage").clearWorkerLocalStorage().catch(function(e){if(!(e instanceof o("WAWebMiscErrors").DbOnLogoutAbort))throw e}),o("WALogger").DEV(L||(L=babelHelpers.taggedTemplateLiteralLoose(["[push-notification] successfully unsubscribed push manager"]))),r}catch(e){return o("WALogger").WARN(E||(E=babelHelpers.taggedTemplateLiteralLoose(["[push-notification] failed to unsubscribe push manager due to error: ",""])),e),!1}}),P.apply(this,arguments)}l.updatePushManager=k,l.handleOfflineNotifications=T,l.unsubscribePushManager=$}),98);
__d("WAWebWamEnumTsExternalEventSource",[],(function(t,n,r,o,a,i){var e=Object.freeze({CALL:1,VIDEO:2,PTT_RECORD:3,PTT_PLAY:4});i.TS_EXTERNAL_EVENT_SOURCE=e}),66);
__d("WAWebTsExternalWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumTsExternalEventSource"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({TsExternal:[4574,{relativeTimestampMs:[1,e.TYPES.INTEGER],tsDuration:[2,e.TYPES.INTEGER],tsExternalEventSource:[3,o("WAWebWamEnumTsExternalEventSource").TS_EXTERNAL_EVENT_SOURCE],tsSessionId:[4,e.TYPES.INTEGER],tsTimestampMs:[5,e.TYPES.INTEGER],unifiedSessionId:[6,e.TYPES.STRING]},[1,1,1],"regular"]},{TsExternal:[]});l.TsExternalWamEvent=s}),98);
__d("WAWebUnifiedSessionSocketManager",["WALogger","WAWebCmd","WAWebUserPrefsAppStateSync"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g,h,y={DISCONNECTED:"DISCONNECTED",CONNECTED:"CONNECTED"},C=(function(){function t(){this.$1=!1,this.$2=y.DISCONNECTED,this.$3=null,this.$4=!1}var n=t.prototype;return n.init=function(n){var t=this;if(n===void 0&&(n=null),this.$4){o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[unified-session-socket] init() called multiple times - ignoring"])));return}this.$4=!0,this.$3=n;var r=o("WAWebUserPrefsAppStateSync").getAllCriticalDataSynced(),a=o("WAWebCmd").Cmd.isMainStreamReadyMd;this.$1=r,this.$2=r&&a?y.CONNECTED:y.DISCONNECTED,o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[unified-session-socket] Initialized with state: hasSynced=",", isStreamOpen=",", stream=",""])),String(r),String(a),this.$2),o("WAWebCmd").Cmd.on("main_stream_mode_ready",function(){t.$5()}),o("WAWebCmd").Cmd.on("on_critical_sync_done",function(){t.$5()}),o("WAWebCmd").Cmd.on("open_socket_stream",function(){t.$6()}),o("WAWebCmd").Cmd.on("socket_stream_disconnected",function(){t.$7()})},n.isConnected=function(){return this.$2===y.CONNECTED},n.isInitialized=function(){return this.$4},n.$8=function(t){var e;if(this.$2=t?y.CONNECTED:y.DISCONNECTED,!this.$4){o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[unified-session-socket] Skipping callback: socket manager not yet initialized"])));return}(e=this.$3)==null||e.call(this)},n.$5=function(){if(o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[unified-session-socket] Socket Ready: Transitioning to CONNECTED state"]))),this.$1===!0&&this.isConnected()){o("WALogger").WARN(d||(d=babelHelpers.taggedTemplateLiteralLoose(["[unified-session-socket] Skip transition to CONNECTED state. Reason: socket is already connected"])));return}var e=o("WAWebUserPrefsAppStateSync").getAllCriticalDataSynced();if(!e){o("WALogger").WARN(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[unified-session-socket] Skip transition to CONNECTED state. Reason: critical sync is not complete"])));return}this.$1=e,this.$8(!0)},n.$6=function(){if(o("WALogger").LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["[unified-session-socket] Socket Open: Transitioning to CONNECTED state"]))),this.$1===!1){o("WALogger").WARN(_||(_=babelHelpers.taggedTemplateLiteralLoose(["[unified-session-socket] Skip transition to CONNECTED state. Reason: Critical Sync is not complete"])));return}if(this.isConnected()){o("WALogger").WARN(f||(f=babelHelpers.taggedTemplateLiteralLoose(["[unified-session-socket] Skip transition to CONNECTED state. Reason: socket is already connected"])));return}this.$8(!0)},n.$7=function(){if(o("WALogger").LOG(g||(g=babelHelpers.taggedTemplateLiteralLoose(["[unified-session-socket] Socket Disconnect: Transitioning to DISCONNECTED state"]))),this.isConnected()===!1){o("WALogger").WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[unified-session-socket] Skip transition to DISCONNECTED state. Reason: Socket is already disconnected"])));return}this.$8(!1)},t})();l.UnifiedSessionSocketManager=C}),98);
__d("WAWebUnifiedSession",["$InternalEnum","WALogger","WASmaxUnifiedSessionShareRPC","WATimeUtils","WAWebUnifiedSessionSocketManager","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f=7*o("WATimeUtils").DAY_MILLISECONDS,g=3*o("WATimeUtils").DAY_MILLISECONDS,h=n("$InternalEnum")({InitialRender:"initial-render",Foreground:"foreground"}),y=(function(){function t(e){this.$1=null,this.$2=0,this.$3=!1,this.$4=e}var r=t.prototype;return r.getSocketStreamChangeHandler=function(){var e=this;return function(){return e.$5()}},r.getSessionId=function(){return this.$1},r.getSequence=function(){return++this.$2},r.clearSessionId=function(){this.$1=null},r.generateSessionId=function(n){try{var t=(C()+g)%f,r=this.$1;this.$1=String(t),this.$3=!1,this.$2=0,o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[unified-session] generated new session id. reason: ",". new ID ",". old ID ",""])),n,this.$1,r),this.$6()}catch(e){o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[unified-session] Error generating session id: ",""])),e).devConsole({err:e}).sendLogs("unified-session-generate-error")}},r.$6=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(this.$4.isConnected()===!1){o("WALogger").DEV(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[unified-session] send session id skipped: offline"])));return}var e=this.$1;if(e==null){o("WALogger").DEV(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[unified-session] send session id skipped: session id is empty"])));return}if(this.$3){o("WALogger").DEV(d||(d=babelHelpers.taggedTemplateLiteralLoose(["[unified-session] send session id skipped: id is alrady sent"])));return}try{o("WALogger").DEV(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[unified-session] sending to server. session id: ",""])),e),yield o("WASmaxUnifiedSessionShareRPC").sendShareRPC({unifiedSessionId:e}),this.$3=!0,o("WALogger").DEV(p||(p=babelHelpers.taggedTemplateLiteralLoose(["[unified-session] send to server successfully. session id: ",""])),e)}catch(e){o("WALogger").ERROR(_||(_=babelHelpers.taggedTemplateLiteralLoose(["[unified-session] failed to send session id: ",""])),e).devConsole({err:e}).sendLogs("send-unified-session-id-failed")}});function t(){return e.apply(this,arguments)}return t})(),r.$5=function(){this.$4.isInitialized()&&this.$4.isConnected()&&this.$6()},t})();function C(){return Date.now()+o("WATimeUtils").getClockSkew()}var b=(function(){var e=new(o("WAWebUnifiedSessionSocketManager")).UnifiedSessionSocketManager,t=new y(e);return e.init(t.getSocketStreamChangeHandler()),t})();l.UnifiedSessionGenReason=h,l.UnifiedSessionManager=b}),98);
__d("WAWebTimeSpentLoggingExternal",["WALogger","WAWebABProps","WAWebClock","WAWebTimeSpentLoggingSession","WAWebTsExternalWamEvent","WAWebUnifiedSession"],(function(t,n,r,o,a,i,l){var e,s,u,c,d=1e3,m=new Set;function p(){return m.size>0}function _(t){var n=o("WAWebTimeSpentLoggingSession").getOrInitTimeSpentSession();o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[time-spent][external] begin ",""])),t);var r={source:t,tsSessionId:n.id,startTimeMs:n.relativeTimestampMs};if(o("WAWebABProps").getABPropConfigValue("unified_session_log_ts_event")){r.tsTimestampMs=o("WAWebClock").Clock.getServerTimeMs();var a=o("WAWebUnifiedSession").UnifiedSessionManager.getSessionId();a!=null&&(r.unifiedSessionId=a)}g(r),m.add(r);var i=!1;return function(){i||(y(r),i=!0)}}function f(e,t){var n=t-e.startTimeMs;if(n<d){o("WALogger").DEV(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[time-spent][external] "," duration (","ms) too short to log"])),e.source,n);return}o("WALogger").DEV(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[time-spent][external] preparing to log ",": ","ms"])),e.source,n);var r={tsSessionId:e.tsSessionId,tsDuration:Math.floor(n/1e3),tsExternalEventSource:e.source,relativeTimestampMs:e.startTimeMs};return o("WAWebABProps").getABPropConfigValue("unified_session_log_ts_event")&&(e.tsTimestampMs!=null&&(r.tsTimestampMs=e.tsTimestampMs),e.unifiedSessionId!=null&&(r.unifiedSessionId=e.unifiedSessionId)),r}function g(e){e.intervalTimeoutId=self.setTimeout(function(){return h(e)},o("WAWebABProps").getABPropConfigValue("ts_session_duration_ms")/2)}function h(e){o("WAWebTimeSpentLoggingSession").markTimeSpentActivity(),o("WALogger").DEV(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[time-spent][external] next interval for ",""])),e.source);var t=o("WAWebTimeSpentLoggingSession").getOrInitTimeSpentSession(),n=t.relativeTimestampMs,r=f(e,n);r!=null&&(new(o("WAWebTsExternalWamEvent")).TsExternalWamEvent(r).commit(),e.startTimeMs=n,g(e))}function y(e){e.intervalTimeoutId!=null&&self.clearTimeout(e.intervalTimeoutId),m.delete(e);var t=o("WAWebTimeSpentLoggingSession").getOrInitTimeSpentSession(),n=t.relativeTimestampMs,r=f(e,n);r!=null&&new(o("WAWebTsExternalWamEvent")).TsExternalWamEvent(r).commit()}l.tsExternalEventsInProgress=p,l.beginTsExternalEvent=_}),98);
__d("WAWebTsBitArrayWamEvent",["WAWebWamCodegenUtils"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({TsBitArray:[4332,{bitarrayHigh:[1,e.TYPES.INTEGER],bitarrayLength:[2,e.TYPES.INTEGER],bitarrayLow:[3,e.TYPES.INTEGER],cumulativeBits:[4,e.TYPES.INTEGER],relativeTimestampMs:[5,e.TYPES.INTEGER],sessionSeq:[6,e.TYPES.INTEGER],tsSessionId:[7,e.TYPES.INTEGER],tsTimestampMs:[8,e.TYPES.INTEGER],unifiedSessionId:[9,e.TYPES.STRING]},[1,1,1],"regular"]},{TsBitArray:[]});l.TsBitArrayWamEvent=s}),98);
__d("WAWebTimeSpentLoggingBitArray",["Promise","WALogger","WAWebABProps","WAWebPermanentStorage","WAWebTsBitArrayWamEvent","compactMap"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p;function _(e,t){for(var n,o,a,i=""+e.bitmap[0],l=1;l<e.bitmap.length;++l)i+=":"+e.bitmap[l];var s=[e.sessionId,e.sessionSeq,e.sessionCum,e.startTime,e.bitmapLen,(n=e.relativeStartTimeMs)!=null?n:"",(o=e.tsTimestampMs)!=null?o:"",(a=e.unifiedSessionId)!=null?a:""],u=s.join(":")+"$"+i,c=r("WAWebPermanentStorage").getItem(t);if(c==null)return r("WAWebPermanentStorage").setItem(t,u),[e];var d=y(c);return d.push(e),r("WAWebPermanentStorage").setItem(t,c+"_"+u),d}function f(t,a){var i=_(t,a);(p||(p=n("Promise"))).all(i.map(h)).then(function(){return r("WAWebPermanentStorage").removeItem(a)}).catch(function(){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[time-spent] error flushing events for ","."])),a)})}function g(e,t){var a=r("WAWebPermanentStorage").getItem(e);if(a!=null){var i=y(a);if(i==null){o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[time-spent] error parsing stashed bitarray data (",")"])),e);return}(p||(p=n("Promise"))).all(i.map(t)).then(function(){return r("WAWebPermanentStorage").removeItem(e)}).catch(function(){o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[time-spent] error flushing events for ","."])),e)})}}function h(e){var t,n,r=Number(e.sessionId),a=new(o("WAWebTsBitArrayWamEvent")).TsBitArrayWamEvent({tsSessionId:Number.isSafeInteger(r)?r:-1,bitarrayLength:e.bitmapLen,bitarrayLow:e.bitmap[0],bitarrayHigh:(t=e.bitmap[1])!=null?t:void 0,cumulativeBits:e.sessionCum,relativeTimestampMs:(n=e.relativeStartTimeMs)!=null?n:void 0,sessionSeq:e.sessionSeq});return o("WAWebABProps").getABPropConfigValue("unified_session_log_ts_event")&&(e.tsTimestampMs!=null&&(a.tsTimestampMs=e.tsTimestampMs),e.unifiedSessionId!=null&&(a.unifiedSessionId=e.unifiedSessionId)),o("WALogger").DEV(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[time-spent] logging bitarray ",":",""])),r,e.sessionSeq),a.commitAndWaitForFlush()}function y(e){return e.length===0?[]:r("compactMap")(e.split("_"),C)}function C(e){var t,n,r,a=e.split("$"),i=a[0],l=a[1],s=babelHelpers.arrayLikeToArray(a).slice(2);if(s.length||!l){o("WALogger").WARN(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Invalid stashed time spent event"]))).devConsole(e);return}var u=i.split(":");if(!(u.length>=5&&u.length<=8)){o("WALogger").WARN(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Invalid stashed time spent event"]))).devConsole(e);return}var c=new Int32Array(l.split(":").map(function(e){return Number(e)})),p={sessionId:u[0],sessionSeq:Number(u[1]),sessionCum:Number(u[2]),startTime:Number(u[3]),bitmapLen:Number(u[4]),bitmap:c};return(t=u[5])!=null&&t.length&&(p.relativeStartTimeMs=Number(u[5])),(n=u[6])!=null&&n.length&&(p.tsTimestampMs=Number(u[6])),(r=u[7])!=null&&r.length&&(p.unifiedSessionId=u[7]),p}l.stashBitarrayData=_,l.stashAndFlushBitarray=f,l.flushBitarrays=g,l.postTsBitArrayEvent=h,l.parseStashedBitarrayData=y}),98);
__d("WAWebWamTimeSpentArray",["WALogger","WAShiftTimer","WAWebABProps","WAWebClock","WAWebUnifiedSession"],(function(t,n,r,o,a,i,l){var e,s=2,u=s*32,c=(function(){function t(e){var t=this;this.sequenceId=0,this.ship=function(e){var n,r=t.bitmap;if(r){var a=Date.now();a>t.lastActiveInMS&&(t.bitmapLength=Math.min(u,Math.ceil(a/1e3-t.startTimeInSec)));var i={sessionId:t.sessionId,startTime:t.startTimeInSec,bitmap:r,bitmapLen:t.bitmapLength,sessionSeq:t.sequenceId,sessionCum:t.cumulativeBitsSet,relativeStartTimeMs:(n=t.relativeStartTimeMs)!=null?n:void 0};if(o("WAWebABProps").getABPropConfigValue("unified_session_log_ts_event")){var l=t.startTimeInSec*1e3;i.tsTimestampMs=o("WAWebClock").Clock.getServerTimeMs()-(a-l);var s=o("WAWebUnifiedSession").UnifiedSessionManager.getSessionId();s!=null&&(i.unifiedSessionId=s)}var c=e||t.loggingCallback;c(i),t.timer.cancel(),t.bitmap=null}},this.loggingCallback=e.loggingCallback,this.timer=new(o("WAShiftTimer")).ShiftTimer(this.ship);var n=e.getSessionData,r=e.postUpdate;n!=null&&(this.fetchAndUpdateSession=function(){var e=n(),r=e.id,o=e.relativeTimeMs;t.sessionId=r,t.relativeStartTimeMs=o,t.cumulativeBitsSet=0}),this.postUpdate=r,this.$1(),this.$2(Math.floor(Date.now()/1e3))}var n=t.prototype;return n.$1=function(){this.fetchAndUpdateSession!=null?this.fetchAndUpdateSession():(this.sessionId=d(),this.cumulativeBitsSet=0,this.sequenceId=-1)},n.$2=function(n){var t;this.fetchAndUpdateSession!=null&&this.fetchAndUpdateSession(),o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[time-spent] _initArray at time ",""])),n),this.startTimeInSec=n,this.lastActiveInMS=this.startTimeInSec*1e3,this.bitmap=new Int32Array(s),this.bitmap[0]=1,this.bitmapLength=1,this.cumulativeBitsSet+=1,this.sequenceId+=1,(t=this.postUpdate)==null||t.call(this);var r=u*1e3;this.timer.debounceAndCap(r,r)},n.$3=function(t){var e=t-this.startTimeInSec;this.bitmap&&(e<0||e>=u)&&this.ship(),this.bitmap?(this.bitmap[e>>5]|=1<<(e&31),this.bitmapLength=e+1,this.cumulativeBitsSet+=1,this.lastActiveInMS=t*1e3):this.$2(t)},n.update=function(t){var e;t>=this.lastActiveInMS&&t-this.lastActiveInMS<1e3||(this.$3(Math.floor(t/1e3)),(e=this.postUpdate)==null||e.call(this))},n.shipAndEndSession=function(t){this.ship(t),this.$1()},t})();function d(){return Math.floor(2147483648*Math.random()).toString(36)}l.default=c}),98);
__d("WAWebTimeSpentLoggingSession",["WALogger","WAShiftTimer","WATimeUtils","WAWebABProps","WAWebClock","WAWebTimeSpentLoggingBitArray","WAWebTimeSpentLoggingExternal","WAWebUnifiedSession","WAWebUserPrefsKeys","WAWebUserPrefsStore","WAWebWamTimeSpentArray"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_=Math.pow(2,31)-1,f=null,g=null,h=new(o("WAShiftTimer")).ShiftTimer(function(){f!=null&&(r("WAWebUserPrefsStore").set(o("WAWebUserPrefsKeys").KEYS.TIME_SPENT_SESSION,f),o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[time-spent] persisted session"]))))});function y(e){if(e===void 0&&(e=!1),e){h.forceRunNow();return}var t=10;h.onOrBefore(t*1e3)}function C(){var e=r("WAWebUserPrefsStore").get(o("WAWebUserPrefsKeys").KEYS.TIME_SPENT_SESSION);if(e==null||typeof e!="object"){o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[time-spent] no session to restore"]))),f=null;return}var t=e.id,n=e.startTimestampMs,a=e.lastActivityTimestampMs,i=e.cumulativeBitsSet,l=e.sequenceId,d=e.relativeTimestampMs,m=e.tsTimestampMs,p=e.unifiedSessionId;if(typeof t!="number"||typeof n!="number"||typeof a!="number"||typeof i!="number"||typeof l!="number"||typeof d!="number"||typeof m!="number"&&m!=null||typeof p!="string"&&p!=null){o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[time-spent] malformed ts session: ",""])),JSON.stringify(e)),f=null;return}f={id:t,startTimestampMs:n,lastActivityTimestampMs:a,cumulativeBitsSet:i,sequenceId:l,relativeTimestampMs:d,tsTimestampMs:m!=null?m:null,unifiedSessionId:p!=null?p:null},o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[time-spent] restored ts session: ",""])),JSON.stringify(f))}function b(){var e=o("WATimeUtils").unixTimeMs(),t=null,n=null;if(o("WAWebABProps").getABPropConfigValue("unified_session_log_ts_event")){var r;t=o("WAWebClock").Clock.getServerTimeMs(),n=(r=o("WAWebUnifiedSession").UnifiedSessionManager.getSessionId())!=null?r:null}if(f==null||e-f.lastActivityTimestampMs>=S()&&!o("WAWebTimeSpentLoggingExternal").tsExternalEventsInProgress()){g=f,o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["[time-spent] initializing session"])));var a={id:Math.floor(Math.random()*_),startTimestampMs:e,lastActivityTimestampMs:e,cumulativeBitsSet:0,sequenceId:-1,relativeTimestampMs:0,tsTimestampMs:t,unifiedSessionId:n};return f=a,y(!0),a}return f.relativeTimestampMs=e-f.startTimestampMs,f.tsTimestampMs=t,f.unifiedSessionId=n,f}function v(){b().lastActivityTimestampMs=o("WATimeUtils").unixTimeMs(),y()}function S(){return o("WAWebABProps").getABPropConfigValue("ts_session_duration_ms")}function R(){return o("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[time-spent] creating time spent array"]))),new(r("WAWebWamTimeSpentArray"))({getSessionData:function(){var e=b();return{relativeTimeMs:e.relativeTimestampMs,id:e.id.toString()}},postUpdate:v,loggingCallback:function(t){o("WAWebTimeSpentLoggingBitArray").stashAndFlushBitarray(L(t),o("WAWebUserPrefsKeys").KEYS.TIME_SPENT_BITARRAY_EVENT)}})}function L(e){var t=b(),n=Number(e.sessionId);if(t.id!==n){var r;if(g!=null&&((r=g)==null?void 0:r.id)===n)t=g;else return o("WALogger").WARN(p||(p=babelHelpers.taggedTemplateLiteralLoose(["[time-spent] processing array data for an expired session, but no session found"]))),e}return t.cumulativeBitsSet+=e.sessionCum,t.sequenceId++,e.sessionSeq=t.sequenceId,e.sessionCum=t.cumulativeBitsSet,y(!0),e}l.restoreTimeSpentSession=C,l.getOrInitTimeSpentSession=b,l.markTimeSpentActivity=v,l.createTimeSpentArray=R,l.preprocessTsArrayData=L}),98);
__d("WAWebWamEnumPsBufferUploadResult",[],(function(t,n,r,o,a,i){var e=Object.freeze({SUCCESS:1,ERROR_PARSING:2,ERROR_DECODING:3,ERROR_CREDENTIAL:4,ERROR_OTHER:5,ERROR_CLIENT_NETWORK:6,ERROR_WAIT_FOR_TOKEN:7,ERROR_SERVER_OTHER:8,SKIPPED_NO_NETWORK:9,SKIPPED_NO_DATA:10,ERROR_ACCESS_TOKEN:11});i.PS_BUFFER_UPLOAD_RESULT=e}),66);
__d("WAWebWamEnumPsTokenNotReadyReason",[],(function(t,n,r,o,a,i){var e=Object.freeze({NO_REASON:0,REASON_UNKNOWN:1,REASON_WAIT_FOR_FIRST_TOKEN:2,REASON_INVALID_SHARED_KEY:3,REASON_INVALID_FACTOR:4,REASON_GEN_FACTOR_FAILURE:5,REASON_COMPUTE_HMAC_FAILURE:6,REASON_BLIND_FAILURE:7,REASON_UNBLIND_FAILURE:8,REASON_LAST_SIGNREQ_NETWORK_FAILURE:9,REASON_LAST_SIGNREQ_SERVER_ERROR:10,REASON_LAST_SIGNREQ_BAD_REQUEST:11,REASON_LAST_SIGNREQ_OTHER_ERROR:12,REASON_WAIT_FOR_GEN_TOKEN:13,REASON_GEN_SHAREDKEY_FAILURE:14,REASON_WAIT_FOR_GEN_FIRST_TOKEN:15});i.PS_TOKEN_NOT_READY_REASON=e}),66);
__d("WAWebWamEnumPsUploadReason",[],(function(t,n,r,o,a,i){var e=Object.freeze({REASON_PS_PINGER:0,REASON_PS_OFFCYCLE:1});i.PS_UPLOAD_REASON=e}),66);
__d("WAWebPsBufferUploadWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumApplicationState","WAWebWamEnumPsBufferUploadResult","WAWebWamEnumPsTokenNotReadyReason","WAWebWamEnumPsUploadReason"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({PsBufferUpload:[2244,{applicationState:[6,o("WAWebWamEnumApplicationState").APPLICATION_STATE],isFromWamsys:[12,e.TYPES.BOOLEAN],isRealtime:[15,e.TYPES.BOOLEAN],isUserSampled:[14,e.TYPES.BOOLEAN],psBufferSequenceNumber:[13,e.TYPES.INTEGER],psBufferUploadHttpResponseCode:[3,e.TYPES.INTEGER],psBufferUploadResult:[1,o("WAWebWamEnumPsBufferUploadResult").PS_BUFFER_UPLOAD_RESULT],psBufferUploadT:[2,e.TYPES.TIMER],psDitheredT:[11,e.TYPES.INTEGER],psForceUpload:[10,e.TYPES.BOOLEAN],psTokenNotReadyReason:[4,o("WAWebWamEnumPsTokenNotReadyReason").PS_TOKEN_NOT_READY_REASON],psUploadReason:[9,o("WAWebWamEnumPsUploadReason").PS_UPLOAD_REASON],waConnectedToChatd:[5,e.TYPES.BOOLEAN]},[1,1,100],"regular"]},{PsBufferUpload:[]});l.PsBufferUploadWamEvent=s}),98);
__d("WAWebWamConstants",[],(function(t,n,r,o,a,i){var e=5e4,l=5,s=100,u=64e3,c=5,d=120;i.WAM_MAX_BUFFER_SIZE=e,i.WAM_PROTOCOL_VERSION=l,i.WAM_WORKER_DATA_BATCH_SIZE=s,i.WAM_MAX_BUFFER_SIZE_FOR_UPLOAD=u,i.WAM_IN_MEMORY_BUFFERING_DURATION_IN_SECS=c,i.WAM_BUFFER_ROTATE_INTERVAL_IN_SECS=d}),66);
__d("WAWebWamEnumPsIdAction",[],(function(t,n,r,o,a,i){var e=Object.freeze({CREATED:1,ROTATED:2,DELETED:3});i.PS_ID_ACTION=e}),66);
__d("WAWebPsIdUpdateWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumPsIdAction"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({PsIdUpdate:[2862,{isFromWamsys:[4,e.TYPES.BOOLEAN],psIdAction:[2,o("WAWebWamEnumPsIdAction").PS_ID_ACTION],psIdKey:[1,e.TYPES.INTEGER],psIdRotationFrequence:[3,e.TYPES.INTEGER]},[1,1,1],"regular"]},{PsIdUpdate:[]});l.PsIdUpdateWamEvent=s}),98);
__d("WAWebWebWamForceFlushWamEvent",["WAWebWamCodegenUtils"],(function(t,n,r,o,a,i,l){var e=o("WAWebWamCodegenUtils").defineEvents({WebWamForceFlush:[3264,{},[1,1,1],"regular"]},{WebWamForceFlush:[]});l.WebWamForceFlushWamEvent=e}),98);
__d("WAWebWamUtils",["WABase64","WABinary","WALogger","WAQplUploader","WAWebEnvironment","WAWebGuestWamConstants","WAWebPsIdUpdateWamEvent","WAWebUserPrefsGeneral","WAWebWamCodegenUtils","WAWebWamConstants","WAWebWamEnumAppBuildType","WAWebWamEnumWebcEnvCode","WAWebWamGlobals","WAWebWebWamForceFlushWamEvent","err","gkx"],(function(t,n,r,o,a,i,l){var e,s,u,c;function d(){new(o("WAWebWebWamForceFlushWamEvent")).WebWamForceFlushWamEvent().commitAndWaitForFlush(!0).finally(function(){return o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["force flushed all wam buffers"]))).tags("wam")}),o("WAQplUploader").forceQplUpload().finally(function(){return o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[qpl] force flushed all buffers"]))).tags("qpl")})}function m(e,t,n){new(o("WAWebPsIdUpdateWamEvent")).PsIdUpdateWamEvent({psIdAction:e,psIdKey:t,psIdRotationFrequence:n}).commit()}function p(e,t){var n=JSON.parse(t),r=o("WAWebWamCodegenUtils").events[e];if(r==null){o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["WAM: commitWorkerWamEvent failed, "," is not defined"])),e).sendLogs("wam-worker-event-undefined-error");return}new r(n).commit()}function _(e,t){var n,r=JSON.parse(t),a=r.value;o("WAWebWamGlobals").Global.set((n={},n[e]=a,n))}function f(e){var t=e.action,n=e.name,r=e.payload;return t==="commit"?p(n,r):_(n,r)}function g(e){var t=!0;try{var n=new(o("WABinary")).Binary(o("WABase64").decodeB64(e));t=n.size()>o("WAWebWamConstants").WAM_MAX_BUFFER_SIZE_FOR_UPLOAD}catch(e){o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["dropping invalid wam buffer"])))}return t}function h(e){return e==="regular"?"regular":e==="realtime"?"realtime":"private"}function y(){return r("gkx")("26258")?o("WAWebWamEnumAppBuildType").APP_BUILD_TYPE.RELEASE:r("gkx")("26259")?o("WAWebWamEnumAppBuildType").APP_BUILD_TYPE.BETA:o("WAWebWamEnumAppBuildType").APP_BUILD_TYPE.ALPHA}function C(){if(r("gkx")("26259"))return o("WAWebWamEnumWebcEnvCode").WEBC_ENV_CODE.INTERN;if(r("gkx")("26258"))return o("WAWebWamEnumWebcEnvCode").WEBC_ENV_CODE.PROD;if(r("gkx")("26256"))return o("WAWebWamEnumWebcEnvCode").WEBC_ENV_CODE.E2E;throw r("err")("invalid env")}function b(){return o("WAWebUserPrefsGeneral").getWhatsAppWebExternalBetaJoinedIdb()}function v(e){if(r("gkx")("26256")){var t=window.__je2e_recordWAMEvent;(t||typeof t=="function")&&t(babelHelpers.extends({name:e.$className},e.all))}}function S(e,t){if(r("gkx")("26256")){var n=window.__je2e_recordWAMEvent;(n||typeof n=="function")&&n({name:e,value:t})}}function R(){return r("WAWebEnvironment").isGuest?o("WAWebGuestWamConstants").WAM_IN_MEMORY_BUFFERING_DURATION_IN_SECS_FOR_GUEST:o("WAWebWamConstants").WAM_IN_MEMORY_BUFFERING_DURATION_IN_SECS}function L(){return r("WAWebEnvironment").isGuest?o("WAWebGuestWamConstants").WAM_BUFFER_ROTATE_INTERVAL_IN_SECS_FOR_GUEST:o("WAWebWamConstants").WAM_BUFFER_ROTATE_INTERVAL_IN_SECS}l.forceFlushAllWamAndQplBuffers=d,l.logPsIdUpdate=m,l.processWorkerWamDataRow=f,l.isWamBufferTooBigToUpload=g,l.getChannelFromBufferKey=h,l.getAppBuild=y,l.getWamEnv=C,l.getAppIsBetaRelease=b,l.maybeForwardWamEventToJestE2e=v,l.maybeForwardWamAttributeToJestE2e=S,l.getInMemoryBufferingDurationInSecs=R,l.getBufferRotateIntervalInSecs=L}),98);
__d("WAWebWamStorage",["WALogger","WAWebWAWCStorage","WAWebWamConstants","WAWebWamUtils","asyncToGeneratorRuntime","err","gkx"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g,h,y;function C(e,t,n){return b.apply(this,arguments)}function b(){return b=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var a=yield r("WAWebWAWCStorage").idb();return a.wam.add({key:e,buffer:n,channel:t},e).catch(function(e){o("WALogger").LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["add failed: ","\n",""],["add failed: ","\\n",""])),e,e==null?void 0:e.stack)})}),b.apply(this,arguments)}function v(e,t,n){return S.apply(this,arguments)}function S(){return S=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var a=0;try{a=yield r("WAWebWAWCStorage").idb().then(function(r){return r.wam.update(e,{key:e,buffer:n,channel:t})})}catch(e){o("WALogger").LOG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["update failed: ","\n",""],["update failed: ","\\n",""])),e,e==null?void 0:e.stack)}return a!==0}),S.apply(this,arguments)}function R(e){return L.apply(this,arguments)}function L(){return L=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t={};try{yield r("WAWebWAWCStorage").idb().then(function(n){return n.wam.where("channel").equals(e).modify(function(e,n){t[e.key]=e.buffer,delete n.value})})}catch(e){o("WALogger").LOG(f||(f=babelHelpers.taggedTemplateLiteralLoose(["deleteAll failed: ","\n",""],["deleteAll failed: ","\\n",""])),e,e==null?void 0:e.stack)}return t}),L.apply(this,arguments)}function E(e){return k.apply(this,arguments)}function k(){return k=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=-1,a=65536;try{var i=yield r("WAWebWAWCStorage").idb();yield i.transaction("rw",["wam_meta"],n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var n=yield i.wam_meta.where("streamId").equals(e).count();n===0?(yield i.wam_meta.add({streamId:e,seqNum:1}),t=1):yield i.wam_meta.where("streamId").equals(e).modify(function(e){return t=e.seqNum+1,t>=a&&(t=1),e.seqNum=t,e})}))}catch(e){o("WALogger").LOG(g||(g=babelHelpers.taggedTemplateLiteralLoose(["getNextSequenceNumberForStream failed: ","\n",""],["getNextSequenceNumberForStream failed: ","\\n",""])),e,e==null?void 0:e.stack)}if(t===-1)throw r("gkx")("26258")||o("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[wam] getNextSequenceNumberForStream failed"]))).sendLogs("getNextSequenceNumberForStreamFailed"),r("err")("could not get seq number for streamId "+e);return t}),k.apply(this,arguments)}function I(t){return r("WAWebWAWCStorage").idb().then(function(e){return e.ps_meta.bulkDelete(t)}).catch(function(t){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["removePsMeta failed: ","\n",""],["removePsMeta failed: ","\\n",""])),t,t==null?void 0:t.stack)})}function T(){return r("WAWebWAWCStorage").idb().then(function(e){return e.ps_meta.toArray()}).catch(function(e){return o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["getPsMeta failed: ","\n",""],["getPsMeta failed: ","\\n",""])),e,e==null?void 0:e.stack),[]})}function D(e){return r("WAWebWAWCStorage").idb().then(function(t){return t.ps_meta.bulkPut(e)}).catch(function(e){o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["addPsMeta failed: ","\n",""],["addPsMeta failed: ","\\n",""])),e,e==null?void 0:e.stack)})}function x(e){return r("WAWebWAWCStorage").idb().then(function(t){return t.ps_meta.update(e.key,e)}).catch(function(e){o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["updatePsMeta failed: ","\n",""],["updatePsMeta failed: ","\\n",""])),e,e==null?void 0:e.stack)})}function $(){return r("WAWebWAWCStorage").idb().then(function(e){return e.ps_tokens.get("token")}).catch(function(e){o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["getPsToken failed: ","\n",""],["getPsToken failed: ","\\n",""])),e,e==null?void 0:e.stack)})}function P(e){return r("WAWebWAWCStorage").idb().then(function(t){return t.transaction("rw",["ps_tokens"],function(){return t.ps_tokens.put(e)})}).catch(function(e){o("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["savePsToken failed: ","\n",""],["savePsToken failed: ","\\n",""])),e,e==null?void 0:e.stack)})}function N(e,t){return M.apply(this,arguments)}function M(){return M=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield r("WAWebWAWCStorage").idb();return n.transaction("rw",["core_wam","core_wam_meta"],function(){return n.core_wam.put(t).then(function(){return n.core_wam_meta.put(e)})})}),M.apply(this,arguments)}function w(e){return A.apply(this,arguments)}function A(){return A=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield r("WAWebWAWCStorage").idb();return t.core_wam.where("streamId").equals(e).modify({finished:!0})}),A.apply(this,arguments)}function F(e){return O.apply(this,arguments)}function O(){return O=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield r("WAWebWAWCStorage").idb();return t.core_wam_meta.get({streamId:e})}),O.apply(this,arguments)}function B(){return W.apply(this,arguments)}function W(){return W=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield r("WAWebWAWCStorage").idb();return e.core_wam.toArray()}),W.apply(this,arguments)}function q(){return U.apply(this,arguments)}function U(){return U=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield r("WAWebWAWCStorage").idb();return e.transaction("rw",["core_wam","core_wam_meta"],function(){return e.core_wam.clear().then(function(){return e.core_wam_meta.clear()})})}),U.apply(this,arguments)}function V(e){return H.apply(this,arguments)}function H(){return H=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield r("WAWebWAWCStorage").idb();return t.core_wam.delete(e)}),H.apply(this,arguments)}function G(e){return z.apply(this,arguments)}function z(){return z=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield r("WAWebWAWCStorage").idb();return t.transaction("rw",["worker_wam_events"],function(){return t.worker_wam_events.put(e)})}),z.apply(this,arguments)}function j(){return K.apply(this,arguments)}function K(){return K=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield r("WAWebWAWCStorage").idb();try{yield e.transaction("rw",["worker_wam_events"],n("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield e.worker_wam_events.limit(o("WAWebWamConstants").WAM_WORKER_DATA_BATCH_SIZE).modify(function(e,t){o("WAWebWamUtils").processWorkerWamDataRow(e),delete t.value})}));var t=yield e.worker_wam_events.count();return t>0}catch(e){return o("WALogger").LOG(y||(y=babelHelpers.taggedTemplateLiteralLoose(["processWorkerWamData failed: ","\n",""],["processWorkerWamData failed: ","\\n",""])),e,e==null?void 0:e.stack),!1}}),K.apply(this,arguments)}var Q={add:C,update:v,deleteAll:R,getNextSequenceNumberForStream:E,addCoreWamBuffer:N,finishAllCoreWamBuffers:w,getCoreWamStartingSequenceNumber:F,getAllCoreWamBuffers:B,nukeAllCoreWamBuffers:q,removeWamBufferByKey:V,storeWorkerWamData:G,processWorkerWamData:j,removePsMeta:I,getPsMeta:T,addPsMeta:D,updatePsMeta:x,getPsToken:$,savePsToken:P},X=Q;l.default=X}),98);
__d("WAWebWamChatPSALogger",["WAWebChatMuteWamEvent","WAWebChatPsaActionWamEvent","WAWebChatPsaReadWamEvent","WAWebChatPsaRemoveWamEvent","WAWebWamEnumActionConducted","WAWebWamEnumChatMuteNotificationChoice","WAWebWamEnumMuteChatType","WAWebWamEnumPsaMessageActionType","WAWebWamEnumPsaMessageRemoveAction","WAWebWamEnumPsaMessageRemoveEntryPoint","WAWebWamEnumReadEntryPoint","WAWebWamEnumWaOfficialAccountName","WAWebWamMsgUtils"],(function(t,n,r,o,a,i,l){function e(e){if(e.campaignId!=null){var t;new(o("WAWebChatPsaReadWamEvent")).ChatPsaReadWamEvent({messageMediaType:e.getWamMediaType(),psaMsgId:e.id.id.toString(),psaCampaignId:(t=e.campaignId)==null?void 0:t.toString(),readEntryPoint:o("WAWebWamEnumReadEntryPoint").READ_ENTRY_POINT.CHAT}).commit()}}function s(e,t){new(o("WAWebChatMuteWamEvent")).ChatMuteWamEvent({actionConducted:o("WAWebWamEnumActionConducted").ACTION_CONDUCTED.MUTE,chatMuteNotificationChoice:o("WAWebWamEnumChatMuteNotificationChoice").CHAT_MUTE_NOTIFICATION_CHOICE.NO_NOTIFICATIONS_WHEN_MUTED,muteChatType:o("WAWebWamEnumMuteChatType").MUTE_CHAT_TYPE.ONE_ON_ONE,muteDuration:t,muteEntryPoint:e,waOfficialAccountName:o("WAWebWamEnumWaOfficialAccountName").WA_OFFICIAL_ACCOUNT_NAME.WHATSAPP_CHATPSA}).commit()}function u(e){new(o("WAWebChatMuteWamEvent")).ChatMuteWamEvent({actionConducted:o("WAWebWamEnumActionConducted").ACTION_CONDUCTED.UNMUTE,muteChatType:o("WAWebWamEnumMuteChatType").MUTE_CHAT_TYPE.ONE_ON_ONE,muteEntryPoint:e,waOfficialAccountName:o("WAWebWamEnumWaOfficialAccountName").WA_OFFICIAL_ACCOUNT_NAME.WHATSAPP_CHATPSA}).commit()}function c(e){var t;new(o("WAWebChatPsaActionWamEvent")).ChatPsaActionWamEvent({messageMediaType:e.getWamMediaType(),psaCampaignId:(t=e.campaignId)==null?void 0:t.toString(),psaMessageActionType:o("WAWebWamEnumPsaMessageActionType").PSA_MESSAGE_ACTION_TYPE.SAVE,psaMsgId:e.id.id.toString()}).commit()}function d(e){var t;new(o("WAWebChatPsaActionWamEvent")).ChatPsaActionWamEvent({messageMediaType:o("WAWebWamMsgUtils").getWamMediaType(e),psaCampaignId:(t=e.campaignId)==null?void 0:t.toString(),psaMessageActionType:o("WAWebWamEnumPsaMessageActionType").PSA_MESSAGE_ACTION_TYPE.DELETE,psaMsgId:e.id.id.toString()}).commit()}function m(e){var t;new(o("WAWebChatPsaActionWamEvent")).ChatPsaActionWamEvent({messageMediaType:e.getWamMediaType(),psaCampaignId:(t=e.campaignId)==null?void 0:t.toString(),psaMessageActionType:o("WAWebWamEnumPsaMessageActionType").PSA_MESSAGE_ACTION_TYPE.FORWARD,psaMsgId:e.id.id.toString()}).commit()}function p(e,t,n){new(o("WAWebChatPsaActionWamEvent")).ChatPsaActionWamEvent({messageMediaType:e,psaCampaignId:t==null?void 0:t.toString(),psaMessageActionType:o("WAWebWamEnumPsaMessageActionType").PSA_MESSAGE_ACTION_TYPE.MEDIA_PLAY,psaMsgId:n.toString()}).commit()}function _(e,t,n){e?new(o("WAWebChatPsaRemoveWamEvent")).ChatPsaRemoveWamEvent({lastReceivedMediaType:e.getWamMediaType(),lastReceivedMessageTs:e.t,lastReceivedMsgId:e.id.id.toString(),psaMessageRemoveAction:f(t),psaMessageRemoveEntryPoint:g(n),waOfficialAccountName:o("WAWebWamEnumWaOfficialAccountName").WA_OFFICIAL_ACCOUNT_NAME.WHATSAPP_CHATPSA}).commit():new(o("WAWebChatPsaRemoveWamEvent")).ChatPsaRemoveWamEvent({psaMessageRemoveAction:f(t),psaMessageRemoveEntryPoint:g(n),waOfficialAccountName:o("WAWebWamEnumWaOfficialAccountName").WA_OFFICIAL_ACCOUNT_NAME.WHATSAPP_CHATPSA}).commit()}function f(e){switch(e){case 1:return o("WAWebWamEnumPsaMessageRemoveAction").PSA_MESSAGE_REMOVE_ACTION.BLOCK;case 2:return o("WAWebWamEnumPsaMessageRemoveAction").PSA_MESSAGE_REMOVE_ACTION.UNBLOCK;case 3:return o("WAWebWamEnumPsaMessageRemoveAction").PSA_MESSAGE_REMOVE_ACTION.ARCHIVE;case 4:return o("WAWebWamEnumPsaMessageRemoveAction").PSA_MESSAGE_REMOVE_ACTION.UNARCHIVE;case 5:return o("WAWebWamEnumPsaMessageRemoveAction").PSA_MESSAGE_REMOVE_ACTION.CLEAR;case 6:return o("WAWebWamEnumPsaMessageRemoveAction").PSA_MESSAGE_REMOVE_ACTION.DELETE_ALL}}function g(e){switch(e){case 1:return o("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT.BLOCK_FROM_CONTACT_INFO;case 2:return o("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT.BLOCK_FROM_CHAT;case 3:return o("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT.UNBLOCK_FROM_CONTACT_INFO;case 4:return o("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT.UNBLOCK_FROM_CHAT;case 5:return o("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT.UNBLOCK_FROM_PRIVACY_SETTINGS;case 6:return o("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT.ARCHIVE_FROM_CHAT_LIST;case 7:return o("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT.ARCHIVE_FROM_DELETE_OPTION;case 8:return o("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT.UNARCHIVE_FROM_ARCHIVED_CHAT_LIST;case 9:return o("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT.CLEAR_FROM_CONTACT_INFO;case 10:return o("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT.CLEAR_FROM_CHAT_LIST;case 11:return o("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT.DELETE_ALL_FROM_CHAT_LIST;case 12:return o("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT.DELETE_ALL_FROM_CONTACT_INFO;case 13:return o("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT.DELETE_ALL_FROM_CONVERSATION;case 14:return o("WAWebWamEnumPsaMessageRemoveEntryPoint").PSA_MESSAGE_REMOVE_ENTRY_POINT.CLEAR_FROM_CONVERSATION}}l.logChatPSARead=e,l.logChatPSAMute=s,l.logChatPSAUnmute=u,l.logChatPSAStar=c,l.logChatPSADelete=d,l.logChatPSAForward=m,l.logChatPSAMediaPlay=p,l.logChatPSARemove=_}),98);
__d("WAWebSendReadReceiptJob",["Promise","WAJids","WALogger","WANullthrows","WATimeUtils","WAWebAck","WAWebApiChat","WAWebDBMsgUtils","WAWebHandlePlaceholderWam","WAWebLidMigrationUtils","WAWebModelStorageUtils","WAWebMsgGetters","WAWebMsgKey","WAWebMsgType","WAWebPrivacySettings","WAWebSchemaMessage","WAWebSendReceiptJobCommon","WAWebUserPrefsGeneral","WAWebUserPrefsMeUser","WAWebWamChatPSALogger","WAWebWid","WAWebWidFactory","asyncToGeneratorRuntime","justknobx"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g=o("WAWebWidFactory").createWid(o("WAJids").STATUS_JID);function h(e,t){return e.isNewsletter()||e.isStatus()&&t!=null&&t.isPSA()||r("WAWebWid").isPSA(e)?o("WAWebSendReceiptJobCommon").RECEIPT_TYPE.READ_SELF:e.isGroup()?o("WAWebSendReceiptJobCommon").RECEIPT_TYPE.READ:o("WAWebUserPrefsGeneral").getUserPrivacySettings().readReceipts===o("WAWebPrivacySettings").ALL_NONE.none?o("WAWebSendReceiptJobCommon").RECEIPT_TYPE.READ_SELF:o("WAWebSendReceiptJobCommon").RECEIPT_TYPE.READ}function y(e,t){return C.apply(this,arguments)}function C(){return C=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["markChatRead"])));var i=Date.now().toString(),l=String(t.id),u=yield o("WAWebApiChat").queryPendingReadReceiptMsgRows(l);o("WALogger").DEV(s||(s=babelHelpers.taggedTemplateLiteralLoose(["markChatRead: chatId: ",", lastKey: ",", pendings: "," "])),l,a,u.length),u.sort(function(e,t){var n=e.rowId||0,r=t.rowId||0;return n-r});var c=a?String(a):null,d=u.length-1;if(c){for(d;d>=0&&u[d].id!==c;d--);d<0&&(d=u.length-1)}var m=null,p=[];for(d;d>=0;d--){var _=u[d],g=t.msgs.get(_.id);g&&r("WAWebWid").isPSA(t.id)&&o("WAWebWamChatPSALogger").logChatPSARead(g),_.rowId!=null&&(m==null||_.rowId>m)&&(m=_.rowId);var y=r("WAWebMsgKey").fromString(_.id);if(_.type===o("WAWebMsgType").MSG_TYPE.CIPHERTEXT){o("WAWebHandlePlaceholderWam").postPlaceholderActivityViewEvent([_]);continue}var C=_.broadcastId||_.from,b=_.author||_.from;p.push({id:y.id,sender:o("WAWebWidFactory").createWidFromWidLike(b),chat:o("WAWebWidFactory").createWidFromWidLike(C)})}var v=L(p),S=v[0],R=v[1];return yield(f||(f=n("Promise"))).all([].concat(Array.from(S.keys()).map(function(e){var n=S.get(e);if(n){var r;return t.trusted?r=h(t.id):r=o("WAWebSendReceiptJobCommon").RECEIPT_TYPE.READ_SELF,o("WAWebSendReceiptJobCommon").sendAggregateReceipts({to:e,type:r,t:i,groupedReceipt:n})}}),Array.from(R.keys()).map(function(e){var t=S.get(e);if(t)return o("WAWebSendReceiptJobCommon").sendAggregateReceipts({to:e,type:o("WAWebSendReceiptJobCommon").RECEIPT_TYPE.READ_SELF,t:i,groupedReceipt:t})}))),o("WAWebApiChat").markMessageAndChatAsRead(m,l,!1)}),C.apply(this,arguments)}function b(e,t,n){return v.apply(this,arguments)}function v(){return v=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n){var a=e.id;if(!o("WAWebMsgGetters").getIsStatus(e)){o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["markStatusRead: message is not a status."])));return}if(!(a.fromMe&&!r("justknobx")._("5152"))){var i=o("WAWebMsgGetters").getIsGroupStatus(e)?e.id.remote:g,l=n==null||n.sendReceipt===!0;l?yield o("WAWebSendReceiptJobCommon").sendAggregateReceipts({to:i,type:h(i,r("WANullthrows")(a.participant)),t:String(t),groupedReceipt:new Map([[r("WANullthrows")(a.participant),[a.id]]])}):o("WALogger").DEV(c||(c=babelHelpers.taggedTemplateLiteralLoose(["markStatusRead: Not marking status as read because chat is not trusted"])));var s={ack:o("WAWebAck").ACK.READ};a.participant&&a.participant.isPSA()&&(s.statusPSAReadTimestamp=t);var d=[babelHelpers.extends({id:a.toString()},s)],m=o("WAWebLidMigrationUtils").getAlternateMsgKey(a);m&&d.push(babelHelpers.extends({id:m.toString()},s)),yield o("WAWebSchemaMessage").getMessageTable().bulkMergeOnly(d)}}),v.apply(this,arguments)}function S(e){return R.apply(this,arguments)}function R(){return R=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=String(o("WATimeUtils").unixTime()),r=L(e.filter(function(e){return!o("WAWebUserPrefsMeUser").isSerializedWidMe(e.sender)}).map(function(e){return{chat:e.msgKey.remote,sender:o("WAWebWidFactory").createWidFromWidLike(e.sender),id:e.msgKey.id}})),a=r[0];yield(f||(f=n("Promise"))).all(Array.from(a.keys()).map(function(e){var n=a.get(e);if(n)return o("WAWebSendReceiptJobCommon").sendAggregateReceipts({to:e,type:o("WAWebSendReceiptJobCommon").RECEIPT_TYPE.READ_SELF,t:t,groupedReceipt:n})}))}),R.apply(this,arguments)}function L(e){var t=new Map,n=new Map;return e.forEach(function(e){var r,o,a=e.chat,i=e.sender,l=e.id,s=!a.isBot()&&i.isBot(),u=s?n:t,c=(r=u.get(a))!=null?r:new Map,d=(o=c.get(i))!=null?o:[];d.push(l),c.set(i,d),u.set(a,c)}),[t,n]}function E(e,t){return k.apply(this,arguments)}function k(){return k=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var a=String(e),i=yield I(a);if(i.length){o("WALogger").DEV(d||(d=babelHelpers.taggedTemplateLiteralLoose(["[message-edit/mark-as-read]: start"]))).devConsole({chatIdString:a,pendingMsgRows:i});var l=i.map(function(t){var n=r("WAWebMsgKey").fromString(t.latestEditMsgKey),a=t.author||t.from;return{id:n.id,sender:o("WAWebWidFactory").createWidFromWidLike(a),chat:o("WAWebWidFactory").createWidFromWidLike(e)}}),s=L(l),u=s[0],c=s[1],f=u.get(e),g=c.get(e),y=Date.now().toString();if(f){var C;t.trusted?C=h(e):C=o("WAWebSendReceiptJobCommon").RECEIPT_TYPE.READ_SELF,yield o("WAWebSendReceiptJobCommon").sendAggregateReceipts({to:e,type:C,t:y,groupedReceipt:f}),o("WALogger").DEV(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[message-edit/mark-as-read]: sent read receipts"]))).devConsole({groupedReceiptsBySender:f})}return g&&(yield o("WAWebSendReceiptJobCommon").sendAggregateReceipts({to:e,type:o("WAWebSendReceiptJobCommon").RECEIPT_TYPE.READ_SELF,t:y,groupedReceipt:g}),o("WALogger").DEV(p||(p=babelHelpers.taggedTemplateLiteralLoose(["[message-edit/mark-as-read]: sent bot read-self receipts"]))).devConsole({botInvokeResponseGroupedReceiptsBySender:g})),o("WAWebModelStorageUtils").getStorage().lock(["message"],(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e[0],n=new Set(l.map(function(e){return e.id})),i=(yield I(a)).filter(function(e){return n.has(r("WAWebMsgKey").fromString(e.latestEditMsgKey).id)}),s=i.map(function(e){return{id:e.id,pendingReadReceipt:null}});s.length>0&&(yield t.bulkCreateOrMerge(s),o("WALogger").DEV(_||(_=babelHelpers.taggedTemplateLiteralLoose(["[message-edit/mark-as-read]: marked edits as read"]))).devConsole({msgUpdates:s}))});return function(t){return e.apply(this,arguments)}})())}}),k.apply(this,arguments)}function I(e){return o("WAWebSchemaMessage").getMessageTable().equals(["from","pendingReadReceipt"],[e,o("WAWebDBMsgUtils").PendingReadReceiptType.MessageEdit],{shouldDecrypt:!1})}l.getReadReceiptType=h,l.markChatRead=y,l.markStatusRead=b,l.sendAddOnReadReceipts=S,l.groupMsgIdsByChatThenSender=L,l.markEditedMsgsRead=E}),98);
__d("WAWebPostE2eMessageSendMetric",["WAWebBackendJobsCommon","WAWebE2eMessageSendWamEvent","WAWebWamEnumAgentEngagementEnumType","WAWebWamEnumEditType","WAWebWamMsgUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=e.to,n=e.retryCount,r=e.type,a=e.msg,i=e.editType,l=i===void 0?o("WAWebWamEnumEditType").EDIT_TYPE.NOT_EDITED:i,s=new(o("WAWebE2eMessageSendWamEvent")).E2eMessageSendWamEvent({e2eCiphertextVersion:o("WAWebBackendJobsCommon").CIPHERTEXT_VERSION,isLid:t.isLid(),retryCount:n,editType:l,botType:o("WAWebWamMsgUtils").getWamBotType(t,a==null?void 0:a.bizBotType)}),u=o("WAWebBackendJobsCommon").getMetricE2eDestination(t);return u!=null&&(s.e2eDestination=u),r!=null&&(s.e2eCiphertextType=o("WAWebBackendJobsCommon").getMetricE2eCiphertextType(r)),a&&(s.messageMediaType=o("WAWebWamMsgUtils").getWamMediaType(a),t.isBot()&&(a.id.remote.isBot()?s.agentEngagementType=o("WAWebWamEnumAgentEngagementEnumType").AGENT_ENGAGEMENT_ENUM_TYPE.DIRECT_CHAT:s.agentEngagementType=o("WAWebWamEnumAgentEngagementEnumType").AGENT_ENGAGEMENT_ENUM_TYPE.INVOKED)),s}function s(t){var n=e(t);n.e2eSuccessful=!0,n.commit()}function u(t){var n=e(t);n.e2eSuccessful=!1,n.weight=1,n.commit()}l.postSuccessDirectE2eMessageSendMetric=s,l.postFailureDirectE2eMessageSendMetric=u}),98);
__d("WAWebRegistration",["Promise","WALogger","WAWebCryptoCurve25519","WAWebCryptoLibraryUtilsApi","WAWebSignalKeyApi","WAWebSignalStoreApi","WAWebUserPrefsInfoStore","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s;function u(){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield o("WAWebCryptoCurve25519").keyPair(),t=new Uint8Array(24);return self.crypto.getRandomValues(t),(s||(s=n("Promise"))).resolve(o("WAWebUserPrefsInfoStore").waNoiseInfo.set({recoveryToken:t.buffer,staticKeyPair:e,certificateChainBuffer:void 0}))}),c.apply(this,arguments)}function d(){return r("WAWebCryptoLibraryUtilsApi").makeRegistrationId()}function m(){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=d();yield o("WAWebSignalStoreApi").waSignalStore.clearCredential();var r=yield o("WAWebSignalKeyApi").generateIdentityKeyPair();try{yield(s||(s=n("Promise"))).all([o("WAWebSignalStoreApi").waSignalStore.setRegistrationInfo({registrationId:t,identityKeyPair:r}),o("WAWebSignalStoreApi").waSignalStore.rotateSignedPreKey(o("WAWebCryptoCurve25519").toSignalCurveKeyPair(r),o("WAWebSignalKeyApi").generateSignedKeyPair)])}catch(t){throw o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["failed to refreshSignalCredentials: ",""])),t),t}}),p.apply(this,arguments)}l.refreshNoiseCredentials=u,l.refreshSignalCredentials=m}),98);
__d("WAWebWorkerStorage",["WALogger","WAWeb-dexie","WAWebDbRolloutUtil","WAWebDexieBootstrap","WAWebDexieCastTypes","WAWebSchemaDeferredMessagesStorage","WAWebSchemaLocalStorage","WAWebStorage","WAWebWorkerStorageUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s;function u(){return c.apply(this,arguments)}function c(){return c=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){return o("WAWebDexieBootstrap").patchDexie(),s==null&&(yield o("WAWebDbRolloutUtil").loadSchemaVersions(),o("WAWebWorkerStorageUtils").createStorage(),o("WAWebSchemaLocalStorage").addTable(),o("WAWebSchemaDeferredMessagesStorage").addTable(),s=o("WAWebWorkerStorageUtils").getStorage().initialize().catch(function(t){var n="Unknown error";throw t instanceof o("WAWebStorage").AlreadyInitializedError||t instanceof o("WAWebStorage").NoSuchDatabaseError?n=t.toString():t instanceof r("WAWeb-dexie").DexieError&&(n="Unknown DexieError"),o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[worker] Failed to initialize model storage: ",""])),n).verbose().devConsole(t).sendLogs("failed-to-initialize-model-storage",{sendLogsType:o("WALogger").SendLogsType.CRASH_OR_UNRECOVERABLE_ERROR_SAD}),t})),s}),c.apply(this,arguments)}function d(){return o("WAWebWorkerStorageUtils").destroyStorage().catch(function(){return o("WAWebDexieCastTypes").dexieCastToPromise(new(r("WAWeb-dexie"))(o("WAWebWorkerStorageUtils").DATABASE_NAME).delete())}).finally(function(){s=null})}l.getLocalStorageTable=o("WAWebSchemaLocalStorage").getTable,l.getDeferredMessagesTable=o("WAWebSchemaDeferredMessagesStorage").getTable,l.initialize=u,l.destroy=d}),98);
__d("WAWebUserPrefsClearLocalState",["Promise","WAWebLoggerImpl","WAWebPermanentStorage","WAWebTemporaryStorage","WAWebUserPrefsKeys","WAWebUserPrefsStore","WAWebUserPrefsTypes","asyncToGeneratorRuntime","gkx"],(function(t,n,r,o,a,i,l){var e;function s(){var e=r("WAWebUserPrefsStore").get(o("WAWebUserPrefsKeys").KEYS.PRESERVED_USER_KEYS,{storage:r("WAWebPermanentStorage")}),t=e instanceof Array?[].concat(o("WAWebUserPrefsTypes").LS_PRESERVE_KEYS,e.filter(function(e){return typeof e=="string"})):o("WAWebUserPrefsTypes").LS_PRESERVE_KEYS;return r("WAWebUserPrefsStore").getKeys(r("WAWebPermanentStorage"),t,!0)}function u(){return r("WAWebUserPrefsStore").getKeys(r("WAWebTemporaryStorage"),o("WAWebUserPrefsTypes").TS_PRESERVE_KEYS,!0)}function c(){r("WAWebTemporaryStorage").clear(u())}function d(){return m.apply(this,arguments)}function m(){return m=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=s(),a=[r("WAWebTemporaryStorage").clear(u()),r("WAWebPermanentStorage").clear(t)];r("gkx")("26258")&&a.push(o("WAWebLoggerImpl").Logger.clearLogs()),yield(e||(e=n("Promise"))).all(a)}),m.apply(this,arguments)}l.clearAllTemporaryStorageData=c,l.clearAllLocalState=d}),98);
__d("WAWebTasksTaskType",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({CANONICAL_ENT_TOKEN_VALIDATION:"canonicalEntTokenValidation",CLEAN_TC_TOKENS:"cleanTcTokens",LOG_DAILY_STATS:"logDailyStats",LOG_DB_ROW_COUNTS:"logDbRowCounts",ROTATE_KEY:"rotateKey",SYNC_AB_PROPS:"syncAbProps",SYNC_CONTACTS:"syncContacts",MONITOR_DB_STORAGE:"monitorDbStorage",REPORT_SYNCD_ACTION_STAT:"reportSyncdActionStat",LT_HASH_CHECK:"ltHashCheck",REQUEST_ALL_SYNCD_MISSING_KEYS:"requestAllSyncdMissingKeys",REPORT_SYNCD_KEY_STATS:"reportSyncdKeyStats",SYNCD_SYNC_ALL_COLLECTIONS:"syncdSyncAllCollections",CLEAN_ORPHAN_ADD_ONS:"cleanOrphanAddOns",CLEAN_PAST_PARTICIPANTS:"cleanPastParticipants",CLEAN_EXPIRED_UTM:"cleanExpiredUtm",SEND_NON_MESSAGE_DATA_REQUEST:"sendNonMessageDataRequest",LOG_HISTORY_SYNC_STATUS_AFTER_PAIRING:"logHistorySyncStatusAfterPairing",DELETE_NEWSLETTER_PREVIEW_CHATS:"deleteNewsletterPreviewChats",REPORT_DB_VERSIONS:"reportDbVersions",UPDATE_EXPIRED_TEXT_STATUS:"updateExpiredTextStatus",RESTART_RECENT_SYNC:"restartRecentSync",CLEANUP_REPORTING_TABLE:"cleanupReportingTable",CLEANUP_3PD_SIGNALS_TABLE:"cleanup3PDSignalsTable",FETCH_QUICK_PROMOTIONS:"fetchQuickPromotions",WAFFLE_SCHEDULED_TASKS:"waffleScheduledTasks",CLEAR_GALAXY_FLOWS_CACHE:"clearGalaxyFlowsCache",CLEAR_FALCO_BUFFER:"clearFalcoBuffer",SEND_WAM_FINGERPRINT:"sendWamFingerprint",INACTIVE_GROUP_LID_MIGRATION:"inactiveGroupLidMigration"});i.TaskType=e}),66);
__d("privateStatsUpload",["Promise","WABase64","WACryptoHmac","WALogger","WAPromiseRetryLoop","WATimeUtils","WAWamStorage","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y,C="https://dit.whatsapp.net/deidentified_telemetry",b="245118376424571|3e7d275052f1522bf3200afcf53841a7",v=0,S="WAMEventBuffer.dat",R=3,L=9,E=111e3,k=3067002,I=3067003,T=3067004;function D(e){return{result:e.result,httpResponseCode:e.httpResponseCode,uploadTime:o("WATimeUtils").monotonicTimeSince(e.uploadStartTime)}}function x(e,t,n,r){return $.apply(this,arguments)}function $(){return $=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,r,a){if((yield o("WAWamStorage").privateStatsKillSwitchGetBlockedToken())===b)return o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Removing private stats buffer without submitting it (kill switch)"]))),o("WAWamStorage").removeBufferByKey(r.key).then(function(){e()});var i=o("WATimeUtils").monotonicTime(),l=yield a();if(l==null){o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Couldn't get token to submit a private stats buffer"]))),e();return}var p=new FormData;p.append("access_token",b);var _=yield o("WACryptoHmac").hmacSha256(l.sharedSecret,r.content),f=o("WABase64").encodeB64UrlSafe(l.token,!0),g=o("WABase64").encodeB64UrlSafe(_,!0),h=f+"+"+g;p.append("credential",h),p.append("message",new Blob([r.content],{type:"application/octet-stream"}),S),p.append("meta_data",JSON.stringify({t:o("WATimeUtils").unixTime(),p:v}));var R={method:"POST",body:p,"Content-Type":"multipart/form-data"},L;try{L=yield fetch(C,R)}catch(e){o("WALogger").WARN(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Upload of a private stats buffer failed: ",""])),e),o("WALogger").DEV(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Try to submit metrics without being connected to the VPN. The PrivateStats endpoint seems to reject VPN originating connections at the CORS check level"]))),t({uploadStartTime:i,result:"error-other"});return}var E=L.status,k=function(n){e({uploadStartTime:i,httpResponseCode:E,result:n})},I=function(n){t({uploadStartTime:i,httpResponseCode:E,result:n})};switch(E){case 200:return o("WAWamStorage").removeBufferByKey(r.key).then(function(){k("success")});case 429:k("error-server-other");return;case 401:return(y||(y=n("Promise"))).all([o("WAWamStorage").privateStatsKillSwitchSet(b),o("WAWamStorage").removeBufferByKey(r.key)]).then(function(){k("error-access-token")});case 400:{var T=yield P(L),D=T.result,x=T.shouldRetry,$={uploadStartTime:i,httpResponseCode:E,result:D};x==="retry"?t($):e($);return}case 500:I("error-server-other");return}o("WALogger").WARN(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Unsupported response status code from PrivateStats upload request: ",""])),E),I("error-other")}),$.apply(this,arguments)}function P(e){return N.apply(this,arguments)}function N(){return N=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield e.json().catch(function(){});if(typeof t!="object")return o("WALogger").WARN(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Unable to parse error response 400 from PrivateStats upload request or parsed response is not an object"]))),{result:"error-other",shouldRetry:"retry"};var n=t.error;if(typeof n!="object")return o("WALogger").WARN(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Incorrect or missing error entry in the error response 400 from PrivateStats upload request"]))),{result:"error-other",shouldRetry:"retry"};var r=n.code,a=n.error_subcode;if(typeof r!="number"||typeof a!="number")return o("WALogger").WARN(f||(f=babelHelpers.taggedTemplateLiteralLoose(["Incorrect code or subcode in the error response 400 from PrivateStats upload request"]))),{result:"error-other",shouldRetry:"retry"};switch(r){case L:return{result:"error-server-other",shouldRetry:"no-retry"};case E:switch(a){case k:return{result:"error-parsing",shouldRetry:"retry"};case I:return{result:"error-decoding",shouldRetry:"retry"};case T:return{result:"error-credential",shouldRetry:"retry"};default:return o("WALogger").WARN(g||(g=babelHelpers.taggedTemplateLiteralLoose(["Unsupported subcode value in the error response 400 from PrivateStats upload request: ",""])),a),{result:"error-other",shouldRetry:"retry"}}default:return o("WALogger").WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Unsupported code value in the error response 400 from PrivateStats upload request: ",""])),r),{result:"error-other",shouldRetry:"retry"}}}),N.apply(this,arguments)}function M(t,r){var a=t.map(function(t){var n=R,a=[],i=new(o("WAPromiseRetryLoop")).PromiseRetryLoop({name:"uploadPrivateStatsBuffer",timer:{algo:{type:"exponential",first:250},max:1e3},code:function(l){return x(l,function(t){var r=D(t);a.push(r),n<=0?(o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Ran out of available retries for a private stats buffer submission"]))),l()):n--},t,r)}});return i.start(),i.promise().then(function(e){if(e!=null){var n=D(e);a.push(n)}return{uploadedBufferKey:(e==null?void 0:e.result)==="success"?t.key:null,metrics:a}})});return(y||(y=n("Promise"))).all(a).then(function(e){var t=e.reduce(function(e,t){return e.push.apply(e,t.metrics),e},[]),n=e.reduce(function(e,t){return t.uploadedBufferKey!=null&&e.push(t.uploadedBufferKey),e},[]);return{uploadedBufferKeys:n,metrics:t}})}function w(e){return o("WAWamStorage").getFinishedStreamBuffers("private").then(function(t){return M(t,e)})}l.upload_UNSAFE_INTERNAL_DO_NOT_USE=M,l.uploadFinishedPrivateStatsBuffers=w}),98);
__d("WAWebUploadPrivateStatsBackend",["WABackoffUtils","WABase64","WALogger","WAPromiseDelays","WAPromiseLoop","WAWebIssuePrivateStatsToken","WAWebNetworkStatus","WAWebPsBufferUploadWamEvent","WAWebWamEnumApplicationState","WAWebWamEnumPsBufferUploadResult","asyncToGeneratorRuntime","privateStatsUpload"],(function(t,n,r,o,a,i,l){var e,s,u;function c(t,r){var a=new Uint8Array(o("WABase64").decodeB64(t));return p(r,(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=yield o("privateStatsUpload").upload_UNSAFE_INTERNAL_DO_NOT_USE([{key:r,content:a}],o("WAWebIssuePrivateStatsToken").getToken),i=n.uploadedBufferKeys,l=n.metrics;l.map(m),i.length===0&&t(r),o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[wam] sendLogs success"]))),t(void 0)});return function(e){return t.apply(this,arguments)}})())}function d(e){switch(e){case"success":return o("WAWebWamEnumPsBufferUploadResult").PS_BUFFER_UPLOAD_RESULT.SUCCESS;case"error-server-other":return o("WAWebWamEnumPsBufferUploadResult").PS_BUFFER_UPLOAD_RESULT.ERROR_SERVER_OTHER;case"error-parsing":return o("WAWebWamEnumPsBufferUploadResult").PS_BUFFER_UPLOAD_RESULT.ERROR_PARSING;case"error-decoding":return o("WAWebWamEnumPsBufferUploadResult").PS_BUFFER_UPLOAD_RESULT.ERROR_DECODING;case"error-credential":return o("WAWebWamEnumPsBufferUploadResult").PS_BUFFER_UPLOAD_RESULT.ERROR_CREDENTIAL;case"error-other":return o("WAWebWamEnumPsBufferUploadResult").PS_BUFFER_UPLOAD_RESULT.ERROR_OTHER;default:return o("WAWebWamEnumPsBufferUploadResult").PS_BUFFER_UPLOAD_RESULT.ERROR_ACCESS_TOKEN}}function m(e){var t=e.result,n=e.uploadTime,r=e.httpResponseCode,a=d(t);new(o("WAWebPsBufferUploadWamEvent")).PsBufferUploadWamEvent({psBufferUploadResult:a,psBufferUploadT:n,psBufferUploadHttpResponseCode:r,applicationState:document.visibilityState==="visible"?o("WAWebWamEnumApplicationState").APPLICATION_STATE.FOREGROUND:o("WAWebWamEnumApplicationState").APPLICATION_STATE.BACKGROUND}).commit()}function p(e,t){return o("WAPromiseLoop").promiseLoop((function(){var a=n("asyncToGeneratorRuntime").asyncToGenerator(function*(n,a,i){var l=o("WAPromiseDelays").delayMs(o("WABackoffUtils").expBackoff(i,12e4,1e3,.1));try{return yield r("WAWebNetworkStatus").waitIfOffline(),yield t(n)}catch(t){return i>1?(o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[wam] sendLogs failure error: ",""])),String(t)).devConsole(t),n(e)):(o("WALogger").DEV(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[wam] sendLogs retry on error: ",""])),String(t)),l)}});return function(e,t,n){return a.apply(this,arguments)}})())}l.default=c}),98);
__d("WAWebStatsUploadJob",["Promise","WALogger","WASmaxStatsSendBufferRPC","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m;function p(e,t){return _.apply(this,arguments)}function _(){return _=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,r){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["fieldStatsUpload:sendSendBufferRPC start"])));var a=yield o("WASmaxStatsSendBufferRPC").sendSendBufferRPC({addT:r,addElementValue:t});o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["fieldStatsUpload:sendSendBufferRPC end"])));var i;if(a.name==="SendBufferResponseSuccess")return o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["fieldStatsUpload:sendSendBufferRPC SendBufferResponseSuccess"]))),(m||(m=n("Promise"))).resolve();a.name==="SendBufferResponseErrorNoRetry"?(i=a.value.errorSendBufferNoRetryError.value,o("WALogger").DEV(c||(c=babelHelpers.taggedTemplateLiteralLoose(["SendBufferResponseErrorNoRetry: ",""])),i.code)):(a.name,i=a.value.errorIQErrorServiceUnavailableMixin,o("WALogger").DEV(d||(d=babelHelpers.taggedTemplateLiteralLoose(["SendBufferResponseErrorRetry: ",""])),i.code));var l=i,p=l.code,_=l.text;return{errorCode:parseInt(p,10),errorText:_}}),_.apply(this,arguments)}l.default=p}),98);
__d("WAWebWamGatingUtils",["WAWebABProps"],(function(t,n,r,o,a,i,l){"use strict";function e(){return o("WAWebABProps").getABPropConfigValue("web_delay_between_wam_upload_retries_enabled")}function s(){return o("WAWebABProps").getABPropConfigValue("web_wam_maximum_wait_time_for_online_seconds")}l.delayBetweenWamUploadRetriesEnabled=e,l.wamUploadMaximumWaitTimeForOnline=s}),98);
__d("WAWebUploadStatsBackend",["WABackoffUtils","WABase64","WALogger","WAPromiseDelays","WAPromiseLoop","WAPromiseTimeout","WATimeUtils","WAWebBackendErrors","WAWebNetworkStatus","WAWebStatsUploadJob","WAWebWamGatingUtils","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u,c;function d(t,a){o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[wam] sendLogs b64len:",""])),t.length);var i=new Uint8Array(o("WABase64").decodeB64(t)),l=o("WATimeUtils").unixTime();return m(a,(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield r("WAWebStatsUploadJob")(i,l);if(t!=null&&t.errorCode){if(t.errorCode>=500)throw new(o("WAWebBackendErrors")).ServerStatusCodeError(t.errorCode,t.errorText);e(a)}o("WALogger").DEV(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[wam] sendLogs success"]))),e(void 0)});return function(t){return e.apply(this,arguments)}})())}function m(e,t){return o("WAPromiseLoop").promiseLoop((function(){var r=n("asyncToGeneratorRuntime").asyncToGenerator(function*(n,r,a){var i=o("WAWebWamGatingUtils").delayBetweenWamUploadRetriesEnabled(),l;i||(l=p(a));try{return yield _(),yield t(n)}catch(t){return a>1?(o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[wam] sendLogs failure error: ",""])),String(t)).devConsole(t),n(e)):(o("WALogger").DEV(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[wam] sendLogs retry on error: ",""])),String(t)),l==null&&(l=p(a)),l)}});return function(e,t,n){return r.apply(this,arguments)}})())}function p(e){return o("WAPromiseDelays").delayMs(o("WABackoffUtils").expBackoff(e,12e4,1e3,.1))}function _(){var e=o("WAWebWamGatingUtils").wamUploadMaximumWaitTimeForOnline();return e===0?r("WAWebNetworkStatus").waitIfOffline():o("WAPromiseTimeout").promiseTimeout(r("WAWebNetworkStatus").waitIfOffline(),e*1e3,"wamUploadWaitForOnline")}l.default=d}),98);
__d("WAWebUserPrefsTabMutex",["WANullthrows","WAWebLocalStorage","WAWebPermanentStorage","WAWebUserPrefsKeys","WAWebUserPrefsStore"],(function(t,n,r,o,a,i,l){var e="x"+Math.round(Math.random()*1e9);function s(){return r("WAWebUserPrefsStore").getPSIgnoringCache(o("WAWebUserPrefsKeys").KEYS.WHATSAPP_MUTEX)}function u(t){var n=t&&e+":"+t;r("WAWebUserPrefsStore").set(o("WAWebUserPrefsKeys").KEYS.WHATSAPP_MUTEX,n,{storage:r("WAWebPermanentStorage")})}function c(){r("WAWebUserPrefsStore").set(o("WAWebUserPrefsKeys").KEYS.WHATSAPP_MUTEX,null,{storage:r("WAWebPermanentStorage")})}function d(e){var t=e?JSON.parse(e):"";return t&&t.toString().split(/:/).pop()}function m(t){if(t.key!==o("WAWebUserPrefsKeys").KEYS.WHATSAPP_MUTEX)return!1;var n=t.newValue||"";return!n.includes(e)}function p(){return(s()||"").includes(e)}function _(){var t={wa_tab_src:e};r("WANullthrows")(r("WAWebLocalStorage")).setItem(o("WAWebUserPrefsKeys").KEYS.LOCAL_TAKEOVER_OK,JSON.stringify(t)),r("WANullthrows")(r("WAWebLocalStorage")).removeItem(o("WAWebUserPrefsKeys").KEYS.LOCAL_TAKEOVER_OK)}function f(t){if(t.key!==o("WAWebUserPrefsKeys").KEYS.LOCAL_TAKEOVER_OK)return!1;var n=t.newValue||"";return!n.includes(e)}function g(e){r("WAWebUserPrefsStore").setTS(o("WAWebUserPrefsKeys").KEYS.NO_TAKEOVER,e)}function h(){return!!r("WAWebUserPrefsStore").getTS(o("WAWebUserPrefsKeys").KEYS.NO_TAKEOVER)}l.THIS_TAB=e,l.getMutex=s,l.setMutex=u,l.removeMutex=c,l.parseMutex=d,l.mutexFilter=m,l.currentTabHasMutex=p,l.localTakeoverSuccess=_,l.takeoverFilter=f,l.setNoTakeover=g,l.getNoTakeover=h}),98);
__d("WAWebWamClientErrorsWamEvent",["WAWebWamCodegenUtils"],(function(t,n,r,o,a,i,l){var e,s=(e=o("WAWebWamCodegenUtils")).defineEvents({WamClientErrors:[1144,{isFromWamsys:[27,e.TYPES.BOOLEAN],wamClientBufferDropErrorCount:[28,e.TYPES.INTEGER],wamClientBufferFetchErrorCount:[29,e.TYPES.INTEGER],wamClientBufferRotateErrorCount:[43,e.TYPES.INTEGER],wamClientBufferStoreErrorCount:[30,e.TYPES.INTEGER],wamClientCorruptedBuffersCount:[42,e.TYPES.INTEGER],wamClientDroppedEventCount:[2,e.TYPES.INTEGER],wamClientDroppedEventCountNoEnoughStorage:[41,e.TYPES.INTEGER],wamClientDroppedEventSize:[3,e.TYPES.INTEGER],wamClientErrorFlags:[1,e.TYPES.BOOLEAN],wamClientMetadataReadErrorCount:[37,e.TYPES.INTEGER],wamClientMetadataWriteErrorCount:[38,e.TYPES.INTEGER],wamClientPrivateDroppedEventCount:[24,e.TYPES.INTEGER],wamClientPrivateDroppedEventSize:[25,e.TYPES.INTEGER],wamClientPrivateRealtimeDroppedEventCount:[34,e.TYPES.INTEGER],wamClientPrivateRealtimeDroppedEventSize:[35,e.TYPES.INTEGER],wamClientPrivateRealtimeRejectedEventCount:[36,e.TYPES.INTEGER],wamClientPrivateRejectedEventCount:[31,e.TYPES.INTEGER],wamClientRealtimeDroppedEventCount:[22,e.TYPES.INTEGER],wamClientRealtimeDroppedEventSize:[23,e.TYPES.INTEGER],wamClientRealtimeRejectedEventCount:[32,e.TYPES.INTEGER],wamClientRejectedEventCount:[33,e.TYPES.INTEGER],wamErrorBadCurrentEventBufferChecksum:[18,e.TYPES.BOOLEAN],wamErrorBadEventBuffer:[16,e.TYPES.BOOLEAN],wamErrorBadFileHeader:[15,e.TYPES.BOOLEAN],wamErrorBadFileSize:[8,e.TYPES.BOOLEAN],wamErrorBadHeaderChecksum:[17,e.TYPES.BOOLEAN],wamErrorBadRotatedEventBufferChecksum:[19,e.TYPES.BOOLEAN],wamErrorCloseFile:[11,e.TYPES.BOOLEAN],wamErrorCreateWamFile:[14,e.TYPES.BOOLEAN],wamErrorFseekFile:[9,e.TYPES.BOOLEAN],wamErrorOpenFile:[10,e.TYPES.BOOLEAN],wamErrorOpenPsUploadQueueFile:[26,e.TYPES.BOOLEAN],wamErrorOpenWamFile:[13,e.TYPES.BOOLEAN],wamErrorPersistence:[20,e.TYPES.BOOLEAN],wamErrorReadFile:[7,e.TYPES.BOOLEAN],wamErrorRemoveFile:[12,e.TYPES.BOOLEAN],wamErrorWriteEventBuffer:[6,e.TYPES.BOOLEAN],wamErrorWriteFile:[4,e.TYPES.BOOLEAN],wamErrorWriteHeader:[5,e.TYPES.BOOLEAN],wamFirstErrorReadMetadata:[39,e.TYPES.BOOLEAN],wamFirstErrorWriteMetadata:[40,e.TYPES.BOOLEAN]},[1,1,1],"regular"]},{WamClientErrors:[]});l.WamClientErrorsWamEvent=s}),98);
__d("WAWebWamEnumFormatter",[],(function(t,n,r,o,a,i){function e(e,t){if(t==null||typeof t!="object"||!("$enumMappings"in t))return e;var n={};for(var r in e){var o=e[r];if(n[r]=o,typeof o=="number"){var a=t.$enumMappings;if(a!=null&&typeof a=="object"){var i=a[r];if(i!=null&&typeof i=="object"){var l=i[String(o)];typeof l=="string"&&(n[r]=String(o)+" ("+l+")")}}}}return n}i.formatWamEventForLogging=e}),66);
__d("WAWebWamPrivateStats",["Promise","WALogger","WARandomHex","WAResolvable","WATimeUtils","WAWebWamEnumPsIdAction","WAWebWamGlobals","WAWebWamStorage","WAWebWamUtils","asyncToGeneratorRuntime","err"],(function(t,n,r,o,a,i,l){var e,s,u,c={},d={},m={};o("WAWebWamGlobals").PrivateStatsAllIds.map(function(e){c[e.keyHashInt]=e.key,d[e.key]=e.keyHashInt,m[e.key]={value:e.keyHashInt,rotationPeriodDays:e.rotationPeriodDays}}),c[0]="none",d.none=0,m.none={value:"none",rotationPeriodDays:-1};var p=null;function _(){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(p!=null)return p.promise;var e=new(o("WAResolvable")).Resolvable;p=e;var t=[],n=yield r("WAWebWamStorage").getPsMeta(),a=new Set;n.map(function(e){a.add(e.key),m[e.key]===void 0?t.push(e.key):m[e.key].value=e.value});var i=Object.keys(m).filter(function(e){return!a.has(e)}).map(function(e){return e!=="none"&&(m[e].value=o("WARandomHex").randomHex(16)),{key:e,value:m[e].value,rotateInDays:m[e].rotationPeriodDays,creationTs:o("WATimeUtils").unixTime()}});yield r("WAWebWamStorage").addPsMeta(i),yield r("WAWebWamStorage").removePsMeta(t),i.map(function(e){return o("WAWebWamUtils").logPsIdUpdate(o("WAWebWamEnumPsIdAction").PS_ID_ACTION.CREATED,d[e.key],e.rotateInDays)}),t.map(function(e){return o("WAWebWamUtils").logPsIdUpdate(o("WAWebWamEnumPsIdAction").PS_ID_ACTION.DELETED,d[e],m[e].rotationPeriodDays)}),e.resolve()}),f.apply(this,arguments)}function g(){var e=new Map;return o("WAWebWamGlobals").PrivateStatsAllIds.forEach(function(t){e.set(t.keyHashInt,String(m[t.key].value))}),e}function h(e){if(p==null)throw r("err")("can't call getPrivateStatsKeyFromInt without initializing");return c[e]}function y(e){if(e==="regular")throw r("err")("tried to get psId for regular channel event");if(p==null)throw r("err")("can't call getLatestPrivateStatsIdValueFromKey without initializing");return m[e].value}function C(){return b.apply(this,arguments)}function b(){return b=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var t=[];if(p==null)throw r("err")("can't call maybeRotatePsIds without initializing");try{yield p.promise;var a=yield r("WAWebWamStorage").getPsMeta();yield(u||(u=n("Promise"))).all(a.map((function(){var r=n("asyncToGeneratorRuntime").asyncToGenerator(function*(n){try{var r=n.key,a=n.rotateInDays,i=n.creationTs;R(i,a)&&(t.push(r),yield v(r))}catch(t){o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["error while rotating PS id for key ",""])),n.key)}});return function(e){return r.apply(this,arguments)}})()))}catch(e){o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["error while rotating PS ids ",""])),e)}return t}),b.apply(this,arguments)}function v(e){return S.apply(this,arguments)}function S(){return S=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=o("WARandomHex").randomHex(16);m[e].value=t,yield r("WAWebWamStorage").updatePsMeta({key:e,rotateInDays:m[e].rotationPeriodDays,value:t,creationTs:o("WATimeUtils").unixTime()}),o("WAWebWamUtils").logPsIdUpdate(o("WAWebWamEnumPsIdAction").PS_ID_ACTION.ROTATED,d[e],m[e].rotationPeriodDays)}),S.apply(this,arguments)}function R(e,t){if(t===-1||e==null)return!1;var n=t*o("WATimeUtils").DAY_SECONDS,r=Math.floor(o("WATimeUtils").unixTime()/n)*n;return e<r}l.initPrivateStats=_,l.getPrivateStatsIdsForCoreWam=g,l.getPrivateStatsKeyFromInt=h,l.getLatestPrivateStatsIdValueFromKey=y,l.maybeRotatePsIds=C}),98);
__d("WAWebWamInterop",["Promise","WACustomError","WATimeUtils","WAWamStorage","WAWebUserPrefsGeneral","WAWebWamPrivateStats","WAWebWamStorage","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s=function(r,a){return(e||(e=n("Promise"))).reject(new(o("WACustomError")).UnimplementedMethod("saveBuffer not implemented yet"))},u=function(r){return(e||(e=n("Promise"))).resolve()},c=function(r){return(e||(e=n("Promise"))).reject(new(o("WACustomError")).UnimplementedMethod("getStartingSequenceRow not implemented yet"))},d=function(){return(e||(e=n("Promise"))).reject(new(o("WACustomError")).UnimplementedMethod("getBuffers not implemented yet"))},m=function(){return(e||(e=n("Promise"))).reject(new(o("WACustomError")).UnimplementedMethod("nukeMetrics not implemented yet"))},p=function(r){return(e||(e=n("Promise"))).reject(new(o("WACustomError")).UnimplementedMethod("finishBuffer not implemented yet"))},_=function(){return(e||(e=n("Promise"))).reject(new(o("WACustomError")).UnimplementedMethod("updatePrivateStatsIds not implemented yet"))},f=(function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var o=yield r("WAWebWamStorage").getPsToken();return o?t({redeemCount:o.redeemCount,creationTs:o.creationTs},{maxExpirySeconds:86400})?r("WAWebWamStorage").savePsToken(babelHelpers.extends({},o,{redeemCount:o.redeemCount+1})).then(function(){return o.token}):(e||(e=n("Promise"))).resolve(null):null});return function(n){return t.apply(this,arguments)}})();function g(e){return r("WAWebWamStorage").savePsToken({key:"token",token:e,creationTs:o("WATimeUtils").unixTime(),redeemCount:1})}function h(){return(e||(e=n("Promise"))).resolve(o("WAWebUserPrefsGeneral").getPsKillSwitchToken())}function y(t){return o("WAWebUserPrefsGeneral").setPsKillSwitchToken(t),(e||(e=n("Promise"))).resolve()}var C={getStreamId:function(){return 1},saveBuffer:s,finishBuffer:p,getStartingSequenceRow:c,getBuffers:d,removeBufferByKey:u,nukeMetrics:m,updatePrivateStatsIds:_,redeemPrivateStatsToken:f,savePrivateStatsToken:g,privateStatsKillSwitchGetBlockedToken:h,privateStatsKillSwitchSet:y};function b(){o("WAWamStorage").startWamStorage(C)}l.startWamStore=b}),98);
__d("WAWebWamBeaconing",["WATimeUtils","WAWebUserPrefsGeneral"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("WAWebUserPrefsGeneral").getWamBeaconingSettings(),n=t.find(function(t){return t.key===e}),r=null;if(n==null||s(n.ts)){var a=o("WATimeUtils").unixTime(),i=Math.random()<=.01,l={key:e,ts:a,value:i?1:null};n==null?t.push(l):(n.value=l.value,n.ts=a),r=l.value}else{if(n.value==null)return null;r=++n.value}return o("WAWebUserPrefsGeneral").setWamBeaconingSettings(t),r}function s(e){var t=Math.floor(o("WATimeUtils").unixTime()/o("WATimeUtils").DAY_SECONDS),n=Math.floor(e/o("WATimeUtils").DAY_SECONDS);return t!==n}l.maybeGetEventSequenceNumber=e}),98);
__d("WAWebWamLibProtocol",["WABinary"],(function(t,n,r,o,a,i,l){var e=8,s=0,u=1,c=2,d=4;function m(e,t,n){return f(e,t,n,s)}function p(e,t,n,r){var o=r?u:u|d;return f(e,t,n,o)}function _(e,t,n,r){var o=r?c:c|d;return f(e,t,n,o)}function f(e,t,n,r){if(n==null)r===s&&g(e,t,r);else if(typeof n=="number"&&n===(n|0))n===0?g(e,t,r|16):n===1?g(e,t,r|32):-128<=n&&n<128?(g(e,t,r|48),e.writeInt8(n)):-32768<=n&&n<32768?(g(e,t,r|64),e.writeInt16(n)):(g(e,t,r|80),e.writeInt32(n));else if(typeof n=="number")g(e,t,r|112),e.writeFloat64(n);else if(typeof n=="string"){var a=o("WABinary").numUtf8Bytes(n);a<256?(g(e,t,r|128),e.writeUint8(a)):a<65536?(g(e,t,r|144),e.writeUint16(a)):(g(e,t,r|160),e.writeUint32(a)),e.writeString(n)}}function g(t,n,r){n<256?(t.writeUint8(r),t.writeUint8(n)):(t.writeUint8(r|e),t.writeUint16(n))}l.writeGlobalAttribute=m,l.writeEvent=p,l.writeField=_}),98);
__d("WAWebWamLibContext",["WABase64","WABinary","WALogger","WAWebEventSampling","WAWebWamBeaconing","WAWebWamCodegenUtils","WAWebWamConstants","WAWebWamLibProtocol","WAWebWamPrivateStats"],(function(t,n,r,o,a,i,l){var e,s=47,u=3433,c=6005,d=0,m=1,p=2,_=2147483647,f=(function(){function t(e,t,n){this.bufferKey=e,this.buffer=new(o("WABinary")).Binary(void 0,!0),this.buffer.writeString("WAM"),this.buffer.writeUint8(o("WAWebWamConstants").WAM_PROTOCOL_VERSION),this.buffer.writeUint8(1),this.buffer.writeUint16(t),this.bufferKey==="regular"?this.buffer.writeUint8(d):this.bufferKey==="realtime"?this.buffer.writeUint8(m):this.buffer.writeUint8(p),this.eventsWritten=0,this.prevGlobals={},this.dirtyGlobals={},this.unsavedPortion=null,this.saveKey=String(Math.random()*1e9|0),this.$1(n)}var n=t.prototype;return n.size=function(){return this.buffer.size()},n.set=function(t,n){this.dirtyGlobals[String(t)]=n,this.unsavedPortion&&this.unsavedPortion.set(t,n)},n.write=function(n){var t,r=this.buffer;this.set(s,n.commitTime);var a=o("WAWebWamBeaconing").maybeGetEventSequenceNumber(this.bufferKey);a!=null&&this.set(u,a),n.wamChannel==="private"&&this.set(c,o("WAWebWamPrivateStats").getLatestPrivateStatsIdValueFromKey(this.bufferKey).toString()),this.$2();for(var i=n.all,l=Object.keys(i),d=-1,m=!1,p=0;p<l.length;p++){var f=i[l[p]];f!=null&&(d=p,m=!0)}var g=(t=o("WAWebEventSampling").getClientEventSamplingWeight(n.id))!=null?t:n.weight;o("WAWebWamLibProtocol").writeEvent(r,n.id,-g,m);for(var h=0;h<=d;h++){var y=l[h],C=o("WAWebWamCodegenUtils").metrics.getEvent(n.$className,y),b=C.id,v=C.type,S=i[y];if(S!=null){if(typeof S=="boolean"&&(S=S?1:0),m=h<d,v==="timer"&&S>_){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[wam] invalid value for timer field ",".",""])),n.$className,y).sendLogs("wam-event-validation-error");continue}o("WAWebWamLibProtocol").writeField(r,b,S,m)}}this.eventsWritten++,this.unsavedPortion&&this.unsavedPortion.write(n)},n.stringBuffer=function(){return this.eventsWritten>0?o("WABase64").encodeB64(this.buffer.peek(function(e){return e.readByteArrayView()})):""},n.getBuffer=function(){return this.buffer},n.$1=function(t){var e=(function(e){return e==="regular"||e==="realtime"?"regular":"private"})(this.bufferKey);for(var n in t){var r=t[n],a=o("WAWebWamCodegenUtils").metrics.getGlobal(n),i=a.channels.includes(e);r!==void 0&&i&&this.set(o("WAWebWamCodegenUtils").metrics.getGlobal(n).id,r)}},n.$2=function(){var e=this.dirtyGlobals,t=this.prevGlobals;for(var n in e){var r=e[n];if(typeof r=="boolean")r=r?1:0;else if(r===void 0)r=null;else if(Number.isNaN(r))continue;if(r!==t[n]||n===String(s)||n===String(c)){t[n]=r;var a=parseInt(n,10);o("WAWebWamLibProtocol").writeGlobalAttribute(this.buffer,a,r)}}this.dirtyGlobals={}},t})();l.WamContext=f}),98);
__d("WAWebWam",["Promise","SiteData","WALogger","WANullthrows","WAResolvable","WAShiftTimer","WATimeUtils","WAWebABProps","WAWebABPropsLocalStorage","WAWebBrowserApi","WAWebBuildConstants","WAWebCrashlog","WAWebEnvironment","WAWebEventSampling","WAWebGuestWamUtils","WAWebIsOfficialClient","WAWebMiscBrowserUtils","WAWebUploadPrivateStatsBackend","WAWebUploadStatsBackend","WAWebUserPrefsIsLoggedIn","WAWebUserPrefsTabMutex","WAWebWamClientErrorsWamEvent","WAWebWamConstants","WAWebWamEnumDeviceClassification","WAWebWamEnumFormatter","WAWebWamEnumPlatformType","WAWebWamEnumWebcWebPlatformType","WAWebWamGlobals","WAWebWamInterop","WAWebWamLibContext","WAWebWamPlatform","WAWebWamPrivateStats","WAWebWamRuntimeProvider","WAWebWamStorage","WAWebWamUtils","asyncToGeneratorRuntime","gkx","isStringNullOrEmpty","justknobx"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I,T,D,x,$,P,N,M,w,A,F,O,B,W=[],q=[],U=!1,V="1",H={commit:z(ne),set:z(oe),resumeJobs:z(ue),initialize:z(ae)};function G(){for(W=o("WAWebWamGlobals").PrivateStatsAllIds.map(function(e){return e.key}),o("WAWebWamPrivateStats").initPrivateStats().catch(function(t){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[WAM] failed to initialise private stats for wam runtime "]))).devConsole(t)}),o("WAWebWamInterop").startWamStore(),B=new(o("WAShiftTimer")).ShiftTimer(function(e){var t=!r("WAWebEnvironment").isGuest&&!o("WAWebUserPrefsTabMutex").currentTabHasMutex();if(t){o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[wam] this tab is in the background, skipping WAM processing for now"])));return}ce(e).catch(function(e){o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[WAM] failed to execute pending jobs for wam runtime "]))).devConsole(e)})}),o("WAWebWamRuntimeProvider").setWamRuntime(H);q.length;){var t=q.pop();t&&t()}U=!0}function z(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(U)return e.apply(void 0,n);q.push(function(){e.apply(void 0,n)})}}var j={},K=0,Q=[],X=!1,Y=!1,J=null,Z=new(o("WAResolvable")).Resolvable,ee=!1,te=!1;function ne(e,t){var a;if(t===void 0&&(t=!1),e.commitTime!=null&&e.commitTime!==0)return o("WALogger").WARN(c||(c=babelHelpers.taggedTemplateLiteralLoose(["wam:commit redundant commit! ",""])),e.$className),(O||(O=n("Promise"))).resolve();e.wamChannel;var i=(a=o("WAWebEventSampling").getClientEventSamplingWeight(e.id))!=null?a:e.weight;if(i!==0&&Math.random()*i>1)return e.commitTime=o("WATimeUtils").unixTimeWithoutClockSkewCorrection(),(O||(O=n("Promise"))).resolve();o("WALogger").DEV(d||(d=babelHelpers.taggedTemplateLiteralLoose(["wam:commit ",""])),e.$className).devConsole(o("WAWebWamEnumFormatter").formatWamEventForLogging(e.all,e)),re(e),o("WAWebWamUtils").maybeForwardWamEventToJestE2e(e);var l;return e.wamChannel==="realtime"?l=r("justknobx")._("4680")?"realtime":"all":r("WAWebEnvironment").isGuest||t?l="all":l="none",le({job:e,flushWamBuffers:l})}function re(e,t){e.commitTime=t!=null?t:o("WATimeUtils").unixTimeWithoutClockSkewCorrection()}function oe(e,t){return o("WALogger").DEV(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[wam] set "," = ",""])),e.name,String(t)),o("WAWebWamUtils").maybeForwardWamAttributeToJestE2e(e.name,String(t)),le({job:[e,t],flushWamBuffers:"none"})}function ae(){return ie.apply(this,arguments)}function ie(){return ie=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e;if(J)return(O||(O=n("Promise"))).resolve(J);var t=r("WAWebMiscBrowserUtils").info(),a=babelHelpers.extends({appVersion:o("WAWebBuildConstants").VERSION_BASE_WITH_WINDOWS_BUILD,appBuild:o("WAWebWamUtils").getAppBuild(),platform:o("WAWebWamEnumPlatformType").PLATFORM_TYPE.WEBCLIENT,webcWebArch:Ie(),appIsBetaRelease:yield o("WAWebWamUtils").getAppIsBetaRelease(),browser:t.name||null,browserVersion:t.ua||null,deviceName:t.os||null,deviceVersion:t.version||null,memClass:o("WAWebBrowserApi").getMemClass(),numCpu:o("WAWebBrowserApi").getNumCpu(),webcEnv:o("WAWebWamUtils").getWamEnv(),webcTabId:o("WAWebUserPrefsTabMutex").THIS_TAB,webcWebPlatform:o("WAWebWamEnumWebcWebPlatformType").WEBC_WEB_PLATFORM_TYPE[o("WAWebWamPlatform").getWamPlatform()],ocVersion:o("WAWebIsOfficialClient").isOfficialClient?1:0,deviceClassification:o("WAWebWamEnumDeviceClassification").DEVICE_CLASSIFICATION.DESKTOP,webcRevision:r("SiteData").client_revision,abKey2:o("WAWebABProps").getABPropConfigValue("wam_disable_abkey_attribute")?null:(e=o("WAWebABPropsLocalStorage").getABKey())!=null?e:""},r("WAWebEnvironment").isGuest?o("WAWebGuestWamUtils").getGuestWamOverrides():{});return J=a,o("WALogger").DEV(f||(f=babelHelpers.taggedTemplateLiteralLoose(["[wam] initialize"]))).devConsole(J),o("WAWebWamGlobals").Global.commitOnSet=!1,o("WAWebWamGlobals").Global.set(J),o("WAWebWamGlobals").Global.commitOnSet=!0,Object.keys(a).forEach(function(e){return o("WAWebWamUtils").maybeForwardWamAttributeToJestE2e(e,String(a[e]))}),a}),ie.apply(this,arguments)}function le(e){var t=e.job,n=e.flushWamBuffers;return Q.push(t),X?n!=="none"?(ee=!1,te=!0,self.setTimeout(function(){return B.forceRunNow(n)},1)):B.onOrBefore(o("WAWebWamUtils").getInMemoryBufferingDurationInSecs()*1e3):n==="realtime"&&r("justknobx")._("3237")?self.setTimeout(function(){return B.forceRunNow("realtime")},1):n!=="none"&&(B.cancel(),ee=!0,te=!1),Z.promise}function se(){o("WALogger").DEV(p||(p=babelHelpers.taggedTemplateLiteralLoose(["wam pause processing"]))),X=!1,B.cancel();var e=Z;return Z=new(o("WAResolvable")).Resolvable,e}function ue(){o("WALogger").DEV(_||(_=babelHelpers.taggedTemplateLiteralLoose(["wam enable processing"]))),X=!0,te=!1,Q.length>0&&B.onOrBefore(o("WAWebWamUtils").getInMemoryBufferingDurationInSecs()*1e3),ee&&(ee=!1,te=!0,B.forceRunNow())}function ce(e){return de.apply(this,arguments)}function de(){return de=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=te,a=!(e==="realtime"&&r("justknobx")._("3237")),i=a?se():null,l,s;if(e==="realtime"){l=["realtime"];var u=Q.reduce(function(e,t){var n=e[0],r=e[1];return!Array.isArray(t)&&t.wamChannel==="realtime"?n.push(t):r.push(t),[n,r]},[[],[]]);s=u[0],Q=u[1]}else l=["regular","realtime","none"].concat(W),s=[].concat(Q),Q=[];try{var c=yield ae();if(e!=="realtime"){var d=yield o("WAWebWamPrivateStats").maybeRotatePsIds();yield(O||(O=n("Promise"))).all(d.map(function(e){return me(e,c)}))}o("WALogger").DEV(g||(g=babelHelpers.taggedTemplateLiteralLoose(["[wam] executePending "," jobs"])),s.length),yield(O||(O=n("Promise"))).all(l.map(function(e){return ye(e,s,t,c)}))}finally{a&&(i==null||i.resolve(),ue())}}),de.apply(this,arguments)}function me(e,t){return pe.apply(this,arguments)}function pe(){return pe=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){return yield be(e,t),j[e]=yield _e(e,t),j[e]}),pe.apply(this,arguments)}function _e(e,t){return fe.apply(this,arguments)}function fe(){return fe=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){return new(o("WAWebWamLibContext")).WamContext(e,yield r("WAWebWamStorage").getNextSequenceNumberForStream(V),t)}),fe.apply(this,arguments)}function ge(e,t){return he.apply(this,arguments)}function he(){return he=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n,r=(n=j[e])!=null?n:yield _e(e,t);return j[e]=r,r}),he.apply(this,arguments)}function ye(e,t,n,r){return Ce.apply(this,arguments)}function Ce(){return Ce=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,n,r){var a=o("WAWebWamUtils").getChannelFromBufferKey(e),i;try{i=yield ge(e,r)}catch(e){o("WALogger").WARN(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[wam] _executePendingForContext failed to get context ",""])),String(e!=null&&e.stack?e.stack:e));return}try{for(var l=0;l<t.length;l++){if(i.size()>o("WAWebWamConstants").WAM_MAX_BUFFER_SIZE){var s=yield me(e,r);if(s==null)break;i=s}var u=t[l];if(Array.isArray(u)){var d=u[0],m=u[1],p=a==="realtime"?"regular":a;d.channels.includes(p)&&(r[d.name]=m,i.set(d.id,m))}else{var c=u;((c.wamChannel==="regular"||c.wamChannel==="realtime")&&c.wamChannel===a||c.wamChannel==="private"&&e===o("WAWebWamPrivateStats").getPrivateStatsKeyFromInt(c.privateStatsIdInt))&&i.write(c)}}var _=o("WATimeUtils").unixTimeWithoutClockSkewCorrection();if(i.eventsWritten>0&&(n||i.size()>o("WAWebWamConstants").WAM_MAX_BUFFER_SIZE||_>=K+o("WAWebWamUtils").getBufferRotateIntervalInSecs()||!Y)){var f=o("WAWebUserPrefsIsLoggedIn").isLoggedIn();if(!f){o("WALogger").DEV(y||(y=babelHelpers.taggedTemplateLiteralLoose(["[wam] _executePending wam unauthed, didn't send"]))),i.buffer.size()>o("WAWebWamConstants").WAM_MAX_BUFFER_SIZE?(j[e]=null,o("WALogger").DEV(C||(C=babelHelpers.taggedTemplateLiteralLoose(["[wam] _executePending abandoned current buffer"])))):yield be(e,r);return}yield Se(e)}else yield be(e,r)}catch(t){o("WALogger").WARN(b||(b=babelHelpers.taggedTemplateLiteralLoose(["[wam] _executePending error ",""])),String(t!=null&&t.stack?t.stack:t)).devConsole(t),o("WAWebCrashlog").upload({reason:"wam-error"}),new(o("WAWebWamClientErrorsWamEvent")).WamClientErrorsWamEvent({wamClientBufferDropErrorCount:1}).commit(),j[e]=null}}),Ce.apply(this,arguments)}function be(e,t){return ve.apply(this,arguments)}function ve(){return ve=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){if(j[e]){var n=j[e].stringBuffer();if(n){var a=r("WANullthrows")(j[e]).unsavedPortion;if(!(a&&a.eventsWritten===0)){var i=r("WANullthrows")(j[e]).saveKey;try{if(a){o("WALogger").DEV(v||(v=babelHelpers.taggedTemplateLiteralLoose(["[wam] saveCurrentContext has unsavedPortion WamStorage.update start"])));var l=yield r("WAWebWamStorage").update(i,e,n);if(o("WALogger").DEV(S||(S=babelHelpers.taggedTemplateLiteralLoose(["[wam] saveCurrentContext has unsavedPortion WamStorage.update end"]))),!j[e])return;if(l)o("WALogger").DEV(R||(R=babelHelpers.taggedTemplateLiteralLoose(["[wam] save successfully updated ",""])),i),r("WANullthrows")(j[e]).unsavedPortion=yield _e(e,t);else{j[e]=j[e].unsavedPortion,o("WALogger").DEV(L||(L=babelHelpers.taggedTemplateLiteralLoose(["[wam] save other tab claimed buffer, cutting head"]))),yield be(e,t);return}}else{if(o("WALogger").DEV(E||(E=babelHelpers.taggedTemplateLiteralLoose(["[wam] saveCurrentContext no unsavedPortion WamStorage.update start"]))),yield r("WAWebWamStorage").add(i,e,n),o("WALogger").DEV(k||(k=babelHelpers.taggedTemplateLiteralLoose(["[wam] saveCurrentContext no unsavedPortion WamStorage.update end"]))),!j[e])return;o("WALogger").DEV(I||(I=babelHelpers.taggedTemplateLiteralLoose(["[wam] save successfully saved new entry ",""])),i),r("WANullthrows")(j[e]).unsavedPortion=yield _e(e,t)}}catch(e){o("WALogger").WARN(T||(T=babelHelpers.taggedTemplateLiteralLoose(["[wam] save WamStorage failed to save ",""])),String(e)).devConsole(e)}}}}}),ve.apply(this,arguments)}function Se(e){return Re.apply(this,arguments)}function Re(){return Re=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t;try{t=yield r("WAWebWamStorage").deleteAll(e)}catch(e){t={},o("WALogger").WARN(D||(D=babelHelpers.taggedTemplateLiteralLoose(["[wam] sendAllLogs failed to read because ",""])),String(e)).devConsole(e)}var a=t;if(j[e]){j[e].unsavedPortion&&!(j[e].saveKey in a)&&(j[e]=j[e].unsavedPortion);var i=r("WANullthrows")(j[e]).saveKey;a[i]=r("WANullthrows")(j[e]).stringBuffer()}o("WALogger").DEV(x||(x=babelHelpers.taggedTemplateLiteralLoose(["sendAllLogs: sendLogs start"])));var l=yield(O||(O=n("Promise"))).all(Object.entries(a).map(function(t){var n=t[0],r=t[1];return Le(r,n,o("WAWebWamUtils").getChannelFromBufferKey(e))}));o("WALogger").DEV($||($=babelHelpers.taggedTemplateLiteralLoose(["sendAllLogs: sendLogs success"])));var s=l.filter(Boolean);if(s.length!==l.length&&(K=o("WATimeUtils").unixTimeWithoutClockSkewCorrection(),Y=!0),j[e]&&!s.includes(j[e].saveKey)&&(j[e]=null),s.length!==0){var u=s.reduce(function(e,t){return e+a[t].length},0);u<o("WAWebWamConstants").WAM_MAX_BUFFER_SIZE?(o("WALogger").DEV(P||(P=babelHelpers.taggedTemplateLiteralLoose(["sendAllLogs: process failures start bufferKey ",""])),e),yield(O||(O=n("Promise"))).all(s.map((function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){try{yield r("WAWebWamStorage").add(t,e,a[t])}catch(e){o("WALogger").WARN(N||(N=babelHelpers.taggedTemplateLiteralLoose(["sendAllLogs: adding to WamStorage failed"])))}});return function(e){return t.apply(this,arguments)}})())),o("WALogger").DEV(M||(M=babelHelpers.taggedTemplateLiteralLoose(["sendAllLogs: process failures success bufferKey ",""])),e)):(j[e]=null,new(o("WAWebWamClientErrorsWamEvent")).WamClientErrorsWamEvent({wamClientBufferDropErrorCount:1}).commit(),o("WALogger").WARN(w||(w=babelHelpers.taggedTemplateLiteralLoose(["wam dropped "," buffers! ("," bytes)"])),s.length,u).devConsole(a))}}),Re.apply(this,arguments)}function Le(e,t,n){return Ee.apply(this,arguments)}function Ee(){return Ee=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t,a){return e===""||e[0]==="["?(O||(O=n("Promise"))).resolve():o("WAWebWamUtils").isWamBufferTooBigToUpload(e)?(new(o("WAWebWamClientErrorsWamEvent")).WamClientErrorsWamEvent({wamClientBufferDropErrorCount:1}).commit(),(O||(O=n("Promise"))).resolve()):a==="private"?(o("WALogger").DEV(A||(A=babelHelpers.taggedTemplateLiteralLoose(["sendLogs: uploadPrivateStats"]))),r("WAWebUploadPrivateStatsBackend")(e,t)):(o("WALogger").DEV(F||(F=babelHelpers.taggedTemplateLiteralLoose(["sendLogs: uploadStats for channel ",""])),a),r("WAWebUploadStatsBackend")(e,t))}),Ee.apply(this,arguments)}var ke=new Map([["sandcastle","dev"],["trunkstable","C1"]]);function Ie(){var e=r("gkx")("26256");if(e)return"jest-e2e";if(!r("isStringNullOrEmpty")(o("WAWebBuildConstants").PUSH_PHASE)){var t;return(t=ke.get(o("WAWebBuildConstants").PUSH_PHASE))!=null?t:o("WAWebBuildConstants").PUSH_PHASE}}l.Wam=H,l.initWamRuntime=G,l.sendAllLogs=Se}),98);
__d("WDSFontTokenStyles",[],(function(t,n,r,o,a,i,l){"use strict";var e={Body1:{fontSize:"x1jchvi3",fontFamily:"xjb2p0i",fontWeight:"xo1l8bm",lineHeight:"x17mssa0",fontOpticalSizing:"x1ic7a3i",$$css:!0},Body1Emphasized:{fontSize:"x1jchvi3",fontFamily:"xjb2p0i",fontWeight:"xfjzk2p",lineHeight:"x17mssa0",fontOpticalSizing:"x1ic7a3i",$$css:!0},Body2:{fontSize:"x1f6kntn",fontFamily:"xjb2p0i",lineHeight:"x8r4c90",fontWeight:"xo1l8bm",fontOpticalSizing:"x1ic7a3i",letterSpacing:"x12xpedu",$$css:!0},Body2Emphasized:{fontSize:"x1f6kntn",fontFamily:"xjb2p0i",fontWeight:"xfjzk2p",lineHeight:"x8r4c90",fontOpticalSizing:"x1ic7a3i",letterSpacing:"x12xpedu",$$css:!0},Body3:{fontSize:"x1pg5gke",fontFamily:"xjb2p0i",fontWeight:"xo1l8bm",lineHeight:"xl2ypbo",fontOpticalSizing:"x1ic7a3i",$$css:!0},Body3Emphasized:{fontSize:"x1pg5gke",fontFamily:"xjb2p0i",fontWeight:"xfjzk2p",lineHeight:"xl2ypbo",fontOpticalSizing:"x1ic7a3i",$$css:!0},Headline1:{fontSize:"xngnso2",fontFamily:"xjb2p0i",fontWeight:"xo1l8bm",lineHeight:"xhacrq1",fontOpticalSizing:"x1ic7a3i",$$css:!0},Headline2:{fontSize:"x1aueamr",fontFamily:"xjb2p0i",fontWeight:"xo1l8bm",lineHeight:"xladpa3",fontOpticalSizing:"x1ic7a3i",$$css:!0},LargeTitle1:{fontSize:"x579bpy",fontFamily:"xjb2p0i",fontWeight:"xo1l8bm",lineHeight:"x1akz92t",fontOpticalSizing:"x1ic7a3i",$$css:!0},LargeTitle2:{fontSize:"x1q74xe4",fontFamily:"xjb2p0i",fontWeight:"xo1l8bm",lineHeight:"x16n75kc",fontOpticalSizing:"x1ic7a3i",$$css:!0}},s={Body1:{fontSize:"x1jchvi3",fontFamily:"xjb2p0i",fontWeight:"x1iz45ln",lineHeight:"x17mssa0",fontOpticalSizing:"x1ic7a3i",$$css:!0},Body1Emphasized:{fontSize:"x1jchvi3",fontFamily:"xjb2p0i",fontWeight:"xmvyi9x",lineHeight:"x17mssa0",fontOpticalSizing:"x1ic7a3i",$$css:!0},Body2:{fontSize:"x1f6kntn",fontFamily:"xjb2p0i",lineHeight:"x8r4c90",fontWeight:"x1iz45ln",fontOpticalSizing:"x1ic7a3i",letterSpacing:"x12xpedu",$$css:!0},Body2Emphasized:{fontSize:"x1f6kntn",fontFamily:"xjb2p0i",fontWeight:"xmvyi9x",lineHeight:"x8r4c90",fontOpticalSizing:"x1ic7a3i",letterSpacing:"x12xpedu",$$css:!0},Body3:{fontSize:"x1pg5gke",fontFamily:"xjb2p0i",fontWeight:"x1iz45ln",lineHeight:"xl2ypbo",fontOpticalSizing:"x1ic7a3i",$$css:!0},Body3Emphasized:{fontSize:"x1pg5gke",fontFamily:"xjb2p0i",fontWeight:"xmvyi9x",lineHeight:"xl2ypbo",fontOpticalSizing:"x1ic7a3i",$$css:!0},Headline1:{fontSize:"xngnso2",fontFamily:"xjb2p0i",fontWeight:"x1iz45ln",lineHeight:"xhacrq1",fontOpticalSizing:"x1ic7a3i",$$css:!0},Headline2:{fontSize:"x1aueamr",fontFamily:"xjb2p0i",fontWeight:"x1iz45ln",lineHeight:"xladpa3",fontOpticalSizing:"x1ic7a3i",$$css:!0},LargeTitle1:{fontSize:"x579bpy",fontFamily:"xjb2p0i",fontWeight:"x1iz45ln",lineHeight:"x1akz92t",fontOpticalSizing:"x1ic7a3i",$$css:!0},LargeTitle2:{fontSize:"x1q74xe4",fontFamily:"xjb2p0i",fontWeight:"x1iz45ln",lineHeight:"x16n75kc",fontOpticalSizing:"x1ic7a3i",$$css:!0}},u="--wds-native-font-size-scale",c="var("+u+", 1)",d={LargeTitle1:34,LargeTitle2:28,Headline1:22,Headline2:20,Body1:17,Body2:15,Body3:13},m={LargeTitle1:60,LargeTitle2:58,Headline1:56,Headline2:55,Body1:53,Body2:49,Body3:44},p={LargeTitle1:31,LargeTitle2:25,Headline1:19,Headline2:17,Body1:14,Body2:12,Body3:12},_={LargeTitle1:-.62,LargeTitle2:-.5,Headline1:-.25,Headline2:-.15,Body1:0,Body2:.05,Body3:.1},f=function(t){return"("+c+" + ("+c+" - 1) * "+_[t]+")"},g=function(t){return"calc("+d[t]+"px * "+f(t)+")"},h=function(t){return"min(max("+g(t)+", "+p[t]+"px), "+m[t]+"px)"},y={Body1:{fontSize:"x1gzfv8f",fontFamily:"xlsuly5",fontWeight:"xo1l8bm",lineHeight:"x1vnv2wu",letterSpacing:"x12oo3zp",fontOpticalSizing:"x1ic7a3i",$$css:!0},Body1Emphasized:{fontSize:"x1gzfv8f",fontFamily:"xlsuly5",fontWeight:"x1s688f",lineHeight:"x1vnv2wu",letterSpacing:"x12oo3zp",fontOpticalSizing:"x1ic7a3i",$$css:!0},Body2:{fontSize:"x69964b",fontFamily:"xlsuly5",fontWeight:"xo1l8bm",lineHeight:"xa1q56p",letterSpacing:"x12oo3zp",fontOpticalSizing:"x1ic7a3i",$$css:!0},Body2Emphasized:{fontSize:"x69964b",fontFamily:"xlsuly5",fontWeight:"x1s688f",lineHeight:"xa1q56p",letterSpacing:"x12oo3zp",fontOpticalSizing:"x1ic7a3i",$$css:!0},Body3:{fontSize:"x91x0xt",fontFamily:"xlsuly5",fontWeight:"xo1l8bm",lineHeight:"xce5v9f",letterSpacing:"x12oo3zp",fontOpticalSizing:"x1ic7a3i",$$css:!0},Body3Emphasized:{fontSize:"x91x0xt",fontFamily:"xlsuly5",fontWeight:"x1s688f",lineHeight:"xce5v9f",letterSpacing:"x12oo3zp",fontOpticalSizing:"x1ic7a3i",$$css:!0},Headline1:{fontSize:"x19b1dur",fontFamily:"xq79xv7",fontWeight:"x1s688f",lineHeight:"x167hkom",letterSpacing:"x12oo3zp",fontOpticalSizing:"x1ic7a3i",$$css:!0},Headline2:{fontSize:"x9z20r0",fontFamily:"xq79xv7",fontWeight:"x1s688f",lineHeight:"xrj9dn6",letterSpacing:"x12oo3zp",fontOpticalSizing:"x1ic7a3i",$$css:!0},LargeTitle1:{fontSize:"x1okcndb",fontFamily:"xq79xv7",fontWeight:"x1s688f",lineHeight:"x1cj699d",letterSpacing:"x12oo3zp",fontOpticalSizing:"x1ic7a3i",$$css:!0},LargeTitle2:{fontSize:"x1p0w8lr",fontFamily:"xq79xv7",fontWeight:"x1s688f",lineHeight:"x1kie75d",letterSpacing:"x12oo3zp",fontOpticalSizing:"x1ic7a3i",$$css:!0}},C={Body1:{fontSize:"x1jchvi3",fontFamily:"xjb2p0i",fontWeight:"xo1l8bm",lineHeight:"x17mssa0",fontOpticalSizing:"x1ic7a3i",$$css:!0},Body1Emphasized:{fontSize:"x1jchvi3",fontFamily:"xjb2p0i",fontWeight:"xk50ysn",lineHeight:"x17mssa0",fontOpticalSizing:"x1ic7a3i",$$css:!0},Body2:{fontSize:"x1f6kntn",fontFamily:"xjb2p0i",lineHeight:"x8r4c90",fontWeight:"xo1l8bm",fontOpticalSizing:"x1ic7a3i",$$css:!0},Body2Emphasized:{fontSize:"x1f6kntn",fontFamily:"xjb2p0i",fontWeight:"xk50ysn",lineHeight:"x8r4c90",fontOpticalSizing:"x1ic7a3i",$$css:!0},Body3:{fontSize:"x1pg5gke",fontFamily:"xjb2p0i",fontWeight:"xo1l8bm",lineHeight:"xl2ypbo",fontOpticalSizing:"x1ic7a3i",$$css:!0},Body3Emphasized:{fontSize:"x1pg5gke",fontFamily:"xjb2p0i",fontWeight:"xk50ysn",lineHeight:"xl2ypbo",fontOpticalSizing:"x1ic7a3i",$$css:!0},Headline1:{fontSize:"xngnso2",fontFamily:"xjb2p0i",fontWeight:"xo1l8bm",lineHeight:"xhacrq1",fontOpticalSizing:"x1ic7a3i",$$css:!0},Headline2:{fontSize:"x1aueamr",fontFamily:"xjb2p0i",fontWeight:"xo1l8bm",lineHeight:"xladpa3",fontOpticalSizing:"x1ic7a3i",$$css:!0},LargeTitle1:{fontSize:"x579bpy",fontFamily:"xjb2p0i",fontWeight:"xo1l8bm",lineHeight:"x1akz92t",fontOpticalSizing:"x1ic7a3i",$$css:!0},LargeTitle2:{fontSize:"x1q74xe4",fontFamily:"xjb2p0i",fontWeight:"xo1l8bm",lineHeight:"x16n75kc",fontOpticalSizing:"x1ic7a3i",$$css:!0}};l.WDSFontTokenStyles=e,l.WDSFontTokenStylesMacRoboto=s,l.FONT_SCALE_VAR_NAME_IOS=u,l.WDSFontTokenStylesiOS=y,l.WDSFontTokenStylesAndroid=C}),98);
__d("WDSFontConfig",["WDSFontTokenStyles"],(function(t,n,r,o,a,i,l){var e,s={Body1:{fontSize:16,lineGap:0,xstyleConfig:{textType:(e=o("WDSFontTokenStyles")).WDSFontTokenStyles.Body1}},Body1Emphasized:{fontSize:16,lineGap:0,xstyleConfig:{textType:e.WDSFontTokenStyles.Body1Emphasized}},Body2:{fontSize:14,lineGap:0,xstyleConfig:{textType:e.WDSFontTokenStyles.Body2}},Body2Emphasized:{fontSize:14,lineGap:0,xstyleConfig:{textType:e.WDSFontTokenStyles.Body2Emphasized}},Body3:{fontSize:12,lineGap:0,xstyleConfig:{textType:e.WDSFontTokenStyles.Body3}},Body3Emphasized:{fontSize:12,lineGap:0,xstyleConfig:{textType:e.WDSFontTokenStyles.Body3Emphasized}},Headline1:{fontSize:24,lineGap:0,xstyleConfig:{textType:e.WDSFontTokenStyles.Headline1}},Headline2:{fontSize:22,lineGap:0,xstyleConfig:{textType:e.WDSFontTokenStyles.Headline2}},LargeTitle1:{fontSize:32,lineGap:0,xstyleConfig:{textType:e.WDSFontTokenStyles.LargeTitle1}},LargeTitle2:{fontSize:28,lineGap:0,xstyleConfig:{textType:e.WDSFontTokenStyles.LargeTitle2}}},u={Body1:{fontSize:16,lineGap:0,xstyleConfig:{textType:e.WDSFontTokenStylesMacRoboto.Body1}},Body1Emphasized:{fontSize:16,lineGap:0,xstyleConfig:{textType:e.WDSFontTokenStylesMacRoboto.Body1Emphasized}},Body2:{fontSize:14,lineGap:0,xstyleConfig:{textType:e.WDSFontTokenStylesMacRoboto.Body2}},Body2Emphasized:{fontSize:14,lineGap:0,xstyleConfig:{textType:e.WDSFontTokenStylesMacRoboto.Body2Emphasized}},Body3:{fontSize:12,lineGap:0,xstyleConfig:{textType:e.WDSFontTokenStylesMacRoboto.Body3}},Body3Emphasized:{fontSize:12,lineGap:0,xstyleConfig:{textType:e.WDSFontTokenStylesMacRoboto.Body3Emphasized}},Headline1:{fontSize:24,lineGap:0,xstyleConfig:{textType:e.WDSFontTokenStylesMacRoboto.Headline1}},Headline2:{fontSize:22,lineGap:0,xstyleConfig:{textType:e.WDSFontTokenStylesMacRoboto.Headline2}},LargeTitle1:{fontSize:32,lineGap:0,xstyleConfig:{textType:e.WDSFontTokenStylesMacRoboto.LargeTitle1}},LargeTitle2:{fontSize:28,lineGap:0,xstyleConfig:{textType:e.WDSFontTokenStylesMacRoboto.LargeTitle2}}},c={Body1:{fontSize:17,lineGap:0,xstyleConfig:{textType:e.WDSFontTokenStylesiOS.Body1}},Body1Emphasized:{fontSize:17,lineGap:0,xstyleConfig:{textType:e.WDSFontTokenStylesiOS.Body1Emphasized}},Body2:{fontSize:15,lineGap:0,xstyleConfig:{textType:e.WDSFontTokenStylesiOS.Body2}},Body2Emphasized:{fontSize:15,lineGap:0,xstyleConfig:{textType:e.WDSFontTokenStylesiOS.Body2Emphasized}},Body3:{fontSize:13,lineGap:0,xstyleConfig:{textType:e.WDSFontTokenStylesiOS.Body3}},Body3Emphasized:{fontSize:13,lineGap:0,xstyleConfig:{textType:e.WDSFontTokenStylesiOS.Body3Emphasized}},Headline1:{fontSize:22,lineGap:0,xstyleConfig:{textType:e.WDSFontTokenStylesiOS.Headline1}},Headline2:{fontSize:20,lineGap:0,xstyleConfig:{textType:e.WDSFontTokenStylesiOS.Headline2}},LargeTitle1:{fontSize:34,lineGap:0,xstyleConfig:{textType:e.WDSFontTokenStylesiOS.LargeTitle1}},LargeTitle2:{fontSize:28,lineGap:0,xstyleConfig:{textType:e.WDSFontTokenStylesiOS.LargeTitle2}}},d={Body1:{fontSize:16,lineGap:0,xstyleConfig:{textType:e.WDSFontTokenStylesAndroid.Body1}},Body1Emphasized:{fontSize:16,lineGap:0,xstyleConfig:{textType:e.WDSFontTokenStylesAndroid.Body1Emphasized}},Body2:{fontSize:14,lineGap:0,xstyleConfig:{textType:e.WDSFontTokenStylesAndroid.Body2}},Body2Emphasized:{fontSize:14,lineGap:0,xstyleConfig:{textType:e.WDSFontTokenStylesAndroid.Body2Emphasized}},Body3:{fontSize:12,lineGap:0,xstyleConfig:{textType:e.WDSFontTokenStylesAndroid.Body3}},Body3Emphasized:{fontSize:12,lineGap:0,xstyleConfig:{textType:e.WDSFontTokenStylesAndroid.Body3Emphasized}},Headline1:{fontSize:24,lineGap:0,xstyleConfig:{textType:e.WDSFontTokenStylesAndroid.Headline1}},Headline2:{fontSize:22,lineGap:0,xstyleConfig:{textType:e.WDSFontTokenStylesAndroid.Headline2}},LargeTitle1:{fontSize:34,lineGap:0,xstyleConfig:{textType:e.WDSFontTokenStylesAndroid.LargeTitle1}},LargeTitle2:{fontSize:28,lineGap:0,xstyleConfig:{textType:e.WDSFontTokenStylesAndroid.LargeTitle2}}};l.WDSTextConfig=s,l.WDSTextConfigMacRoboto=u,l.WDSTextConfigiOS=c,l.WDSTextConfigAndroid=d}),98);
__d("getPlatformByGK",["gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=r("gkx")("6470")?"android":r("gkx")("6488")?"ios":"wa_web",s=r("gkx")("6470")?"android":r("gkx")("6488")?"iOS":navigator.userAgent.includes("Mac OS X")?"macWeb":"windowsWeb";function u(){return e}l.getPlatformByGK=u,l.FLOWS_PLATFORM=e,l.WDS_PLATFORM=s}),98);
__d("WDSText.react",["BaseTextV2.react","BaseTextV2FontMetrics","WDSColorStyles.stylex","WDSFontConfig","getPlatformByGK","react"],(function(t,n,r,o,a,i,l){var e=["ref"],s=["colorName","maxLines","type","xstyle","preserveNewLines","robotoPropValue","platform","selectable"],u,c=u||(u=r("react")),d={selectable:{userSelect:"x1hx0egp",$$css:!0},nonselectable:{userSelect:"x87ps6o",$$css:!0}};function m(t){var n=t.ref,a=babelHelpers.objectWithoutPropertiesLoose(t,e),i=a.colorName,l=a.maxLines,u=a.type,m=a.xstyle,p=a.preserveNewLines,_=p===void 0?!0:p,f=a.robotoPropValue,g=f===void 0?0:f,h=a.platform,y=h===void 0?o("getPlatformByGK").WDS_PLATFORM:h,C=a.selectable,b=C===void 0?!0:C,v=babelHelpers.objectWithoutPropertiesLoose(a,s),S=o("WDSColorStyles.stylex").WDSColorStyles[a.colorName],R=y!=null?y:o("getPlatformByGK").WDS_PLATFORM,L=o("WDSFontConfig").WDSTextConfig[u],E,k=R==="windowsWeb";return(g===1&&R==="windowsWeb"||g===2&&R==="macWeb"||g===3)&&(k=!0),R==="iOS"?(E=o("BaseTextV2FontMetrics").AppleSystemFontMetrics,L=o("WDSFontConfig").WDSTextConfigiOS[u]):R==="android"?(E=o("BaseTextV2FontMetrics").RobotoFontMetrics,L=o("WDSFontConfig").WDSTextConfigAndroid[u]):k?(E=o("BaseTextV2FontMetrics").RobotoFontMetrics,R==="macWeb"&&(L=o("WDSFontConfig").WDSTextConfigMacRoboto[u])):E=R==="macWeb"?o("BaseTextV2FontMetrics").AppleSystemFontMetrics:o("BaseTextV2FontMetrics").WindowsSystemFontMetrics,c.jsx(r("BaseTextV2.react"),babelHelpers.extends({ref:n,fontMetrics:E,colorVariant:{xstyleConfig:{textColor:S}},typeVariant:babelHelpers.extends({},L,{xstyleConfig:{textType:[m,b?d.selectable:d.nonselectable,L.xstyleConfig.textType]}}),preserveNewLines:_,maxLines:l!=null?l:0},v,{children:a.children}))}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),98);
__d("WDSIconIcArrowDropDown.react",["WDSSvgComponentBase.react","react","stylex"],(function(t,n,r,o,a,i,l){var e=["iconXstyle","height","width","viewBox"],s,u,c=s||(s=r("react")),d="ic-arrow-drop-down";function m(t){var n=t.iconXstyle,o=t.height,a=t.width,i=t.viewBox,l=babelHelpers.objectWithoutPropertiesLoose(t,e),s;if(i){var m=i.x,p=m===void 0?0:m,_=i.y,f=_===void 0?0:_,g=i.width,h=g===void 0?0:g,y=i.height,C=y===void 0?0:y;s=[p,f,h,C].join(" ")}var b=24,v=24;return(o!=null||a!=null)&&(b=o,v=a),c.jsx(r("WDSSvgComponentBase.react"),babelHelpers.extends({},l,{children:c.jsxs("svg",{viewBox:s!=null?s:"0 0 24 24",height:b,width:v,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(n),fill:"none",children:[c.jsx("title",{children:d}),c.jsx("path",{d:"M11.475 14.475L7.85001 10.85C7.80001 10.8 7.76251 10.7458 7.73751 10.6875C7.71251 10.6292 7.70001 10.5667 7.70001 10.5C7.70001 10.3667 7.74585 10.25 7.83751 10.15C7.92918 10.05 8.05001 10 8.20001 10H15.8C15.95 10 16.0708 10.05 16.1625 10.15C16.2542 10.25 16.3 10.3667 16.3 10.5C16.3 10.5333 16.25 10.65 16.15 10.85L12.525 14.475C12.4417 14.5583 12.3583 14.6167 12.275 14.65C12.1917 14.6833 12.1 14.7 12 14.7C11.9 14.7 11.8083 14.6833 11.725 14.65C11.6417 14.6167 11.5583 14.5583 11.475 14.475Z",fill:"currentColor"})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),98);
__d("WDSSpinnerElement.react",["react","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=20,d=8,m="x17qceat-B",p="xnrop4s-B",_="xoslcoy-B",f={animationIterationCount:"xa4qsjk",animationName:"xvma63k",animationTimingFunction:"x1esw782",transform:"xsqj5wx",animationDelay:"xvo38ju",animationDuration:"x1q3qbx4",transformOrigin:"xf6vlc6",$$css:!0},g={svgWrapper:{animationName:"x1e112to",animationDuration:"x1c74tu6",animationTimingFunction:"x1esw782",animationIterationCount:"xa4qsjk",zIndex:"xhtitgo",stroke:"x73je2i",$$css:!0},rotate:{transform:"x9tu13d",transformOrigin:"x1bndym7",$$css:!0},stripStyle:function(t,n){return[f,{"--x-transform":"rotate("+360/d*t+"deg)"!=null?"rotate("+360/d*t+"deg)":void 0,"--x-animationDelay":(function(e){return typeof e=="number"?e+"ms":e!=null?e:void 0})("-"+1/d*(d-t-1)+"s"),"--x-transformOrigin":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(n/2+"px "+n/2+"px")}]}};function h(e){if(e==null)return null;var t=Math.ceil(2*c*Math.PI);return{strokeDasharray:t+" "+t,strokeDashoffset:t-e/100*t}}function y(t){var n=t.size;return u.jsx("div",{className:"x1rg5ohu x1n2onr6",style:{width:n,height:n},children:Array.from(new Array(d)).map(function(t,o){return u.jsx("div",babelHelpers.extends({},(e||(e=r("stylex"))).props(g.stripStyle(o,n)),{children:u.jsx("div",{className:"x1lliihq x10l6tqk xed5h26 x1502et5 xggx2qq x1bklw8v xtwfq29",style:{top:n/12,left:n/2-n/20,width:n/10,height:n/3.6}})}),o)})})}y.displayName=y.name+" [from "+i.id+"]";function C(e){var t=e.progress,n=e.stroke,r=e.strokeLinecap,o=r===void 0?"round":r,a=e.viewBoxSide;return u.jsx("circle",babelHelpers.extends({style:h(t)},{0:{},4:{className:"x1owpc8m"},2:{className:"x37uqsb"},6:{className:"x37uqsb"},1:{className:"xu41xpa xmg6eyc x4hg4is xa4qsjk xbla1kb x1b0o3cz"},5:{className:"x1owpc8m xu41xpa xmg6eyc x4hg4is xa4qsjk xbla1kb x1b0o3cz"},3:{className:"x37uqsb xu41xpa xmg6eyc x4hg4is xa4qsjk xbla1kb x1b0o3cz"},7:{className:"x37uqsb xu41xpa xmg6eyc x4hg4is xa4qsjk xbla1kb x1b0o3cz"}}[(o==="round")<<2|(o==="square")<<1|(t==null)<<0],{cx:a/2,cy:a/2,r:c,fill:"none",strokeWidth:n}))}C.displayName=C.name+" [from "+i.id+"]";function b(t){var n=t.platform,o=t.progress,a=t.size,i=t.stroke,l=t.strokeLinecap,s=t.xstyle;if(n==="iOS")return u.jsx(y,{size:a});var d=2*c+i,m="0 0 "+d+" "+d;return u.jsxs("svg",babelHelpers.extends({},(e||(e=r("stylex"))).props(o==null&&g.svgWrapper||g.rotate,s),{width:a-4,height:a-4,viewBox:m,"aria-hidden":!0,role:"status",children:[o!=null?u.jsx(C,{stroke:i,strokeLinecap:l,progress:100,viewBoxSide:d}):null,u.jsx(C,{progress:o,stroke:i,strokeLinecap:l,viewBoxSide:d})]}))}b.displayName=b.name+" [from "+i.id+"]",l.default=b}),98);
__d("WDSSpinner.react",["WDSSpinnerElement.react","getPlatformByGK","react","stylex"],(function(t,n,r,o,a,i,l){var e=["ref"],s,u,c=s||(s=r("react")),d="x17qceat-B",m="xekv6nw-B",p={height:"x16ye13r",width:"x5lhr3w",display:"x78zum5",alignItems:"x6s0dn4",justifyContent:"xl56j7k",$$css:!0},_={container:function(t){return[p,{"--x-height":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(t+"px"),"--x-width":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(t+"px")}]}},f={width:"x5lhr3w",height:"x16ye13r",$$css:!0},g={morphIcon:function(t){return[f,{"--x-width":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(t+"px"),"--x-height":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(t+"px")}]},morphContainer:{position:"x1n2onr6",display:"x3nfvp2",alignItems:"x6s0dn4",justifyContent:"xl56j7k",$$css:!0}};function h(e,t){if(e==null)return null;var n=Math.max(Math.min(e,t),0);return n*100/t}function y(t){var n=t.ref,a=babelHelpers.objectWithoutPropertiesLoose(t,e),i=a.platform,l=i===void 0?o("getPlatformByGK").WDS_PLATFORM:i,s=a.size,d=s===void 0?l==="iOS"?18:65:s,m=a.stroke,p=m===void 0?4:m,f=a.strokeLinecap,y=f===void 0?"round":f,C=a.xstyle,b=a.max,v=b===void 0?100:b,S=a.value,R=a.testid,L=R===void 0?"loading-spinner":R,E=a.morphToIcon,k=E===void 0?!1:E,I=a.iconToMorphTo,T=a.iconProps,D=h(S,v),x=c.jsx("span",babelHelpers.extends({ref:n,"data-testid":void 0},(u||(u=r("stylex"))).props(_.container(d)),{children:c.jsx(r("WDSSpinnerElement.react"),{platform:l,size:d,stroke:p,progress:D,strokeLinecap:y,xstyle:C})}));return c.jsxs("span",babelHelpers.extends({},u.props(g.morphContainer,_.container(d)),{children:[c.jsx("div",babelHelpers.extends({},{0:{className:"x10l6tqk x78zum5 x6s0dn4 xl56j7k x1hc1fzr"},1:{className:"x10l6tqk x78zum5 x6s0dn4 xl56j7k x1hc1fzr xvma63k xdz8niu x4hg4is x10e4vud"}}[(k===!0&&I!=null)<<0],{children:x})),k===!0&&I!=null&&c.jsx("div",{className:"x10l6tqk x78zum5 x6s0dn4 xl56j7k xg01cxk x127lhb5 xdz8niu x1t83zlg x4hg4is x10e4vud",children:c.jsx(I,babelHelpers.extends({width:d,height:d,xstyle:g.morphIcon(d)},T))})]}))}y.displayName=y.name+" [from "+i.id+"]",l.default=y}),98);
__d("WDSButton.react",["BaseButtonV3.react","WDSIconIcArrowDropDown.react","WDSSpinner.react","WDSText.react","cr:10098","getPlatformByGK","react"],(function(t,n,r,o,a,i,l){var e=["ref"],s,u,c=u||(u=r("react")),d=(s||(s=o("react"))).useState,m={loading:{cursor:"xky4qsq",$$css:!0},disabled:{cursor:"x1h6gzvc",$$css:!0}},p={base:{transform:"x3oybdh",transition:"x6nhntm",$$css:!0},pressableHovered:{transform:"x89bh2v",$$css:!0},pressablePressed:{transform:"xfimr68",$$css:!0}},_={widthModeConstrained:{width:"xezivpi",$$css:!0},widthModeFit:{width:"xeq5yr9",$$css:!0},widthModeFlexible:{boxSizing:"x9f619",width:"xh8yej3",$$css:!0},widthModeNoShrink:{flexShrink:"x2lah0s",$$css:!0}},f={constrained:_.widthModeConstrained,fit:_.widthModeFit,flexible:_.widthModeFlexible},g={mediaLight:{":focus-visible_outlineColor":"x41cuts",":focus-visible_outlineStyle":"x9v5kkp",":focus-visible_outlineOffset":"xyu9ima",":focus-visible_outlineWidth":"x100v1rl",$$css:!0},mediaDark:{":focus-visible_outlineColor":"x3ce2fp",":focus-visible_outlineStyle":"x9v5kkp",":focus-visible_outlineOffset":"xyu9ima",":focus-visible_outlineWidth":"x100v1rl",$$css:!0},default:{":focus-visible_outlineColor":"xtnn1bt",":focus-visible_outlineStyle":"x9v5kkp",":focus-visible_outlineOffset":"xmw7ebm",":focus-visible_outlineWidth":"xrdum7p",$$css:!0}};function h(t){var a,i=t.ref,l=babelHelpers.objectWithoutPropertiesLoose(t,e),s=l.disabled,u=l.Icon,h=l.label,y=l.loading,C=l.size,b=C===void 0?"medium":C,v=l.type,S=v===void 0?"default":v,R=l.widthMode,L=R===void 0?"fit":R,E=l.variant,k=E===void 0?"filled":E,I=l.directional,T=l.linkProps,D=l.id,x=l.onFocusIn,$=l.onFocusOut,P=l.onPress,N=l.onPressIn,M=l.onPressOut,w=l.testid,A=l.xstyle,F=l.platform,O=F===void 0?o("getPlatformByGK").WDS_PLATFORM:F,B=l.tabOrder,W=l["aria-disabled"],q=l["aria-expanded"],U=l["aria-haspopup"],V=l["aria-pressed"],H=l["aria-label"],G=O!=null?O:o("getPlatformByGK").WDS_PLATFORM,z=l.showEndDropdownIcon===!0&&(G==="windowsWeb"||G==="macWeb"),j=d(!1),K=j[0],Q=j[1],X=d(!1),Y=X[0],J=X[1];function Z(e){y===!0||s===!0||(J(!0),l.onHoverIn==null||l.onHoverIn(e))}function ee(e){y===!0||s===!0||(J(!1),l.onHoverOut==null||l.onHoverOut(e))}function te(e){y===!0||s===!0||(Q(!0),N==null||N(e))}function ne(e){y===!0||s===!0||(Q(!1),M==null||M(e))}function re(e){y!==!0&&(P==null||P(e))}var oe=(T==null?void 0:T.href)!=null,ae=u!=null,ie=z===!0,le=h!=null,se=n("cr:10098").getButtonIconSizeAndStyle(b,ae&&!le),ue=se[0],ce=se[1],de;u!=null&&(de=c.jsx(u,{height:ue,width:ue,xstyle:ce,directional:I}));var me;z===!0&&(me=c.jsx(r("WDSIconIcArrowDropDown.react"),{height:ue,width:ue,xstyle:ce,directional:I}));var pe=n("cr:10098").getButtonColorStyles(k,S,ae||y===!0,le,s===!0,y===!0,G),_e=g,fe;S==="media"?fe=k==="filled"?_e.mediaLight:_e.mediaDark:fe=_e.default;var ge=[fe,y===!0&&m.loading,s===!0&&m.disabled],he=k==="filled"&&y!==!0?[pe.xstyleConfig.pressableHovered,p.pressableHovered]:pe.xstyleConfig.pressableHovered,ye=k==="borderless"?[pe.xstyleConfig.pressable,ge,L!=="flexible"&&_.widthModeNoShrink]:[pe.xstyleConfig.pressable,ge,p.base,L!=="flexible"&&_.widthModeNoShrink],Ce={xstyleConfig:{pressable:ye,pressableDisabled:pe.xstyleConfig.pressableDisabled,pressableFocused:pe.xstyleConfig.pressableFocused,pressableHovered:he,pressablePressed:[pe.xstyleConfig.pressablePressed,p.pressablePressed]}},be=le?c.jsx(r("WDSText.react"),{type:"Body2Emphasized",selectable:!1,maxLines:1,platform:G,colorName:n("cr:10098").getButtonFontColor(k,S,s===!0,G),children:h}):null,ve=n("cr:10098").getButtonSizeStyles(b,ae||y===!0,ie,le,k,G),Se={ref:i,id:D,testid:w,sizeVariant:{xstyleConfig:babelHelpers.extends({},ve,{content:ie?[ve.content,ve.addOnEnd,A]:[ve.content,A],width:(a=f[L])!=null?a:null})},onPointerDown:te,onPointerUp:ne,onFocusIn:x,onFocusOut:$,addOnStart:y===!0?c.jsx(r("WDSSpinner.react"),{size:ue,platform:G}):de,addOnEnd:me,onMouseEnter:Z,onMouseLeave:ee,variant:Ce,focusable:!l.disabled};return oe&&T!=null?c.jsx(r("BaseButtonV3.react"),babelHelpers.extends({},Se,T,{onClick:re,"data-tab":B,hovered:Y,children:be})):c.jsx(r("BaseButtonV3.react"),babelHelpers.extends({},Se,{"data-tab":B,onClick:re,"aria-disabled":W,"aria-expanded":q,"aria-haspopup":U,"aria-pressed":V,"aria-label":H,disabled:s===!0,hovered:Y,pressed:K,children:be}))}h.displayName=h.name+" [from "+i.id+"]",l.default=h}),98);
__d("WAWebTypedEventEmitter",["WAWebEventEmitter"],(function(t,n,r,o,a,i,l){var e=(function(){function e(){this.eventEmitter=new(r("WAWebEventEmitter"))}var t=e.prototype;return t.trigger=function(t,n){return this.eventEmitter.trigger(t,n),this},t.on=function(t,n){return this.eventEmitter.on(t,n),this},t.once=function(t,n){return this.eventEmitter.once(t,n),this},t.off=function(t,n){return this.eventEmitter.off(t,n),this},e})();l.default=e}),98);
__d("WAWebUIListener",["WAWebCompatibility","WAWebEventEmitter","WAWebTypedEventEmitter"],(function(t,n,r,o,a,i,l){function e(e){return e instanceof r("WAWebEventEmitter")||e instanceof r("WAWebTypedEventEmitter")||typeof e.on=="function"&&typeof e.off=="function"}var s=(function(){function t(t,n,r,a,i){this.$2=!1,this.$3=!1,this.source=t,this.cb=r,this.opts=a,this.$1=i,e(t)?this.event=n:this.event=o("WAWebCompatibility").compatPrefix(n,t)}var n=t.prototype;return n.engage=function(){if(!(this.$2||this.$3)){this.$2=!0;var t=this.source,n=this.event;e(t)?(t.on(n,this.cb),typeof t.incObservers=="function"&&t.incObservers()):this.opts?t.addEventListener(n,this.cb,this.opts):t.addEventListener(n,this.cb)}},n.disengage=function(){if(!this.$3&&(this.$3=!0,!!this.$2)){var t=this.source,n=this.event;e(t)?(t.off(this.event,this.cb),typeof t.decObservers=="function"&&t.decObservers()):this.opts?t.removeEventListener(n,this.cb,this.opts):t.removeEventListener(n,this.cb)}},n.represents=function(t,n,r,o){var e;if(this.source!==t||this.event!==n||this.$1!==r)return!1;var a=o!=null?o:{},i=a.capture,l=i===void 0?!1:i,s=a.once,u=s===void 0?!1:s,c=a.passive,d=c===void 0?!1:c,m=(e=this.opts)!=null?e:{},p=m.capture,_=p===void 0?!1:p,f=m.once,g=f===void 0?!1:f,h=m.passive,y=h===void 0?!1:h;return l===_&&u===g&&d===y},t})();l.isEventsType=e,l.Listener=s}),98);
__d("useWAWebListener",["WAHash","WAWebNoop","WAWebUIListener","react","useWAWebStableCallback"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=s.useCallback,c=s.useEffect,d=s.useLayoutEffect,m=s.useRef;function p(e,t,n,o){var a=r("useWAWebStableCallback")(n),i=y(t);d(function(){if(n!=null)return g(e,t,a,o)},[e,n==null,i])}function _(e){var t=e.map(function(e){var t=e.callback;return t}),n=m(t);n.current=t;var o=e.map(function(e){var t=e.source,n=e.eventOrEvents;return r("WAHash")(t)+","+y(n)}).join("-");d(function(){var t=e.map(function(e,t){var r=e.source,o=e.eventOrEvents,a=e.opts,i=function(){for(var e,r,o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(e=(r=n.current)[t])==null?void 0:e.call.apply(e,[r].concat(a))};return g(r,o,i,a)});return function(){return t.forEach(function(e){return e()})}},[o])}function f(){var e=m(),t=u(function(t,n,r,o){e.current=g(t,n,r,babelHelpers.extends({},o,{once:!0}))},[]),n=u(function(){e.current==null||e.current()},[]);return c(function(){return n},[n]),[t,n]}function g(e,t,n,a){if(e==null)return r("WAWebNoop");var i=h(e,t),l=i.map(function(t){return new(o("WAWebUIListener")).Listener(e,t,function(){(a==null?void 0:a.once)===!0&&s(),n.apply(void 0,arguments)},a)});l.forEach(function(e){e.engage()});var s=function(){l.forEach(function(e){e.disengage()})};return s}function h(e,t){return Array.isArray(t)?o("WAWebUIListener").isEventsType(e)?[t.join(" ")]:t:[t]}function y(e){return Array.isArray(e)?e.join("\0"):e}l.useListener=p,l.useListeners=_,l.useAddListenerOnce=f}),98);
__d("WAWebUseIsKeyboardUser",["WAWebKeyboardContext","react"],(function(t,n,r,o,a,i,l){var e,s=(e||(e=o("react"))).useContext;function u(){return s(r("WAWebKeyboardContext"))}l.default=u}),98);
__d("useWAWebStaticButtonA11y",["WAWebKeyboardIsKeyActivation","react"],(function(t,n,r,o,a,i,l){var e,s=(e||(e=o("react"))).useRef;function u(e){}function c(e,t){var n,o,a=s(),i=function(t){a.current=t},l=function(t){if(r("WAWebKeyboardIsKeyActivation")(t)){var e;t.stopPropagation(),t.preventDefault(),(e=a.current)==null||e.click()}},c=(t==null?void 0:t.disabled)===!0,d=c?u:e;return[i,{"aria-disabled":(n=t==null?void 0:t.disabled)!=null?n:void 0,onClick:d,onKeyPress:l,role:"button",tabIndex:c?-1:(o=t==null?void 0:t.tabIndex)!=null?o:0}]}l.default=c}),98);
__d("WDSIconIcClose.react",["WDSSvgComponentBase.react","react","stylex"],(function(t,n,r,o,a,i,l){var e=["iconXstyle","height","width","viewBox"],s,u,c=s||(s=r("react")),d="ic-close";function m(t){var n=t.iconXstyle,o=t.height,a=t.width,i=t.viewBox,l=babelHelpers.objectWithoutPropertiesLoose(t,e),s;if(i){var m=i.x,p=m===void 0?0:m,_=i.y,f=_===void 0?0:_,g=i.width,h=g===void 0?0:g,y=i.height,C=y===void 0?0:y;s=[p,f,h,C].join(" ")}var b=24,v=24;return(o!=null||a!=null)&&(b=o,v=a),c.jsx(r("WDSSvgComponentBase.react"),babelHelpers.extends({},l,{children:c.jsxs("svg",{viewBox:s!=null?s:"0 0 24 24",height:b,width:v,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(n),fill:"none",children:[c.jsx("title",{children:d}),c.jsx("path",{d:"M12 13.4L7.09999 18.3C6.91665 18.4834 6.68332 18.575 6.39999 18.575C6.11665 18.575 5.88332 18.4834 5.69999 18.3C5.51665 18.1167 5.42499 17.8834 5.42499 17.6C5.42499 17.3167 5.51665 17.0834 5.69999 16.9L10.6 12L5.69999 7.10005C5.51665 6.91672 5.42499 6.68338 5.42499 6.40005C5.42499 6.11672 5.51665 5.88338 5.69999 5.70005C5.88332 5.51672 6.11665 5.42505 6.39999 5.42505C6.68332 5.42505 6.91665 5.51672 7.09999 5.70005L12 10.6L16.9 5.70005C17.0833 5.51672 17.3167 5.42505 17.6 5.42505C17.8833 5.42505 18.1167 5.51672 18.3 5.70005C18.4833 5.88338 18.575 6.11672 18.575 6.40005C18.575 6.68338 18.4833 6.91672 18.3 7.10005L13.4 12L18.3 16.9C18.4833 17.0834 18.575 17.3167 18.575 17.6C18.575 17.8834 18.4833 18.1167 18.3 18.3C18.1167 18.4834 17.8833 18.575 17.6 18.575C17.3167 18.575 17.0833 18.4834 16.9 18.3L12 13.4Z",fill:"currentColor"})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),98);
__d("XPlatReactEnvironment",["gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("26340")}function s(){return r("gkx")("22979")}function u(){return r("gkx")("26341")}function c(){return r("gkx")("4008")}function d(){return r("gkx")("26342")}function m(){return r("gkx")("11826")}function p(){return!0}l.isFRLEnvironment=e,l.isInstagramEnvironment=s,l.isMWAEnvironment=u,l.isFBIGNativeEnvironment=c,l.isImagineEnvironment=d,l.isThreadsEnvironment=m,l.isWeb=p}),98);
__d("useDynamicCallbackDANGEROUS",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useLayoutEffect,d=s.useRef;function m(e){var t=o("react-compiler-runtime").c(4),n=d(e),r,a;t[0]!==e?(r=function(){n.current=e},a=[e],t[0]=e,t[1]=r,t[2]=a):(r=t[1],a=t[2]),c(r,a);var i;return t[3]===Symbol.for("react.memo_cache_sentinel")?(i=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var o=t;return n.current.apply(n,o)},t[3]=i):i=t[3],i}l.default=m}),98);
__d("WAWebSystemTheme",["WAWebEventEmitter","WAWebUserPrefsMultiDevice"],(function(t,n,r,o,a,i,l){var e=(function(e){function t(){var t;return t=e.call(this)||this,t.mediaQuery=window.matchMedia("(prefers-color-scheme: dark)"),t.theme=t.getCurrentTheme(),t.handleThemeChange=function(){var e=t.getCurrentTheme();!o("WAWebUserPrefsMultiDevice").isRegistered()||e===t.theme||(t.theme=e,t.trigger("system_theme_change",e))},t.mediaQuery.addListener(t.handleThemeChange),t}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.getCurrentTheme=function(){return this.mediaQuery.matches?"dark":"light"},t})(r("WAWebEventEmitter")),s=new e,u=s;l.default=u}),98);
__d("WAWebThemeContext",["WAWebSystemTheme","WAWebUserPrefsGeneral","bx","react"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=s.createContext,c=s.useContext,d={light:[{id:"bg-chat-light",selectors:["[data-asset-chat-background-light]"],low:{default:r("bx").getURL(r("bx")("9548"))},high:{default:r("bx").getURL(r("bx")("9548"))}},{id:"bg-chat-dark",selectors:["[data-asset-chat-background-dark]"],low:{default:r("bx").getURL(r("bx")("9547"))},high:{default:r("bx").getURL(r("bx")("9547"))}}],dark:[{id:"bg-chat-dark",selectors:["[data-asset-chat-background-dark]"],low:{default:r("bx").getURL(r("bx")("9547"))},high:{default:r("bx").getURL(r("bx")("9547"))}}],lightRefreshed:[{id:"bg-chat-beige",selectors:["[data-asset-chat-background-beige]"],low:{default:r("bx").getURL(r("bx")("31422"))},high:{default:r("bx").getURL(r("bx")("31422"))}},{id:"bg-chat-light-refreshed",selectors:["[data-asset-chat-background-light]"],low:{default:r("bx").getURL(r("bx")("31402"))},high:{default:r("bx").getURL(r("bx")("31402"))}},{id:"bg-chat-dark-refreshed",selectors:["[data-asset-chat-background-dark]"],low:{default:r("bx").getURL(r("bx")("31401"))},high:{default:r("bx").getURL(r("bx")("31401"))}}],darkRefreshed:[{id:"bg-chat-dark-refreshed",selectors:["[data-asset-chat-background-dark]"],low:{default:r("bx").getURL(r("bx")("31401"))},high:{default:r("bx").getURL(r("bx")("31401"))}}],smbLight:[{id:"bg-chat-beige-smb",selectors:["[data-asset-chat-background-beige]"],low:{default:r("bx").getURL(r("bx")("25218"))},high:{default:r("bx").getURL(r("bx")("25218"))}},{id:"bg-chat-light-smb",selectors:["[data-asset-chat-background-light]"],low:{default:r("bx").getURL(r("bx")("25229"))},high:{default:r("bx").getURL(r("bx")("25229"))}},{id:"bg-chat-dark-smb",selectors:["[data-asset-chat-background-dark]"],low:{default:r("bx").getURL(r("bx")("25221"))},high:{default:r("bx").getURL(r("bx")("25221"))}}],smbDark:[{id:"bg-chat-dark-smb",selectors:["[data-asset-chat-background-dark]"],low:{default:r("bx").getURL(r("bx")("25221"))},high:{default:r("bx").getURL(r("bx")("25221"))}}]};function m(){return o("WAWebUserPrefsGeneral").getSystemThemeMode()?r("WAWebSystemTheme").getCurrentTheme():o("WAWebUserPrefsGeneral").getTheme()}function p(e){o("WAWebUserPrefsGeneral").setTheme(e),f(e)}function _(){return m()==="dark"}function f(e){var t=document.body,n=e==="dark";t==null||t.classList.toggle("dark",n),g()}function g(){var e=getComputedStyle(document.body).getPropertyValue("--navbar-background"),t=document.querySelectorAll('meta[name="theme-color"]');t.forEach(function(t){t.setAttribute("content",e)})}var h={theme:r("WAWebSystemTheme").getCurrentTheme(),systemThemeMode:!0,setTheme:p,setSystemThemeMode:o("WAWebUserPrefsGeneral").setSystemThemeMode},y=u(h);function C(){return c(y)}function b(){return C().theme==="dark"}l.THEME_ASSETS=d,l.getTheme=m,l.setTheme=p,l.isDarkTheme=_,l.applyThemeToUI=f,l.resetPwaTitlebarColor=g,l.ThemeContext=y,l.useTheme=C,l.useIsDarkTheme=b}),98);
__d("WAWebWebcMessageSendWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumMediaType","WAWebWamEnumMessageType"],(function(t,n,r,o,a,i,l){var e=o("WAWebWamCodegenUtils").defineEvents({WebcMessageSend:[2072,{messageIsForward:[3,o("WAWebWamCodegenUtils").TYPES.BOOLEAN],messageMediaType:[2,o("WAWebWamEnumMediaType").MEDIA_TYPE],messageSendT:[4,o("WAWebWamCodegenUtils").TYPES.TIMER],messageType:[1,o("WAWebWamEnumMessageType").MESSAGE_TYPE]},[1,1,1],"regular"]},{WebcMessageSend:[]});l.WebcMessageSendWamEvent=e}),98);
__d("vulture",["ExecutionEnvironment","FBLogger","JSResource","VultureJSGating","asyncToGeneratorRuntime","clearTimeout","objectEntries","requireDeferred","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s=0,u=1e4,c=null;r("requireDeferred")("bumpVultureJSHash").__setRef("vulture").onReadyImmediately(function(e){c=e,b()});var d=!1,m=!1,p=null,_=new Map,f=[],g=12e4;function h(e){var t=_.get(e);t===s||c==null||(t==null?c(e,1):Math.floor(Math.random()*t)===0&&c(e,t))}function y(e){f.push(e)}function C(){p!=null&&(r("clearTimeout")(p),p=null),m=!1,d=!0,b()}function b(){if(d&&c!=null)for(;f.length>0;){var e=f.pop();e!=null&&h(e)}}function v(){r("JSResource")("VultureJSSampleRatesLoader").__setRef("vulture").load().then((function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=yield e.loadSampleRates();for(var n of r("objectEntries")(t)){var o=n[0],a=n[1];_.set(o,a)}});return function(t){return e.apply(this,arguments)}})()).catch(function(e){r("FBLogger")("vulture_js","sample_rate_load_timeout").catching(e).mustfix("Failed to fetch sample rates:  %s",e.getMessage())}).finally(C)}function S(){m||(m=!0,(e||(e=r("ExecutionEnvironment"))).canUseDOM?(p=r("setTimeout")(function(){C(),r("FBLogger")("vulture_js","sample_rate_load_timeout").warn("Timed out attemping to fetch VultureJS sample rates")},g),r("setTimeout")(v,u)):v())}function R(e){o("VultureJSGating").isLoggingEnabled()&&(d&&c!=null?h(e):(y(e),S()))}l.default=R}),98);
__d("useWAWebGroupColors",["WALogger","WAWebThemeContext"],(function(t,n,r,o,a,i,l){var e,s="var(--wds-emerald-400)",u="var(--wds-sky-blue-300)",c="#e542a3",d="#a5b337",m="var(--wds-cobalt-400)",p="var(--wds-yellow-500)",_="var(--wds-green-500)",f="var(--wds-purple-400)",g="var(--wds-purple-500)",h="var(--wds-green-400)",y="var(--wds-orange-500)",C="var(--wds-pink-400)",b="#7d9ef1",v="var(--wds-orange-400)",S="var(--wds-teal-400)",R="#b4876e",L="var(--wds-yellow-400)",E="var(--wds-emerald-400)",k="var(--wds-sky-blue-300)",I="#e26ab6",T="#a5b337",D="var(--wds-orange-300)",x="var(--wds-cobalt-300)",$="var(--wds-yellow-400)",P="var(--wds-green-400)",N="var(--wds-purple-300)",M="var(--wds-red-300)",w="var(--wds-purple-400)",A="var(--wds-teal-300)",F="var(--wds-pink-300)",O="#d88deb",B="var(--wds-orange-400)",W="var(--wds-teal-400)",q="var(--wds-yellow-300)",U={color_light_1:{color:"xijeqtt",$$css:!0},color_light_2:{color:"xkgnp4b",$$css:!0},color_light_3:{color:"x240ipn",$$css:!0},color_light_4:{color:"xskf257",$$css:!0},color_light_5:{color:"xebwusc",$$css:!0},color_light_6:{color:"x3wc6wf",$$css:!0},color_light_7:{color:"x8s8ybf",$$css:!0},color_light_8:{color:"x162sf37",$$css:!0},color_light_9:{color:"x197m9ru",$$css:!0},color_light_10:{color:"x98wywu",$$css:!0},color_light_11:{color:"x1y1pzmv",$$css:!0},color_light_12:{color:"xkgndj",$$css:!0},color_light_13:{color:"x1454dyk",$$css:!0},color_light_14:{color:"xcwjfjl",$$css:!0},color_light_15:{color:"xgz8yji",$$css:!0},color_light_16:{color:"xyaa4h1",$$css:!0},color_light_17:{color:"x1n9d4q5",$$css:!0},background_light_1:{backgroundColor:"x6wgc6a",$$css:!0},background_light_2:{backgroundColor:"x17y5562",$$css:!0},background_light_3:{backgroundColor:"x1cu8r8a",$$css:!0},background_light_4:{backgroundColor:"xznryv8",$$css:!0},background_light_5:{backgroundColor:"x1n3fz2",$$css:!0},background_light_6:{backgroundColor:"xx4wtn9",$$css:!0},background_light_7:{backgroundColor:"x18a7xdx",$$css:!0},background_light_8:{backgroundColor:"x1vwqcvr",$$css:!0},background_light_9:{backgroundColor:"x1qcddwk",$$css:!0},background_light_10:{backgroundColor:"x1lrj34z",$$css:!0},background_light_11:{backgroundColor:"x1hvcrje",$$css:!0},background_light_12:{backgroundColor:"x1yh949v",$$css:!0},background_light_13:{backgroundColor:"x1tcvzfv",$$css:!0},background_light_14:{backgroundColor:"x1fu2t9j",$$css:!0},background_light_15:{backgroundColor:"x1fwelf4",$$css:!0},background_light_16:{backgroundColor:"xfhxl41",$$css:!0},background_light_17:{backgroundColor:"x18um00n",$$css:!0},color_dark_1:{color:"xijeqtt",$$css:!0},color_dark_2:{color:"xkgnp4b",$$css:!0},color_dark_3:{color:"x1hncw2u",$$css:!0},color_dark_4:{color:"xskf257",$$css:!0},color_dark_5:{color:"xs7ovuj",$$css:!0},color_dark_6:{color:"x1wxwh9x",$$css:!0},color_dark_7:{color:"x1n9d4q5",$$css:!0},color_dark_8:{color:"x98wywu",$$css:!0},color_dark_9:{color:"x18hhy9w",$$css:!0},color_dark_10:{color:"xbpqssb",$$css:!0},color_dark_11:{color:"x162sf37",$$css:!0},color_dark_12:{color:"x7y2iuh",$$css:!0},color_dark_13:{color:"xah1503",$$css:!0},color_dark_14:{color:"xyee0rz",$$css:!0},color_dark_15:{color:"xcwjfjl",$$css:!0},color_dark_16:{color:"xgz8yji",$$css:!0},color_dark_17:{color:"xly5uq6",$$css:!0},background_dark_1:{backgroundColor:"x6wgc6a",$$css:!0},background_dark_2:{backgroundColor:"x17y5562",$$css:!0},background_dark_3:{backgroundColor:"x1xd7cei",$$css:!0},background_dark_4:{backgroundColor:"xznryv8",$$css:!0},background_dark_5:{backgroundColor:"x3yiujs",$$css:!0},background_dark_6:{backgroundColor:"x1sim4je",$$css:!0},background_dark_7:{backgroundColor:"x18um00n",$$css:!0},background_dark_8:{backgroundColor:"x1lrj34z",$$css:!0},background_dark_9:{backgroundColor:"x1g15lxm",$$css:!0},background_dark_10:{backgroundColor:"x1jb1lhd",$$css:!0},background_dark_11:{backgroundColor:"x1vwqcvr",$$css:!0},background_dark_12:{backgroundColor:"xxln43k",$$css:!0},background_dark_13:{backgroundColor:"xcpx4u6",$$css:!0},background_dark_14:{backgroundColor:"x1vnpq5e",$$css:!0},background_dark_15:{backgroundColor:"x1fu2t9j",$$css:!0},background_dark_16:{backgroundColor:"x1fwelf4",$$css:!0},background_dark_17:{backgroundColor:"xd7yu05",$$css:!0}};function V(t,n,r){var a=U[n+"_"+r+"_"+t];return a==null&&(o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(['Group color id "','" does not have a corresponding style'])),t),a=U[n+"_"+r+"_1"]),a}function H(e,t){var n=o("WAWebThemeContext").useTheme(),r=n.theme;return V(e,t,r)}function G(e){var t=o("WAWebThemeContext").useTheme(),n=t.theme;return n==="light"?z(e):j(e)}function z(e){switch(e){case 1:return[.024,.812,.612,1];case 2:return[.325,.741,.922,1];case 3:return[.898,.259,.639,1];case 4:return[.647,.702,.216,1];case 5:return[0,.482,.988,1];case 6:return[.773,.529,.188,1];case 7:return[.114,.667,.38,1];case 8:return[.498,.4,1,1];case 9:return[.369,.278,.871,1];case 10:return[.145,.827,.4,1];case 11:return[.769,.325,.176,1];case 12:return[1,.18,.455,1];case 13:return[.49,.62,.945,1];case 14:return[.98,.396,.2,1];case 15:return[.008,.651,.596,1];case 16:return[.706,.529,.431,1];case 17:return[1,.725,.22,1];default:return[.40000000596,.466666668653,.505882382393,1]}}function j(e){switch(e){case 1:return[.024,.812,.612,1];case 2:return[.325,.741,.922,1];case 3:return[.886,.416,.714,1];case 4:return[.647,.702,.216,1];case 5:return[.988,.592,.459,1];case 6:return[.325,.651,.992,1];case 7:return[1,.725,.22,1];case 8:return[.145,.827,.4,1];case 9:return[.655,.569,1,1];case 10:return[.984,.314,.38,1];case 11:return[.498,.4,1,1];case 12:return[.259,.78,.722,1];case 13:return[1,.447,.631,1];case 14:return[.847,.553,.922,1];case 15:return[.98,.396,.2,1];case 16:return[.008,.651,.596,1];case 17:return[1,.824,.475,1];default:return[.525490224361,.588235318661,.627451002598,1]}}l.useGroupsColorStyle=H,l.useGroupsColorRGBValue=G}),98);
__d("WAWebSpamConstants",["WAWebMsgType"],(function(t,n,r,o,a,i,l){var e,s=Object.freeze({Block:"block_dialog",OverflowMenuBlock:"overflow_menu_block",OverflowMenuReport:"overflow_menu_report",MediaViewer:"media_viewer",MessageMenu:"message_menu",CommunityHome:"community_home",AccountInfoReport:"account_info_report",AccountInfoReportAsGuestUser:"account_info_report_as_guest_user",GroupInfoReport:"group_info_report",GroupSpamBannerReport:"group_spam_banner_report",OneToOneChatSpamBannerReport:"1_1_spam_banner_report",OneToOneOldSpamBannerBlock:"1_1_old_spam_banner_block",BizSpamBannerBlock:"biz_spam_banner_block",ChatListBlock:"chat_list_block",ChatListNoInsubBlock:"chat_list_noinsub_block",NotificationBlock:"notification_block",StatusPostReport:"status_post_report",NewsletterInfoReport:"newsletter_info_report",ChatFmxCardReportAsGuestUser:"chat_fmx_card_report_as_guest_user",ChatFmxCardSafetyToolsReport:"chat_fmx_card_safety_tools_report",ChatFmxCardSafetyToolsReportSuspicious:"chat_fmx_card_safety_tools_report_suspicious",GroupFmxCardLeave:"group_fmx_card_leave",GroupFmxCardLeaveNonSuspicious:"group_fmx_card_leave_non_suspicious",GroupInfoLeaveReportUpsell:"group_info_leave_report_upsell",GroupChatlistLeaveReportUpsell:"group_chatlist_leave_report_upsell",GroupOverflowMenuLeaveReportUpsell:"group_overflow_menu_leave_report_upsell",GroupSafetyCheckModalUpsell:"group_safety_check_bottom_sheet",CommentActions:"comment_actions_bottom_sheet",NewsletterQuestionResponseReport:"newsletter_question_response_report",GalaxyFlowsContextMenuReport:"extension_menu_report"}),u=new Set([(e=o("WAWebMsgType")).MSG_TYPE.CHAT,e.MSG_TYPE.AUDIO,e.MSG_TYPE.IMAGE,e.MSG_TYPE.PTT,e.MSG_TYPE.PTV,e.MSG_TYPE.VIDEO,e.MSG_TYPE.VCARD,e.MSG_TYPE.LIST,e.MSG_TYPE.LIST_RESPONSE,e.MSG_TYPE.BUTTONS_RESPONSE,e.MSG_TYPE.NATIVE_FLOW,e.MSG_TYPE.DOCUMENT,e.MSG_TYPE.STICKER,e.MSG_TYPE.LOCATION,e.MSG_TYPE.POLL_CREATION,e.MSG_TYPE.POLL_RESULT_SNAPSHOT,e.MSG_TYPE.STATUS,e.MSG_TYPE.EVENT_CREATION,e.MSG_TYPE.STICKER_PACK,e.MSG_TYPE.NEWSLETTER_QUESTION_RESPONSE]),c=new Set([].concat(Array.from(u),[e.MSG_TYPE.UNKNOWN,e.MSG_TYPE.REVOKED,e.MSG_TYPE.CIPHERTEXT,e.MSG_TYPE.INTERACTIVE]));l.SpamFlow=s,l.SUPPORTED_MESSAGE_TYPES_FOR_MESSAGE_LEVEL_REPORTING=u,l.SPAM_REPORT_SUPPORTED_MESSAGE_TYPES=c}),98);
__d("WAWebSpamUtils",["WAWebMsgType","WAWebSpamConstants"],(function(t,n,r,o,a,i,l){function e(e){return o("WAWebSpamConstants").SUPPORTED_MESSAGE_TYPES_FOR_MESSAGE_LEVEL_REPORTING.has(e)}function s(e){return o("WAWebSpamConstants").SPAM_REPORT_SUPPORTED_MESSAGE_TYPES.has(e)}function u(e){switch(e){case"album":return 0;case"audio":return 1;case"automated_greeting_message":return 2;case"biz_content_placeholder":return 3;case"biz-cover-photo":return 4;case"broadcast_notification":return 5;case"buttons_response":return 6;case"call_log":return 7;case"chat":return 8;case"ciphertext":return 9;case"comment":return 10;case"debug":return 11;case"debug_placeholder":return 12;case"document":return 13;case"e2e_notification":return 14;case"event_creation":return 15;case"event_edit_encrypted":return 16;case"event_response":return 17;case"gp2":return 18;case"groups_v4_invite":return 19;case"guest_upsell_system_msg":return 20;case"history_bundle":return 21;case"hsm":return 22;case"image":return 23;case"interactive":return 24;case"interactive_response":return 25;case"keep_in_chat":return 26;case"list":return 27;case"list_response":return 28;case"location":return 29;case"multi_vcard":return 30;case"native_flow":return 31;case"newsletter_admin_invite":return 32;case"newsletter_notification":return 33;case"newsletter_question_response":return 34;case"notification":return 35;case"notification_template":return 36;case"order":return 37;case"oversized":return 38;case"payment":return 39;case"pin_message":return 40;case"pinned_message":return 41;case"poll_creation":return 42;case"poll_result_snapshot":return 43;case"poll_update":return 44;case"product":return 45;case"protocol":return 46;case"ptt":return 47;case"ptv":return 48;case"reaction":return 49;case"reaction_enc":return 50;case"request_phone_number":return 51;case"revoked":return 52;case"rich_response":return 53;case"status":return 54;case"status_notification":return 55;case"sticker":return 56;case"sticker-pack":return 57;case"template_button_reply":return 58;case"unknown":return 59;case"vcard":return 60;case"video":return 61;case"newsletter_follower_invite":return 62;case o("WAWebMsgType").MSG_TYPE.MESSAGE_HISTORY_BUNDLE:return 63;case"message_history_notice":return 64;case o("WAWebMsgType").MSG_TYPE.QUARANTINED:return 65;case o("WAWebMsgType").MSG_TYPE.MESSAGE_EDIT_ENCRYPTED:return 66;case o("WAWebMsgType").MSG_TYPE.LOADING_MEDIA:return 67}}l.isMsgTypeSupportedForMsgLevelReporting=e,l.isSpamSupportedForMessageType=s,l.msgTypeToReportLocalMessageType=u}),98);
__d("WAWebUpdaterDownloadStateType",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum").Mirrored(["UPDATE_DOWNLOADED","UPDATE_NOT_AVAILABLE","ERROR"]);i.DownloadState=e}),66);
__d("WAWebUpdaterVersion",["WACustomError","WAWebBuildConstants"],(function(t,n,r,o,a,i,l){var e=(function(e){function t(){return e.apply(this,arguments)||this}return babelHelpers.inheritsLoose(t,e),t})(o("WACustomError").customError("InvalidVersion")),s=(function(){function t(t){var n=t.split(".");if(n.length!==3)throw new e("Version format does not contain 3 numbers.");if(this.primary=Number.parseInt(n[0],10),this.secondary=Number.parseInt(n[1],10),this.tertiary=Number.parseInt(n[2],10),Number.isNaN(this.primary)||Number.isNaN(this.secondary)||Number.isNaN(this.tertiary))throw new e("Version contains a non-parseable string.")}var n=t.prototype;return n.lt=function(n){var e=n;return typeof e=="string"&&(e=new t(e)),this.primary<e.primary||this.primary===e.primary&&this.secondary<e.secondary||this.primary===e.primary&&this.secondary===e.secondary&&this.tertiary<e.tertiary},n.equals=function(n){var e=n;return e==null||e===""?!1:(typeof e=="string"&&(e=new t(e)),this.primary===e.primary&&this.secondary===e.secondary&&this.tertiary===e.tertiary)},n.toString=function(){return this.primary+"."+this.secondary+"."+this.tertiary},t})();function u(e){return e.replace(/\.[di]$/,"")}var c=u(o("WAWebBuildConstants").VERSION_STR);l.Version=s,l.sanitizeVersionStr=u,l.SANITIZED_VERSION_STR=c}),98);
__d("WAWebSwUpdater",["Promise","WALogger","WAWebBuildConstants","WAWebUpdaterDownloadStateType","WAWebUpdaterVersion"],(function(t,n,r,o,a,i,l){var e,s,u,c,d,m;function p(){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[sw] update starts. Current app version: ",""])),String(new(o("WAWebUpdaterVersion")).Version(o("WAWebBuildConstants").VERSION_BASE)));var t=navigator.serviceWorker;return t?t.ready.then(function(e){return new(m||(m=n("Promise")))(function(n){var r;function a(e){l(),o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Unable to update service worker to version. Error: ",""])),String(e)).sendLogs("[sw] sw-update-failed: "+String(e),{sampling:.1})}function i(){o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[sw] updated"]))),l(),n(o("WAWebUpdaterDownloadStateType").DownloadState.UPDATE_DOWNLOADED)}function l(){t.removeEventListener("error",a),t.removeEventListener("controllerchange",i)}t.addEventListener("error",a),t.addEventListener("controllerchange",i),(r=e.active)!=null&&(r=r.scriptURL)!=null&&r.includes("serviceworker.js")?e.unregister():e.update().then(function(){e.installing||(o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[sw] update is not available"]))),n(o("WAWebUpdaterDownloadStateType").DownloadState.UPDATE_NOT_AVAILABLE))}).catch(function(e){a(e),n(o("WAWebUpdaterDownloadStateType").DownloadState.ERROR)})})}).catch(function(e){return o("WALogger").ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Unable to update serviceworker, error: ",""])),e).sendLogs("sw-update-failed"),o("WAWebUpdaterDownloadStateType").DownloadState.ERROR}):(m||(m=n("Promise"))).resolve(o("WAWebUpdaterDownloadStateType").DownloadState.ERROR)}l.updateSw=p}),98);
__d("WAWebPaymentNotificationHandler",["WALogger","WANullthrows","WAWap","WAWebCommonMsgSubtypeTypes","WAWebDBMsgUtils","WAWebDBProcessMessage","WAWebHandleSingleMsg","WAWebLidMigrationUtils","WAWebMsgCollection","WAWebMsgKey","WAWebMsgModel","WAWebMsgType","WAWebPaymentNotificationParser","WAWebPaymentStatusUtils","WAWebSchemaOrphanPaymentNotification","WAWebStateUtils","WAWebUserPrefsMeUser","WAWebViewMode.flow","asyncToGeneratorRuntime"],(function(t,n,r,o,a,i,l){var e,s,u;function c(e){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){var n=o("WAWebPaymentNotificationParser").paymentNotificationParser.parse(t);if(n.error!=null)throw o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["handlePaymentNotification: failed: ",""])),n.error),n.error;var r=n.success,a=r.transaction,i=r.invite;return i!=null?yield _(i):a!=null&&(yield m(a)),E(n.success)}),d.apply(this,arguments)}function m(e){return p.apply(this,arguments)}function p(){return p=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=r("WANullthrows")(e.msgKey),n=o("WAWebLidMigrationUtils").getAlternateMsgKey(t),a=k(t,n),i=a?o("WAWebStateUtils").unproxy(a):yield I(t,n);if(!i){o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["handlePaymentTransactionNotification: no msg found for id: ",""])),t);var l=babelHelpers.extends({},e,{msgKey:t.toString()});yield o("WAWebSchemaOrphanPaymentNotification").getTable().createOrReplace(l);return}yield g(i,e)}),p.apply(this,arguments)}function _(e){return f.apply(this,arguments)}function f(){return f=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){if(e.type==="account-set-up"){var t=yield R(e.from,e.timestamp);yield o("WAWebHandleSingleMsg").handleSingleMsg({chatId:t.from,newMsg:t,handleSingleMsgOrigin:"handlePaymentInviteNotification"})}}),f.apply(this,arguments)}function g(e,t){return h.apply(this,arguments)}function h(){return h=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=[];y(e,t),n.push(e.id.toString());var r=[e instanceof o("WAWebMsgModel").Msg?e.toJSON():e];if(e.paymentRequestMessageKey!=null){var a=e.paymentRequestMessageKey,i=o("WAWebLidMigrationUtils").getAlternateMsgKey(a),l=k(a,i),s=l?o("WAWebStateUtils").unproxy(l):yield I(a,i);s&&(s.paymentStatus=e.paymentStatus,s.paymentTxnStatus=o("WAWebPaymentStatusUtils").determinePaymentRequestFulfilledStatus(e.paymentTxnStatus),r.push(s instanceof o("WAWebMsgModel").Msg?s.toJSON():s))}o("WAWebSchemaOrphanPaymentNotification").getTable().bulkRemove(n).catch(function(e){o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["getOrphanPaymentNotificationTable.bulkRemove: failed for: ",", error: ",""])),n,e)}),yield o("WAWebDBProcessMessage").updateExistingMessages(r)}),h.apply(this,arguments)}function y(e,t){t&&(t.status!=null&&(e.paymentStatus=o("WAWebPaymentStatusUtils").getPaymentWebStatus(t.status,t.type),e.paymentTxnStatus=o("WAWebPaymentStatusUtils").getPaymentTxnWebStatus(t.status)),e.paymentCurrency=t.currency||"",e.paymentAmount1000=r("WANullthrows")(t.amount1000),e.paymentMessageReceiverJid=t.receiver,e.paymentTransactionTimestamp=r("WANullthrows")(t.ts))}function C(e){return b.apply(this,arguments)}function b(){return b=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e){var t=e.map(function(e){return e.id.toString()}),n=yield o("WAWebSchemaOrphanPaymentNotification").getTable().bulkGet(t),a=new Map;e.forEach(function(e){a.set(e.id.toString(),e)}),n.forEach(function(e){if(e){var t=a.get(e.msgKey);if(!t)return;g(t,{receiver:e.receiver,currency:e.currency,amount1000:e.amount1000,type:e.type,status:e.status,ts:e.ts,msgKey:r("WAWebMsgKey").fromString(e.msgKey)})}})}),b.apply(this,arguments)}function v(){return S.apply(this,arguments)}function S(){return S=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield o("WAWebSchemaOrphanPaymentNotification").getTable().all(),t=new Map,n=[];if(e.forEach(function(e){var a=e.msgKey,i=o("WAWebMsgCollection").MsgCollection.get(a);if(i==null){var l=o("WAWebLidMigrationUtils").getAlternateMsgKey(r("WAWebMsgKey").fromString(a));l!=null&&(a=l.toString(),i=o("WAWebMsgCollection").MsgCollection.get(l))}i?g(i,{receiver:e.receiver,currency:e.currency,amount1000:e.amount1000,type:e.type,status:e.status,ts:e.ts,msgKey:r("WAWebMsgKey").fromString(a)}):(t.set(a,e),n.push(a))}),n.length>0){var a=yield o("WAWebDBMsgUtils").getMsgsByMsgKey(n,function(e){var n=t.get(e.id.toString());n&&(e.paymentTxnStatus=o("WAWebPaymentStatusUtils").getPaymentTxnWebStatus(n.status),e.paymentCurrency=n.currency||"",e.paymentAmount1000=r("WANullthrows")(n.amount1000),e.paymentMessageReceiverJid=n.receiver,e.paymentTransactionTimestamp=r("WANullthrows")(n.ts))});return o("WAWebDBProcessMessage").updateExistingMessages(a)}}),S.apply(this,arguments)}function R(e,t){return L.apply(this,arguments)}function L(){return L=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){return{id:new(r("WAWebMsgKey"))({remote:e,fromMe:!1,id:yield r("WAWebMsgKey").newId()}),type:o("WAWebMsgType").MSG_TYPE.NOTIFICATION_TEMPLATE,kind:o("WAWebMsgType").MsgKind.NotificationTemplate,viewMode:o("WAWebViewMode.flow").ViewModeType.VISIBLE,subtype:o("WAWebCommonMsgSubtypeTypes").MsgSubtype.PaymentInviteAccountSetUp,from:e,to:o("WAWebUserPrefsMeUser").getMePnUserOrThrow(),recipients:[],t:t,templateParams:[e]}}),L.apply(this,arguments)}function E(e){var t=e.stanzaId,n=e.from;return o("WAWap").wap("ack",{class:"notification",type:"pay",id:o("WAWap").CUSTOM_STRING(t),to:n})}function k(e,t){var n;return(n=o("WAWebMsgCollection").MsgCollection.get(e))!=null?n:t!=null?o("WAWebMsgCollection").MsgCollection.get(t):null}function I(e,t){return T.apply(this,arguments)}function T(){return T=n("asyncToGeneratorRuntime").asyncToGenerator(function*(e,t){var n=yield o("WAWebDBMsgUtils").getMsgByMsgKey(e);return n==null&&t!=null&&(n=yield o("WAWebDBMsgUtils").getMsgByMsgKey(t)),n}),T.apply(this,arguments)}l.handlePaymentNotification=c,l.processOrphanPaymentNotifications=C,l.processAllOrphanPaymentNotifications=v,l.getMessageFromCollection=k,l.getMessageFromDb=I}),98);
__d("WAWebPlusIcon.react",["WAWebSvgComponentBase","react","stylex"],(function(t,n,r,o,a,i,l){var e=["iconXstyle","height","width","name","viewBox"],s,u,c=s||(s=r("react")),d="plus";function m(t){var n=t.iconXstyle,a=t.height,i=t.width,l=t.name,s=t.viewBox,m=babelHelpers.objectWithoutPropertiesLoose(t,e),p;if(s){var _=s.x,f=_===void 0?0:_,g=s.y,h=g===void 0?0:g,y=s.width,C=y===void 0?0:y,b=s.height,v=b===void 0?0:b;p=[f,h,C,v].join(" ")}var S=24,R=24;return(a!=null||i!=null)&&(S=a,R=i),c.jsx(o("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers.extends({name:l!=null?l:d},m,{children:c.jsxs("svg",{viewBox:p!=null?p:"0 0 24 24",height:S,width:R,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(n),children:[c.jsx("title",{children:l!=null?l:d}),c.jsx("path",{fill:"currentColor",d:"M19,13h-6v6h-2v-6H5v-2h6V5h2v6h6V13z"})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.PlusIcon=m}),98);
__d("WAWebRoundShape.react",["react","stylex"],(function(t,n,r,o,a,i,l){var e,s,u=e||(e=r("react")),c={iconRefreshed:{display:"x78zum5",alignItems:"x6s0dn4",justifyContent:"xl56j7k",width:"x100vrsf",height:"x1vqgdyp",color:"x1pse0pq",background:"xe5due1",borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",$$css:!0},disabled:{backgroundColor:"x1ailiqk",$$css:!0},transparent:{color:"xhslqc4",backgroundColor:"x1jbjsai",$$css:!0},compact:{width:"x100vrsf",height:"x1vqgdyp",$$css:!0},groupModal:{width:"x15jighw",height:"x112a4uq",$$css:!0}};function d(e){var t=e.children,n=e.disabled,o=e.theme,a=e.transparent,i=e.xstyle;return u.jsx("div",babelHelpers.extends({},(s||(s=r("stylex"))).props(c.iconRefreshed,a===!0&&c.transparent||o==="compact"&&c.compact||o==="group-modal"&&c.groupModal,n===!0&&c.disabled,i),{children:t}))}d.displayName=d.name+" [from "+i.id+"]",l.default=d}),98);
__d("WAWebStarIcon.react",["WAWebSvgComponentBase","react","stylex"],(function(t,n,r,o,a,i,l){var e=["iconXstyle","height","width","name","viewBox"],s,u,c=s||(s=r("react")),d="star";function m(t){var n=t.iconXstyle,a=t.height,i=t.width,l=t.name,s=t.viewBox,m=babelHelpers.objectWithoutPropertiesLoose(t,e),p;if(s){var _=s.x,f=_===void 0?0:_,g=s.y,h=g===void 0?0:g,y=s.width,C=y===void 0?0:y,b=s.height,v=b===void 0?0:b;p=[f,h,C,v].join(" ")}var S=15,R=16;return(a!=null||i!=null)&&(S=a,R=i),c.jsx(o("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers.extends({name:l!=null?l:d},m,{children:c.jsxs("svg",{viewBox:p!=null?p:"0 0 16 15",height:S,width:R,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(n),version:"1.1",x:"0px",y:"0px",enableBackground:"new 0 0 16 15",children:[c.jsx("title",{children:l!=null?l:d}),c.jsx("path",{fill:"currentColor",d:"M8.3,10.2l-2.5,1.7c-0.3,0.2-0.8-0.1-0.7-0.5L6,8.6c0.1-0.2,0-0.4-0.2-0.5L3.5,6.3C3.1,6,3.3,5.5,3.7,5.5 l3-0.1c0.2,0,0.3-0.1,0.4-0.3l1-2.8c0.1-0.4,0.7-0.4,0.8,0l1,2.8c0.1,0.2,0.2,0.3,0.4,0.3l3,0.1c0.4,0,0.6,0.5,0.3,0.8l-2.4,1.8 C11.1,8.2,11,8.4,11,8.6l0.9,2.9c0.1,0.4-0.3,0.7-0.7,0.5l-2.5-1.7C8.6,10.1,8.4,10.1,8.3,10.2z"})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.StarIcon=m}),98);
__d("WAWebVoipUiDocPipLoadable",["JSResourceForInteraction","WAWebLazyLoadedRetriable","WAWebLoadable","asyncToGeneratorRuntime","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("WAWebLazyLoadedRetriable")(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield r("JSResourceForInteraction")("WAWebVoipUiDocPip.react").__setRef("WAWebVoipUiDocPipLoadable").load();return e.WAWebVoipUiDocPip}),"WAWebVoipUiDocPip"),c=r("WAWebLoadable")({loader:u,loading:function(t){return s.jsx(s.Fragment,{})}});l.WAWebVoipUiDocPipLoadable=c}),98);
__d("WAWebVoipUiPopoutWindowContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({isContextInPopoutWindow:!1,popoverPortalEl:null,documentEl:document,isDocPip:!1});l.default=u}),98);
__d("WAWebVoipUiPopoutWindowLoadable",["JSResourceForInteraction","WAWebLazyLoadedRetriable","WAWebLoadable","asyncToGeneratorRuntime","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("WAWebLazyLoadedRetriable")(n("asyncToGeneratorRuntime").asyncToGenerator(function*(){var e=yield r("JSResourceForInteraction")("WAWebVoipUiPopoutWindow.react").__setRef("WAWebVoipUiPopoutWindowLoadable").load();return e.WAWebVoipUiPopoutWindow}),"WAWebVoipUiPopoutWindow"),c=r("WAWebLoadable")({loader:u,loading:function(t){return s.jsx(s.Fragment,{})}});l.WAWebVoipUiPopoutWindowLoadable=c}),98);
__d("WAWebVoipUiPopoutWindowPortalContainer.react",["WALogger","WAWebCallCollection","WAWebTypedEventEmitter","WAWebUA","WAWebVoipStackInterface","WAWebVoipUiPopoutWindowContext","WAWebVoipUiPopoutWindowLoadable","WAWebVoipWaCallEnums","asyncToGeneratorRuntime","react","useWAWebListener","useWAWebTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g=f||(f=o("react")),h=_||(_=r("react")),y=g.useMemo,C=g.useState,b="wa-web-voip-popover-portal",v=3e3,S=new(r("WAWebTypedEventEmitter")),R=!1,L=null,E=new Map,k=new WeakMap;function I(){return R}function T(){if(L==null||!R)return!1;try{return!(L.document.hidden||L.innerWidth<=0||L.innerHeight<=0)}catch(t){return o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["voip: Not able to access popout window document: ",""])),String(t)),!1}}function D(){return L}function x(e,t,n){n===void 0&&(n=!1),t!=null?(E.set(e,t),k.set(t,{isFromPopout:n})):E.delete(e)}function $(e){var t,n;return e==null?!1:(t=(n=k.get(e))==null?void 0:n.isFromPopout)!=null?t:!1}function P(){var e=[];for(var t of E){var n=t[0],r=t[1];$(r)&&e.push({type:n,stream:r})}return e}function N(){var e=C(null),t=e[0],a=e[1],i=C(null),l=i[0],_=i[1],f=C(null),g=f[0],k=f[1],I=o("useWAWebTimeout").useManualTimeout(function(){R=!1,L=null,E.clear(),t==null||t.close(),S.trigger("setPopoutWindowProps",{callLogMsg:null,popoutWindow:null})}),T=I[0];o("useWAWebListener").useListener(S,"setPopoutWindowProps",function(e){var t=e.callLogMsg,n=e.popoutWindow;k(t),a(n),R=t!=null,L=t!=null?n:null,t==null&&E.clear()}),o("useWAWebListener").useListener(S,"closePopoutWindow",function(e){var t=e.callEnded,a=e.surveyInteracted,i=P();if(o("WAWebUA").UA.isFirefox&&!t&&i.length>0){var l=r("WAWebCallCollection").activeCall,_=(l==null?void 0:l.selfVideoState)===o("WAWebVoipWaCallEnums").VideoState.Enabled;if(_){o("WALogger").DEV(s||(s=babelHelpers.taggedTemplateLiteralLoose(["voip: Firefox popout close: setting up focus-based stream swap"])));var f=(function(){var e=n("asyncToGeneratorRuntime").asyncToGenerator(function*(){o("WALogger").DEV(u||(u=babelHelpers.taggedTemplateLiteralLoose(["voip: Firefox popout close: performing stream swap"])));try{var e=yield o("WAWebVoipStackInterface").getVoipStackInterface();e!=null&&e.type==="web"&&(yield e.setCallVideoMute(!0),yield e.setCallVideoMute(!1),o("WALogger").DEV(c||(c=babelHelpers.taggedTemplateLiteralLoose(["voip: Firefox popout close: stream swap completed"]))))}catch(e){o("WALogger").DEV(d||(d=babelHelpers.taggedTemplateLiteralLoose(["voip: Firefox popout close: stream swap failed: ",""])),String(e))}});return function(){return e.apply(this,arguments)}})();if(document.hasFocus())o("WALogger").DEV(m||(m=babelHelpers.taggedTemplateLiteralLoose(["voip: Firefox popout close: main window already focused"]))),f();else{var g=function(){window.removeEventListener("focus",g),o("WALogger").DEV(p||(p=babelHelpers.taggedTemplateLiteralLoose(["voip: Firefox popout close: main window focused, re-acquiring stream"]))),f()};window.addEventListener("focus",g,{once:!0}),window.focus()}}}var h=t&&!a;T(h?v:0)});var D=y(function(){return{isContextInPopoutWindow:!0,popoverPortalEl:l==null?void 0:l.getElementById(b),documentEl:l,isDocPip:!1}},[l]);return g?h.jsx(r("WAWebVoipUiPopoutWindowContext").Provider,{value:D,children:h.jsx(o("WAWebVoipUiPopoutWindowLoadable").WAWebVoipUiPopoutWindowLoadable,{callLogMsg:g,popoutWindow:t,onWindowReady:function(t){return _(t.document)}})}):null}N.displayName=N.name+" [from "+i.id+"]",l.VOIP_POPOUT_POPOVER_PORTAL_ID=b,l.WAWebVoipUiPopoutWindowEventEmitter=S,l.getIsCallActiveInPopoutWindow=I,l.getIsPopoutWindowActiveAndVisible=T,l.getPopoutWindow=D,l.setMediaStream=x,l.wasStreamAcquiredFromPopout=$,l.getStreamsFromPopout=P,l.WAWebVoipUiPopoutWindowPortalContainer=N}),98);
__d("WAWebVoipUiDocPipPortalContainer.react",["WAWebTypedEventEmitter","WAWebVoipUiDocPipLoadable","WAWebVoipUiPopoutWindowPortalContainer.react","react","useWAWebListener","useWAWebTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=e||(e=r("react")),d=u.useEffect,m=u.useState,p="wa-web-voip-docpip-popover-portal",_=3e3,f=new(r("WAWebTypedEventEmitter"));function g(e){try{"mediaSession"in navigator&&navigator.mediaSession.setActionHandler("enterpictureinpicture",e)}catch(e){}}function h(){var e=m(null),t=e[0],n=e[1],r=m(!1),a=r[0],i=r[1],l=m(null),s=l[0],u=l[1],p=o("useWAWebTimeout").useManualTimeout(function(){i(!1),n(null),s&&s.close()}),h=p[0];return o("useWAWebListener").useListener(f,"setDocPipProps",function(e){var t=e.callLogMsg;n(t)}),o("useWAWebListener").useListener(f,"closeDocPip",function(e){var t=e.surveyInteracted;h(t!==!0?_:0)}),o("useWAWebListener").useListener(f,"reopenDocPip",function(){t&&i(!0)}),d(function(){if(!t){g(null);return}return g(function(){o("WAWebVoipUiPopoutWindowPortalContainer.react").getIsPopoutWindowActiveAndVisible()||f.trigger("reopenDocPip")}),function(){g(null)}},[t]),d(function(){if(s){var e=function(){i(!1),u(null)};return s.addEventListener("pagehide",e),function(){s.removeEventListener("pagehide",e)}}},[s]),!t||!a?null:c.jsx(o("WAWebVoipUiDocPipLoadable").WAWebVoipUiDocPipLoadable,{callLogMsg:t,onWindowReady:u})}h.displayName=h.name+" [from "+i.id+"]",l.VOIP_DOCPIP_POPOVER_PORTAL_ID=p,l.WAWebVoipUiDocPipEventEmitter=f,l.WAWebVoipUiDocPipPortalContainer=h}),98);
__d("WAWebVoipWindowConstants",[],(function(t,n,r,o,a,i){"use strict";var e=400,l=400;i.MIN_WINDOW_WIDTH=e,i.MIN_WINDOW_HEIGHT=l}),66);
__d("WAWebWarningOutlineIcon.react",["WAWebSvgComponentBase","react","stylex"],(function(t,n,r,o,a,i,l){var e=["iconXstyle","height","width","name","viewBox"],s,u,c=s||(s=r("react")),d="warning-outline";function m(t){var n=t.iconXstyle,a=t.height,i=t.width,l=t.name,s=t.viewBox,m=babelHelpers.objectWithoutPropertiesLoose(t,e),p;if(s){var _=s.x,f=_===void 0?0:_,g=s.y,h=g===void 0?0:g,y=s.width,C=y===void 0?0:y,b=s.height,v=b===void 0?0:b;p=[f,h,C,v].join(" ")}var S=24,R=24;return(a!=null||i!=null)&&(S=a,R=i),c.jsx(o("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers.extends({name:l!=null?l:d},m,{children:c.jsxs("svg",{viewBox:p!=null?p:"0 0 24 24",height:S,width:R,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(n),fill:"none",children:[c.jsx("title",{children:l!=null?l:d}),c.jsx("path",{d:"M1.15571 22C0.941353 22 0.746487 21.9465 0.571107 21.8396C0.395728 21.7326 0.259322 21.5917 0.161889 21.4167C0.0644557 21.2417 0.0108675 21.0521 0.00112423 20.8479C-0.00861908 20.6438 0.0449691 20.4444 0.161889 20.25L10.977 1.58333C11.0939 1.38889 11.2449 1.24306 11.43 1.14583C11.6151 1.04861 11.8051 1 12 1C12.1949 1 12.3849 1.04861 12.57 1.14583C12.7551 1.24306 12.9061 1.38889 13.023 1.58333L23.8381 20.25C23.955 20.4444 24.0086 20.6438 23.9989 20.8479C23.9891 21.0521 23.9355 21.2417 23.8381 21.4167C23.7407 21.5917 23.6043 21.7326 23.4289 21.8396C23.2535 21.9465 23.0586 22 22.8443 22H1.15571ZM3.17257 19.6667H20.8274L12 4.5L3.17257 19.6667ZM12 18.5C12.3313 18.5 12.609 18.3882 12.8331 18.1646C13.0571 17.941 13.1692 17.6639 13.1692 17.3333C13.1692 17.0028 13.0571 16.7257 12.8331 16.5021C12.609 16.2785 12.3313 16.1667 12 16.1667C11.6687 16.1667 11.391 16.2785 11.1669 16.5021C10.9429 16.7257 10.8308 17.0028 10.8308 17.3333C10.8308 17.6639 10.9429 17.941 11.1669 18.1646C11.391 18.3882 11.6687 18.5 12 18.5ZM12 15C12.3313 15 12.609 14.8882 12.8331 14.6646C13.0571 14.441 13.1692 14.1639 13.1692 13.8333V10.3333C13.1692 10.0028 13.0571 9.72569 12.8331 9.50208C12.609 9.27847 12.3313 9.16667 12 9.16667C11.6687 9.16667 11.391 9.27847 11.1669 9.50208C10.9429 9.72569 10.8308 10.0028 10.8308 10.3333V13.8333C10.8308 14.1639 10.9429 14.441 11.1669 14.6646C11.391 14.8882 11.6687 15 12 15Z",fill:"currentColor"})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.WarningOutlineIcon=m}),98);
__d("WAWebXAltSmallIcon.react",["WAWebSvgComponentBase","react","stylex"],(function(t,n,r,o,a,i,l){var e=["iconXstyle","height","width","name","viewBox"],s,u,c=s||(s=r("react")),d="x-alt-small";function m(t){var n=t.iconXstyle,a=t.height,i=t.width,l=t.name,s=t.viewBox,m=babelHelpers.objectWithoutPropertiesLoose(t,e),p;if(s){var _=s.x,f=_===void 0?0:_,g=s.y,h=g===void 0?0:g,y=s.width,C=y===void 0?0:y,b=s.height,v=b===void 0?0:b;p=[f,h,C,v].join(" ")}var S=16,R=16;return(a!=null||i!=null)&&(S=a,R=i),c.jsx(o("WAWebSvgComponentBase").BaseSvgSpan,babelHelpers.extends({name:l!=null?l:d},m,{children:c.jsxs("svg",{viewBox:p!=null?p:"0 0 16 16",height:S,width:R,preserveAspectRatio:"xMidYMid meet",className:(u||(u=r("stylex")))(n),version:"1.1",x:"0px",y:"0px",enableBackground:"new 0 0 16 16",children:[c.jsx("title",{children:l!=null?l:d}),c.jsx("path",{fill:"currentColor",enableBackground:"new    ",d:"M12.174,4.661l-0.836-0.835L8,7.165L4.661,3.826L3.826,4.661 L7.165,8l-3.339,3.339l0.835,0.835L8,8.835l3.338,3.339l0.836-0.835L8.835,8L12.174,4.661z"})]})}))}m.displayName=m.name+" [from "+i.id+"]",l.XAltSmallIcon=m}),98);
__d("keyMirror",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t={};if(!(e instanceof Object&&!Array.isArray(e)))throw r("FBLogger")("comet_infra").mustfixThrow("keyMirror(...): Argument must be an object.");for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=n);return t}l.default=e}),98);
__d("useEventHandler",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useLayoutEffect,d=s.useRef;function m(e){var t=o("react-compiler-runtime").c(4),n=d(e),r,a;t[0]!==e?(r=function(){n.current=e},a=[e],t[0]=e,t[1]=r,t[2]=a):(r=t[1],a=t[2]),c(r,a);var i;return t[3]===Symbol.for("react.memo_cache_sentinel")?(i=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var o=t;n.current.apply(n,o)},t[3]=i):i=t[3],i}l.default=m}),98);
__d("useLexicalEditable",["cr:4793"],(function(t,n,r,o,a,i){a.exports=n("cr:4793")}),null);
__d("useWAWebMsgValues",["WAWebMsgCollection","useWAWebCollectionValues"],(function(t,n,r,o,a,i,l){function e(e,t,n){return o("useWAWebCollectionValues").useCollectionValues(o("WAWebMsgCollection").MsgCollection,e,t,n)}function s(e,t,n){return o("useWAWebCollectionValues").useOptionalCollectionValues(o("WAWebMsgCollection").MsgCollection,e,t,n)}l.useMsgValues=e,l.useOptionalMsgValues=s}),98);
__d("useWAWebRenderCallbacks",["WAAbortError","WAFilteredCatch","WAWebDocumentFlushed","react","useWAWebStableCallback","useWAWebUnmountSignal"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=s.useEffect,c=s.useLayoutEffect,d=s.useRef;function m(e){var t,n=d(null),a=r("useWAWebUnmountSignal")(),i=(t=r("useWAWebStableCallback"))(e.onDOMCommit),l=t(e.onMount),s=t(e.onBeforePaint),m=t(e.onAfterPaint),p=t(e.onUnmount),_=t(e.onError);u(function(){return l(),n.current=window.requestAnimationFrame(function(){n.current=null,s()}),o("WAWebDocumentFlushed").documentFlushed({signal:a}).then(function(){a.aborted||m()}).catch(o("WAFilteredCatch").filteredCatch(o("WAAbortError").AbortError,_)),function(){n.current!=null&&window.cancelAnimationFrame(n.current),p()}},[l,s,m,p,_,a]),c(function(){i()},[i])}l.default=m}),98);
__d("useWAWebToggle",["react","useWAWebStableCallback"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=s.useCallback,c=s.useState;function d(e,t){var n=r("useWAWebStableCallback")(t),o=c(e),a=o[0],i=o[1],l=u(function(){return i(function(e){var t=!e;return n(t),t})},[n]);return[a,l]}l.default=d}),98);